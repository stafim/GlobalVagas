{"file_contents":{"client/src/pages/SignupOperator.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card } from \"@/components/ui/card\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertOperatorSchema } from \"@shared/schema\";\nimport type { InsertOperator } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { HardHat, Mail, Lock, Phone, User, FileText, Briefcase, MapPin, CheckCircle2 } from \"lucide-react\";\nimport { useState } from \"react\";\n\nfunction formatCPF(value: string): string {\n  const numbers = value.replace(/\\D/g, '');\n  \n  if (numbers.length <= 3) return numbers;\n  if (numbers.length <= 6) return `${numbers.slice(0, 3)}.${numbers.slice(3)}`;\n  if (numbers.length <= 9) return `${numbers.slice(0, 3)}.${numbers.slice(3, 6)}.${numbers.slice(6)}`;\n  return `${numbers.slice(0, 3)}.${numbers.slice(3, 6)}.${numbers.slice(6, 9)}-${numbers.slice(9, 11)}`;\n}\n\nfunction removeCPFMask(value: string): string {\n  return value.replace(/\\D/g, '');\n}\n\nfunction validateCPF(cpf: string): boolean {\n  const numbers = cpf.replace(/\\D/g, '');\n  \n  if (numbers.length !== 11) return false;\n  \n  if (/^(\\d)\\1+$/.test(numbers)) return false;\n  \n  let sum = 0;\n  for (let i = 0; i < 9; i++) {\n    sum += parseInt(numbers.charAt(i)) * (10 - i);\n  }\n  let digit = 11 - (sum % 11);\n  if (digit >= 10) digit = 0;\n  if (digit !== parseInt(numbers.charAt(9))) return false;\n  \n  sum = 0;\n  for (let i = 0; i < 10; i++) {\n    sum += parseInt(numbers.charAt(i)) * (11 - i);\n  }\n  digit = 11 - (sum % 11);\n  if (digit >= 10) digit = 0;\n  if (digit !== parseInt(numbers.charAt(10))) return false;\n  \n  return true;\n}\n\nconst signupFormSchema = insertOperatorSchema.extend({\n  confirmPassword: z.string().min(6, \"A senha deve ter no mínimo 6 caracteres\"),\n  cpf: z.string()\n    .min(1, \"CPF é obrigatório\")\n    .refine((cpf) => validateCPF(cpf), {\n      message: \"CPF inválido\",\n    }),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"As senhas não coincidem\",\n  path: [\"confirmPassword\"],\n});\n\ntype SignupFormData = z.infer<typeof signupFormSchema>;\n\nexport default function SignupOperator() {\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const form = useForm<SignupFormData>({\n    resolver: zodResolver(signupFormSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      fullName: \"\",\n      cpf: \"\",\n      phone: \"\",\n      birthDate: undefined,\n      profession: \"\",\n      experienceYears: undefined,\n      certifications: undefined,\n      availability: undefined,\n      preferredLocation: undefined,\n      workType: undefined,\n      skills: undefined,\n      bio: undefined,\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: InsertOperator) => {\n      const response = await fetch(\"/api/operators/register\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao criar conta\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Conta criada com sucesso!\",\n        description: \"Redirecionando para seu dashboard...\",\n      });\n      setTimeout(() => {\n        setLocation(\"/dashboard/operador\");\n      }, 1500);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao criar conta\",\n        description: error.message || \"Tente novamente mais tarde\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = async (data: SignupFormData) => {\n    if (currentStep !== 2) {\n      return;\n    }\n    \n    const { confirmPassword, ...operatorData } = data;\n    registerMutation.mutate(operatorData);\n  };\n\n  const handleFormSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (currentStep === 2) {\n      form.handleSubmit(onSubmit)();\n    }\n  };\n\n  const validateStep = async (step: number) => {\n    let fieldsToValidate: (keyof SignupFormData)[] = [];\n    \n    if (step === 1) {\n      fieldsToValidate = [\"fullName\", \"email\", \"phone\", \"cpf\", \"password\", \"confirmPassword\"];\n    } else if (step === 2) {\n      fieldsToValidate = [\"profession\"];\n    }\n    \n    const result = await form.trigger(fieldsToValidate);\n    return result;\n  };\n\n  const handleNext = async () => {\n    const isValid = await validateStep(currentStep);\n    if (!isValid) {\n      return;\n    }\n\n    if (currentStep === 1) {\n      const cpf = form.getValues(\"cpf\");\n      if (cpf) {\n        try {\n          const response = await fetch(`/api/operators/check-cpf/${cpf}`);\n          const data = await response.json();\n          \n          if (data.exists) {\n            form.setError(\"cpf\", {\n              type: \"manual\",\n              message: \"CPF já cadastrado\"\n            });\n            return;\n          }\n        } catch (error) {\n          console.error(\"Error checking CPF:\", error);\n          toast({\n            title: \"Erro ao verificar CPF\",\n            description: \"Tente novamente mais tarde\",\n            variant: \"destructive\",\n          });\n          return;\n        }\n      }\n    }\n\n    setCurrentStep(currentStep + 1);\n  };\n\n  const handlePrevious = () => {\n    setCurrentStep(currentStep - 1);\n  };\n\n  const steps = [\n    { number: 1, title: \"Informações Pessoais\" },\n    { number: 2, title: \"Informações Profissionais\" },\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-12 px-4 bg-background\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4\">\n              <HardHat className=\"w-8 h-8 text-primary\" />\n            </div>\n            <h1 className=\"font-heading font-bold text-3xl mb-2\">\n              Cadastro de Operador\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Preencha seus dados em 2 etapas simples\n            </p>\n          </div>\n\n          <div className=\"mb-8\">\n            <div className=\"flex items-center justify-between\">\n              {steps.map((step, index) => (\n                <div key={step.number} className=\"flex items-center flex-1\">\n                  <div className=\"flex flex-col items-center flex-1\">\n                    <div\n                      className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold mb-2 transition-colors ${\n                        currentStep > step.number\n                          ? \"bg-primary text-primary-foreground\"\n                          : currentStep === step.number\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-muted text-muted-foreground\"\n                      }`}\n                    >\n                      {currentStep > step.number ? (\n                        <CheckCircle2 className=\"w-5 h-5\" />\n                      ) : (\n                        step.number\n                      )}\n                    </div>\n                    <span className=\"text-xs text-center hidden sm:block\">{step.title}</span>\n                  </div>\n                  {index < steps.length - 1 && (\n                    <div\n                      className={`h-1 flex-1 mx-2 transition-colors ${\n                        currentStep > step.number ? \"bg-primary\" : \"bg-muted\"\n                      }`}\n                    />\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <Card className=\"p-8\">\n            <Form {...form}>\n              <form \n                onSubmit={handleFormSubmit}\n                className=\"space-y-6\"\n              >\n                {currentStep === 1 && (\n                  <div className=\"space-y-4\">\n                    <h2 className=\"font-semibold text-lg mb-4\">Etapa 1: Informações Pessoais</h2>\n\n                    <FormField\n                      control={form.control}\n                      name=\"fullName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nome Completo</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                              <Input\n                                placeholder=\"Seu nome completo\"\n                                className=\"pl-10\"\n                                data-testid=\"input-full-name\"\n                                {...field}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>E-mail</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                              <Input\n                                type=\"email\"\n                                placeholder=\"seu@email.com\"\n                                className=\"pl-10\"\n                                data-testid=\"input-email\"\n                                {...field}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"phone\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Telefone</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                                <Input\n                                  placeholder=\"(00) 00000-0000\"\n                                  className=\"pl-10\"\n                                  data-testid=\"input-phone\"\n                                  {...field}\n                                />\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"cpf\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>CPF</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <FileText className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                                <Input\n                                  placeholder=\"000.000.000-00\"\n                                  className=\"pl-10\"\n                                  data-testid=\"input-cpf\"\n                                  {...field}\n                                  onChange={(e) => {\n                                    const formatted = formatCPF(e.target.value);\n                                    field.onChange(removeCPFMask(formatted));\n                                    e.target.value = formatted;\n                                  }}\n                                  value={formatCPF(field.value || '')}\n                                />\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"birthDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Data de Nascimento (Opcional)</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"date\"\n                              data-testid=\"input-birth-date\"\n                              {...field}\n                              value={field.value ?? \"\"}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"password\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Senha</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                              <Input\n                                type=\"password\"\n                                placeholder=\"••••••••\"\n                                className=\"pl-10\"\n                                data-testid=\"input-password\"\n                                {...field}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"confirmPassword\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Confirmar Senha</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                              <Input\n                                type=\"password\"\n                                placeholder=\"••••••••\"\n                                className=\"pl-10\"\n                                data-testid=\"input-confirm-password\"\n                                {...field}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                )}\n\n                {currentStep === 2 && (\n                  <div className=\"space-y-4\">\n                    <h2 className=\"font-semibold text-lg mb-4\">Etapa 2: Informações Profissionais</h2>\n\n                    <FormField\n                      control={form.control}\n                      name=\"profession\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Profissão/Especialidade</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Briefcase className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                              <Input\n                                placeholder=\"Ex: Operador de Escavadeira, Motorista, etc\"\n                                className=\"pl-10\"\n                                data-testid=\"input-profession\"\n                                {...field}\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"experienceYears\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Anos de Experiência (Opcional)</FormLabel>\n                          <Select\n                            onValueChange={field.onChange}\n                            defaultValue={field.value ?? undefined}\n                          >\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-experience\">\n                                <SelectValue placeholder=\"Selecione\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"0-1\">Menos de 1 ano</SelectItem>\n                              <SelectItem value=\"1-3\">1-3 anos</SelectItem>\n                              <SelectItem value=\"3-5\">3-5 anos</SelectItem>\n                              <SelectItem value=\"5-10\">5-10 anos</SelectItem>\n                              <SelectItem value=\"10+\">Mais de 10 anos</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"certifications\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Certificações (Opcional)</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Liste suas certificações e cursos relevantes...\"\n                              className=\"resize-none\"\n                              rows={3}\n                              data-testid=\"input-certifications\"\n                              {...field}\n                              value={field.value ?? \"\"}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"skills\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Habilidades (Opcional)</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Descreva suas principais habilidades técnicas...\"\n                              className=\"resize-none\"\n                              rows={3}\n                              data-testid=\"input-skills\"\n                              {...field}\n                              value={field.value ?? \"\"}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                )}\n\n                <div className=\"flex justify-between pt-6\">\n                  {currentStep > 1 && (\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={handlePrevious}\n                      data-testid=\"button-previous\"\n                    >\n                      Voltar\n                    </Button>\n                  )}\n                  \n                  <div className=\"ml-auto\">\n                    {currentStep < 2 ? (\n                      <Button\n                        type=\"button\"\n                        onClick={handleNext}\n                        data-testid=\"button-next\"\n                      >\n                        Próxima Etapa\n                      </Button>\n                    ) : (\n                      <Button\n                        type=\"submit\"\n                        disabled={registerMutation.isPending}\n                        data-testid=\"button-register\"\n                      >\n                        {registerMutation.isPending ? \"Criando conta...\" : \"Criar Conta\"}\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </form>\n            </Form>\n          </Card>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Já tem uma conta?{\" \"}\n              <a\n                href=\"/login\"\n                className=\"text-primary font-medium hover-elevate px-2 py-1 rounded-md\"\n                data-testid=\"link-login\"\n              >\n                Faça login\n              </a>\n            </p>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":22293},"client/src/pages/AdminClients.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Building2, Mail, Phone, Globe, Briefcase, Users as UsersIcon, Search, Plus, Upload, Palette, Eye, Edit, Camera, ShoppingCart } from \"lucide-react\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Company, Client, InsertClient } from \"@shared/schema\";\n\ntype ClientWithSource = Client & {\n  source: 'admin_client' | 'registered_company';\n};\nimport { useEffect, useState, useMemo } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertClientSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { Label } from \"@/components/ui/label\";\n\nconst formSchema = insertClientSchema.extend({\n  logoUrl: z.string().optional(),\n});\n\nexport default function AdminClients() {\n  const { userType } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [searchName, setSearchName] = useState(\"\");\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n  const [selectedClient, setSelectedClient] = useState<ClientWithSource | null>(null);\n  const [isViewDialogOpen, setIsViewDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isPurchasesDialogOpen, setIsPurchasesDialogOpen] = useState(false);\n  const [selectedClientPurchases, setSelectedClientPurchases] = useState<any[]>([]);\n  const [editingLogoClientId, setEditingLogoClientId] = useState<string | null>(null);\n  \n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      companyName: \"\",\n      cnpj: \"\",\n      email: \"\",\n      phone: \"\",\n      website: \"\",\n      contactName: \"\",\n      contactEmail: \"\",\n      contactPhone: \"\",\n      logoUrl: \"\",\n      primaryColor: \"#8b5cf6\",\n      secondaryColor: \"#a78bfa\",\n      accentColor: \"#c4b5fd\",\n      isActive: \"true\",\n    },\n  });\n\n  const editForm = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      companyName: \"\",\n      cnpj: \"\",\n      email: \"\",\n      phone: \"\",\n      website: \"\",\n      contactName: \"\",\n      contactEmail: \"\",\n      contactPhone: \"\",\n      logoUrl: \"\",\n      primaryColor: \"#8b5cf6\",\n      secondaryColor: \"#a78bfa\",\n      accentColor: \"#c4b5fd\",\n      isActive: \"true\",\n    },\n  });\n\n  const { data: clientsData, isLoading: clientsLoading } = useQuery<ClientWithSource[]>({\n    queryKey: ['/api/clients'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const createClientMutation = useMutation({\n    mutationFn: async (clientData: InsertClient) => {\n      const response = await apiRequest('POST', '/api/clients', clientData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n      toast({\n        title: \"Cliente criado!\",\n        description: \"O cliente foi cadastrado com sucesso.\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n      setLogoFile(null);\n      setLogoPreview(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar cliente\",\n        description: error.message,\n      });\n    },\n  });\n\n  const updateClientMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertClient> }) => {\n      const response = await apiRequest('PUT', `/api/clients/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n      toast({\n        title: \"Cliente atualizado!\",\n        description: \"As informações do cliente foram atualizadas com sucesso.\",\n      });\n      setIsEditDialogOpen(false);\n      setSelectedClient(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar cliente\",\n        description: error.message,\n      });\n    },\n  });\n\n  const updateClientLogoMutation = useMutation({\n    mutationFn: async ({ clientId, logoUrl }: { clientId: string; logoUrl: string }) => {\n      const response = await apiRequest('PUT', `/api/clients/${clientId}`, { logoUrl });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n      toast({\n        title: \"Logo atualizado!\",\n        description: \"O logo do cliente foi atualizado com sucesso.\",\n      });\n      setEditingLogoClientId(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar logo\",\n        description: error.message,\n      });\n    },\n  });\n\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setLogoFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setLogoPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleClientLogoUpload = async (clientId: string, file: File) => {\n    try {\n      const uploadResponse = await apiRequest('POST', '/api/clients/upload-logo');\n      const { uploadURL } = await uploadResponse.json();\n      \n      const uploadResult = await fetch(uploadURL, {\n        method: 'PUT',\n        body: file,\n        headers: {\n          'Content-Type': file.type,\n        },\n      });\n\n      if (!uploadResult.ok) {\n        throw new Error('Falha ao fazer upload da logo');\n      }\n\n      const url = new URL(uploadURL);\n      const logoUrl = url.pathname;\n\n      updateClientLogoMutation.mutate({ clientId, logoUrl });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer upload da logo\",\n        description: \"Tente novamente\",\n      });\n    }\n  };\n\n  const handleSubmit = async (values: z.infer<typeof formSchema>) => {\n    let logoUrl = values.logoUrl || \"\";\n    \n    if (logoFile) {\n      try {\n        const uploadResponse = await apiRequest('POST', '/api/clients/upload-logo');\n        const { uploadURL } = await uploadResponse.json();\n        \n        const uploadResult = await fetch(uploadURL, {\n          method: 'PUT',\n          body: logoFile,\n          headers: {\n            'Content-Type': logoFile.type,\n          },\n        });\n\n        if (!uploadResult.ok) {\n          throw new Error('Falha ao fazer upload da logo');\n        }\n\n        const url = new URL(uploadURL);\n        logoUrl = url.pathname;\n      } catch (error) {\n        toast({\n          variant: \"destructive\",\n          title: \"Erro ao fazer upload da logo\",\n          description: \"Tente novamente\",\n        });\n        return;\n      }\n    }\n\n    createClientMutation.mutate({\n      ...values,\n      logoUrl,\n    });\n  };\n\n  useEffect(() => {\n    if (isEditDialogOpen && selectedClient) {\n      editForm.reset({\n        companyName: selectedClient.companyName,\n        cnpj: selectedClient.cnpj,\n        email: selectedClient.email,\n        phone: selectedClient.phone,\n        website: selectedClient.website || \"\",\n        contactName: selectedClient.contactName || \"\",\n        contactEmail: selectedClient.contactEmail || \"\",\n        contactPhone: selectedClient.contactPhone || \"\",\n        logoUrl: selectedClient.logoUrl || \"\",\n        primaryColor: selectedClient.primaryColor,\n        secondaryColor: selectedClient.secondaryColor,\n        accentColor: selectedClient.accentColor,\n        isActive: selectedClient.isActive ? \"true\" : \"false\",\n      });\n    }\n  }, [isEditDialogOpen, selectedClient, editForm]);\n\n  const handleEditSubmit = async (values: z.infer<typeof formSchema>) => {\n    if (!selectedClient) return;\n    \n    const { logoUrl, ...restValues } = values;\n    \n    updateClientMutation.mutate({\n      id: selectedClient.id,\n      data: restValues,\n    });\n  };\n\n  const filteredClients = useMemo(() => {\n    if (!clientsData) return [];\n    \n    return clientsData.filter((client) => {\n      const matchesName = !searchName || \n        client.companyName.toLowerCase().includes(searchName.toLowerCase());\n      \n      return matchesName;\n    });\n  }, [clientsData, searchName]);\n\n  return (\n    <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button data-testid=\"button-new-client\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Novo Cliente\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n                  <DialogHeader>\n                    <DialogTitle>Novo Cliente</DialogTitle>\n                    <DialogDescription>\n                      Cadastre um novo cliente com suas informações e esquema de cores personalizado\n                    </DialogDescription>\n                  </DialogHeader>\n                  <Form {...form}>\n                    <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n                      <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-semibold\">Informações da Empresa</h3>\n                        <div className=\"grid gap-4 md:grid-cols-2\">\n                          <FormField\n                            control={form.control}\n                            name=\"companyName\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Nome da Empresa*</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"Ex: Mineradora XYZ\" {...field} data-testid=\"input-company-name\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                          \n                          <FormField\n                            control={form.control}\n                            name=\"cnpj\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>CNPJ*</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"00.000.000/0000-00\" {...field} data-testid=\"input-cnpj\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"email\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Email da Empresa*</FormLabel>\n                                <FormControl>\n                                  <Input type=\"email\" placeholder=\"contato@empresa.com\" {...field} data-testid=\"input-email\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"phone\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Telefone*</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"(00) 0000-0000\" {...field} data-testid=\"input-phone\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"website\"\n                            render={({ field }) => (\n                              <FormItem className=\"md:col-span-2\">\n                                <FormLabel>Website</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"https://www.empresa.com\" {...field} value={field.value || \"\"} data-testid=\"input-website\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-semibold\">Informações de Contato</h3>\n                        <div className=\"grid gap-4 md:grid-cols-2\">\n                          <FormField\n                            control={form.control}\n                            name=\"contactName\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Nome do Contato*</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"João Silva\" {...field} data-testid=\"input-contact-name\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"contactEmail\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Email do Contato*</FormLabel>\n                                <FormControl>\n                                  <Input type=\"email\" placeholder=\"joao@empresa.com\" {...field} data-testid=\"input-contact-email\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"contactPhone\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Telefone do Contato*</FormLabel>\n                                <FormControl>\n                                  <Input placeholder=\"(00) 00000-0000\" {...field} data-testid=\"input-contact-phone\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-semibold\">Logo da Empresa</h3>\n                        <div className=\"space-y-3\">\n                          <Label htmlFor=\"logo-upload\">Logo</Label>\n                          <Input\n                            id=\"logo-upload\"\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={handleLogoChange}\n                            data-testid=\"input-logo-upload\"\n                          />\n                          {logoPreview && (\n                            <div className=\"mt-3\">\n                              <img src={logoPreview} alt=\"Preview\" className=\"h-24 w-24 object-contain rounded-md border\" />\n                            </div>\n                          )}\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-semibold flex items-center gap-2\">\n                          <Palette className=\"h-4 w-4\" />\n                          Esquema de Cores Personalizado\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Defina as cores que aparecerão quando o cliente fizer login na plataforma\n                        </p>\n                        <div className=\"grid gap-4 md:grid-cols-3\">\n                          <FormField\n                            control={form.control}\n                            name=\"primaryColor\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Cor Primária</FormLabel>\n                                <FormControl>\n                                  <div className=\"flex gap-2\">\n                                    <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-primary-color\" />\n                                    <Input {...field} placeholder=\"#8b5cf6\" className=\"flex-1\" />\n                                  </div>\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"secondaryColor\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Cor Secundária</FormLabel>\n                                <FormControl>\n                                  <div className=\"flex gap-2\">\n                                    <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-secondary-color\" />\n                                    <Input {...field} placeholder=\"#a78bfa\" className=\"flex-1\" />\n                                  </div>\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={form.control}\n                            name=\"accentColor\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Cor de Destaque</FormLabel>\n                                <FormControl>\n                                  <div className=\"flex gap-2\">\n                                    <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-accent-color\" />\n                                    <Input {...field} placeholder=\"#c4b5fd\" className=\"flex-1\" />\n                                  </div>\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n\n                      <DialogFooter>\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          onClick={() => setIsDialogOpen(false)}\n                          data-testid=\"button-cancel\"\n                        >\n                          Cancelar\n                        </Button>\n                        <Button \n                          type=\"submit\" \n                          disabled={createClientMutation.isPending}\n                          data-testid=\"button-submit-client\"\n                        >\n                          {createClientMutation.isPending ? \"Criando...\" : \"Criar Cliente\"}\n                        </Button>\n                      </DialogFooter>\n                    </form>\n                  </Form>\n                </DialogContent>\n              </Dialog>\n            </div>\n          </div>\n\n          <div className=\"mb-6 grid gap-6 md:grid-cols-2\">\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n                  <div>\n                    <CardTitle className=\"text-sm font-medium\">\n                      Total de Clientes\n                    </CardTitle>\n                    <CardDescription>Empresas cadastradas na plataforma</CardDescription>\n                  </div>\n                  <Building2 className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold\" data-testid=\"text-total-clients\">\n                    {clientsLoading ? (\n                      <Skeleton className=\"h-10 w-20\" />\n                    ) : (\n                      clientsData?.length || 0\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n                  <div>\n                    <CardTitle className=\"text-sm font-medium\">\n                      Filtros\n                    </CardTitle>\n                    <CardDescription>Buscar empresas por nome</CardDescription>\n                  </div>\n                  <Search className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      placeholder=\"Buscar por nome da empresa...\"\n                      value={searchName}\n                      onChange={(e) => setSearchName(e.target.value)}\n                      className=\"pl-9\"\n                      data-testid=\"input-search-name\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {clientsLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3, 4].map((i) => (\n                  <Skeleton key={i} className=\"h-24 w-full\" />\n                ))}\n              </div>\n            ) : filteredClients.length > 0 ? (\n              <div className=\"space-y-3\">\n                {filteredClients.map((client) => (\n                  <Card key={client.id} data-testid={`card-client-${client.id}`} className=\"hover-elevate\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center gap-6\">\n                        <div className=\"flex flex-col items-center gap-2\">\n                          <div className=\"w-24 h-24 flex items-center justify-center bg-muted rounded-md p-3 overflow-hidden\">\n                            {client.logoUrl ? (\n                              <img \n                                src={`${client.logoUrl}?t=${Date.now()}`}\n                                alt={`${client.companyName} logo`}\n                                className=\"max-w-full max-h-full object-contain\"\n                                onError={(e) => {\n                                  e.currentTarget.src = '';\n                                  e.currentTarget.style.display = 'none';\n                                }}\n                              />\n                            ) : (\n                              <Building2 className=\"h-12 w-12 text-muted-foreground\" />\n                            )}\n                          </div>\n                          <ObjectUploader\n                            maxNumberOfFiles={1}\n                            maxFileSize={5242880}\n                            onGetUploadParameters={async () => {\n                              const response = await apiRequest(\"POST\", \"/api/clients/upload-logo\");\n                              const data = await response.json();\n                              return {\n                                method: 'PUT' as const,\n                                url: data.uploadURL,\n                              };\n                            }}\n                            onComplete={async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n                              if (result.successful && result.successful.length > 0) {\n                                const uploadURL = result.successful[0].uploadURL;\n                                try {\n                                  const setLogoResponse = await apiRequest('POST', '/api/clients/set-logo', {\n                                    logoURL: uploadURL\n                                  });\n                                  const { objectPath } = await setLogoResponse.json();\n                                  \n                                  await apiRequest('PUT', `/api/clients/${client.id}`, {\n                                    logoUrl: objectPath\n                                  });\n                                  \n                                  queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n                                  toast({\n                                    title: \"Logo atualizado!\",\n                                    description: \"O logo foi atualizado com sucesso.\",\n                                  });\n                                } catch (error) {\n                                  toast({\n                                    title: \"Erro ao atualizar logo\",\n                                    description: \"Ocorreu um erro ao salvar o logo. Tente novamente.\",\n                                    variant: \"destructive\",\n                                  });\n                                }\n                              }\n                            }}\n                            buttonClassName=\"h-8 gap-2\"\n                          >\n                            <Camera className=\"h-3 w-3\" />\n                            {client.logoUrl ? \"Trocar\" : \"Adicionar\"}\n                          </ObjectUploader>\n                        </div>\n\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-start justify-between gap-4 mb-3\">\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"text-xl font-semibold truncate\" data-testid={`text-client-name-${client.id}`}>\n                                {client.companyName}\n                              </h3>\n                              <p className=\"text-sm text-muted-foreground\">\n                                CNPJ: {client.cnpj}\n                              </p>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant={client.isActive === 'true' ? \"default\" : \"secondary\"}>\n                                {client.isActive === 'true' ? \"Ativo\" : \"Inativo\"}\n                              </Badge>\n                              {client.source === 'registered_company' && (\n                                <Badge variant=\"outline\" className=\"bg-primary/10 text-primary border-primary/20\">\n                                  Cadastro Site\n                                </Badge>\n                              )}\n                              <Button \n                                size=\"icon\" \n                                variant=\"ghost\"\n                                data-testid={`button-view-${client.id}`}\n                                title=\"Visualizar detalhes\"\n                                onClick={() => {\n                                  setSelectedClient(client);\n                                  setIsViewDialogOpen(true);\n                                }}\n                              >\n                                <Eye className=\"h-4 w-4\" />\n                              </Button>\n                              {client.source === 'admin_client' && (\n                                <>\n                                  <Button \n                                    size=\"icon\" \n                                    variant=\"ghost\"\n                                    data-testid={`button-purchases-${client.id}`}\n                                    title=\"Ver compras\"\n                                    onClick={async () => {\n                                      setSelectedClient(client);\n                                      try {\n                                        const response = await apiRequest('GET', `/api/clients/${client.id}/purchases`);\n                                        const purchases = await response.json();\n                                        setSelectedClientPurchases(purchases);\n                                        setIsPurchasesDialogOpen(true);\n                                      } catch (error) {\n                                        toast({\n                                          title: \"Erro ao carregar compras\",\n                                          description: \"Não foi possível carregar as compras deste cliente.\",\n                                          variant: \"destructive\",\n                                        });\n                                      }\n                                    }}\n                                  >\n                                    <ShoppingCart className=\"h-4 w-4\" />\n                                  </Button>\n                                  <Button \n                                    size=\"icon\" \n                                    variant=\"ghost\"\n                                    data-testid={`button-edit-${client.id}`}\n                                    title=\"Editar cliente\"\n                                    onClick={() => {\n                                      setSelectedClient(client);\n                                      setIsEditDialogOpen(true);\n                                    }}\n                                  >\n                                    <Edit className=\"h-4 w-4\" />\n                                  </Button>\n                                </>\n                              )}\n                            </div>\n                          </div>\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Mail className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                              <span className=\"truncate\">{client.email}</span>\n                            </div>\n                            \n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Phone className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                              <span>{client.phone}</span>\n                            </div>\n\n                            {client.website && (\n                              <div className=\"flex items-center gap-2 text-sm\">\n                                <Globe className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                                <a \n                                  href={client.website} \n                                  target=\"_blank\" \n                                  rel=\"noopener noreferrer\"\n                                  className=\"truncate text-primary hover:underline\"\n                                >\n                                  {client.website}\n                                </a>\n                              </div>\n                            )}\n\n                            {client.contactName && (\n                              <div className=\"flex items-center gap-2 text-sm\">\n                                <UsersIcon className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                                <span className=\"truncate\">{client.contactName}</span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : clientsData && clientsData.length > 0 ? (\n              <Card>\n                <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                  <Search className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                  <p className=\"text-center text-muted-foreground\">\n                    Nenhum cliente encontrado com este filtro\n                  </p>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setSearchName(\"\")}\n                    className=\"mt-4\"\n                    data-testid=\"button-clear-filters\"\n                  >\n                    Limpar Filtros\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card>\n                <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                  <Building2 className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                  <p className=\"text-center text-muted-foreground\">\n                    Nenhuma empresa cadastrada ainda\n                  </p>\n                </CardContent>\n              </Card>\n            )}\n\n      <Dialog open={isViewDialogOpen} onOpenChange={setIsViewDialogOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Detalhes do Cliente</DialogTitle>\n            <DialogDescription>\n              Informações completas do cliente\n            </DialogDescription>\n          </DialogHeader>\n          \n          {selectedClient && (\n            <div className=\"space-y-6\">\n              {selectedClient.logoUrl && (\n                <div className=\"flex justify-center pb-4 border-b\">\n                  <div className=\"w-32 h-32 flex items-center justify-center bg-muted rounded-md p-4\">\n                    <img \n                      src={selectedClient.logoUrl} \n                      alt={`${selectedClient.companyName} logo`}\n                      className=\"max-w-full max-h-full object-contain\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              <div className=\"grid gap-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"text-muted-foreground\">Nome da Empresa</Label>\n                    <p className=\"font-medium\">{selectedClient.companyName}</p>\n                  </div>\n                  <div>\n                    <Label className=\"text-muted-foreground\">CNPJ</Label>\n                    <p className=\"font-medium\">{selectedClient.cnpj}</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"text-muted-foreground\">Email</Label>\n                    <p className=\"font-medium\">{selectedClient.email}</p>\n                  </div>\n                  <div>\n                    <Label className=\"text-muted-foreground\">Telefone</Label>\n                    <p className=\"font-medium\">{selectedClient.phone}</p>\n                  </div>\n                </div>\n\n                {selectedClient.website && (\n                  <div>\n                    <Label className=\"text-muted-foreground\">Website</Label>\n                    <a \n                      href={selectedClient.website} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"font-medium text-primary hover:underline block\"\n                    >\n                      {selectedClient.website}\n                    </a>\n                  </div>\n                )}\n\n                <div className=\"border-t pt-4\">\n                  <h4 className=\"font-semibold mb-3\">Contato</h4>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {selectedClient.contactName && (\n                      <div>\n                        <Label className=\"text-muted-foreground\">Nome do Contato</Label>\n                        <p className=\"font-medium\">{selectedClient.contactName}</p>\n                      </div>\n                    )}\n                    {selectedClient.contactEmail && (\n                      <div>\n                        <Label className=\"text-muted-foreground\">Email do Contato</Label>\n                        <p className=\"font-medium\">{selectedClient.contactEmail}</p>\n                      </div>\n                    )}\n                    {selectedClient.contactPhone && (\n                      <div>\n                        <Label className=\"text-muted-foreground\">Telefone do Contato</Label>\n                        <p className=\"font-medium\">{selectedClient.contactPhone}</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"border-t pt-4\">\n                  <h4 className=\"font-semibold mb-3\">Cores da Marca</h4>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div>\n                      <Label className=\"text-muted-foreground\">Cor Primária</Label>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <div \n                          className=\"w-8 h-8 rounded border\"\n                          style={{ backgroundColor: selectedClient.primaryColor }}\n                        />\n                        <span className=\"text-sm font-mono\">{selectedClient.primaryColor}</span>\n                      </div>\n                    </div>\n                    <div>\n                      <Label className=\"text-muted-foreground\">Cor Secundária</Label>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <div \n                          className=\"w-8 h-8 rounded border\"\n                          style={{ backgroundColor: selectedClient.secondaryColor }}\n                        />\n                        <span className=\"text-sm font-mono\">{selectedClient.secondaryColor}</span>\n                      </div>\n                    </div>\n                    <div>\n                      <Label className=\"text-muted-foreground\">Cor de Destaque</Label>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <div \n                          className=\"w-8 h-8 rounded border\"\n                          style={{ backgroundColor: selectedClient.accentColor }}\n                        />\n                        <span className=\"text-sm font-mono\">{selectedClient.accentColor}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"border-t pt-4\">\n                  <Label className=\"text-muted-foreground\">Status</Label>\n                  <Badge variant={selectedClient.isActive ? \"default\" : \"secondary\"} className=\"mt-1\">\n                    {selectedClient.isActive ? \"Ativo\" : \"Inativo\"}\n                  </Badge>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsViewDialogOpen(false)}>\n              Fechar\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Editar Cliente</DialogTitle>\n            <DialogDescription>\n              Atualize as informações do cliente\n            </DialogDescription>\n          </DialogHeader>\n          \n          {selectedClient && (\n            <Form {...editForm}>\n              <form onSubmit={editForm.handleSubmit(handleEditSubmit)} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Informações da Empresa</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={editForm.control}\n                      name=\"companyName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nome da Empresa*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: Mineradora XYZ\" {...field} data-testid=\"input-edit-company-name\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    \n                    <FormField\n                      control={editForm.control}\n                      name=\"cnpj\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>CNPJ*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"00.000.000/0000-00\" {...field} data-testid=\"input-edit-cnpj\" disabled />\n                          </FormControl>\n                          <FormDescription>CNPJ não pode ser alterado</FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email da Empresa*</FormLabel>\n                          <FormControl>\n                            <Input type=\"email\" placeholder=\"contato@empresa.com\" {...field} data-testid=\"input-edit-email\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"phone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Telefone*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"(00) 0000-0000\" {...field} data-testid=\"input-edit-phone\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"website\"\n                      render={({ field }) => (\n                        <FormItem className=\"md:col-span-2\">\n                          <FormLabel>Website</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"https://www.empresa.com\" {...field} value={field.value || \"\"} data-testid=\"input-edit-website\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Informações de Contato</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={editForm.control}\n                      name=\"contactName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nome do Contato*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"João Silva\" {...field} data-testid=\"input-edit-contact-name\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"contactEmail\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email do Contato*</FormLabel>\n                          <FormControl>\n                            <Input type=\"email\" placeholder=\"joao@empresa.com\" {...field} data-testid=\"input-edit-contact-email\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"contactPhone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Telefone do Contato*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"(00) 00000-0000\" {...field} data-testid=\"input-edit-contact-phone\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold flex items-center gap-2\">\n                    <Palette className=\"h-4 w-4\" />\n                    Esquema de Cores Personalizado\n                  </h3>\n                  <div className=\"grid gap-4 md:grid-cols-3\">\n                    <FormField\n                      control={editForm.control}\n                      name=\"primaryColor\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Cor Primária</FormLabel>\n                          <FormControl>\n                            <div className=\"flex gap-2\">\n                              <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-edit-primary-color\" />\n                              <Input {...field} placeholder=\"#8b5cf6\" className=\"flex-1\" />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"secondaryColor\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Cor Secundária</FormLabel>\n                          <FormControl>\n                            <div className=\"flex gap-2\">\n                              <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-edit-secondary-color\" />\n                              <Input {...field} placeholder=\"#a78bfa\" className=\"flex-1\" />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={editForm.control}\n                      name=\"accentColor\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Cor de Destaque</FormLabel>\n                          <FormControl>\n                            <div className=\"flex gap-2\">\n                              <Input type=\"color\" {...field} className=\"w-16 h-10 p-1\" data-testid=\"input-edit-accent-color\" />\n                              <Input {...field} placeholder=\"#c4b5fd\" className=\"flex-1\" />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Status</h3>\n                  <FormField\n                    control={editForm.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Status do Cliente</FormLabel>\n                        <FormControl>\n                          <div className=\"flex gap-3\">\n                            <label className=\"flex items-center gap-2 cursor-pointer\">\n                              <input\n                                type=\"radio\"\n                                value=\"true\"\n                                checked={field.value === \"true\"}\n                                onChange={field.onChange}\n                                data-testid=\"input-edit-active\"\n                              />\n                              <span>Ativo</span>\n                            </label>\n                            <label className=\"flex items-center gap-2 cursor-pointer\">\n                              <input\n                                type=\"radio\"\n                                value=\"false\"\n                                checked={field.value === \"false\"}\n                                onChange={field.onChange}\n                                data-testid=\"input-edit-inactive\"\n                              />\n                              <span>Inativo</span>\n                            </label>\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <DialogFooter>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={() => setIsEditDialogOpen(false)}\n                    data-testid=\"button-edit-cancel\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button \n                    type=\"submit\" \n                    disabled={updateClientMutation.isPending}\n                    data-testid=\"button-edit-save\"\n                  >\n                    {updateClientMutation.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={isPurchasesDialogOpen} onOpenChange={setIsPurchasesDialogOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Compras do Cliente</DialogTitle>\n            <DialogDescription>\n              Histórico de compras e assinaturas de {selectedClient?.companyName}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            {selectedClientPurchases.length > 0 ? (\n              <div className=\"space-y-3\">\n                {selectedClientPurchases.map((purchase) => (\n                  <Card key={purchase.id}>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <h4 className=\"font-semibold\">{purchase.planName}</h4>\n                            <Badge variant={\n                              purchase.status === 'active' ? 'default' : \n                              purchase.status === 'expired' ? 'secondary' : \n                              'outline'\n                            }>\n                              {purchase.status === 'active' ? 'Ativo' : \n                               purchase.status === 'expired' ? 'Expirado' : \n                               purchase.status}\n                            </Badge>\n                          </div>\n                          {purchase.planDescription && (\n                            <p className=\"text-sm text-muted-foreground mb-3\">\n                              {purchase.planDescription}\n                            </p>\n                          )}\n                          <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                            <div>\n                              <Label className=\"text-muted-foreground\">Data de Compra</Label>\n                              <p className=\"font-medium\">\n                                {new Date(purchase.purchaseDate).toLocaleDateString('pt-BR')}\n                              </p>\n                            </div>\n                            <div>\n                              <Label className=\"text-muted-foreground\">Data de Expiração</Label>\n                              <p className=\"font-medium\">\n                                {new Date(purchase.expiryDate).toLocaleDateString('pt-BR')}\n                              </p>\n                            </div>\n                            <div>\n                              <Label className=\"text-muted-foreground\">Valor</Label>\n                              <p className=\"font-medium\">{purchase.amount}</p>\n                            </div>\n                            {purchase.paymentMethod && (\n                              <div>\n                                <Label className=\"text-muted-foreground\">Método de Pagamento</Label>\n                                <p className=\"font-medium\">{purchase.paymentMethod}</p>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center justify-center py-12\">\n                <ShoppingCart className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                <p className=\"text-center text-muted-foreground\">\n                  Este cliente ainda não realizou nenhuma compra\n                </p>\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsPurchasesDialogOpen(false)}>\n              Fechar\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":55709},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/examples/JobCard.tsx":{"content":"import { JobCard } from \"../JobCard\";\nimport techLogo from \"@assets/generated_images/Tech_company_logo_placeholder_52258a35.png\";\n\nexport default function JobCardExample() {\n  return (\n    <JobCard\n      id=\"1\"\n      title=\"Senior Frontend Developer\"\n      company=\"TechCorp Inc\"\n      companyLogo={techLogo}\n      location=\"São Paulo\"\n      country=\"Brasil\"\n      workType=\"Remote\"\n      contractType=\"Full-time\"\n      salary=\"$80k - $120k\"\n      description=\"We are looking for an experienced frontend developer to join our team. You will work on cutting-edge projects using React, TypeScript, and modern web technologies.\"\n      postedTime=\"2 dias atrás\"\n      applicants={45}\n      verified={true}\n    />\n  );\n}\n","size_bytes":718},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"server/objectStorage.ts":{"content":"// Reference: blueprint:javascript_object_storage\nimport { Storage, File } from \"@google-cloud/storage\";\nimport { Response } from \"express\";\nimport { randomUUID } from \"crypto\";\nimport {\n  ObjectAclPolicy,\n  ObjectPermission,\n  canAccessObject,\n  getObjectAclPolicy,\n  setObjectAclPolicy,\n} from \"./objectAcl\";\n\nconst REPLIT_SIDECAR_ENDPOINT = \"http://127.0.0.1:1106\";\n\nexport const objectStorageClient = new Storage({\n  credentials: {\n    audience: \"replit\",\n    subject_token_type: \"access_token\",\n    token_url: `${REPLIT_SIDECAR_ENDPOINT}/token`,\n    type: \"external_account\",\n    credential_source: {\n      url: `${REPLIT_SIDECAR_ENDPOINT}/credential`,\n      format: {\n        type: \"json\",\n        subject_token_field_name: \"access_token\",\n      },\n    },\n    universe_domain: \"googleapis.com\",\n  },\n  projectId: \"\",\n});\n\nexport class ObjectNotFoundError extends Error {\n  constructor() {\n    super(\"Object not found\");\n    this.name = \"ObjectNotFoundError\";\n    Object.setPrototypeOf(this, ObjectNotFoundError.prototype);\n  }\n}\n\nexport class ObjectStorageService {\n  constructor() {}\n\n  getPublicObjectSearchPaths(): Array<string> {\n    const pathsStr = process.env.PUBLIC_OBJECT_SEARCH_PATHS || \"\";\n    const paths = Array.from(\n      new Set(\n        pathsStr\n          .split(\",\")\n          .map((path) => path.trim())\n          .filter((path) => path.length > 0)\n      )\n    );\n    if (paths.length === 0) {\n      throw new Error(\n        \"PUBLIC_OBJECT_SEARCH_PATHS not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PUBLIC_OBJECT_SEARCH_PATHS env var (comma-separated paths).\"\n      );\n    }\n    return paths;\n  }\n\n  getPrivateObjectDir(): string {\n    const dir = process.env.PRIVATE_OBJECT_DIR || \"\";\n    if (!dir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n    return dir;\n  }\n\n  async searchPublicObject(filePath: string): Promise<File | null> {\n    for (const searchPath of this.getPublicObjectSearchPaths()) {\n      const fullPath = `${searchPath}/${filePath}`;\n\n      const { bucketName, objectName } = parseObjectPath(fullPath);\n      const bucket = objectStorageClient.bucket(bucketName);\n      const file = bucket.file(objectName);\n\n      const [exists] = await file.exists();\n      if (exists) {\n        return file;\n      }\n    }\n\n    return null;\n  }\n\n  async downloadObject(file: File, res: Response, cacheTtlSec: number = 3600) {\n    try {\n      const [metadata] = await file.getMetadata();\n      const aclPolicy = await getObjectAclPolicy(file);\n      const isPublic = aclPolicy?.visibility === \"public\";\n      res.set({\n        \"Content-Type\": metadata.contentType || \"application/octet-stream\",\n        \"Content-Length\": metadata.size,\n        \"Cache-Control\": `${\n          isPublic ? \"public\" : \"private\"\n        }, max-age=${cacheTtlSec}`,\n      });\n\n      const stream = file.createReadStream();\n\n      stream.on(\"error\", (err) => {\n        console.error(\"Stream error:\", err);\n        if (!res.headersSent) {\n          res.status(500).json({ error: \"Error streaming file\" });\n        }\n      });\n\n      stream.pipe(res);\n    } catch (error) {\n      console.error(\"Error downloading file:\", error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: \"Error downloading file\" });\n      }\n    }\n  }\n\n  async getObjectEntityUploadURL(): Promise<string> {\n    const privateObjectDir = this.getPrivateObjectDir();\n    if (!privateObjectDir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n\n    const objectId = randomUUID();\n    const fullPath = `${privateObjectDir}/${objectId}`;\n\n    const { bucketName, objectName } = parseObjectPath(fullPath);\n\n    return signObjectURL({\n      bucketName,\n      objectName,\n      method: \"PUT\",\n      ttlSec: 900,\n    });\n  }\n\n  async getObjectEntityFile(objectPath: string): Promise<File> {\n    if (!objectPath.startsWith(\"/objects/\")) {\n      throw new ObjectNotFoundError();\n    }\n\n    const parts = objectPath.slice(1).split(\"/\");\n    if (parts.length < 2) {\n      throw new ObjectNotFoundError();\n    }\n\n    const entityId = parts.slice(1).join(\"/\");\n    let entityDir = this.getPrivateObjectDir();\n    if (!entityDir.endsWith(\"/\")) {\n      entityDir = `${entityDir}/`;\n    }\n    const objectEntityPath = `${entityDir}${entityId}`;\n    const { bucketName, objectName } = parseObjectPath(objectEntityPath);\n    const bucket = objectStorageClient.bucket(bucketName);\n    const objectFile = bucket.file(objectName);\n    const [exists] = await objectFile.exists();\n    if (!exists) {\n      throw new ObjectNotFoundError();\n    }\n    return objectFile;\n  }\n\n  normalizeObjectEntityPath(rawPath: string): string {\n    if (!rawPath.startsWith(\"https://storage.googleapis.com/\")) {\n      return rawPath;\n    }\n\n    const url = new URL(rawPath);\n    let rawObjectPath = url.pathname;\n    \n    // Remove leading slash from pathname to match the format of objectEntityDir\n    if (rawObjectPath.startsWith(\"/\")) {\n      rawObjectPath = rawObjectPath.slice(1);\n    }\n\n    let objectEntityDir = this.getPrivateObjectDir();\n    if (!objectEntityDir.endsWith(\"/\")) {\n      objectEntityDir = `${objectEntityDir}/`;\n    }\n\n    if (!rawObjectPath.startsWith(objectEntityDir)) {\n      return `/${rawObjectPath}`;\n    }\n\n    const entityId = rawObjectPath.slice(objectEntityDir.length);\n    return `/objects/${entityId}`;\n  }\n\n  async trySetObjectEntityAclPolicy(\n    rawPath: string,\n    aclPolicy: ObjectAclPolicy\n  ): Promise<string> {\n    const normalizedPath = this.normalizeObjectEntityPath(rawPath);\n    if (!normalizedPath.startsWith(\"/\")) {\n      return normalizedPath;\n    }\n\n    const objectFile = await this.getObjectEntityFile(normalizedPath);\n    await setObjectAclPolicy(objectFile, aclPolicy);\n    return normalizedPath;\n  }\n\n  async canAccessObjectEntity({\n    userId,\n    objectFile,\n    requestedPermission,\n  }: {\n    userId?: string;\n    objectFile: File;\n    requestedPermission?: ObjectPermission;\n  }): Promise<boolean> {\n    return canAccessObject({\n      userId,\n      objectFile,\n      requestedPermission: requestedPermission ?? ObjectPermission.READ,\n    });\n  }\n}\n\nfunction parseObjectPath(path: string): {\n  bucketName: string;\n  objectName: string;\n} {\n  if (!path.startsWith(\"/\")) {\n    path = `/${path}`;\n  }\n  const pathParts = path.split(\"/\");\n  if (pathParts.length < 3) {\n    throw new Error(\"Invalid path: must contain at least a bucket name\");\n  }\n\n  const bucketName = pathParts[1];\n  const objectName = pathParts.slice(2).join(\"/\");\n\n  return {\n    bucketName,\n    objectName,\n  };\n}\n\nasync function signObjectURL({\n  bucketName,\n  objectName,\n  method,\n  ttlSec,\n}: {\n  bucketName: string;\n  objectName: string;\n  method: \"GET\" | \"PUT\" | \"DELETE\" | \"HEAD\";\n  ttlSec: number;\n}): Promise<string> {\n  const request = {\n    bucket_name: bucketName,\n    object_name: objectName,\n    method,\n    expires_at: new Date(Date.now() + ttlSec * 1000).toISOString(),\n  };\n  const response = await fetch(\n    `${REPLIT_SIDECAR_ENDPOINT}/object-storage/signed-object-url`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(request),\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign object URL, errorcode: ${response.status}, ` +\n        `make sure you're running on Replit`\n    );\n  }\n\n  const { signed_url: signedURL } = await response.json();\n  return signedURL;\n}\n","size_bytes":7638},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/pages/AdminLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\nexport default function AdminLogin() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleLogoClick = () => {\n    setLocation(\"/\");\n  };\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: { email: string; password: string }) => {\n      const response = await apiRequest('POST', '/api/admin/login', credentials);\n      return response;\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      await queryClient.refetchQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Login realizado com sucesso\",\n        description: \"Bem-vindo ao painel administrativo\",\n      });\n      setTimeout(() => {\n        setLocation(\"/admin\");\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer login\",\n        description: error.message || \"E-mail ou senha inválidos\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email || !password) {\n      toast({\n        variant: \"destructive\",\n        title: \"Campos obrigatórios\",\n        description: \"Por favor, preencha e-mail e senha\",\n      });\n      return;\n    }\n    loginMutation.mutate({ email, password });\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-6\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-3 text-center\">\n          <div className=\"flex justify-center\">\n            <img \n              src={operlistLogo} \n              alt=\"Operlist\" \n              className=\"h-20 cursor-pointer\"\n              onClick={handleLogoClick}\n              data-testid=\"logo-admin-login\"\n            />\n          </div>\n          <CardTitle className=\"text-2xl\">Administrador</CardTitle>\n          <CardDescription>\n            Acesso restrito ao painel administrativo\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-3\">\n              <Label htmlFor=\"email\">E-mail</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"admin@operlist.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                data-testid=\"input-admin-email\"\n                required\n              />\n            </div>\n            <div className=\"space-y-3\">\n              <Label htmlFor=\"password\">Senha</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                data-testid=\"input-admin-password\"\n                required\n              />\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={loginMutation.isPending}\n              data-testid=\"button-admin-login\"\n            >\n              {loginMutation.isPending ? \"Entrando...\" : \"Entrar\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3920},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/examples/ThemeToggle.tsx":{"content":"import { ThemeToggle } from \"../ThemeToggle\";\n\nexport default function ThemeToggleExample() {\n  return <ThemeToggle />;\n}\n","size_bytes":122},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/pages/Signup.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card } from \"@/components/ui/card\";\nimport { Building2, HardHat, ArrowRight } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useLocation } from \"wouter\";\n\nexport default function Signup() {\n  const [, setLocation] = useLocation();\n  const [selectedType, setSelectedType] = useState<\"company\" | \"operator\" | null>(null);\n\n  const handleSelectType = (type: \"company\" | \"operator\") => {\n    setSelectedType(type);\n    console.log(\"User type selected:\", type);\n    setTimeout(() => {\n      setLocation(`/cadastro/${type}`);\n    }, 300);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      \n      <main className=\"flex-1 flex items-center justify-center py-12 px-4 bg-background\">\n        <div className=\"w-full max-w-4xl\">\n          <div className=\"text-center mb-12\">\n            <h1 className=\"font-heading font-bold text-4xl mb-4\">\n              Bem-vindo ao Operlist\n            </h1>\n            <p className=\"text-lg text-muted-foreground\">\n              Escolha o tipo de conta que deseja criar\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card\n              className=\"p-8 cursor-pointer hover-elevate active-elevate-2 transition-all border-2\"\n              onClick={() => handleSelectType(\"company\")}\n              data-testid=\"card-signup-company\"\n            >\n              <div className=\"flex flex-col items-center text-center space-y-6\">\n                <div className=\"w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <Building2 className=\"w-12 h-12 text-primary\" />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <h2 className=\"font-heading font-bold text-2xl\">\n                    Sou Empresa\n                  </h2>\n                  <p className=\"text-muted-foreground\">\n                    Publique vagas e encontre os melhores profissionais para sua equipe\n                  </p>\n                </div>\n\n                <ul className=\"text-sm text-muted-foreground space-y-2 text-left w-full\">\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Publique vagas ilimitadas</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Acesse banco de talentos</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Gerencie candidaturas</span>\n                  </li>\n                </ul>\n\n                <div className=\"pt-4 w-full\">\n                  <div className=\"flex items-center justify-center gap-2 text-primary font-medium\">\n                    <span>Criar conta empresa</span>\n                    <ArrowRight className=\"w-5 h-5\" />\n                  </div>\n                </div>\n              </div>\n            </Card>\n\n            <Card\n              className=\"p-8 cursor-pointer hover-elevate active-elevate-2 transition-all border-2\"\n              onClick={() => handleSelectType(\"operator\")}\n              data-testid=\"card-signup-operator\"\n            >\n              <div className=\"flex flex-col items-center text-center space-y-6\">\n                <div className=\"w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <HardHat className=\"w-12 h-12 text-primary\" />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <h2 className=\"font-heading font-bold text-2xl\">\n                    Sou Operador\n                  </h2>\n                  <p className=\"text-muted-foreground\">\n                    Encontre oportunidades em todo o mundo e impulsione sua carreira\n                  </p>\n                </div>\n\n                <ul className=\"text-sm text-muted-foreground space-y-2 text-left w-full\">\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Acesse milhares de vagas</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Candidate-se com 1 clique</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <ArrowRight className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                    <span>Receba alertas de vagas</span>\n                  </li>\n                </ul>\n\n                <div className=\"pt-4 w-full\">\n                  <div className=\"flex items-center justify-center gap-2 text-primary font-medium\">\n                    <span>Criar conta operador</span>\n                    <ArrowRight className=\"w-5 h-5\" />\n                  </div>\n                </div>\n              </div>\n            </Card>\n          </div>\n\n          <div className=\"mt-8 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Já tem uma conta?{\" \"}\n              <a \n                href=\"/login\" \n                className=\"text-primary font-medium hover-elevate px-2 py-1 rounded-md\"\n                data-testid=\"link-login\"\n              >\n                Faça login\n              </a>\n            </p>\n          </div>\n        </div>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}\n","size_bytes":5819},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/examples/StatsSection.tsx":{"content":"import { StatsSection } from \"../StatsSection\";\n\nexport default function StatsSectionExample() {\n  return <StatsSection />;\n}\n","size_bytes":126},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport express from \"express\";\nimport path from \"path\";\nimport multer from \"multer\";\nimport { randomUUID } from \"crypto\";\nimport fs from \"fs\";\nimport { storage } from \"./storage\";\nimport { insertCompanySchema, insertOperatorSchema, insertAdminSchema, insertPlanSchema, insertClientSchema, insertSectorSchema, insertSubsectorSchema, insertEventSchema, insertBannerSchema, insertJobSchema, insertQuestionSchema, insertJobQuestionSchema, insertApplicationAnswerSchema, insertNewsletterSubscriptionSchema, insertPasswordResetCodeSchema } from \"@shared/schema\";\nimport { fromZodError } from \"zod-validation-error\";\nimport { ObjectStorageService, ObjectNotFoundError } from \"./objectStorage\";\nimport { EmailService } from \"./emailService\";\n\n// Configure multer for local file uploads\nconst uploadsDir = path.join(process.cwd(), 'attached_assets', 'uploads');\nif (!fs.existsSync(uploadsDir)) {\n  fs.mkdirSync(uploadsDir, { recursive: true });\n}\n\nconst multerStorage = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, uploadsDir);\n  },\n  filename: (req, file, cb) => {\n    const uniqueName = `${randomUUID()}${path.extname(file.originalname)}`;\n    cb(null, uniqueName);\n  }\n});\n\nconst upload = multer({\n  storage: multerStorage,\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB limit\n  },\n  fileFilter: (req, file, cb) => {\n    const allowedMimes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n    if (allowedMimes.includes(file.mimetype)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Tipo de arquivo não permitido. Use apenas imagens (JPEG, PNG, GIF, WebP).'));\n    }\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  app.post(\"/api/companies/register\", async (req, res) => {\n    try {\n      const result = insertCompanySchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const existingEmail = await storage.getCompanyByEmail(result.data.email);\n      if (existingEmail) {\n        return res.status(400).json({ \n          message: \"E-mail já cadastrado\" \n        });\n      }\n\n      const existingCnpj = await storage.getCompanyByCnpj(result.data.cnpj);\n      if (existingCnpj) {\n        return res.status(400).json({ \n          message: \"CNPJ já cadastrado\" \n        });\n      }\n\n      const company = await storage.createCompany(result.data);\n      \n      req.session.userId = company.id;\n      req.session.userType = 'company';\n      \n      const { password, ...companyWithoutPassword } = company;\n      \n      return res.status(201).json(companyWithoutPassword);\n    } catch (error) {\n      console.error(\"Error registering company:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao criar conta\" \n      });\n    }\n  });\n\n  app.post(\"/api/companies/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ \n          message: \"E-mail e senha são obrigatórios\" \n        });\n      }\n\n      const company = await storage.getCompanyByEmail(email);\n      \n      if (!company || company.password !== password) {\n        return res.status(401).json({ \n          message: \"E-mail ou senha inválidos\" \n        });\n      }\n\n      req.session.userId = company.id;\n      req.session.userType = 'company';\n\n      const { password: _, ...companyWithoutPassword } = company;\n      \n      return res.status(200).json(companyWithoutPassword);\n    } catch (error) {\n      console.error(\"Error logging in company:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao fazer login\" \n      });\n    }\n  });\n\n  app.post(\"/api/operators/register\", async (req, res) => {\n    try {\n      const result = insertOperatorSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const existingEmail = await storage.getOperatorByEmail(result.data.email);\n      if (existingEmail) {\n        return res.status(400).json({ \n          message: \"E-mail já cadastrado\" \n        });\n      }\n\n      const existingCpf = await storage.getOperatorByCpf(result.data.cpf);\n      if (existingCpf) {\n        return res.status(400).json({ \n          message: \"CPF já cadastrado\" \n        });\n      }\n\n      const operator = await storage.createOperator(result.data);\n      \n      req.session.userId = operator.id;\n      req.session.userType = 'operator';\n      \n      const { password, ...operatorWithoutPassword } = operator;\n      \n      return res.status(201).json(operatorWithoutPassword);\n    } catch (error) {\n      console.error(\"Error registering operator:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao criar conta\" \n      });\n    }\n  });\n\n  app.post(\"/api/operators/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ \n          message: \"E-mail e senha são obrigatórios\" \n        });\n      }\n\n      const operator = await storage.getOperatorByEmail(email);\n      \n      if (!operator || operator.password !== password) {\n        return res.status(401).json({ \n          message: \"E-mail ou senha inválidos\" \n        });\n      }\n\n      req.session.userId = operator.id;\n      req.session.userType = 'operator';\n\n      const { password: _, ...operatorWithoutPassword } = operator;\n      \n      return res.status(200).json(operatorWithoutPassword);\n    } catch (error) {\n      console.error(\"Error logging in operator:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao fazer login\" \n      });\n    }\n  });\n\n  app.get(\"/api/operators/check-cpf/:cpf\", async (req, res) => {\n    try {\n      const { cpf } = req.params;\n      \n      if (!cpf) {\n        return res.status(400).json({ \n          message: \"CPF é obrigatório\" \n        });\n      }\n\n      const existingOperator = await storage.getOperatorByCpf(cpf);\n      \n      return res.status(200).json({ \n        exists: !!existingOperator \n      });\n    } catch (error) {\n      console.error(\"Error checking CPF:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao verificar CPF\" \n      });\n    }\n  });\n\n  app.patch(\"/api/operators/profile\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const updateData = req.body;\n      delete updateData.id;\n      delete updateData.password;\n      delete updateData.cpf;\n      delete updateData.email;\n\n      const updatedOperator = await storage.updateOperator(req.session.userId, updateData);\n      const { password: _, ...operatorWithoutPassword } = updatedOperator;\n      \n      return res.status(200).json(operatorWithoutPassword);\n    } catch (error) {\n      console.error(\"Error updating operator profile:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar perfil\" });\n    }\n  });\n\n  app.get(\"/api/operator/profile-complete\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const profileCheck = await storage.isOperatorProfileComplete(req.session.userId);\n      return res.status(200).json(profileCheck);\n    } catch (error) {\n      console.error(\"Error checking profile completion:\", error);\n      return res.status(500).json({ message: \"Erro ao verificar perfil\" });\n    }\n  });\n\n  app.get(\"/api/companies/dashboard-stats\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const stats = await storage.getCompanyDashboardStats(req.session.userId);\n      return res.status(200).json(stats);\n    } catch (error: any) {\n      console.error(`Error getting company dashboard stats: ${error.message}`);\n      return res.status(500).json({ message: \"Erro ao buscar estatísticas\" });\n    }\n  });\n\n  app.patch(\"/api/companies/profile\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const updateData = req.body;\n      delete updateData.id;\n      delete updateData.password;\n      delete updateData.cnpj;\n      delete updateData.email;\n\n      const updatedCompany = await storage.updateCompany(req.session.userId, updateData);\n      const { password: _, ...companyWithoutPassword } = updatedCompany;\n      \n      return res.status(200).json(companyWithoutPassword);\n    } catch (error) {\n      console.error(\"Error updating company profile:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar perfil\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ \n          message: \"E-mail e senha são obrigatórios\" \n        });\n      }\n\n      const company = await storage.getCompanyByEmail(email);\n      if (company && company.password === password) {\n        req.session.userId = company.id;\n        req.session.userType = 'company';\n        const { password: _, ...companyWithoutPassword } = company;\n        return res.status(200).json({ \n          user: companyWithoutPassword, \n          userType: 'company' \n        });\n      }\n\n      const operator = await storage.getOperatorByEmail(email);\n      if (operator && operator.password === password) {\n        req.session.userId = operator.id;\n        req.session.userType = 'operator';\n        const { password: _, ...operatorWithoutPassword } = operator;\n        return res.status(200).json({ \n          user: operatorWithoutPassword, \n          userType: 'operator' \n        });\n      }\n\n      const admin = await storage.getAdminByEmail(email);\n      if (admin && admin.password === password) {\n        req.session.userId = admin.id;\n        req.session.userType = 'admin';\n        \n        await new Promise<void>((resolve, reject) => {\n          req.session.save((err) => {\n            if (err) {\n              console.error(\"❌ Error saving admin session:\", err);\n              reject(err);\n            } else {\n              console.log(\"✅ Admin session saved:\", {\n                userId: req.session.userId,\n                userType: req.session.userType,\n                sessionID: req.sessionID\n              });\n              resolve();\n            }\n          });\n        });\n        \n        const { password: _, ...adminWithoutPassword } = admin;\n        return res.status(200).json({ \n          user: adminWithoutPassword, \n          userType: 'admin' \n        });\n      }\n\n      return res.status(401).json({ \n        message: \"E-mail ou senha inválidos\" \n      });\n    } catch (error) {\n      console.error(\"Error logging in:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao fazer login\" \n      });\n    }\n  });\n\n  app.get(\"/api/users/list\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ \n          message: \"Acesso negado. Apenas administradores podem acessar esta página.\" \n        });\n      }\n\n      const companies = await storage.getAllCompanies();\n      const operators = await storage.getAllOperators();\n      const clients = await storage.getAllClients();\n\n      const companiesWithoutPassword = companies.map(({ password, ...company }) => company);\n      const operatorsWithoutPassword = operators.map(({ password, ...operator }) => operator);\n\n      return res.status(200).json({\n        companies: companiesWithoutPassword,\n        operators: operatorsWithoutPassword,\n        clients: clients,\n        total: {\n          companies: companies.length,\n          operators: operators.length,\n          clients: clients.length,\n        },\n      });\n    } catch (error) {\n      console.error(\"Error listing users:\", error);\n      return res.status(500).json({ message: \"Erro ao listar usuários\" });\n    }\n  });\n\n  app.get(\"/api/stats\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ \n          message: \"Acesso negado\" \n        });\n      }\n\n      const stats = await storage.getStats();\n      return res.status(200).json(stats);\n    } catch (error) {\n      console.error(\"Error getting stats:\", error);\n      return res.status(500).json({ message: \"Erro ao obter estatísticas\" });\n    }\n  });\n\n  app.get(\"/api/plans\", async (req, res) => {\n    try {\n      const plans = await storage.getAllPlans();\n      return res.status(200).json(plans);\n    } catch (error) {\n      console.error(\"Error listing plans:\", error);\n      return res.status(500).json({ message: \"Erro ao listar planos\" });\n    }\n  });\n\n  app.post(\"/api/plans\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ \n          message: \"Acesso negado. Apenas administradores podem criar planos.\" \n        });\n      }\n\n      const result = insertPlanSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const plan = await storage.createPlan(result.data);\n      return res.status(201).json(plan);\n    } catch (error) {\n      console.error(\"Error creating plan:\", error);\n      return res.status(500).json({ message: \"Erro ao criar plano\" });\n    }\n  });\n\n  app.put(\"/api/plans/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ \n          message: \"Acesso negado. Apenas administradores podem editar planos.\" \n        });\n      }\n\n      const plan = await storage.updatePlan(req.params.id, req.body);\n      return res.status(200).json(plan);\n    } catch (error) {\n      console.error(\"Error updating plan:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar plano\" });\n    }\n  });\n\n  app.delete(\"/api/plans/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ \n          message: \"Acesso negado. Apenas administradores podem excluir planos.\" \n        });\n      }\n\n      const purchases = await storage.getPurchasesByPlan(req.params.id);\n      \n      if (purchases.length > 0) {\n        return res.status(400).json({ \n          message: `Não é possível excluir este plano pois existem ${purchases.length} compra(s) associada(s) a ele. Desative o plano ao invés de excluí-lo.`\n        });\n      }\n\n      await storage.deletePlan(req.params.id);\n      return res.status(200).json({ message: \"Plano excluído com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting plan:\", error);\n      return res.status(500).json({ message: \"Erro ao excluir plano\" });\n    }\n  });\n\n  app.get(\"/api/auth/me\", async (req, res) => {\n    try {\n      if (!req.session.userId || !req.session.userType) {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      if (req.session.userType === 'company') {\n        const company = await storage.getCompany(req.session.userId);\n        if (!company) {\n          req.session.destroy(() => {});\n          return res.status(401).json({ message: \"Usuário não encontrado\" });\n        }\n        const { password, ...companyWithoutPassword } = company;\n        return res.status(200).json({ \n          user: companyWithoutPassword, \n          userType: 'company' \n        });\n      } else if (req.session.userType === 'operator') {\n        const operator = await storage.getOperator(req.session.userId);\n        if (!operator) {\n          req.session.destroy(() => {});\n          return res.status(401).json({ message: \"Usuário não encontrado\" });\n        }\n        const { password, ...operatorWithoutPassword } = operator;\n        return res.status(200).json({ \n          user: operatorWithoutPassword, \n          userType: 'operator' \n        });\n      } else if (req.session.userType === 'admin') {\n        const admin = await storage.getAdmin(req.session.userId);\n        if (!admin) {\n          req.session.destroy(() => {});\n          return res.status(401).json({ message: \"Usuário não encontrado\" });\n        }\n        const { password, ...adminWithoutPassword } = admin;\n        return res.status(200).json({ \n          user: adminWithoutPassword, \n          userType: 'admin' \n        });\n      }\n    } catch (error) {\n      console.error(\"Error getting current user:\", error);\n      return res.status(500).json({ message: \"Erro ao verificar autenticação\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", async (req, res) => {\n    try {\n      req.session.destroy((err) => {\n        if (err) {\n          console.error(\"Error destroying session:\", err);\n          return res.status(500).json({ message: \"Erro ao fazer logout\" });\n        }\n        res.clearCookie('connect.sid');\n        return res.status(200).json({ message: \"Logout realizado com sucesso\" });\n      });\n    } catch (error) {\n      console.error(\"Error logging out:\", error);\n      return res.status(500).json({ message: \"Erro ao fazer logout\" });\n    }\n  });\n\n  app.post(\"/api/auth/forgot-password\", async (req, res) => {\n    try {\n      const { email } = req.body;\n\n      if (!email) {\n        return res.status(400).json({ \n          message: \"Email é obrigatório\" \n        });\n      }\n\n      // Auto-detect user type by checking both tables\n      let userName = '';\n      let userType = '';\n\n      // Check company first\n      const company = await storage.getCompanyByEmail(email);\n      if (company) {\n        userName = company.companyName;\n        userType = 'company';\n      } else {\n        // Check operator\n        const operator = await storage.getOperatorByEmail(email);\n        if (operator) {\n          userName = operator.fullName;\n          userType = 'operator';\n        } else {\n          return res.status(404).json({ \n            message: \"Usuário não encontrado\" \n          });\n        }\n      }\n\n      const code = Math.floor(1000 + Math.random() * 9000).toString();\n      \n      const expiresAt = new Date();\n      expiresAt.setMinutes(expiresAt.getMinutes() + 15);\n\n      await storage.createPasswordResetCode({\n        email,\n        code,\n        userType,\n        expiresAt: expiresAt.toISOString(),\n        isUsed: 'false',\n      });\n\n      const emailSettings = await storage.getEmailSettings();\n      if (emailSettings) {\n        const emailService = new EmailService(emailSettings);\n        await emailService.sendPasswordResetCode(email, code, userName);\n      }\n\n      return res.status(200).json({ \n        message: \"Código de recuperação enviado para seu e-mail\" \n      });\n    } catch (error) {\n      console.error(\"Error sending reset code:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao enviar código de recuperação\" \n      });\n    }\n  });\n\n  app.post(\"/api/auth/verify-reset-code\", async (req, res) => {\n    try {\n      const { email, code } = req.body;\n\n      if (!email || !code) {\n        return res.status(400).json({ \n          message: \"Email e código são obrigatórios\" \n        });\n      }\n\n      const resetCode = await storage.getPasswordResetCode(email, code);\n\n      if (!resetCode) {\n        return res.status(400).json({ \n          message: \"Código inválido ou expirado\" \n        });\n      }\n\n      const now = new Date();\n      const expiresAt = new Date(resetCode.expiresAt);\n\n      if (now > expiresAt) {\n        return res.status(400).json({ \n          message: \"Código expirado. Solicite um novo código.\" \n        });\n      }\n\n      return res.status(200).json({ \n        message: \"Código verificado com sucesso\",\n        userType: resetCode.userType \n      });\n    } catch (error) {\n      console.error(\"Error verifying reset code:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao verificar código\" \n      });\n    }\n  });\n\n  app.post(\"/api/auth/reset-password\", async (req, res) => {\n    try {\n      const { email, code, newPassword } = req.body;\n\n      if (!email || !code || !newPassword) {\n        return res.status(400).json({ \n          message: \"Email, código e nova senha são obrigatórios\" \n        });\n      }\n\n      if (newPassword.length < 6) {\n        return res.status(400).json({ \n          message: \"A senha deve ter pelo menos 6 caracteres\" \n        });\n      }\n\n      const resetCode = await storage.getPasswordResetCode(email, code);\n\n      if (!resetCode) {\n        return res.status(400).json({ \n          message: \"Código inválido ou expirado\" \n        });\n      }\n\n      const now = new Date();\n      const expiresAt = new Date(resetCode.expiresAt);\n\n      if (now > expiresAt) {\n        return res.status(400).json({ \n          message: \"Código expirado. Solicite um novo código.\" \n        });\n      }\n\n      if (resetCode.userType === 'company') {\n        const company = await storage.getCompanyByEmail(email);\n        if (company) {\n          await storage.updateCompany(company.id, { password: newPassword });\n        }\n      } else if (resetCode.userType === 'operator') {\n        const operator = await storage.getOperatorByEmail(email);\n        if (operator) {\n          await storage.updateOperator(operator.id, { password: newPassword });\n        }\n      }\n\n      await storage.markPasswordResetCodeAsUsed(resetCode.id);\n\n      return res.status(200).json({ \n        message: \"Senha alterada com sucesso\" \n      });\n    } catch (error) {\n      console.error(\"Error resetting password:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao resetar senha\" \n      });\n    }\n  });\n\n  app.post(\"/api/admin/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ \n          message: \"E-mail e senha são obrigatórios\" \n        });\n      }\n\n      const admin = await storage.getAdminByEmail(email);\n      \n      if (!admin || admin.password !== password) {\n        return res.status(401).json({ \n          message: \"E-mail ou senha inválidos\" \n        });\n      }\n\n      req.session.userId = admin.id;\n      req.session.userType = 'admin';\n\n      await new Promise<void>((resolve, reject) => {\n        req.session.save((err) => {\n          if (err) {\n            console.error(\"❌ Error saving session:\", err);\n            reject(err);\n          } else {\n            console.log(\"✅ Admin session saved:\", {\n              userId: req.session.userId,\n              userType: req.session.userType,\n              sessionID: req.sessionID\n            });\n            resolve();\n          }\n        });\n      });\n\n      const { password: _, ...adminWithoutPassword } = admin;\n      \n      return res.status(200).json({ \n        user: adminWithoutPassword, \n        userType: 'admin' \n      });\n    } catch (error) {\n      console.error(\"Error logging in admin:\", error);\n      return res.status(500).json({ \n        message: \"Erro ao fazer login\" \n      });\n    }\n  });\n\n  app.get(\"/api/experiences/:operatorId\", async (req, res) => {\n    try {\n      const { operatorId } = req.params;\n      const experiences = await storage.getExperiencesByOperator(operatorId);\n      return res.status(200).json(experiences);\n    } catch (error) {\n      console.error(\"Error getting experiences:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar experiências\" });\n    }\n  });\n\n  app.post(\"/api/experiences\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const experienceData = {\n        ...req.body,\n        operatorId: req.session.userId,\n      };\n\n      const experience = await storage.createExperience(experienceData);\n      return res.status(201).json(experience);\n    } catch (error) {\n      console.error(\"Error creating experience:\", error);\n      return res.status(500).json({ message: \"Erro ao criar experiência\" });\n    }\n  });\n\n  app.patch(\"/api/experiences/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const { id } = req.params;\n      const experience = await storage.getExperience(id);\n\n      if (!experience || experience.operatorId !== req.session.userId) {\n        return res.status(404).json({ message: \"Experiência não encontrada\" });\n      }\n\n      const updated = await storage.updateExperience(id, req.body);\n      return res.status(200).json(updated);\n    } catch (error) {\n      console.error(\"Error updating experience:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar experiência\" });\n    }\n  });\n\n  app.delete(\"/api/experiences/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      const { id } = req.params;\n      const experience = await storage.getExperience(id);\n\n      if (!experience || experience.operatorId !== req.session.userId) {\n        return res.status(404).json({ message: \"Experiência não encontrada\" });\n      }\n\n      await storage.deleteExperience(id);\n      return res.status(200).json({ message: \"Experiência deletada com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting experience:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar experiência\" });\n    }\n  });\n\n  app.get(\"/api/operators\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const operators = await storage.getAllOperators();\n      return res.status(200).json(operators);\n    } catch (error) {\n      console.error(\"Error getting operators:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar operadores\" });\n    }\n  });\n\n  app.get(\"/api/clients\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const clients = await storage.getAllClients();\n      const companies = await storage.getAllCompanies();\n\n      const clientsWithSource = clients.map(client => ({\n        ...client,\n        source: 'admin_client' as const,\n      }));\n\n      const companiesAsClients = companies.map(company => ({\n        id: company.id,\n        companyName: company.companyName,\n        cnpj: company.cnpj,\n        email: company.email,\n        phone: company.phone,\n        website: company.website || '',\n        contactName: company.companyName,\n        contactEmail: company.email,\n        contactPhone: company.phone,\n        logoUrl: company.logoUrl || null,\n        primaryColor: '#8b5cf6',\n        secondaryColor: '#a78bfa',\n        accentColor: '#c4b5fd',\n        isActive: 'true',\n        source: 'registered_company' as const,\n      }));\n\n      const allClients = [...clientsWithSource, ...companiesAsClients];\n      \n      return res.status(200).json(allClients);\n    } catch (error) {\n      console.error(\"Error getting clients:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar clientes\" });\n    }\n  });\n\n  app.post(\"/api/clients\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const result = insertClientSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const existingEmail = await storage.getClientByEmail(result.data.email);\n      if (existingEmail) {\n        return res.status(400).json({ \n          message: \"E-mail já cadastrado\" \n        });\n      }\n\n      const existingCnpj = await storage.getClientByCnpj(result.data.cnpj);\n      if (existingCnpj) {\n        return res.status(400).json({ \n          message: \"CNPJ já cadastrado\" \n        });\n      }\n\n      const client = await storage.createClient(result.data);\n      return res.status(201).json(client);\n    } catch (error) {\n      console.error(\"Error creating client:\", error);\n      return res.status(500).json({ message: \"Erro ao criar cliente\" });\n    }\n  });\n\n  app.put(\"/api/clients/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      // Check if this is a client (admin-created) or company (site-registered)\n      const existingClient = await storage.getClient(req.params.id);\n      \n      if (existingClient) {\n        // Update in clients table\n        const client = await storage.updateClient(req.params.id, req.body);\n        return res.status(200).json(client);\n      } else {\n        // Check if it's a company\n        const existingCompany = await storage.getCompany(req.params.id);\n        \n        if (existingCompany) {\n          // Update in companies table\n          const company = await storage.updateCompany(req.params.id, req.body);\n          return res.status(200).json(company);\n        } else {\n          return res.status(404).json({ message: \"Cliente não encontrado\" });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error updating client:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar cliente\" });\n    }\n  });\n\n  app.delete(\"/api/clients/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      await storage.deleteClient(req.params.id);\n      return res.status(200).json({ message: \"Cliente deletado com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting client:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar cliente\" });\n    }\n  });\n\n  app.post(\"/api/clients/upload-logo\", async (req, res) => {\n    try {\n      console.log(\"📸 Upload logo request - Session:\", {\n        userId: req.session.userId,\n        userType: req.session.userType,\n        sessionID: req.sessionID\n      });\n\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        console.log(\"❌ Access denied - userId:\", req.session.userId, \"userType:\", req.session.userType);\n        return res.status(403).json({ message: \"Acesso negado. Apenas administradores podem fazer upload de logos de clientes\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      console.log(\"✅ Upload URL generated successfully\");\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error getting upload URL for client logo:\", error);\n      return res.status(500).json({ message: \"Erro ao obter URL de upload\" });\n    }\n  });\n\n  app.get(\"/api/clients/:id/purchases\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const clientPurchases = await storage.getPurchasesByClient(req.params.id);\n      \n      const purchasesWithPlans = await Promise.all(\n        clientPurchases.map(async (purchase) => {\n          const plan = await storage.getPlan(purchase.planId);\n          return {\n            ...purchase,\n            planName: plan?.name || 'Plano não encontrado',\n            planDescription: plan?.description,\n          };\n        })\n      );\n      \n      return res.status(200).json(purchasesWithPlans);\n    } catch (error) {\n      console.error(\"Error fetching client purchases:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar compras do cliente\" });\n    }\n  });\n\n  app.post(\"/api/clients/set-logo\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      if (!req.body.logoURL) {\n        return res.status(400).json({ message: \"logoURL é obrigatório\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      \n      let objectPath;\n      let retries = 3;\n      let lastError;\n\n      while (retries > 0) {\n        try {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          \n          objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n            req.body.logoURL,\n            {\n              owner: req.session.userId,\n              visibility: \"public\",\n            }\n          );\n          break;\n        } catch (error) {\n          lastError = error;\n          retries--;\n          console.log(`⚠️ Retry setting logo permissions (${retries} left)...`);\n          if (retries === 0) throw error;\n        }\n      }\n\n      console.log(\"✅ Logo set as public:\", objectPath);\n      res.status(200).json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting logo as public:\", error);\n      res.status(500).json({ message: \"Erro ao configurar logo. Tente novamente em alguns segundos.\" });\n    }\n  });\n\n  // Local file upload endpoint (fallback when Object Storage fails)\n  app.post(\"/api/upload/local\", upload.single('file'), async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      if (!req.file) {\n        return res.status(400).json({ message: \"Nenhum arquivo enviado\" });\n      }\n\n      const filePath = `/attached_assets/uploads/${req.file.filename}`;\n      res.json({ \n        success: true,\n        filePath,\n        uploadURL: filePath \n      });\n    } catch (error) {\n      console.error(\"Error uploading file:\", error);\n      return res.status(500).json({ message: \"Erro ao fazer upload\" });\n    }\n  });\n\n  app.post(\"/api/objects/upload\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      try {\n        const objectStorageService = new ObjectStorageService();\n        const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n        res.json({ uploadURL });\n      } catch (storageError) {\n        console.error(\"Object Storage not available, using local upload:\", storageError);\n        // Fallback: return local upload endpoint\n        res.json({ \n          uploadURL: \"/api/upload/local\",\n          useLocal: true \n        });\n      }\n    } catch (error) {\n      console.error(\"Error getting upload URL:\", error);\n      return res.status(500).json({ message: \"Erro ao obter URL de upload\" });\n    }\n  });\n\n  app.put(\"/api/operators/profile-photo\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      if (!req.body.profilePhotoURL) {\n        return res.status(400).json({ message: \"profilePhotoURL é obrigatório\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      const objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n        req.body.profilePhotoURL,\n        {\n          owner: req.session.userId,\n          visibility: \"public\",\n        }\n      );\n\n      await storage.updateOperator(req.session.userId, { profilePhotoUrl: objectPath });\n\n      res.status(200).json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting profile photo:\", error);\n      res.status(500).json({ message: \"Erro ao atualizar foto de perfil\" });\n    }\n  });\n\n  app.put(\"/api/companies/logo\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      if (!req.body.logoURL) {\n        return res.status(400).json({ message: \"logoURL é obrigatório\" });\n      }\n\n      let objectPath = req.body.logoURL;\n      \n      // Check if it's a local upload (starts with /attached_assets)\n      if (objectPath.startsWith('/attached_assets/')) {\n        // Local upload - just save the path\n        await storage.updateCompany(req.session.userId, { logoUrl: objectPath });\n        res.status(200).json({ objectPath });\n        return;\n      }\n\n      // Object Storage upload - set ACL\n      const objectStorageService = new ObjectStorageService();\n      objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n        req.body.logoURL,\n        {\n          owner: req.session.userId,\n          visibility: \"public\",\n        }\n      );\n\n      await storage.updateCompany(req.session.userId, { logoUrl: objectPath });\n\n      res.status(200).json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting company logo:\", error);\n      res.status(500).json({ message: \"Erro ao atualizar logo da empresa\" });\n    }\n  });\n\n  app.put(\"/api/companies/banner\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autenticado\" });\n      }\n\n      if (!req.body.bannerURL) {\n        return res.status(400).json({ message: \"bannerURL é obrigatório\" });\n      }\n\n      let objectPath = req.body.bannerURL;\n      \n      // Check if it's a local upload (starts with /attached_assets)\n      if (objectPath.startsWith('/attached_assets/')) {\n        // Local upload - just save the path\n        await storage.updateCompany(req.session.userId, { bannerUrl: objectPath });\n        res.status(200).json({ objectPath });\n        return;\n      }\n\n      // Object Storage upload - set ACL\n      const objectStorageService = new ObjectStorageService();\n      objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n        req.body.bannerURL,\n        {\n          owner: req.session.userId,\n          visibility: \"public\",\n        }\n      );\n\n      await storage.updateCompany(req.session.userId, { bannerUrl: objectPath });\n\n      res.status(200).json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting company banner:\", error);\n      res.status(500).json({ message: \"Erro ao atualizar banner da empresa\" });\n    }\n  });\n\n  app.get(\"/objects/:objectPath(*)\", async (req, res) => {\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const objectFile = await objectStorageService.getObjectEntityFile(req.path);\n      objectStorageService.downloadObject(objectFile, res);\n    } catch (error) {\n      console.error(\"Error checking object access:\", error);\n      if (error instanceof ObjectNotFoundError) {\n        return res.sendStatus(404);\n      }\n      return res.sendStatus(500);\n    }\n  });\n\n  app.get(\"/api/email-settings\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const settings = await storage.getEmailSettings();\n      return res.status(200).json(settings || null);\n    } catch (error) {\n      console.error(\"Error getting email settings:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar configurações de email\" });\n    }\n  });\n\n  app.post(\"/api/email-settings\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const existingSettings = await storage.getEmailSettings();\n      \n      if (existingSettings) {\n        const updated = await storage.updateEmailSettings(existingSettings.id, req.body);\n        return res.status(200).json(updated);\n      } else {\n        const created = await storage.createEmailSettings(req.body);\n        return res.status(201).json(created);\n      }\n    } catch (error) {\n      console.error(\"Error saving email settings:\", error);\n      return res.status(500).json({ message: \"Erro ao salvar configurações de email\" });\n    }\n  });\n\n  app.post(\"/api/email-settings/test\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const { recipientEmail } = req.body;\n      \n      if (!recipientEmail) {\n        return res.status(400).json({ message: \"Email do destinatário é obrigatório\" });\n      }\n\n      const settings = await storage.getEmailSettings();\n      \n      if (!settings) {\n        return res.status(400).json({ message: \"Configurações de email não encontradas. Configure o SMTP primeiro.\" });\n      }\n\n      if (settings.isActive !== 'true') {\n        return res.status(400).json({ message: \"Serviço de email está inativo. Ative nas configurações primeiro.\" });\n      }\n\n      await EmailService.sendTestEmail(settings, recipientEmail);\n      \n      return res.status(200).json({ \n        message: \"Email de teste enviado com sucesso!\",\n        recipient: recipientEmail \n      });\n    } catch (error) {\n      console.error(\"Error sending test email:\", error);\n      const errorMessage = error instanceof Error ? error.message : \"Erro desconhecido\";\n      return res.status(500).json({ \n        message: \"Erro ao enviar email de teste\",\n        error: errorMessage\n      });\n    }\n  });\n\n  app.get(\"/api/sectors\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const sectors = await storage.getAllSectors();\n      return res.json(sectors);\n    } catch (error) {\n      console.error(\"Error fetching sectors:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar setores\" });\n    }\n  });\n\n  app.post(\"/api/sectors\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const result = insertSectorSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const sector = await storage.createSector(result.data);\n      return res.status(201).json(sector);\n    } catch (error) {\n      console.error(\"Error creating sector:\", error);\n      return res.status(500).json({ message: \"Erro ao criar setor\" });\n    }\n  });\n\n  app.patch(\"/api/sectors/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const sector = await storage.updateSector(req.params.id, req.body);\n      return res.json(sector);\n    } catch (error) {\n      console.error(\"Error updating sector:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar setor\" });\n    }\n  });\n\n  app.delete(\"/api/sectors/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      await storage.deleteSector(req.params.id);\n      return res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting sector:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar setor\" });\n    }\n  });\n\n  app.get(\"/api/subsectors\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const subsectors = await storage.getAllSubsectors();\n      return res.json(subsectors);\n    } catch (error) {\n      console.error(\"Error fetching subsectors:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar subsetores\" });\n    }\n  });\n\n  app.get(\"/api/subsectors/sector/:sectorId\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const subsectors = await storage.getSubsectorsBySector(req.params.sectorId);\n      return res.json(subsectors);\n    } catch (error) {\n      console.error(\"Error fetching subsectors by sector:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar subsetores\" });\n    }\n  });\n\n  app.post(\"/api/subsectors\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const result = insertSubsectorSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const subsector = await storage.createSubsector(result.data);\n      return res.status(201).json(subsector);\n    } catch (error) {\n      console.error(\"Error creating subsector:\", error);\n      return res.status(500).json({ message: \"Erro ao criar subsetor\" });\n    }\n  });\n\n  app.patch(\"/api/subsectors/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const subsector = await storage.updateSubsector(req.params.id, req.body);\n      return res.json(subsector);\n    } catch (error) {\n      console.error(\"Error updating subsector:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar subsetor\" });\n    }\n  });\n\n  app.delete(\"/api/subsectors/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      await storage.deleteSubsector(req.params.id);\n      return res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting subsector:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar subsetor\" });\n    }\n  });\n\n  app.get(\"/api/events\", async (req, res) => {\n    try {\n      const events = await storage.getAllEvents();\n      return res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching events:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar eventos\" });\n    }\n  });\n\n  app.get(\"/api/events/active\", async (req, res) => {\n    try {\n      const events = await storage.getActiveEvents();\n      return res.json(events);\n    } catch (error) {\n      console.error(\"Error fetching active events:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar eventos ativos\" });\n    }\n  });\n\n  app.get(\"/api/events/:id\", async (req, res) => {\n    try {\n      const event = await storage.getEvent(req.params.id);\n      if (!event) {\n        return res.status(404).json({ message: \"Evento não encontrado\" });\n      }\n      return res.json(event);\n    } catch (error) {\n      console.error(\"Error fetching event:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar evento\" });\n    }\n  });\n\n  app.post(\"/api/events\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const result = insertEventSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const event = await storage.createEvent(result.data);\n      return res.status(201).json(event);\n    } catch (error) {\n      console.error(\"Error creating event:\", error);\n      return res.status(500).json({ message: \"Erro ao criar evento\" });\n    }\n  });\n\n  app.patch(\"/api/events/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const event = await storage.updateEvent(req.params.id, req.body);\n      return res.json(event);\n    } catch (error) {\n      console.error(\"Error updating event:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar evento\" });\n    }\n  });\n\n  app.delete(\"/api/events/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      await storage.deleteEvent(req.params.id);\n      return res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting event:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar evento\" });\n    }\n  });\n\n  app.post(\"/api/events/upload-cover\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error getting upload URL for event cover:\", error);\n      return res.status(500).json({ message: \"Erro ao obter URL de upload\" });\n    }\n  });\n\n  app.post(\"/api/events/set-cover\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      if (!req.body.coverURL) {\n        return res.status(400).json({ message: \"coverURL é obrigatório\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      \n      let objectPath;\n      let retries = 3;\n      let lastError;\n\n      while (retries > 0) {\n        try {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          \n          objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n            req.body.coverURL,\n            {\n              owner: req.session.userId,\n              visibility: \"public\",\n            }\n          );\n          \n          break;\n        } catch (error) {\n          lastError = error;\n          retries--;\n          console.log(`Retry setting cover ACL, ${retries} retries remaining`);\n          if (retries === 0) {\n            throw lastError;\n          }\n        }\n      }\n\n      return res.json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting event cover ACL:\", error);\n      return res.status(500).json({ message: \"Erro ao processar imagem de capa\" });\n    }\n  });\n\n  app.get(\"/api/banners\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n      const banners = await storage.getAllBanners();\n      return res.json(banners);\n    } catch (error) {\n      console.error(\"Error fetching banners:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar banners\" });\n    }\n  });\n\n  app.get(\"/api/banners/active\", async (req, res) => {\n    try {\n      const banners = await storage.getActiveBanners();\n      return res.json(banners);\n    } catch (error) {\n      console.error(\"Error fetching active banners:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar banners ativos\" });\n    }\n  });\n\n  app.post(\"/api/banners\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const result = insertBannerSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const banner = await storage.createBanner(result.data);\n      return res.status(201).json(banner);\n    } catch (error) {\n      console.error(\"Error creating banner:\", error);\n      return res.status(500).json({ message: \"Erro ao criar banner\" });\n    }\n  });\n\n  app.patch(\"/api/banners/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const banner = await storage.updateBanner(req.params.id, req.body);\n      return res.json(banner);\n    } catch (error) {\n      console.error(\"Error updating banner:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar banner\" });\n    }\n  });\n\n  app.delete(\"/api/banners/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      await storage.deleteBanner(req.params.id);\n      return res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting banner:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar banner\" });\n    }\n  });\n\n  app.post(\"/api/banners/upload-image\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error getting upload URL for banner image:\", error);\n      return res.status(500).json({ message: \"Erro ao obter URL de upload\" });\n    }\n  });\n\n  app.post(\"/api/banners/set-image\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      if (!req.body.imageURL) {\n        return res.status(400).json({ message: \"imageURL é obrigatório\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      \n      let objectPath;\n      let retries = 3;\n      let lastError;\n\n      while (retries > 0) {\n        try {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          \n          objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n            req.body.imageURL,\n            {\n              owner: req.session.userId,\n              visibility: \"public\",\n            }\n          );\n          \n          break;\n        } catch (error) {\n          lastError = error;\n          retries--;\n          console.log(`Retry setting banner image ACL, ${retries} retries remaining`);\n          if (retries === 0) {\n            throw lastError;\n          }\n        }\n      }\n\n      return res.json({ objectPath });\n    } catch (error) {\n      console.error(\"Error setting banner image ACL:\", error);\n      return res.status(500).json({ message: \"Erro ao processar imagem do banner\" });\n    }\n  });\n\n  app.get(\"/api/settings\", async (req, res) => {\n    try {\n      const settingsData = await storage.getAllSettings();\n      const settingsMap: Record<string, string> = {};\n      settingsData.forEach(s => {\n        settingsMap[s.key] = s.value;\n      });\n      return res.json(settingsMap);\n    } catch (error) {\n      console.error(\"Error fetching settings:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar configurações\" });\n    }\n  });\n\n  app.post(\"/api/settings\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const { key, value } = req.body;\n      if (!key || value === undefined) {\n        return res.status(400).json({ message: \"key e value são obrigatórios\" });\n      }\n\n      const setting = await storage.upsertSetting({ key, value });\n      return res.json(setting);\n    } catch (error) {\n      console.error(\"Error upserting setting:\", error);\n      return res.status(500).json({ message: \"Erro ao salvar configuração\" });\n    }\n  });\n\n  app.get(\"/api/purchases\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const { startDate, endDate, clientId, minAmount, maxAmount } = req.query;\n\n      const filters: {\n        startDate?: string;\n        endDate?: string;\n        clientId?: string;\n        minAmount?: number;\n        maxAmount?: number;\n      } = {};\n\n      if (startDate) filters.startDate = startDate as string;\n      if (endDate) filters.endDate = endDate as string;\n      if (clientId) filters.clientId = clientId as string;\n      if (minAmount) filters.minAmount = parseFloat(minAmount as string);\n      if (maxAmount) filters.maxAmount = parseFloat(maxAmount as string);\n\n      const purchases = Object.keys(filters).length > 0 \n        ? await storage.getPurchasesWithFilters(filters)\n        : await storage.getAllPurchases();\n\n      return res.json(purchases);\n    } catch (error) {\n      console.error(\"Error fetching purchases:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vendas\" });\n    }\n  });\n\n  app.get(\"/api/purchases/stats\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const allPurchases = await storage.getAllPurchases();\n      \n      const totalRevenue = allPurchases.reduce((sum, p) => sum + parseFloat(p.amount), 0);\n      const totalSales = allPurchases.length;\n      const activePurchases = allPurchases.filter(p => p.status === 'active').length;\n      \n      const now = new Date();\n      const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n      const recentPurchases = allPurchases.filter(p => new Date(p.purchaseDate) >= thirtyDaysAgo);\n      const recentRevenue = recentPurchases.reduce((sum, p) => sum + parseFloat(p.amount), 0);\n\n      const clientPurchases = allPurchases.reduce((acc, p) => {\n        acc[p.clientId] = (acc[p.clientId] || 0) + 1;\n        return acc;\n      }, {} as Record<string, number>);\n      const totalClients = Object.keys(clientPurchases).length;\n\n      return res.json({\n        totalRevenue,\n        totalSales,\n        activePurchases,\n        totalClients,\n        recentRevenue,\n        recentSales: recentPurchases.length,\n      });\n    } catch (error) {\n      console.error(\"Error fetching purchase stats:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar estatísticas\" });\n    }\n  });\n\n  // Public endpoint - list all active jobs with company info\n  app.get(\"/api/public/jobs\", async (req, res) => {\n    try {\n      const jobs = await storage.getActiveJobs();\n      \n      // Enrich jobs with company information\n      const jobsWithCompany = await Promise.all(\n        jobs.map(async (job) => {\n          if (job.companyId) {\n            const company = await storage.getCompany(job.companyId);\n            return {\n              ...job,\n              companyName: company?.companyName,\n              companyLogo: company?.logoUrl,\n            };\n          }\n          return job;\n        })\n      );\n\n      return res.status(200).json(jobsWithCompany);\n    } catch (error) {\n      console.error(\"Error getting public jobs:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vagas\" });\n    }\n  });\n\n  app.get(\"/api/jobs\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      let jobs;\n      \n      if (req.session.userType === 'company') {\n        jobs = await storage.getJobsByCompany(req.session.userId);\n      } else if (req.session.userType === 'admin') {\n        jobs = await storage.getAllJobs();\n      } else {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      // Enrich jobs with application count\n      const jobsWithApplicationCount = await Promise.all(\n        jobs.map(async (job) => {\n          const applications = await storage.getApplicationsByJob(job.id);\n          return {\n            ...job,\n            applicationCount: applications.length,\n          };\n        })\n      );\n\n      return res.status(200).json(jobsWithApplicationCount);\n    } catch (error) {\n      console.error(\"Error getting jobs:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vagas\" });\n    }\n  });\n\n  app.get(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      const job = await storage.getJob(req.params.id);\n      \n      if (!job) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      // Get company information\n      let company = null;\n      if (job.companyId) {\n        company = await storage.getCompany(job.companyId);\n        if (company) {\n          // Remove sensitive data\n          const { password: _, ...companyWithoutPassword } = company;\n          company = companyWithoutPassword as any;\n        }\n      }\n\n      return res.status(200).json({ job, company });\n    } catch (error) {\n      console.error(\"Error getting job:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vaga\" });\n    }\n  });\n\n  app.post(\"/api/jobs/:id/increment-view\", async (req, res) => {\n    try {\n      const jobId = req.params.id;\n      const job = await storage.getJob(jobId);\n      \n      if (!job) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      await storage.incrementJobViewCount(jobId);\n      \n      return res.status(200).json({ success: true });\n    } catch (error) {\n      console.error(\"Error incrementing job view count:\", error);\n      return res.status(500).json({ message: \"Erro ao incrementar visualização\" });\n    }\n  });\n\n  app.post(\"/api/jobs\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      if (req.session.userType !== 'company') {\n        return res.status(403).json({ message: \"Apenas empresas podem criar vagas\" });\n      }\n\n      // Verificar se a empresa tem créditos suficientes\n      const companyCredits = await storage.getCompanyCredits(req.session.userId);\n      if (companyCredits < 1) {\n        return res.status(400).json({ \n          message: \"Créditos insuficientes. Adquira mais créditos para publicar vagas.\",\n          insufficientCredits: true\n        });\n      }\n\n      const result = insertJobSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const jobData = {\n        ...result.data,\n        companyId: req.session.userId,\n        clientId: null,\n      };\n\n      const job = await storage.createJob(jobData);\n\n      // Debitar 1 crédito da empresa\n      await storage.deductCreditsFromCompany(\n        req.session.userId,\n        1,\n        `Publicação da vaga: ${job.title}`,\n        job.id\n      );\n\n      return res.status(201).json(job);\n    } catch (error: any) {\n      console.error(\"Error creating job:\", error);\n      if (error.message && error.message.includes('Créditos insuficientes')) {\n        return res.status(400).json({ \n          message: error.message,\n          insufficientCredits: true\n        });\n      }\n      return res.status(500).json({ message: \"Erro ao criar vaga\" });\n    }\n  });\n\n  app.put(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingJob = await storage.getJob(req.params.id);\n      \n      if (!existingJob) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && existingJob.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar esta vaga\" });\n      }\n\n      if (req.session.userType === 'admin' && existingJob.clientId && existingJob.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar esta vaga\" });\n      }\n\n      const job = await storage.updateJob(req.params.id, req.body);\n      return res.status(200).json(job);\n    } catch (error) {\n      console.error(\"Error updating job:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar vaga\" });\n    }\n  });\n\n  // PATCH endpoint para edição completa (compatibilidade com frontend)\n  app.patch(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingJob = await storage.getJob(req.params.id);\n      \n      if (!existingJob) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      // Admin pode editar qualquer vaga\n      if (req.session.userType === 'admin') {\n        const job = await storage.updateJob(req.params.id, req.body);\n        return res.status(200).json(job);\n      }\n\n      // Company pode editar apenas suas próprias vagas\n      if (req.session.userType === 'company' && existingJob.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar esta vaga\" });\n      }\n\n      const job = await storage.updateJob(req.params.id, req.body);\n      return res.status(200).json(job);\n    } catch (error) {\n      console.error(\"Error updating job:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar vaga\" });\n    }\n  });\n\n  app.delete(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingJob = await storage.getJob(req.params.id);\n      \n      if (!existingJob) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && existingJob.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar esta vaga\" });\n      }\n\n      if (req.session.userType === 'admin' && existingJob.clientId && existingJob.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar esta vaga\" });\n      }\n\n      await storage.deleteJob(req.params.id);\n      return res.status(200).json({ message: \"Vaga deletada com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting job:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar vaga\" });\n    }\n  });\n\n  app.patch(\"/api/jobs/:id/status\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const { status } = req.body;\n\n      if (!status || !['active', 'suspended'].includes(status)) {\n        return res.status(400).json({ message: \"Status inválido. Use 'active' ou 'suspended'\" });\n      }\n\n      const existingJob = await storage.getJob(req.params.id);\n      \n      if (!existingJob) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && existingJob.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para alterar esta vaga\" });\n      }\n\n      if (req.session.userType === 'admin' && existingJob.clientId && existingJob.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para alterar esta vaga\" });\n      }\n\n      const updatedJob = await storage.updateJob(req.params.id, { status });\n      return res.status(200).json(updatedJob);\n    } catch (error) {\n      console.error(\"Error updating job status:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar status da vaga\" });\n    }\n  });\n\n  // Applications endpoints\n  app.post(\"/api/applications\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem se candidatar a vagas\" });\n      }\n\n      const { jobId, answers } = req.body;\n\n      if (!jobId) {\n        return res.status(400).json({ message: \"jobId é obrigatório\" });\n      }\n\n      // Check if operator profile is complete\n      const profileCheck = await storage.isOperatorProfileComplete(req.session.userId);\n      if (!profileCheck.complete) {\n        return res.status(400).json({ \n          message: \"Seu perfil está incompleto. Complete seu perfil para se candidatar a vagas.\",\n          profileIncomplete: true,\n          missingFields: profileCheck.missingFields\n        });\n      }\n\n      // Check if job exists\n      const job = await storage.getJob(jobId);\n      if (!job) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      // Check if already applied\n      const existingApplication = await storage.checkExistingApplication(jobId, req.session.userId);\n      if (existingApplication) {\n        return res.status(400).json({ message: \"Você já se candidatou a esta vaga\" });\n      }\n\n      const application = await storage.createApplication({\n        jobId,\n        operatorId: req.session.userId,\n        status: 'pending',\n      });\n\n      // Save answers if provided\n      if (answers && typeof answers === 'object') {\n        for (const [questionId, answerText] of Object.entries(answers)) {\n          if (typeof answerText === 'string' && answerText.trim()) {\n            await storage.createApplicationAnswer({\n              applicationId: application.id,\n              questionId,\n              answerText: answerText.trim(),\n            });\n          }\n        }\n      }\n\n      return res.status(201).json(application);\n    } catch (error) {\n      console.error(\"Error creating application:\", error);\n      return res.status(500).json({ message: \"Erro ao se candidatar à vaga\" });\n    }\n  });\n\n  app.get(\"/api/applications/check/:jobId\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const application = await storage.checkExistingApplication(req.params.jobId, req.session.userId);\n      return res.status(200).json({ hasApplied: !!application });\n    } catch (error) {\n      console.error(\"Error checking application:\", error);\n      return res.status(500).json({ message: \"Erro ao verificar candidatura\" });\n    }\n  });\n\n  app.get(\"/api/jobs/:jobId/applications\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Apenas empresas podem ver candidatos\" });\n      }\n\n      const jobId = req.params.jobId;\n      \n      // Verify the job belongs to the company (unless admin)\n      if (req.session.userType === 'company') {\n        const job = await storage.getJob(jobId);\n        if (!job) {\n          return res.status(404).json({ message: \"Vaga não encontrada\" });\n        }\n        if (job.companyId !== req.session.userId && job.clientId !== req.session.userId) {\n          return res.status(403).json({ message: \"Você não tem permissão para ver candidatos desta vaga\" });\n        }\n      }\n\n      const applicationsWithOperators = await storage.getApplicationsWithOperatorByJob(jobId);\n      return res.status(200).json(applicationsWithOperators);\n    } catch (error) {\n      console.error(\"Error fetching job applications:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar candidatos\" });\n    }\n  });\n\n  // Saved Jobs Routes\n  app.post(\"/api/jobs/:id/save\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem salvar vagas\" });\n      }\n\n      const jobId = req.params.id;\n      const operatorId = req.session.userId;\n\n      // Check if job exists\n      const job = await storage.getJob(jobId);\n      if (!job) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      // Check if already saved\n      const alreadySaved = await storage.checkIfJobIsSaved(operatorId, jobId);\n      if (alreadySaved) {\n        return res.status(400).json({ message: \"Vaga já está salva\" });\n      }\n\n      const savedJob = await storage.saveJob(operatorId, jobId);\n      return res.status(201).json(savedJob);\n    } catch (error) {\n      console.error(\"Error saving job:\", error);\n      return res.status(500).json({ message: \"Erro ao salvar vaga\" });\n    }\n  });\n\n  app.delete(\"/api/jobs/:id/save\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem remover vagas salvas\" });\n      }\n\n      const jobId = req.params.id;\n      const operatorId = req.session.userId;\n\n      await storage.unsaveJob(operatorId, jobId);\n      return res.status(200).json({ message: \"Vaga removida dos favoritos\" });\n    } catch (error) {\n      console.error(\"Error unsaving job:\", error);\n      return res.status(500).json({ message: \"Erro ao remover vaga dos favoritos\" });\n    }\n  });\n\n  app.get(\"/api/jobs/:id/is-saved\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(200).json({ isSaved: false });\n      }\n\n      const jobId = req.params.id;\n      const operatorId = req.session.userId;\n\n      const isSaved = await storage.checkIfJobIsSaved(operatorId, jobId);\n      return res.status(200).json({ isSaved });\n    } catch (error) {\n      console.error(\"Error checking if job is saved:\", error);\n      return res.status(500).json({ message: \"Erro ao verificar vaga salva\" });\n    }\n  });\n\n  app.get(\"/api/operator/saved-jobs\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem ver vagas salvas\" });\n      }\n\n      const operatorId = req.session.userId;\n      const savedJobs = await storage.getSavedJobsByOperator(operatorId);\n      return res.status(200).json(savedJobs);\n    } catch (error) {\n      console.error(\"Error fetching saved jobs:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vagas salvas\" });\n    }\n  });\n\n  app.get(\"/api/operator/applications\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem ver suas candidaturas\" });\n      }\n\n      const operatorId = req.session.userId;\n      const applications = await storage.getApplicationsWithJobByOperator(operatorId);\n      return res.status(200).json(applications);\n    } catch (error) {\n      console.error(\"Error fetching operator applications:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar candidaturas\" });\n    }\n  });\n\n  app.post(\"/api/companies/purchase-plan\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const { planId } = req.body;\n\n      if (!planId) {\n        return res.status(400).json({ message: \"ID do plano é obrigatório\" });\n      }\n\n      const company = await storage.getCompany(req.session.userId);\n      if (!company) {\n        return res.status(404).json({ message: \"Empresa não encontrada\" });\n      }\n\n      const plan = await storage.getPlan(planId);\n      if (!plan) {\n        return res.status(404).json({ message: \"Plano não encontrado\" });\n      }\n\n      if (plan.isActive !== 'true') {\n        return res.status(400).json({ message: \"Este plano não está mais disponível\" });\n      }\n\n      let client = await storage.getClientByCnpj(company.cnpj);\n      \n      if (!client) {\n        client = await storage.createClient({\n          companyName: company.companyName,\n          cnpj: company.cnpj,\n          email: company.email,\n          phone: company.phone,\n          website: company.website || '',\n          contactName: company.companyName,\n          contactEmail: company.email,\n          contactPhone: company.phone,\n          primaryColor: '#8b5cf6',\n          secondaryColor: '#a78bfa',\n          accentColor: '#c4b5fd',\n          isActive: 'true',\n        });\n      }\n\n      const purchaseDate = new Date().toISOString();\n      const expiryDate = new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString();\n\n      const purchase = await storage.createPurchase({\n        clientId: client.id,\n        planId: plan.id,\n        purchaseDate,\n        expiryDate,\n        amount: plan.price,\n        status: 'active',\n      });\n\n      const creditsToAdd = parseInt(plan.vacancyQuantity);\n      \n      await storage.addCreditsToCompany(\n        company.id,\n        creditsToAdd,\n        `Créditos do plano ${plan.name}`,\n        plan.id\n      );\n\n      return res.status(201).json({ \n        message: \"Plano adquirido com sucesso\",\n        purchase,\n        creditsAdded: creditsToAdd\n      });\n    } catch (error) {\n      console.error(\"Error purchasing plan:\", error);\n      return res.status(500).json({ message: \"Erro ao adquirir plano\" });\n    }\n  });\n\n  app.get(\"/api/companies/my-purchases\", async (req, res) => {\n    try {\n      if (!req.session.userId) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      if (req.session.userType !== 'company') {\n        return res.status(403).json({ message: \"Acesso negado\" });\n      }\n\n      const company = await storage.getCompany(req.session.userId);\n      if (!company) {\n        return res.status(404).json({ message: \"Empresa não encontrada\" });\n      }\n\n      const client = await storage.getClientByCnpj(company.cnpj);\n      \n      if (!client) {\n        return res.status(200).json([]);\n      }\n\n      const purchases = await storage.getPurchasesByClient(client.id);\n      \n      const purchasesWithPlans = await Promise.all(\n        purchases.map(async (purchase) => {\n          const plan = await storage.getPlan(purchase.planId);\n          return {\n            ...purchase,\n            plan,\n          };\n        })\n      );\n\n      return res.status(200).json(purchasesWithPlans);\n    } catch (error) {\n      console.error(\"Error getting company purchases:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar planos\" });\n    }\n  });\n\n  // Public endpoint - track visit to home page\n  // Only counts if user doesn't have a valid cookie (30 minutes expiration)\n  app.post(\"/api/track-visit\", async (req, res) => {\n    try {\n      // Check if user has already been tracked in the last 30 minutes\n      const hasVisitCookie = req.cookies?.visit_tracked === 'true';\n      \n      // Get IP address\n      const ipAddress = (req.headers['x-forwarded-for'] as string)?.split(',')[0] || \n                        req.socket.remoteAddress || \n                        'unknown';\n      \n      // Get geolocation from IP\n      let country = null;\n      let city = null;\n      let region = null;\n      \n      if (ipAddress && ipAddress !== 'unknown' && ipAddress !== '::1' && !ipAddress.startsWith('127.')) {\n        try {\n          const geoip = (await import('geoip-lite')).default;\n          const geo = geoip.lookup(ipAddress);\n          if (geo) {\n            country = geo.country || null;\n            city = null; // geoip-lite doesn't provide city in free version\n            region = geo.region || null;\n          }\n        } catch (geoError) {\n          console.error('Error getting geolocation:', geoError);\n        }\n      }\n      \n      // Always save visit details to database\n      const userAgent = req.headers['user-agent'] || null;\n      await storage.createSiteVisit({\n        ipAddress: ipAddress || 'unknown',\n        country,\n        city,\n        region,\n        userAgent,\n      });\n      \n      if (hasVisitCookie) {\n        // User already counted, don't increment\n        return res.status(200).json({ \n          counted: false,\n          message: \"Visita já registrada\" \n        });\n      }\n      \n      // Increment counter and set cookie\n      const totalVisits = await storage.incrementVisitCounter();\n      \n      // Set cookie to expire in 30 minutes (1800000 milliseconds)\n      res.cookie('visit_tracked', 'true', {\n        maxAge: 30 * 60 * 1000, // 30 minutes in milliseconds\n        httpOnly: true, // Prevent JavaScript access (security)\n        sameSite: 'lax', // CSRF protection\n      });\n      \n      return res.status(200).json({ \n        counted: true,\n        totalVisits \n      });\n    } catch (error) {\n      console.error(\"Error tracking visit:\", error);\n      return res.status(500).json({ message: \"Erro ao registrar visita\" });\n    }\n  });\n\n  // Admin endpoint - get all jobs\n  app.get(\"/api/admin/jobs\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const jobs = await storage.getAllJobsWithCompany();\n      return res.status(200).json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching all jobs:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar vagas\" });\n    }\n  });\n\n  // Admin endpoint - get visit statistics\n  app.get(\"/api/admin/visit-stats\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const stats = await storage.getVisitStats();\n      return res.status(200).json(stats);\n    } catch (error) {\n      console.error(\"Error getting visit stats:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar estatísticas\" });\n    }\n  });\n\n  // Admin endpoint - get all site visits with details\n  app.get(\"/api/admin/site-visits\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const visits = await storage.getAllSiteVisits();\n      return res.status(200).json(visits);\n    } catch (error) {\n      console.error(\"Error getting site visits:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar visitas\" });\n    }\n  });\n\n  // Questions endpoints\n  app.get(\"/api/company/questions\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      let questions;\n      if (req.session.userType === 'company') {\n        questions = await storage.getQuestionsByCompany(req.session.userId);\n      } else {\n        questions = await storage.getQuestionsByClient(req.session.userId);\n      }\n\n      return res.status(200).json(questions);\n    } catch (error) {\n      console.error(\"Error fetching questions:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar perguntas\" });\n    }\n  });\n\n  app.post(\"/api/company/questions\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const result = insertQuestionSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      let questionData = result.data;\n      if (req.session.userType === 'company') {\n        questionData = { ...questionData, companyId: req.session.userId, clientId: null };\n      } else {\n        questionData = { ...questionData, clientId: req.session.userId, companyId: null };\n      }\n\n      const question = await storage.createQuestion(questionData);\n      return res.status(201).json(question);\n    } catch (error) {\n      console.error(\"Error creating question:\", error);\n      return res.status(500).json({ message: \"Erro ao criar pergunta\" });\n    }\n  });\n\n  app.patch(\"/api/company/questions/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingQuestion = await storage.getQuestion(req.params.id);\n      if (!existingQuestion) {\n        return res.status(404).json({ message: \"Pergunta não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && existingQuestion.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar esta pergunta\" });\n      }\n\n      if (req.session.userType === 'admin' && existingQuestion.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar esta pergunta\" });\n      }\n\n      const question = await storage.updateQuestion(req.params.id, req.body);\n      return res.status(200).json(question);\n    } catch (error) {\n      console.error(\"Error updating question:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar pergunta\" });\n    }\n  });\n\n  app.delete(\"/api/company/questions/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingQuestion = await storage.getQuestion(req.params.id);\n      if (!existingQuestion) {\n        return res.status(404).json({ message: \"Pergunta não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && existingQuestion.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar esta pergunta\" });\n      }\n\n      if (req.session.userType === 'admin' && existingQuestion.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar esta pergunta\" });\n      }\n\n      await storage.deleteQuestion(req.params.id);\n      return res.status(200).json({ message: \"Pergunta deletada com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting question:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar pergunta\" });\n    }\n  });\n\n  // Work Types endpoints\n  app.get(\"/api/company/work-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const workTypes = await storage.getWorkTypesByCompany(req.session.userId);\n      return res.status(200).json(workTypes);\n    } catch (error) {\n      console.error(\"Error fetching work types:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar tipos de trabalho\" });\n    }\n  });\n\n  app.post(\"/api/company/work-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const workType = await storage.createWorkType({\n        ...req.body,\n        companyId: req.session.userId,\n      });\n      return res.status(201).json(workType);\n    } catch (error) {\n      console.error(\"Error creating work type:\", error);\n      return res.status(500).json({ message: \"Erro ao criar tipo de trabalho\" });\n    }\n  });\n\n  app.patch(\"/api/company/work-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingWorkType = await storage.getWorkType(req.params.id);\n      if (!existingWorkType) {\n        return res.status(404).json({ message: \"Tipo de trabalho não encontrado\" });\n      }\n\n      if (existingWorkType.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar este tipo de trabalho\" });\n      }\n\n      const workType = await storage.updateWorkType(req.params.id, req.body);\n      return res.status(200).json(workType);\n    } catch (error) {\n      console.error(\"Error updating work type:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar tipo de trabalho\" });\n    }\n  });\n\n  app.delete(\"/api/company/work-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingWorkType = await storage.getWorkType(req.params.id);\n      if (!existingWorkType) {\n        return res.status(404).json({ message: \"Tipo de trabalho não encontrado\" });\n      }\n\n      if (existingWorkType.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar este tipo de trabalho\" });\n      }\n\n      await storage.deleteWorkType(req.params.id);\n      return res.status(200).json({ message: \"Tipo de trabalho deletado com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting work type:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar tipo de trabalho\" });\n    }\n  });\n\n  // Contract Types endpoints\n  app.get(\"/api/company/contract-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const contractTypes = await storage.getContractTypesByCompany(req.session.userId);\n      return res.status(200).json(contractTypes);\n    } catch (error) {\n      console.error(\"Error fetching contract types:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar tipos de contrato\" });\n    }\n  });\n\n  app.post(\"/api/company/contract-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const contractType = await storage.createContractType({\n        ...req.body,\n        companyId: req.session.userId,\n      });\n      return res.status(201).json(contractType);\n    } catch (error) {\n      console.error(\"Error creating contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao criar tipo de contrato\" });\n    }\n  });\n\n  app.patch(\"/api/company/contract-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingContractType = await storage.getContractType(req.params.id);\n      if (!existingContractType) {\n        return res.status(404).json({ message: \"Tipo de contrato não encontrado\" });\n      }\n\n      if (existingContractType.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para editar este tipo de contrato\" });\n      }\n\n      const contractType = await storage.updateContractType(req.params.id, req.body);\n      return res.status(200).json(contractType);\n    } catch (error) {\n      console.error(\"Error updating contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar tipo de contrato\" });\n    }\n  });\n\n  app.delete(\"/api/company/contract-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingContractType = await storage.getContractType(req.params.id);\n      if (!existingContractType) {\n        return res.status(404).json({ message: \"Tipo de contrato não encontrado\" });\n      }\n\n      if (existingContractType.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para deletar este tipo de contrato\" });\n      }\n\n      await storage.deleteContractType(req.params.id);\n      return res.status(200).json({ message: \"Tipo de contrato deletado com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar tipo de contrato\" });\n    }\n  });\n\n  // Tags endpoints (GET is public for authenticated users, others admin only)\n  app.get(\"/api/admin/tags\", async (req, res) => {\n    try {\n      // Allow any authenticated user to read tags\n      const tags = await storage.getAllTags();\n      return res.status(200).json(tags);\n    } catch (error) {\n      console.error(\"Error fetching tags:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar tags\" });\n    }\n  });\n\n  app.post(\"/api/admin/tags\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const tag = await storage.createTag(req.body);\n      return res.status(201).json(tag);\n    } catch (error) {\n      console.error(\"Error creating tag:\", error);\n      return res.status(500).json({ message: \"Erro ao criar tag\" });\n    }\n  });\n\n  app.patch(\"/api/admin/tags/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingTag = await storage.getTag(req.params.id);\n      if (!existingTag) {\n        return res.status(404).json({ message: \"Tag não encontrada\" });\n      }\n\n      const tag = await storage.updateTag(req.params.id, req.body);\n      return res.status(200).json(tag);\n    } catch (error) {\n      console.error(\"Error updating tag:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar tag\" });\n    }\n  });\n\n  app.delete(\"/api/admin/tags/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingTag = await storage.getTag(req.params.id);\n      if (!existingTag) {\n        return res.status(404).json({ message: \"Tag não encontrada\" });\n      }\n\n      await storage.deleteTag(req.params.id);\n      return res.status(200).json({ message: \"Tag deletada com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting tag:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar tag\" });\n    }\n  });\n\n  // Global Work Types endpoints (GET is public for authenticated users, others admin only)\n  app.get(\"/api/admin/global-work-types\", async (req, res) => {\n    try {\n      // Allow any authenticated user to read work types\n      const workTypes = await storage.getAllGlobalWorkTypes();\n      return res.status(200).json(workTypes);\n    } catch (error) {\n      console.error(\"Error fetching global work types:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar tipos de trabalho\" });\n    }\n  });\n\n  app.post(\"/api/admin/global-work-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const workType = await storage.createGlobalWorkType(req.body);\n      return res.status(201).json(workType);\n    } catch (error) {\n      console.error(\"Error creating global work type:\", error);\n      return res.status(500).json({ message: \"Erro ao criar tipo de trabalho\" });\n    }\n  });\n\n  app.patch(\"/api/admin/global-work-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingWorkType = await storage.getGlobalWorkType(req.params.id);\n      if (!existingWorkType) {\n        return res.status(404).json({ message: \"Tipo de trabalho não encontrado\" });\n      }\n\n      const workType = await storage.updateGlobalWorkType(req.params.id, req.body);\n      return res.status(200).json(workType);\n    } catch (error) {\n      console.error(\"Error updating global work type:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar tipo de trabalho\" });\n    }\n  });\n\n  app.delete(\"/api/admin/global-work-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingWorkType = await storage.getGlobalWorkType(req.params.id);\n      if (!existingWorkType) {\n        return res.status(404).json({ message: \"Tipo de trabalho não encontrado\" });\n      }\n\n      await storage.deleteGlobalWorkType(req.params.id);\n      return res.status(200).json({ message: \"Tipo de trabalho deletado com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting global work type:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar tipo de trabalho\" });\n    }\n  });\n\n  // Global Contract Types endpoints (GET is public for authenticated users, others admin only)\n  app.get(\"/api/admin/global-contract-types\", async (req, res) => {\n    try {\n      // Allow any authenticated user to read contract types\n      const contractTypes = await storage.getAllGlobalContractTypes();\n      return res.status(200).json(contractTypes);\n    } catch (error) {\n      console.error(\"Error fetching global contract types:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar tipos de contrato\" });\n    }\n  });\n\n  app.post(\"/api/admin/global-contract-types\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const contractType = await storage.createGlobalContractType(req.body);\n      return res.status(201).json(contractType);\n    } catch (error) {\n      console.error(\"Error creating global contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao criar tipo de contrato\" });\n    }\n  });\n\n  app.patch(\"/api/admin/global-contract-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingContractType = await storage.getGlobalContractType(req.params.id);\n      if (!existingContractType) {\n        return res.status(404).json({ message: \"Tipo de contrato não encontrado\" });\n      }\n\n      const contractType = await storage.updateGlobalContractType(req.params.id, req.body);\n      return res.status(200).json(contractType);\n    } catch (error) {\n      console.error(\"Error updating global contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao atualizar tipo de contrato\" });\n    }\n  });\n\n  app.delete(\"/api/admin/global-contract-types/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const existingContractType = await storage.getGlobalContractType(req.params.id);\n      if (!existingContractType) {\n        return res.status(404).json({ message: \"Tipo de contrato não encontrado\" });\n      }\n\n      await storage.deleteGlobalContractType(req.params.id);\n      return res.status(200).json({ message: \"Tipo de contrato deletado com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting global contract type:\", error);\n      return res.status(500).json({ message: \"Erro ao deletar tipo de contrato\" });\n    }\n  });\n\n  // Credits endpoints\n  app.get(\"/api/company/credits\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const balance = await storage.getCompanyCredits(req.session.userId);\n      return res.status(200).json(balance);\n    } catch (error) {\n      console.error(\"Error fetching company credits:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar créditos\" });\n    }\n  });\n\n  app.get(\"/api/company/credit-transactions\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const transactions = await storage.getCreditTransactionsByCompany(req.session.userId);\n      return res.status(200).json(transactions);\n    } catch (error) {\n      console.error(\"Error fetching credit transactions:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar transações\" });\n    }\n  });\n\n  app.post(\"/api/company/credits/add\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'company') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const { amount, description, relatedPlanId } = req.body;\n\n      if (!amount || amount <= 0) {\n        return res.status(400).json({ message: \"Valor inválido\" });\n      }\n\n      if (!description) {\n        return res.status(400).json({ message: \"Descrição é obrigatória\" });\n      }\n\n      const transaction = await storage.addCreditsToCompany(\n        req.session.userId,\n        Number(amount),\n        description,\n        relatedPlanId\n      );\n\n      return res.status(201).json(transaction);\n    } catch (error) {\n      console.error(\"Error adding credits:\", error);\n      return res.status(500).json({ message: \"Erro ao adicionar créditos\" });\n    }\n  });\n\n  // Job Questions endpoints\n  app.get(\"/api/jobs/:jobId/questions\", async (req, res) => {\n    try {\n      const jobQuestions = await storage.getJobQuestionsByJob(req.params.jobId);\n      // Include isRequired field from jobQuestions along with question data\n      const questionsWithRequired = jobQuestions.map(jq => ({\n        ...jq.question,\n        isRequired: jq.isRequired\n      }));\n      return res.status(200).json(questionsWithRequired);\n    } catch (error) {\n      console.error(\"Error fetching job questions:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar perguntas da vaga\" });\n    }\n  });\n\n  app.post(\"/api/jobs/:jobId/questions\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const job = await storage.getJob(req.params.jobId);\n      if (!job) {\n        return res.status(404).json({ message: \"Vaga não encontrada\" });\n      }\n\n      if (req.session.userType === 'company' && job.companyId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para adicionar perguntas a esta vaga\" });\n      }\n\n      if (req.session.userType === 'admin' && job.clientId !== req.session.userId) {\n        return res.status(403).json({ message: \"Você não tem permissão para adicionar perguntas a esta vaga\" });\n      }\n\n      const { questionIds } = req.body;\n      \n      console.log(\"Received questionIds:\", questionIds, \"Type:\", typeof questionIds, \"Is Array:\", Array.isArray(questionIds));\n\n      if (!Array.isArray(questionIds)) {\n        console.error(\"questionIds is not an array:\", questionIds);\n        return res.status(400).json({ message: \"questionIds deve ser um array\" });\n      }\n\n      // Se não houver perguntas, retorna array vazio sem erro\n      if (questionIds.length === 0) {\n        console.log(\"No questions to add, returning empty array\");\n        return res.status(201).json([]);\n      }\n      \n      console.log(\"Processing\", questionIds.length, \"questions\");\n\n      const createdJobQuestions = [];\n      for (let i = 0; i < questionIds.length; i++) {\n        const questionId = questionIds[i];\n        const result = insertJobQuestionSchema.safeParse({\n          jobId: req.params.jobId,\n          questionId,\n          displayOrder: String(i + 1), // Converter para string\n        });\n        \n        if (!result.success) {\n          console.error(\"Validation error for question:\", result.error);\n          return res.status(400).json({ \n            message: fromZodError(result.error).message \n          });\n        }\n\n        const jobQuestion = await storage.createJobQuestion(result.data);\n        createdJobQuestions.push(jobQuestion);\n      }\n\n      return res.status(201).json(createdJobQuestions);\n    } catch (error) {\n      console.error(\"Error creating job question:\", error);\n      return res.status(500).json({ message: \"Erro ao adicionar pergunta à vaga\" });\n    }\n  });\n\n  app.delete(\"/api/job-questions/:id\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const jobQuestion = await storage.getJobQuestion(req.params.id);\n      if (!jobQuestion) {\n        return res.status(404).json({ message: \"Associação não encontrada\" });\n      }\n\n      await storage.deleteJobQuestion(req.params.id);\n      return res.status(200).json({ message: \"Pergunta removida da vaga com sucesso\" });\n    } catch (error) {\n      console.error(\"Error deleting job question:\", error);\n      return res.status(500).json({ message: \"Erro ao remover pergunta da vaga\" });\n    }\n  });\n\n  // Application Answers endpoints\n  app.get(\"/api/applications/:applicationId/answers\", async (req, res) => {\n    try {\n      if (!req.session.userId || (req.session.userType !== 'company' && req.session.userType !== 'admin' && req.session.userType !== 'operator')) {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const answers = await storage.getApplicationAnswersByApplication(req.params.applicationId);\n      return res.status(200).json(answers);\n    } catch (error) {\n      console.error(\"Error fetching application answers:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar respostas\" });\n    }\n  });\n\n  app.post(\"/api/applications/:applicationId/answers\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'operator') {\n        return res.status(401).json({ message: \"Apenas operadores podem enviar respostas\" });\n      }\n\n      const { answers } = req.body;\n\n      if (!Array.isArray(answers)) {\n        return res.status(400).json({ message: \"Respostas devem ser um array\" });\n      }\n\n      const createdAnswers = [];\n      for (const answer of answers) {\n        const result = insertApplicationAnswerSchema.safeParse({\n          ...answer,\n          applicationId: req.params.applicationId,\n        });\n        \n        if (!result.success) {\n          return res.status(400).json({ \n            message: fromZodError(result.error).message \n          });\n        }\n\n        const createdAnswer = await storage.createApplicationAnswer(result.data);\n        createdAnswers.push(createdAnswer);\n      }\n\n      return res.status(201).json(createdAnswers);\n    } catch (error) {\n      console.error(\"Error creating application answers:\", error);\n      return res.status(500).json({ message: \"Erro ao salvar respostas\" });\n    }\n  });\n\n  // Newsletter subscription endpoint (public)\n  app.post(\"/api/newsletter/subscribe\", async (req, res) => {\n    try {\n      const result = insertNewsletterSubscriptionSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          message: fromZodError(result.error).message \n        });\n      }\n\n      const subscription = await storage.subscribeToNewsletter(result.data.email);\n      return res.status(201).json({ \n        message: \"Inscrição realizada com sucesso!\",\n        subscription \n      });\n    } catch (error) {\n      console.error(\"Error subscribing to newsletter:\", error);\n      return res.status(500).json({ message: \"Erro ao realizar inscrição\" });\n    }\n  });\n\n  // Get all newsletter subscriptions (admin only)\n  app.get(\"/api/admin/newsletter-subscriptions\", async (req, res) => {\n    try {\n      if (!req.session.userId || req.session.userType !== 'admin') {\n        return res.status(401).json({ message: \"Não autorizado\" });\n      }\n\n      const subscriptions = await storage.getAllNewsletterSubscriptions();\n      return res.status(200).json(subscriptions);\n    } catch (error) {\n      console.error(\"Error fetching newsletter subscriptions:\", error);\n      return res.status(500).json({ message: \"Erro ao buscar inscrições\" });\n    }\n  });\n\n  // Serve static files from attached_assets directory\n  app.use('/attached_assets', express.static(path.join(process.cwd(), 'attached_assets')));\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":110219},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\nexport function ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"theme\") as \"light\" | \"dark\" | null;\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    const initialTheme = stored || (prefersDark ? \"dark\" : \"light\");\n    setTheme(initialTheme);\n    document.documentElement.classList.toggle(\"dark\", initialTheme === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"h-5 w-5\" />\n      ) : (\n        <Sun className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n","size_bytes":1124},"client/src/pages/OperatorDashboard.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  HardHat, \n  Briefcase, \n  FileText, \n  Bookmark, \n  Settings,\n  User,\n  Bell,\n  TrendingUp,\n  CheckCircle2,\n  AlertCircle,\n  Clock,\n  Building2,\n  MapPin,\n  ExternalLink\n} from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useEffect, useMemo } from \"react\";\nimport type { Operator, Application, SavedJob, Job, Company } from \"@shared/schema\";\n\nexport default function OperatorDashboard() {\n  const [, setLocation] = useLocation();\n  const { user, userType, isLoading, isAuthenticated } = useAuth();\n\n  // Fetch saved jobs\n  const { data: savedJobs = [] } = useQuery<Array<SavedJob & { job: Job }>>({\n    queryKey: ['/api/operator/saved-jobs'],\n    enabled: isAuthenticated && userType === 'operator',\n  });\n\n  // Fetch applications with job details\n  const { data: applications = [] } = useQuery<Array<Application & { job: Job & { company: Company } }>>({\n    queryKey: ['/api/operator/applications'],\n    enabled: isAuthenticated && userType === 'operator',\n  });\n\n  useEffect(() => {\n    if (!isLoading && (!isAuthenticated || userType !== 'operator')) {\n      setLocation(\"/login\");\n    }\n  }, [isLoading, isAuthenticated, userType, setLocation]);\n\n  const profileCompletion = useMemo(() => {\n    if (!user || userType !== 'operator') return { percentage: 0, missing: [], isComplete: false };\n    \n    const operatorUser = user as Operator;\n    \n    const fields = [\n      { name: 'birthDate', label: 'Data de Nascimento', value: operatorUser.birthDate },\n      { name: 'experienceYears', label: 'Anos de Experiência', value: operatorUser.experienceYears },\n      { name: 'certifications', label: 'Certificações', value: operatorUser.certifications },\n      { name: 'availability', label: 'Disponibilidade', value: operatorUser.availability },\n      { name: 'preferredLocation', label: 'Localização Preferida', value: operatorUser.preferredLocation },\n      { name: 'workType', label: 'Tipo de Trabalho', value: operatorUser.workType },\n      { name: 'skills', label: 'Habilidades', value: operatorUser.skills },\n      { name: 'bio', label: 'Sobre Você', value: operatorUser.bio },\n      { name: 'profilePhotoUrl', label: 'Foto de Perfil', value: operatorUser.profilePhotoUrl },\n    ];\n    \n    const totalFields = fields.length + 6; // 6 campos obrigatórios sempre preenchidos\n    const filledOptionalFields = fields.filter(field => field.value && field.value.trim() !== '').length;\n    const totalFilledFields = 6 + filledOptionalFields; // 6 obrigatórios + opcionais preenchidos\n    \n    const percentage = Math.round((totalFilledFields / totalFields) * 100);\n    const missing = fields.filter(field => !field.value || field.value.trim() === '');\n    const isComplete = percentage === 100;\n    \n    return { percentage, missing, isComplete };\n  }, [user, userType]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated || userType !== 'operator') {\n    return null;\n  }\n\n  // Count responses from companies (accepted/rejected applications)\n  const responsesCount = applications.filter(\n    app => app.status === 'accepted' || app.status === 'rejected'\n  ).length;\n  \n  const stats = [\n    {\n      title: \"Candidaturas Enviadas\",\n      value: applications.length.toString(),\n      icon: FileText,\n      description: \"Total de candidaturas\",\n      trend: null,\n    },\n    {\n      title: \"Vagas Salvas\",\n      value: savedJobs.length.toString(),\n      icon: Bookmark,\n      description: \"Vagas de interesse\",\n      trend: null,\n    },\n    {\n      title: \"Visualizações do Perfil\",\n      value: \"0\",\n      icon: TrendingUp,\n      description: \"Empresas que viram seu perfil\",\n      trend: null,\n    },\n    {\n      title: \"Respostas Recebidas\",\n      value: responsesCount.toString(),\n      icon: CheckCircle2,\n      description: \"Retorno das empresas\",\n      trend: null,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-8 px-4 bg-background\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8\">\n            <div>\n              <h1 className=\"font-heading font-bold text-3xl mb-2\">\n                Meu Dashboard\n              </h1>\n              <p className=\"text-muted-foreground\">\n                Acompanhe suas candidaturas e oportunidades\n              </p>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <Button variant=\"outline\" data-testid=\"button-settings\">\n                <Settings className=\"mr-2 h-5 w-5\" />\n                Configurações\n              </Button>\n              <Button onClick={() => setLocation(\"/perfil/operador\")} data-testid=\"button-edit-profile\">\n                <User className=\"mr-2 h-5 w-5\" />\n                Editar Perfil\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            {stats.map((stat) => (\n              <Card key={stat.title} data-testid={`stat-${stat.title.toLowerCase().replace(/\\s/g, '-')}`}>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                    {stat.title}\n                  </CardTitle>\n                  <stat.icon className=\"h-5 w-5 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{stat.value}</div>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {stat.description}\n                  </p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Minhas Candidaturas</CardTitle>\n                <CardDescription>\n                  Acompanhe o status das suas candidaturas\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {applications.length === 0 ? (\n                  <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                    <Briefcase className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                    <h3 className=\"font-semibold text-lg mb-2\">\n                      Nenhuma candidatura ainda\n                    </h3>\n                    <p className=\"text-muted-foreground mb-6 max-w-sm\">\n                      Comece a explorar as vagas disponíveis e candidate-se às oportunidades que combinam com você\n                    </p>\n                    <Button onClick={() => setLocation(\"/vagas\")} data-testid=\"button-browse-jobs\">\n                      <Briefcase className=\"mr-2 h-5 w-5\" />\n                      Explorar Vagas\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {applications.filter(app => app.job).slice(0, 5).map((application) => (\n                      <div \n                        key={application.id}\n                        className=\"border rounded-lg p-4 hover-elevate transition-all cursor-pointer\"\n                        onClick={() => setLocation(`/vaga/${application.jobId}`)}\n                        data-testid={`application-${application.id}`}\n                      >\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <h3 className=\"font-semibold text-lg truncate\">\n                                {application.job.title}\n                              </h3>\n                              <Badge \n                                variant={\n                                  application.status === 'pending' ? 'secondary' :\n                                  application.status === 'accepted' ? 'default' :\n                                  application.status === 'rejected' ? 'destructive' :\n                                  'outline'\n                                }\n                                data-testid={`status-${application.id}`}\n                              >\n                                {application.status === 'pending' ? 'Pendente' :\n                                 application.status === 'accepted' ? 'Aceita' :\n                                 application.status === 'rejected' ? 'Rejeitada' :\n                                 application.status}\n                              </Badge>\n                            </div>\n                            \n                            <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-2\">\n                              <div className=\"flex items-center gap-1\">\n                                <Building2 className=\"h-4 w-4\" />\n                                <span className=\"truncate\">{application.job.company.companyName}</span>\n                              </div>\n                              {application.job.location && (\n                                <div className=\"flex items-center gap-1\">\n                                  <MapPin className=\"h-4 w-4\" />\n                                  <span className=\"truncate\">{application.job.location}</span>\n                                </div>\n                              )}\n                            </div>\n                            \n                            <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                              <Clock className=\"h-3 w-3\" />\n                              <span>\n                                Candidatura enviada em {new Date(application.appliedAt).toLocaleDateString('pt-BR', {\n                                  day: '2-digit',\n                                  month: 'short',\n                                  year: 'numeric'\n                                })}\n                              </span>\n                            </div>\n                          </div>\n                          \n                          <ExternalLink className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" />\n                        </div>\n                      </div>\n                    ))}\n                    \n                    {applications.filter(app => app.job).length > 5 && (\n                      <Button \n                        variant=\"outline\" \n                        className=\"w-full\"\n                        onClick={() => setLocation(\"/minhas-candidaturas\")}\n                        data-testid=\"button-view-all-applications\"\n                      >\n                        Ver Todas as Candidaturas ({applications.filter(app => app.job).length})\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <div className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Ações Rápidas</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <Button variant=\"outline\" className=\"w-full justify-start\" data-testid=\"button-search-jobs\">\n                    <Briefcase className=\"mr-2 h-5 w-5\" />\n                    Buscar Vagas\n                  </Button>\n                  <Button variant=\"outline\" className=\"w-full justify-start\" onClick={() => setLocation(\"/vagas-salvas\")} data-testid=\"button-saved-jobs\">\n                    <Bookmark className=\"mr-2 h-5 w-5\" />\n                    Vagas Salvas\n                  </Button>\n                  <Button variant=\"outline\" className=\"w-full justify-start\" onClick={() => setLocation(\"/perfil/operador\")} data-testid=\"button-my-profile\">\n                    <User className=\"mr-2 h-5 w-5\" />\n                    Meu Perfil\n                  </Button>\n                  <Button variant=\"outline\" className=\"w-full justify-start\" data-testid=\"button-alerts\">\n                    <Bell className=\"mr-2 h-5 w-5\" />\n                    Alertas de Vagas\n                  </Button>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Status do Perfil</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-muted-foreground\">Completude</span>\n                    <Badge variant={profileCompletion.isComplete ? \"default\" : \"secondary\"}>\n                      {profileCompletion.percentage}%\n                    </Badge>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-muted-foreground\">Visibilidade</span>\n                    <Badge variant={profileCompletion.isComplete ? \"default\" : \"outline\"}>\n                      {profileCompletion.isComplete ? \"Visível\" : \"Oculto\"}\n                    </Badge>\n                  </div>\n                  <div className=\"w-full h-2 bg-muted rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-primary transition-all duration-300\" \n                      style={{ width: `${profileCompletion.percentage}%` }}\n                    />\n                  </div>\n                  \n                  {profileCompletion.isComplete ? (\n                    <div className=\"flex gap-2 p-3 rounded-lg bg-primary/10 border border-primary/20\">\n                      <CheckCircle2 className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n                      <p className=\"text-sm text-foreground\">\n                        Seu perfil está completo e visível para recrutadores!\n                      </p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      <div className=\"flex gap-2 p-3 rounded-lg bg-orange-500/10 border border-orange-500/20\">\n                        <AlertCircle className=\"h-5 w-5 text-orange-500 flex-shrink-0 mt-0.5\" />\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm font-medium text-foreground mb-1\">\n                            Complete seu perfil para ser visível\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            Seu perfil está oculto para recrutadores até que você complete todas as informações\n                          </p>\n                        </div>\n                      </div>\n                      \n                      {profileCompletion.missing.length > 0 && (\n                        <div className=\"space-y-2\">\n                          <p className=\"text-xs font-medium text-muted-foreground\">\n                            Campos faltantes ({profileCompletion.missing.length}):\n                          </p>\n                          <div className=\"space-y-1\">\n                            {profileCompletion.missing.slice(0, 5).map((field) => (\n                              <div key={field.name} className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-orange-500\" />\n                                {field.label}\n                              </div>\n                            ))}\n                            {profileCompletion.missing.length > 5 && (\n                              <p className=\"text-xs text-muted-foreground ml-3.5\">\n                                +{profileCompletion.missing.length - 5} outros campos\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                      \n                      <Button \n                        onClick={() => setLocation(\"/perfil/operador\")}\n                        className=\"w-full\"\n                        size=\"sm\"\n                        data-testid=\"button-complete-profile\"\n                      >\n                        Completar Perfil\n                      </Button>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Dicas para Você</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex gap-3\">\n                      <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                        <HardHat className=\"w-4 h-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium\">Mantenha seu perfil atualizado</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Adicione novas certificações e experiências\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                        <Bell className=\"w-4 h-4 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium\">Configure alertas</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Receba notificações de novas vagas\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":18804},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/pages/Login.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Mail, Lock, ArrowRight } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: { email: string; password: string }) => {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        body: JSON.stringify({ email: data.email, password: data.password }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao fazer login\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/global-work-types'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/global-contract-types'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/tags'] });\n      toast({\n        title: \"Login realizado com sucesso!\",\n        description: \"Redirecionando...\",\n      });\n      setTimeout(() => {\n        if (data.userType === \"company\") {\n          setLocation(\"/dashboard/empresa\");\n        } else if (data.userType === \"operator\") {\n          setLocation(\"/dashboard/operador\");\n        } else if (data.userType === \"admin\") {\n          setLocation(\"/admin\");\n        }\n      }, 1000);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao fazer login\",\n        description: error.message || \"Verifique suas credenciais e tente novamente\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !password) {\n      toast({\n        title: \"Campos obrigatórios\",\n        description: \"Por favor, preencha e-mail e senha\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    loginMutation.mutate({ email, password });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      <div className=\"flex-1 flex flex-col justify-center px-8 lg:px-16\">\n        <div className=\"w-full max-w-md mx-auto\">\n          <div className=\"mb-10\">\n          <img \n            src={operlistLogo} \n            alt=\"Operlist\" \n            className=\"h-12 mb-8\"\n            data-testid=\"logo-login\"\n          />\n            <h1 className=\"font-bold text-4xl mb-3\">\n              Bem-vindo de volta!\n            </h1>\n            <p className=\"text-muted-foreground text-lg\">\n              Entre na sua conta para continuar\n            </p>\n          </div>\n\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">E-mail</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"seu@email.com\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    className=\"pl-10\"\n                    required\n                    data-testid=\"input-email\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"password\">Senha</Label>\n                  <Link href=\"/recuperar-senha\" className=\"text-sm text-primary hover-elevate px-2 py-1 rounded-md\" data-testid=\"link-forgot-password\">\n                    Esqueceu a senha?\n                  </Link>\n                </div>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    className=\"pl-10\"\n                    required\n                    data-testid=\"input-password\"\n                  />\n                </div>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full h-11\"\n                disabled={loginMutation.isPending}\n                data-testid=\"button-login\"\n              >\n                {loginMutation.isPending ? \"Entrando...\" : \"Entrar\"}\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </Button>\n            </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Não tem uma conta?{\" \"}\n              <Link href=\"/cadastro\" className=\"text-primary font-medium hover-elevate px-2 py-1 rounded-md\" data-testid=\"link-signup\">\n                Cadastre-se\n              </Link>\n            </p>\n          </div>\n\n          <div className=\"mt-8 text-center text-sm text-muted-foreground\">\n            <p>\n              Ao continuar, você concorda com nossos{\" \"}\n              <Link href=\"/termos\" className=\"text-primary hover:underline\" data-testid=\"link-terms\">\n                Termos de Uso\n              </Link>{\" \"}\n              e{\" \"}\n              <Link href=\"/privacidade\" className=\"text-primary hover:underline\" data-testid=\"link-privacy\">\n                Política de Privacidade\n              </Link>\n            </p>\n          </div>\n          </div>\n        </div>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":6388},"client/src/components/HeroSection.tsx":{"content":"import { Search, MapPin, Building2, Briefcase, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport heroImage from \"@assets/generated_images/Mining_heavy_equipment_scene_02b6e20e.png\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobWithCompany extends Job {\n  companyName?: string;\n  companyLogo?: string;\n}\n\nexport function HeroSection() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showResults, setShowResults] = useState(false);\n  const [, setLocation] = useLocation();\n  const searchRef = useRef<HTMLDivElement>(null);\n\n  const { data: settingsData } = useQuery<Record<string, string>>({\n    queryKey: ['/api/settings'],\n    retry: false,\n  });\n\n  // Fetch jobs when user types\n  const { data: jobs = [], isLoading } = useQuery<JobWithCompany[]>({\n    queryKey: ['/api/public/jobs'],\n    enabled: searchQuery.length > 0,\n  });\n\n  // Filter jobs based on search query\n  const filteredJobs = jobs.filter(job => {\n    if (!searchQuery) return false;\n    const search = searchQuery.toLowerCase();\n    return (\n      job.title?.toLowerCase().includes(search) ||\n      job.location?.toLowerCase().includes(search) ||\n      job.companyName?.toLowerCase().includes(search) ||\n      job.description?.toLowerCase().includes(search)\n    );\n  }).slice(0, 5); // Limit to 5 results\n\n  const heroTitle = settingsData?.hero_title || \"Encontre Seu Emprego dos Sonhos em Qualquer Lugar do Mundo\";\n  const heroSubtitle = settingsData?.hero_subtitle || \"Mais de 50.000 vagas em 150+ países\";\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    // Redirect to jobs page with search query\n    if (searchQuery.trim()) {\n      setLocation(`/vagas?busca=${encodeURIComponent(searchQuery.trim())}`);\n    } else {\n      setLocation('/vagas');\n    }\n  };\n\n  const handleJobClick = (jobId: number) => {\n    setLocation(`/vaga/${jobId}`);\n    setShowResults(false);\n    setSearchQuery(\"\");\n  };\n\n  const handleClearSearch = () => {\n    setSearchQuery(\"\");\n    setShowResults(false);\n  };\n\n  // Show results when user types\n  useEffect(() => {\n    if (searchQuery.length > 0) {\n      setShowResults(true);\n    } else {\n      setShowResults(false);\n    }\n  }, [searchQuery]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const getWorkTypeLabel = (type: string | null) => {\n    const labels: Record<string, string> = {\n      'presencial': 'Presencial',\n      'remoto': 'Remoto',\n      'hibrido': 'Híbrido',\n    };\n    return type ? labels[type] || type : null;\n  };\n\n  return (\n    <section className=\"relative h-[60vh] md:h-[60vh] flex items-center justify-center overflow-visible\">\n      <div\n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{ backgroundImage: `url(${heroImage})` }}\n      />\n      <div className=\"absolute inset-0 bg-gradient-to-br from-black/70 via-black/60 to-black/50\" />\n      \n      <div className=\"relative z-10 max-w-4xl mx-auto px-4 text-center\">\n        <h1 className=\"font-heading font-bold text-4xl md:text-5xl text-white mb-4\" data-testid=\"text-hero-title\">\n          {heroTitle}\n        </h1>\n        <p className=\"text-lg md:text-xl text-white/90 mb-8\" data-testid=\"text-hero-subtitle\">\n          {heroSubtitle}\n        </p>\n        \n        <div className=\"max-w-2xl mx-auto\" ref={searchRef}>\n          <form onSubmit={handleSearch}>\n            <div className=\"flex gap-2 backdrop-blur-md bg-white/10 p-2 rounded-lg border border-white/20\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/70\" />\n                <Input\n                  type=\"search\"\n                  placeholder=\"Cargo, palavra-chave ou empresa\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 pr-10 h-12 bg-white text-foreground border-0\"\n                  data-testid=\"input-hero-search\"\n                  autoComplete=\"off\"\n                />\n                {searchQuery && (\n                  <button\n                    type=\"button\"\n                    onClick={handleClearSearch}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    data-testid=\"button-clear-hero-search\"\n                  >\n                    <X className=\"h-5 w-5\" />\n                  </button>\n                )}\n              </div>\n              <Button \n                type=\"submit\" \n                size=\"lg\" \n                className=\"h-12 px-8\"\n                data-testid=\"button-hero-search\"\n              >\n                Buscar\n              </Button>\n            </div>\n          </form>\n\n          {/* Search Results Dropdown */}\n          {showResults && (\n            <Card className=\"mt-2 max-h-[400px] overflow-y-auto\">\n              <CardContent className=\"p-0\">\n                {isLoading ? (\n                  <div className=\"p-4 text-center text-muted-foreground\">\n                    Buscando vagas...\n                  </div>\n                ) : filteredJobs.length > 0 ? (\n                  <div className=\"divide-y\">\n                    {filteredJobs.map((job) => (\n                      <div\n                        key={job.id}\n                        onClick={() => handleJobClick(Number(job.id))}\n                        className=\"p-4 hover-elevate cursor-pointer transition-colors\"\n                        data-testid={`hero-search-result-${job.id}`}\n                      >\n                        <div className=\"flex items-start gap-4\">\n                          <div className=\"h-16 w-16 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                            {job.companyLogo ? (\n                              <img \n                                src={job.companyLogo} \n                                alt={job.companyName || 'Company'} \n                                className=\"h-full w-full object-cover\"\n                              />\n                            ) : (\n                              <Building2 className=\"h-7 w-7 text-primary\" />\n                            )}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <h4 className=\"font-semibold text-sm line-clamp-1\">\n                              {job.title}\n                            </h4>\n                            {job.companyName && (\n                              <p className=\"text-xs text-muted-foreground line-clamp-1 mt-0.5\">\n                                {job.companyName}\n                              </p>\n                            )}\n                            <div className=\"flex items-center gap-3 mt-1 text-xs text-muted-foreground\">\n                              {job.location && (\n                                <span className=\"flex items-center gap-1\">\n                                  <MapPin className=\"h-3 w-3\" />\n                                  {job.location}\n                                </span>\n                              )}\n                              {job.workType && (\n                                <Badge variant=\"secondary\" className=\"text-xs h-5\">\n                                  {getWorkTypeLabel(job.workType)}\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                    <div\n                      onClick={() => setLocation(`/vagas?busca=${encodeURIComponent(searchQuery)}`)}\n                      className=\"p-3 text-center text-sm text-primary hover:bg-accent cursor-pointer font-medium\"\n                      data-testid=\"hero-search-view-all\"\n                    >\n                      Ver todas as {filteredJobs.length < jobs.length ? 'vagas' : `${jobs.length} vagas`} →\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"p-8 text-center\">\n                    <Briefcase className=\"h-12 w-12 mx-auto text-muted-foreground mb-3\" />\n                    <p className=\"text-sm text-muted-foreground\">\n                      Nenhuma vaga encontrada para \"{searchQuery}\"\n                    </p>\n                    <Button\n                      variant=\"ghost\"\n                      onClick={() => setLocation('/vagas')}\n                      className=\"mt-2\"\n                      data-testid=\"hero-search-browse-all\"\n                    >\n                      Ver todas as vagas disponíveis\n                    </Button>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":9503},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/Header.tsx":{"content":"import { Globe, User, LogOut, Settings, LayoutDashboard, Briefcase, BookmarkIcon, FileText, Building2, Calendar } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ThemeToggle } from \"./ThemeToggle\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\nimport type { Operator, Company } from \"@shared/schema\";\n\ninterface HeaderProps {\n  onLanguageToggle?: () => void;\n  language?: string;\n}\n\nexport function Header({ onLanguageToggle, language = \"PT\" }: HeaderProps) {\n  const [, setLocation] = useLocation();\n  const { user, userType, isAuthenticated, logout } = useAuth();\n\n  const handleLoginClick = () => {\n    setLocation(\"/login\");\n  };\n\n  const handlePostJobClick = () => {\n    setLocation(\"/login\");\n  };\n\n  const handleLogoClick = () => {\n    setLocation(\"/\");\n  };\n\n  const handleLogout = async () => {\n    await logout();\n  };\n\n  const handleProfileClick = () => {\n    if (userType === 'operator') {\n      setLocation(\"/perfil/operador\");\n    } else if (userType === 'company') {\n      setLocation(\"/dashboard/empresa\");\n    }\n  };\n\n  const getFirstName = () => {\n    if (!user) return \"\";\n    if (userType === 'operator') {\n      const operatorUser = user as Operator;\n      return operatorUser.fullName?.split(' ')[0] || \"\";\n    } else if (userType === 'company') {\n      const companyUser = user as Company;\n      return companyUser.companyName?.split(' ')[0] || \"\";\n    }\n    return \"\";\n  };\n\n  return (\n    <header className=\"sticky top-0 z-[100] bg-background border-b\">\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between gap-4 h-16\">\n          <div className=\"flex items-center gap-2\">\n            <img \n              src={operlistLogo} \n              alt=\"Operlist\" \n              className=\"h-14 cursor-pointer\" \n              onClick={handleLogoClick}\n              data-testid=\"logo-home\"\n            />\n          </div>\n\n          <nav className=\"hidden md:flex items-center gap-1 flex-1 justify-center\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => setLocation('/vagas')}\n              data-testid=\"button-nav-jobs\"\n            >\n              <Briefcase className=\"h-4 w-4 mr-2\" />\n              Vagas\n            </Button>\n            <Button\n              variant=\"ghost\"\n              onClick={() => setLocation('/eventos')}\n              data-testid=\"button-nav-events\"\n            >\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              Feiras e Eventos\n            </Button>\n          </nav>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={onLanguageToggle}\n              data-testid=\"button-language-toggle\"\n            >\n              <Globe className=\"h-5 w-5\" />\n            </Button>\n            <ThemeToggle />\n            \n            {isAuthenticated ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button \n                    variant=\"outline\" \n                    className=\"hidden sm:flex gap-2\"\n                    data-testid=\"button-user-menu\"\n                  >\n                    <User className=\"h-4 w-4\" />\n                    {getFirstName()}\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-56\">\n                  {userType === 'operator' ? (\n                    <>\n                      <DropdownMenuItem onClick={() => setLocation('/dashboard/operador')} data-testid=\"menu-dashboard\">\n                        <LayoutDashboard className=\"mr-2 h-4 w-4\" />\n                        Dashboard\n                      </DropdownMenuItem>\n                      <DropdownMenuItem onClick={() => setLocation('/perfil/operador')} data-testid=\"menu-profile\">\n                        <User className=\"mr-2 h-4 w-4\" />\n                        Meu Perfil\n                      </DropdownMenuItem>\n                      <DropdownMenuItem disabled data-testid=\"menu-applications\">\n                        <FileText className=\"mr-2 h-4 w-4\" />\n                        Minhas Candidaturas\n                      </DropdownMenuItem>\n                      <DropdownMenuItem disabled data-testid=\"menu-saved\">\n                        <BookmarkIcon className=\"mr-2 h-4 w-4\" />\n                        Vagas Salvas\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                      <DropdownMenuItem disabled data-testid=\"menu-settings\">\n                        <Settings className=\"mr-2 h-4 w-4\" />\n                        Configurações\n                      </DropdownMenuItem>\n                    </>\n                  ) : (\n                    <>\n                      <DropdownMenuItem onClick={() => setLocation('/dashboard/empresa')} data-testid=\"menu-dashboard\">\n                        <LayoutDashboard className=\"mr-2 h-4 w-4\" />\n                        Dashboard\n                      </DropdownMenuItem>\n                      <DropdownMenuItem disabled data-testid=\"menu-jobs\">\n                        <Briefcase className=\"mr-2 h-4 w-4\" />\n                        Minhas Vagas\n                      </DropdownMenuItem>\n                      <DropdownMenuItem disabled data-testid=\"menu-candidates\">\n                        <User className=\"mr-2 h-4 w-4\" />\n                        Candidatos\n                      </DropdownMenuItem>\n                      <DropdownMenuItem disabled data-testid=\"menu-company-profile\">\n                        <Building2 className=\"mr-2 h-4 w-4\" />\n                        Perfil da Empresa\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                      <DropdownMenuItem disabled data-testid=\"menu-settings\">\n                        <Settings className=\"mr-2 h-4 w-4\" />\n                        Configurações\n                      </DropdownMenuItem>\n                    </>\n                  )}\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={handleLogout} data-testid=\"menu-logout\">\n                    <LogOut className=\"mr-2 h-4 w-4\" />\n                    Sair\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <>\n                <Button \n                  variant=\"ghost\" \n                  className=\"hidden sm:flex\" \n                  onClick={() => setLocation('/cadastro')}\n                  data-testid=\"button-signup\"\n                >\n                  Criar conta grátis\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  className=\"hidden sm:flex\" \n                  onClick={handleLoginClick}\n                  data-testid=\"button-login\"\n                >\n                  Entrar\n                </Button>\n              </>\n            )}\n            \n            {(!isAuthenticated || userType === 'company') && (\n              <Button \n                variant=\"default\" \n                className=\"hidden sm:flex\" \n                onClick={handlePostJobClick}\n                data-testid=\"button-post-job\"\n              >\n                Publicar Vaga\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":7667},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/AdminDashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Building2, HardHat, Users, Eye, Globe, MapPin } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { format } from \"date-fns\";\nimport type { Company, Operator, SiteVisit } from \"@shared/schema\";\n\nexport default function AdminDashboard() {\n  const { userType } = useAuth();\n  const [visitsDialogOpen, setVisitsDialogOpen] = useState(false);\n\n  const { data, isLoading } = useQuery<{\n    companies: Company[];\n    operators: Operator[];\n    total: { companies: number; operators: number };\n  }>({\n    queryKey: ['/api/users/list'],\n    enabled: userType === 'admin',\n    retry: false,\n  });\n\n  const { data: visitStats, isLoading: isLoadingVisits } = useQuery<{\n    totalVisits: number;\n    todayVisits: number;\n  }>({\n    queryKey: ['/api/admin/visit-stats'],\n    enabled: userType === 'admin',\n    retry: false,\n  });\n\n  const { data: siteVisits, isLoading: isLoadingSiteVisits } = useQuery<SiteVisit[]>({\n    queryKey: ['/api/admin/site-visits'],\n    enabled: userType === 'admin' && visitsDialogOpen,\n    retry: false,\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Usuários\n              </CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-total-users\">\n                {isLoading ? (\n                  <Skeleton className=\"h-8 w-16\" />\n                ) : (\n                  (data?.total.companies || 0) + (data?.total.operators || 0)\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">\n                Empresas\n              </CardTitle>\n              <Building2 className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-total-companies\">\n                {isLoading ? (\n                  <Skeleton className=\"h-8 w-16\" />\n                ) : (\n                  data?.total.companies || 0\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">\n                Operadores\n              </CardTitle>\n              <HardHat className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-total-operators\">\n                {isLoading ? (\n                  <Skeleton className=\"h-8 w-16\" />\n                ) : (\n                  data?.total.operators || 0\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Dialog open={visitsDialogOpen} onOpenChange={setVisitsDialogOpen}>\n            <DialogTrigger asChild>\n              <Card className=\"cursor-pointer hover-elevate active-elevate-2\" data-testid=\"card-site-visits\">\n                <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">\n                    Visitas ao Site\n                  </CardTitle>\n                  <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\" data-testid=\"text-total-visits\">\n                    {isLoadingVisits ? (\n                      <Skeleton className=\"h-8 w-16\" />\n                    ) : (\n                      visitStats?.totalVisits || 0\n                    )}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {isLoadingVisits ? (\n                      <Skeleton className=\"h-4 w-24\" />\n                    ) : (\n                      `${visitStats?.todayVisits || 0} hoje • Clique para ver detalhes`\n                    )}\n                  </p>\n                </CardContent>\n              </Card>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-2\">\n                  <Globe className=\"h-5 w-5\" />\n                  Detalhes das Visitas ao Site\n                </DialogTitle>\n                <DialogDescription>\n                  Histórico completo de visitas com IP e localização de cada visitante\n                </DialogDescription>\n              </DialogHeader>\n              \n              {isLoadingSiteVisits ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3, 4, 5].map((i) => (\n                    <Skeleton key={i} className=\"h-16 w-full\" />\n                  ))}\n                </div>\n              ) : siteVisits && siteVisits.length > 0 ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Data/Hora</TableHead>\n                      <TableHead>IP Address</TableHead>\n                      <TableHead>País</TableHead>\n                      <TableHead>Região</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {siteVisits.map((visit) => (\n                      <TableRow key={visit.id} data-testid={`row-visit-${visit.id}`}>\n                        <TableCell className=\"font-medium\">\n                          {format(new Date(visit.visitedAt), 'dd/MM/yyyy HH:mm:ss')}\n                        </TableCell>\n                        <TableCell data-testid={`text-ip-${visit.id}`}>\n                          {visit.ipAddress}\n                        </TableCell>\n                        <TableCell>\n                          {visit.country ? (\n                            <div className=\"flex items-center gap-2\">\n                              <img \n                                src={`https://flagcdn.com/w20/${visit.country.toLowerCase()}.png`}\n                                alt={`Bandeira ${visit.country}`}\n                                className=\"w-5 h-auto rounded-sm shadow-sm\"\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none';\n                                }}\n                              />\n                              <Badge variant=\"secondary\" className=\"gap-1\">\n                                <MapPin className=\"h-3 w-3\" />\n                                {visit.country}\n                              </Badge>\n                            </div>\n                          ) : (\n                            <span className=\"text-muted-foreground text-sm\">-</span>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {visit.region || <span className=\"text-muted-foreground text-sm\">-</span>}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <p className=\"text-center text-muted-foreground py-8\">\n                  Nenhuma visita registrada ainda\n                </p>\n              )}\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        <div className=\"grid gap-8 lg:grid-cols-2\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Building2 className=\"h-5 w-5\" />\n                Empresas Cadastradas\n              </CardTitle>\n              <CardDescription>\n                Lista de todas as empresas registradas na plataforma\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3].map((i) => (\n                    <Skeleton key={i} className=\"h-20 w-full\" />\n                  ))}\n                </div>\n              ) : data?.companies && data.companies.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {data.companies.map((company) => (\n                    <Card key={company.id} data-testid={`card-company-${company.id}`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-medium truncate\" data-testid={`text-company-name-${company.id}`}>\n                              {company.companyName}\n                            </h3>\n                            <p className=\"text-sm text-muted-foreground truncate\">\n                              {company.email}\n                            </p>\n                            <p className=\"text-sm text-muted-foreground\">\n                              CNPJ: {company.cnpj}\n                            </p>\n                          </div>\n                          <Badge variant=\"secondary\">Empresa</Badge>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-center text-muted-foreground py-8\">\n                  Nenhuma empresa cadastrada\n                </p>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <HardHat className=\"h-5 w-5\" />\n                Operadores Cadastrados\n              </CardTitle>\n              <CardDescription>\n                Lista de todos os operadores registrados na plataforma\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3].map((i) => (\n                    <Skeleton key={i} className=\"h-20 w-full\" />\n                  ))}\n                </div>\n              ) : data?.operators && data.operators.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {data.operators.map((operator) => (\n                    <Card key={operator.id} data-testid={`card-operator-${operator.id}`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-medium truncate\" data-testid={`text-operator-name-${operator.id}`}>\n                              {operator.fullName}\n                            </h3>\n                            <p className=\"text-sm text-muted-foreground truncate\">\n                              {operator.email}\n                            </p>\n                            <p className=\"text-sm text-muted-foreground\">\n                              {operator.profession}\n                            </p>\n                          </div>\n                          <Badge variant=\"secondary\">Operador</Badge>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-center text-muted-foreground py-8\">\n                  Nenhum operador cadastrado\n                </p>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n  );\n}\n","size_bytes":12587},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/pages/AdminOperators.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { HardHat, Mail, Phone, MapPin, Briefcase, Calendar, Award, Eye, Search, Download, Plus, User } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Operator, InsertOperator, Experience } from \"@shared/schema\";\nimport { insertOperatorSchema } from \"@shared/schema\";\nimport { useState, useMemo } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport jsPDF from \"jspdf\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\nconst formSchema = insertOperatorSchema.extend({\n  password: z.string().min(6, \"Senha deve ter no mínimo 6 caracteres\"),\n});\n\nexport default function AdminOperators() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  const [selectedOperator, setSelectedOperator] = useState<Operator | null>(null);\n  const [searchName, setSearchName] = useState(\"\");\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      fullName: \"\",\n      cpf: \"\",\n      phone: \"\",\n      birthDate: \"\",\n      profession: \"\",\n      experienceYears: \"\",\n      certifications: \"\",\n      availability: \"\",\n      preferredLocation: \"\",\n      workType: \"\",\n      skills: \"\",\n      bio: \"\",\n      profilePhotoUrl: \"\",\n    },\n  });\n\n  const { data: operators, isLoading } = useQuery<Operator[]>({\n    queryKey: ['/api/operators'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const { data: experiences } = useQuery<Experience[]>({\n    queryKey: ['/api/experiences', selectedOperator?.id],\n    enabled: !!selectedOperator?.id,\n  });\n\n  const createOperatorMutation = useMutation({\n    mutationFn: async (operatorData: InsertOperator) => {\n      const response = await apiRequest('POST', '/api/operators/register', operatorData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/operators'] });\n      toast({\n        title: \"Operador criado!\",\n        description: \"O operador foi cadastrado com sucesso.\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar operador\",\n        description: error.message,\n      });\n    },\n  });\n\n  const handleSubmit = async (values: z.infer<typeof formSchema>) => {\n    createOperatorMutation.mutate(values);\n  };\n\n  const filteredOperators = useMemo(() => {\n    if (!operators) return [];\n    \n    return operators.filter((operator) => {\n      const matchesName = !searchName || \n        operator.fullName.toLowerCase().includes(searchName.toLowerCase());\n      \n      return matchesName;\n    });\n  }, [operators, searchName]);\n\n  const handleDownloadPDF = async (operator: Operator) => {\n    const operatorExperiences = await fetch(`/api/experiences/${operator.id}`).then(res => res.json()).catch(() => []);\n    \n    const doc = new jsPDF();\n    const pageWidth = doc.internal.pageSize.getWidth();\n    const pageHeight = doc.internal.pageSize.getHeight();\n    let yPosition = 15;\n\n    const img = new Image();\n    img.src = operlistLogo;\n    \n    img.onload = () => {\n      const logoWidth = 40;\n      const logoHeight = (img.height / img.width) * logoWidth;\n      const logoX = (pageWidth - logoWidth) / 2;\n      \n      doc.addImage(img, 'PNG', logoX, yPosition, logoWidth, logoHeight);\n      \n      yPosition += logoHeight + 15;\n\n      doc.setFontSize(22);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(operator.fullName, pageWidth / 2, yPosition, { align: \"center\" });\n      \n      yPosition += 10;\n      doc.setFontSize(12);\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.text(operator.profession, pageWidth / 2, yPosition, { align: \"center\" });\n      \n      yPosition += 15;\n      doc.setDrawColor(102, 45, 145);\n      doc.setLineWidth(0.5);\n      doc.line(20, yPosition, pageWidth - 20, yPosition);\n      \n      yPosition += 10;\n      doc.setFontSize(14);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"Informações de Contato\", 20, yPosition);\n      \n      yPosition += 8;\n      doc.setFontSize(11);\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.text(`E-mail: ${operator.email}`, 20, yPosition);\n      \n      yPosition += 6;\n      doc.text(`Telefone: ${operator.phone}`, 20, yPosition);\n      \n      if (operator.preferredLocation) {\n        yPosition += 6;\n        doc.text(`Localização: ${operator.preferredLocation}`, 20, yPosition);\n      }\n      \n      yPosition += 15;\n      doc.setFontSize(14);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"Informações Profissionais\", 20, yPosition);\n      \n      yPosition += 8;\n      doc.setFontSize(11);\n      doc.setFont(\"helvetica\", \"normal\");\n      \n      if (operator.experienceYears) {\n        doc.text(`Experiência: ${operator.experienceYears}`, 20, yPosition);\n        yPosition += 6;\n      }\n      \n      if (operator.certifications) {\n        doc.text(`Certificações: ${operator.certifications}`, 20, yPosition);\n        yPosition += 6;\n      }\n      \n      if (operator.availability) {\n        doc.text(`Disponibilidade: ${operator.availability}`, 20, yPosition);\n        yPosition += 6;\n      }\n      \n      if (operator.workType) {\n        doc.text(`Tipo de Trabalho: ${operator.workType}`, 20, yPosition);\n        yPosition += 6;\n      }\n      \n      if (operator.skills) {\n        yPosition += 9;\n        doc.setFontSize(14);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(\"Habilidades\", 20, yPosition);\n        \n        yPosition += 8;\n        doc.setFontSize(11);\n        doc.setFont(\"helvetica\", \"normal\");\n        const skillsLines = doc.splitTextToSize(operator.skills, pageWidth - 40);\n        doc.text(skillsLines, 20, yPosition);\n        yPosition += skillsLines.length * 6;\n      }\n      \n      if (operator.bio) {\n        yPosition += 9;\n        doc.setFontSize(14);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(\"Sobre\", 20, yPosition);\n        \n        yPosition += 8;\n        doc.setFontSize(11);\n        doc.setFont(\"helvetica\", \"normal\");\n        const bioLines = doc.splitTextToSize(operator.bio, pageWidth - 40);\n        doc.text(bioLines, 20, yPosition);\n        yPosition += bioLines.length * 6;\n      }\n      \n      if (operatorExperiences && operatorExperiences.length > 0) {\n        yPosition += 12;\n        \n        if (yPosition > pageHeight - 40) {\n          doc.addPage();\n          yPosition = 20;\n        }\n        \n        doc.setFontSize(14);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(\"Experiências Profissionais\", 20, yPosition);\n        \n        yPosition += 10;\n        \n        operatorExperiences.forEach((exp: Experience, index: number) => {\n          if (yPosition > pageHeight - 60) {\n            doc.addPage();\n            yPosition = 20;\n          }\n          \n          doc.setFontSize(12);\n          doc.setFont(\"helvetica\", \"bold\");\n          doc.text(`${exp.position} - ${exp.company}`, 20, yPosition);\n          \n          yPosition += 6;\n          doc.setFontSize(10);\n          doc.setFont(\"helvetica\", \"normal\");\n          \n          const startDate = new Date(exp.startDate).toLocaleDateString('pt-BR', { month: '2-digit', year: 'numeric' });\n          const endDate = exp.endDate ? new Date(exp.endDate).toLocaleDateString('pt-BR', { month: '2-digit', year: 'numeric' }) : 'Atual';\n          doc.text(`${startDate} - ${endDate}`, 20, yPosition);\n          \n          if (exp.location) {\n            yPosition += 5;\n            doc.text(`Local: ${exp.location}`, 20, yPosition);\n          }\n          \n          if (exp.description) {\n            yPosition += 6;\n            const descLines = doc.splitTextToSize(exp.description, pageWidth - 40);\n            doc.text(descLines, 20, yPosition);\n            yPosition += descLines.length * 5;\n          }\n          \n          if (index < operatorExperiences.length - 1) {\n            yPosition += 8;\n          }\n        });\n      }\n      \n      const fileName = `curriculo_${operator.fullName.replace(/\\s+/g, '_')}.pdf`;\n      doc.save(fileName);\n      \n      toast({\n        title: \"PDF gerado com sucesso\",\n        description: `Currículo de ${operator.fullName} foi baixado`,\n      });\n    };\n    \n    img.onerror = () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao gerar PDF\",\n        description: \"Não foi possível carregar o logo\",\n      });\n    };\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-new-operator\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo Operador\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Novo Operador</DialogTitle>\n                <DialogDescription>\n                  Cadastre um novo operador com suas informações profissionais\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-sm font-semibold\">Informações Pessoais</h3>\n                    <div className=\"grid gap-4 md:grid-cols-2\">\n                      <FormField\n                        control={form.control}\n                        name=\"fullName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Nome Completo*</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"João Silva Santos\" {...field} data-testid=\"input-full-name\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name=\"cpf\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>CPF*</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"000.000.000-00\" {...field} data-testid=\"input-cpf\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Email*</FormLabel>\n                            <FormControl>\n                              <Input type=\"email\" placeholder=\"joao@email.com\" {...field} data-testid=\"input-email\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"password\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Senha*</FormLabel>\n                            <FormControl>\n                              <Input type=\"password\" placeholder=\"Mínimo 6 caracteres\" {...field} data-testid=\"input-password\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"phone\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Telefone*</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"(00) 00000-0000\" {...field} data-testid=\"input-phone\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"birthDate\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Data de Nascimento</FormLabel>\n                            <FormControl>\n                              <Input type=\"date\" {...field} value={field.value || \"\"} data-testid=\"input-birth-date\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-sm font-semibold\">Informações Profissionais</h3>\n                    <div className=\"grid gap-4 md:grid-cols-2\">\n                      <FormField\n                        control={form.control}\n                        name=\"profession\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Profissão*</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: Operador de Escavadeira\" {...field} data-testid=\"input-profession\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"experienceYears\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Anos de Experiência</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: 5 anos\" {...field} value={field.value || \"\"} data-testid=\"input-experience-years\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"certifications\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Certificações</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: NR-11, NR-12\" {...field} value={field.value || \"\"} data-testid=\"input-certifications\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"availability\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Disponibilidade</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: Imediata, 30 dias\" {...field} value={field.value || \"\"} data-testid=\"input-availability\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"preferredLocation\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Localização Preferida</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: São Paulo, SP\" {...field} value={field.value || \"\"} data-testid=\"input-location\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"workType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Tipo de Trabalho</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: Tempo Integral, Freelance\" {...field} value={field.value || \"\"} data-testid=\"input-work-type\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <h3 className=\"text-sm font-semibold\">Informações Adicionais</h3>\n                    <FormField\n                      control={form.control}\n                      name=\"skills\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Habilidades</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              placeholder=\"Descreva suas principais habilidades e competências\"\n                              {...field}\n                              value={field.value || \"\"}\n                              className=\"resize-none\"\n                              rows={3}\n                              data-testid=\"input-skills\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"bio\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Sobre</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              placeholder=\"Breve resumo sobre sua experiência profissional\"\n                              {...field}\n                              value={field.value || \"\"}\n                              className=\"resize-none\"\n                              rows={4}\n                              data-testid=\"input-bio\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsDialogOpen(false)}\n                      data-testid=\"button-cancel\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createOperatorMutation.isPending}\n                      data-testid=\"button-save\"\n                    >\n                      {createOperatorMutation.isPending ? \"Salvando...\" : \"Cadastrar Operador\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"mb-6 grid gap-6 md:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n        <CardTitle className=\"text-sm font-medium\">\n          Total de Operadores\n        </CardTitle>\n        <CardDescription>Profissionais cadastrados na plataforma</CardDescription>\n            </div>\n            <HardHat className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-operators\">\n        {isLoading ? (\n          <Skeleton className=\"h-10 w-20\" />\n        ) : (\n          operators?.length || 0\n        )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n        <CardTitle className=\"text-sm font-medium\">\n          Filtros\n        </CardTitle>\n        <CardDescription>Buscar operadores por nome</CardDescription>\n            </div>\n            <Search className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n        <Input\n          placeholder=\"Buscar por nome...\"\n          value={searchName}\n          onChange={(e) => setSearchName(e.target.value)}\n          className=\"pl-9\"\n          data-testid=\"input-search-name\"\n        />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {isLoading ? (\n        <div className=\"space-y-3\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-24 w-full\" />\n          ))}\n        </div>\n      ) : filteredOperators.length > 0 ? (\n        <div className=\"space-y-3\">\n          {filteredOperators.map((operator) => (\n            <Card key={operator.id} data-testid={`card-operator-${operator.id}`} className=\"hover-elevate\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-4\">\n                  <Avatar className=\"h-16 w-16\">\n                    <AvatarImage \n                      src={operator.profilePhotoUrl || undefined} \n                      alt={operator.fullName}\n                      className=\"object-cover\"\n                    />\n                    <AvatarFallback className=\"text-lg bg-primary/10\">\n                      <HardHat className=\"h-8 w-8 text-primary\" />\n                    </AvatarFallback>\n                  </Avatar>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <h3 className=\"font-semibold text-lg truncate\" data-testid={`text-operator-name-${operator.id}`}>\n                        {operator.fullName}\n                      </h3>\n                      <Badge variant=\"secondary\">\n                        <HardHat className=\"h-3 w-3 mr-1\" />\n                        Operador\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"truncate\">{operator.profession}</span>\n                      </div>\n\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"truncate\">{operator.email}</span>\n                      </div>\n\n                      <div className=\"flex items-center gap-2\">\n                        <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{operator.phone}</span>\n                      </div>\n\n                      {operator.experienceYears && (\n                        <div className=\"flex items-center gap-2\">\n                          <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                          <span>{operator.experienceYears} de experiência</span>\n                        </div>\n                      )}\n\n                      {operator.preferredLocation && (\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"truncate\">{operator.preferredLocation}</span>\n                        </div>\n                      )}\n\n                      {operator.certifications && (\n                        <div className=\"flex items-center gap-2\">\n                          <Award className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"truncate\">{operator.certifications}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => handleDownloadPDF(operator)}\n                      data-testid={`button-download-operator-${operator.id}`}\n                    >\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Baixar Perfil\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setSelectedOperator(operator)}\n                      data-testid={`button-view-operator-${operator.id}`}\n                    >\n                      <Eye className=\"h-4 w-4 mr-2\" />\n                      Ver Detalhes\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : operators && operators.length > 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Search className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <p className=\"text-center text-muted-foreground\">\n              Nenhum operador encontrado com este filtro\n            </p>\n            <Button\n              variant=\"outline\"\n              onClick={() => setSearchName(\"\")}\n              className=\"mt-4\"\n              data-testid=\"button-clear-filters\"\n            >\n              Limpar Filtros\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <HardHat className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <p className=\"text-center text-muted-foreground\">\n              Nenhum operador cadastrado ainda\n            </p>\n          </CardContent>\n        </Card>\n      )}\n\n      <Dialog open={!!selectedOperator} onOpenChange={() => setSelectedOperator(null)}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-3\">\n              <Avatar className=\"h-12 w-12\">\n                <AvatarImage \n                  src={selectedOperator?.profilePhotoUrl || undefined} \n                  alt={selectedOperator?.fullName}\n                  className=\"object-cover\"\n                />\n                <AvatarFallback className=\"bg-primary/10\">\n                  <HardHat className=\"h-6 w-6 text-primary\" />\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1\">\n                {selectedOperator?.fullName}\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => selectedOperator && handleDownloadPDF(selectedOperator)}\n                data-testid=\"button-download-pdf-modal\"\n              >\n                <Download className=\"h-4 w-4 mr-2\" />\n                Baixar Perfil\n              </Button>\n            </DialogTitle>\n            <DialogDescription>\n              Informações detalhadas do operador\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedOperator && (\n            <div className=\"space-y-6\">\n              <div>\n                <h4 className=\"font-semibold mb-3\">Informações Básicas</h4>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Profissão</p>\n                    <p className=\"font-medium\">{selectedOperator.profession}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">CPF</p>\n                    <p className=\"font-medium\">{selectedOperator.cpf}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">E-mail</p>\n                    <p className=\"font-medium\">{selectedOperator.email}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Telefone</p>\n                    <p className=\"font-medium\">{selectedOperator.phone}</p>\n                  </div>\n                  {selectedOperator.birthDate && (\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Data de Nascimento</p>\n                      <p className=\"font-medium\">{selectedOperator.birthDate}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <h4 className=\"font-semibold mb-3\">Informações Profissionais</h4>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {selectedOperator.experienceYears && (\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Experiência</p>\n                      <p className=\"font-medium\">{selectedOperator.experienceYears}</p>\n                    </div>\n                  )}\n                  {selectedOperator.certifications && (\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Certificações</p>\n                      <p className=\"font-medium\">{selectedOperator.certifications}</p>\n                    </div>\n                  )}\n                  {selectedOperator.availability && (\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Disponibilidade</p>\n                      <p className=\"font-medium\">{selectedOperator.availability}</p>\n                    </div>\n                  )}\n                  {selectedOperator.workType && (\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Tipo de Trabalho</p>\n                      <p className=\"font-medium\">{selectedOperator.workType}</p>\n                    </div>\n                  )}\n                  {selectedOperator.preferredLocation && (\n                    <div className=\"col-span-2\">\n                      <p className=\"text-sm text-muted-foreground\">Localização Preferida</p>\n                      <p className=\"font-medium\">{selectedOperator.preferredLocation}</p>\n                    </div>\n                  )}\n                  {selectedOperator.skills && (\n                    <div className=\"col-span-2\">\n                      <p className=\"text-sm text-muted-foreground\">Habilidades</p>\n                      <p className=\"font-medium\">{selectedOperator.skills}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {selectedOperator.bio && (\n                <div>\n                  <h4 className=\"font-semibold mb-3\">Biografia</h4>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                    {selectedOperator.bio}\n                  </p>\n                </div>\n              )}\n\n              {experiences && experiences.length > 0 && (\n                <div>\n                  <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\n                    <Briefcase className=\"h-4 w-4\" />\n                    Experiências Profissionais\n                  </h4>\n                  <div className=\"space-y-4\">\n                    {experiences.map((exp) => (\n                      <div key={exp.id} className=\"border rounded-lg p-4 space-y-2\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <h5 className=\"font-semibold text-base\">{exp.position}</h5>\n                            <p className=\"text-sm font-medium text-muted-foreground\">{exp.company}</p>\n                          </div>\n                          {exp.isCurrent === 'true' && (\n                            <Badge variant=\"default\" className=\"text-xs\">\n                              Atual\n                            </Badge>\n                          )}\n                        </div>\n                        \n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                          <div className=\"flex items-center gap-1\">\n                            <Calendar className=\"h-3 w-3\" />\n                            <span>\n                              {exp.startDate} - {exp.isCurrent === 'true' ? 'Presente' : exp.endDate || 'N/A'}\n                            </span>\n                          </div>\n                          {exp.location && (\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"h-3 w-3\" />\n                              <span>{exp.location}</span>\n                            </div>\n                          )}\n                        </div>\n\n                        {exp.description && (\n                          <p className=\"text-sm text-muted-foreground mt-2 whitespace-pre-wrap\">\n                            {exp.description}\n                          </p>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":35467},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/examples/CategorySection.tsx":{"content":"import { CategorySection } from \"../CategorySection\";\n\nexport default function CategorySectionExample() {\n  return <CategorySection />;\n}\n","size_bytes":138},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"replit.md":{"content":"# Operlist - Bilingual Job Board Platform\n\n## Overview\nOperlist is a comprehensive, bilingual (Portuguese/English) job board platform connecting job seekers (operators) with employers (companies). It supports job postings, applications, and user management across various profiles (operators, companies, administrators). The platform aims to be an efficient, scalable solution for the job market, offering robust administrative control, a multi-step job creation wizard, dynamic questionnaires, and integrated communication tools to enhance the hiring process.\n\n## User Preferences\n- Focus on production-ready code\n- Bilingual support (Portuguese/English)\n- Clean, modern UI using Shadcn components\n- **Flat, minimalist design**: Neutral colors, simple icons, reduced visual noise\n- Database-backed configuration (no hardcoded values)\n\n## System Architecture\n\n### Core Features & Design\n- **User Management**: Distinct roles (Operators, Companies, Administrators) with session-based authentication. Operators must have ≥50% profile completion before applying to jobs, with an AlertDialog guiding them to required fields.\n- **Job Management**: Companies create/manage jobs via a 4-step wizard, including dynamic question selection. Jobs have 'Active'/'Suspended' statuses and are publicly listed with search/filter capabilities. A credit system dictates job publishing.\n- **Job Application System**: Operators apply to jobs and complete dynamic questionnaires. The system validates required questions and prevents duplicate applications. Features advanced filtering (search, status, location) for companies to manage applications efficiently.\n- **Profile Management**: Detailed profiles for Companies (presentation pages, banner uploads) and Operators (experience tracking, photos). Operator profile completion tracked via 13 fields with 50% minimum threshold.\n- **Administration Panel**: Comprehensive interface for system settings, email configuration, content, user management, and financial dashboard.\n- **Localization**: Full platform support for Portuguese and English.\n- **Email System**: Integrated SMTP for notifications and password recovery.\n- **Object Storage**: Replit Object Storage for user photos, company logos, and event images.\n- **Form Validation**: Client-side and server-side validation using Zod.\n- **UI/UX**: Clean, modern, responsive interface using Shadcn UI, featuring intuitive workflows, enhanced job card visualization, and consistent header/footer across all public pages. Company sidebar navigation is reorganized for clarity.\n- **Visit Counter System**: Tracks unique home page visits.\n- **Job View Counter**: Each job tracks total views automatically when users access the job details page. Companies can see view counts alongside applications and other metrics.\n- **Public Jobs Page**: `/vagas` page with advanced filtering and real-time search.\n- **Events Management**: System for displaying trade shows and workshops.\n- **Company Credits System**: Dashboard for companies to manage credits, view transaction history, and track balances for plan purchases and job postings.\n- **Communication Tools**: WhatsApp contact button for direct communication and CV download feature for PDF resumes.\n- **Questionnaire System**: Dynamic question selection during job creation and interactive questionnaires for operators, with companies viewing responses. Only 'Short Answer' (20 chars) and 'Long Answer' (1000 chars) are available.\n- **Company Configuration CRUDs**: Management of company-specific `Work Types` and `Contract Types` via dedicated pages.\n- **Unified Login System**: Single login page for all user types (Company, Operator, Admin) with automatic type detection and redirection.\n- **Simplified Password Recovery**: Users only need to enter their email; the system automatically detects user type.\n- **Flat UI Design**: Minimalist design using neutral colors and `text-muted-foreground` for icons, removing color gradients and vibrant accents for a cleaner look.\n- **Taxonomia System**: Centralized admin hub for managing platform-wide taxonomies including Tags, Setores (Sectors/Subsectors), Global Work Types, and Global Contract Types. All taxonomy management is organized under a single admin interface with dedicated tabs.\n\n### Technology Stack\n- **Frontend**: React + TypeScript + Vite, Shadcn UI + Tailwind CSS, TanStack Query, React Hook Form + Zod\n- **Backend**: Express + TypeScript\n- **Database**: PostgreSQL (Neon-backed Replit database) with Drizzle ORM\n\n### Project Structure\n- `client/` - React frontend application\n- `server/` - Express backend API\n- `shared/` - Shared TypeScript types and schemas\n\n## External Dependencies\n- **PostgreSQL**: Primary database.\n- **Replit Object Storage**: For static asset storage.\n- **Gmail SMTP / Custom SMTP**: For email notifications.\n- **Vite**: Frontend build tool.\n- **Tailwind CSS**: Utility-first CSS framework.\n- **Shadcn UI**: UI component library.\n- **TanStack Query (React Query)**: Data fetching and state management.\n- **React Hook Form**: Form management.\n- **Zod**: Schema validation.\n- **Drizzle ORM**: Database interaction.\n- **express-session**: Session management.\n- **Recharts**: For data visualization.\n- **cookie-parser**: Express middleware for cookie handling.\n- **jsPDF**: Client-side PDF generation.","size_bytes":5317},"client/src/components/examples/Header.tsx":{"content":"import { Header } from \"../Header\";\n\nexport default function HeaderExample() {\n  return <Header onLanguageToggle={() => console.log(\"Language toggled\")} />;\n}\n","size_bytes":159},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport const companies = pgTable(\"companies\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  companyName: text(\"company_name\").notNull(),\n  cnpj: text(\"cnpj\").notNull().unique(),\n  phone: text(\"phone\").notNull(),\n  website: text(\"website\"),\n  description: text(\"description\"),\n  industry: text(\"industry\"),\n  size: text(\"size\"),\n  logoUrl: text(\"logo_url\"),\n  about: text(\"about\"),\n  mission: text(\"mission\"),\n  culture: text(\"culture\"),\n  bannerUrl: text(\"banner_url\"),\n  credits: text(\"credits\").notNull().default('0'),\n}, (table) => ({\n  emailIdx: index(\"companies_email_idx\").on(table.email),\n  cnpjIdx: index(\"companies_cnpj_idx\").on(table.cnpj),\n}));\n\nexport const insertCompanySchema = createInsertSchema(companies).omit({\n  id: true,\n});\n\nexport type InsertCompany = z.infer<typeof insertCompanySchema>;\nexport type Company = typeof companies.$inferSelect;\n\nexport const operators = pgTable(\"operators\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  fullName: text(\"full_name\").notNull(),\n  cpf: text(\"cpf\").notNull().unique(),\n  phone: text(\"phone\").notNull(),\n  birthDate: text(\"birth_date\"),\n  profession: text(\"profession\").notNull(),\n  experienceYears: text(\"experience_years\"),\n  certifications: text(\"certifications\"),\n  availability: text(\"availability\"),\n  preferredLocation: text(\"preferred_location\"),\n  workType: text(\"work_type\"),\n  skills: text(\"skills\"),\n  bio: text(\"bio\"),\n  profilePhotoUrl: text(\"profile_photo_url\"),\n}, (table) => ({\n  emailIdx: index(\"operators_email_idx\").on(table.email),\n  cpfIdx: index(\"operators_cpf_idx\").on(table.cpf),\n}));\n\nexport const insertOperatorSchema = createInsertSchema(operators).omit({\n  id: true,\n});\n\nexport type InsertOperator = z.infer<typeof insertOperatorSchema>;\nexport type Operator = typeof operators.$inferSelect;\n\nexport const experiences = pgTable(\"experiences\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  operatorId: varchar(\"operator_id\").notNull().references(() => operators.id, { onDelete: 'cascade' }),\n  company: text(\"company\").notNull(),\n  position: text(\"position\").notNull(),\n  startDate: text(\"start_date\").notNull(),\n  endDate: text(\"end_date\"),\n  isCurrent: text(\"is_current\").notNull().default('false'),\n  description: text(\"description\"),\n  location: text(\"location\"),\n});\n\nexport const insertExperienceSchema = createInsertSchema(experiences).omit({\n  id: true,\n});\n\nexport type InsertExperience = z.infer<typeof insertExperienceSchema>;\nexport type Experience = typeof experiences.$inferSelect;\n\nexport const admins = pgTable(\"admins\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  name: text(\"name\").notNull(),\n}, (table) => ({\n  emailIdx: index(\"admins_email_idx\").on(table.email),\n}));\n\nexport const insertAdminSchema = createInsertSchema(admins).omit({\n  id: true,\n});\n\nexport type InsertAdmin = z.infer<typeof insertAdminSchema>;\nexport type Admin = typeof admins.$inferSelect;\n\nexport const plans = pgTable(\"plans\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  price: text(\"price\").notNull(),\n  vacancyQuantity: text(\"vacancy_quantity\").notNull(),\n  features: text(\"features\").notNull(),\n  isActive: text(\"is_active\").notNull().default('true'),\n});\n\nexport const insertPlanSchema = createInsertSchema(plans).omit({\n  id: true,\n});\n\nexport type InsertPlan = z.infer<typeof insertPlanSchema>;\nexport type Plan = typeof plans.$inferSelect;\n\nexport const clients = pgTable(\"clients\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyName: text(\"company_name\").notNull(),\n  cnpj: text(\"cnpj\").notNull().unique(),\n  email: text(\"email\").notNull().unique(),\n  phone: text(\"phone\").notNull(),\n  website: text(\"website\"),\n  contactName: text(\"contact_name\").notNull(),\n  contactEmail: text(\"contact_email\").notNull(),\n  contactPhone: text(\"contact_phone\").notNull(),\n  logoUrl: text(\"logo_url\"),\n  primaryColor: text(\"primary_color\").notNull().default('#8b5cf6'),\n  secondaryColor: text(\"secondary_color\").notNull().default('#a78bfa'),\n  accentColor: text(\"accent_color\").notNull().default('#c4b5fd'),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  emailIdx: index(\"clients_email_idx\").on(table.email),\n  cnpjIdx: index(\"clients_cnpj_idx\").on(table.cnpj),\n}));\n\nexport const insertClientSchema = createInsertSchema(clients).omit({\n  id: true,\n});\n\nexport type InsertClient = z.infer<typeof insertClientSchema>;\nexport type Client = typeof clients.$inferSelect;\n\nexport const purchases = pgTable(\"purchases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  clientId: varchar(\"client_id\").notNull().references(() => clients.id, { onDelete: 'cascade' }),\n  planId: varchar(\"plan_id\").notNull().references(() => plans.id),\n  purchaseDate: text(\"purchase_date\").notNull(),\n  expiryDate: text(\"expiry_date\").notNull(),\n  amount: text(\"amount\").notNull(),\n  status: text(\"status\").notNull().default('active'),\n  paymentMethod: text(\"payment_method\"),\n  transactionId: text(\"transaction_id\"),\n}, (table) => ({\n  clientIdIdx: index(\"purchases_client_id_idx\").on(table.clientId),\n}));\n\nexport const insertPurchaseSchema = createInsertSchema(purchases).omit({\n  id: true,\n});\n\nexport type InsertPurchase = z.infer<typeof insertPurchaseSchema>;\nexport type Purchase = typeof purchases.$inferSelect;\n\nexport const emailSettings = pgTable(\"email_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  provider: text(\"provider\").notNull(),\n  apiKey: text(\"api_key\"),\n  senderEmail: text(\"sender_email\").notNull(),\n  senderName: text(\"sender_name\").notNull(),\n  smtpHost: text(\"smtp_host\"),\n  smtpPort: text(\"smtp_port\"),\n  smtpUser: text(\"smtp_user\"),\n  smtpPassword: text(\"smtp_password\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n});\n\nexport const insertEmailSettingsSchema = createInsertSchema(emailSettings).omit({\n  id: true,\n});\n\nexport type InsertEmailSettings = z.infer<typeof insertEmailSettingsSchema>;\nexport type EmailSettings = typeof emailSettings.$inferSelect;\n\nexport const sectors = pgTable(\"sectors\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  nameIdx: index(\"sectors_name_idx\").on(table.name),\n}));\n\nexport const insertSectorSchema = createInsertSchema(sectors).omit({\n  id: true,\n});\n\nexport type InsertSector = z.infer<typeof insertSectorSchema>;\nexport type Sector = typeof sectors.$inferSelect;\n\nexport const subsectors = pgTable(\"subsectors\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  sectorId: varchar(\"sector_id\").notNull().references(() => sectors.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  sectorIdIdx: index(\"subsectors_sector_id_idx\").on(table.sectorId),\n  nameIdx: index(\"subsectors_name_idx\").on(table.name),\n}));\n\nexport const insertSubsectorSchema = createInsertSchema(subsectors).omit({\n  id: true,\n});\n\nexport type InsertSubsector = z.infer<typeof insertSubsectorSchema>;\nexport type Subsector = typeof subsectors.$inferSelect;\n\nexport const events = pgTable(\"events\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  eventDate: text(\"event_date\").notNull(),\n  endDate: text(\"end_date\"),\n  location: text(\"location\").notNull(),\n  address: text(\"address\").notNull(),\n  city: text(\"city\").notNull(),\n  state: text(\"state\").notNull(),\n  country: text(\"country\").notNull(),\n  isFree: text(\"is_free\").notNull().default('true'),\n  price: text(\"price\"),\n  coverImageUrl: text(\"cover_image_url\"),\n  organizerName: text(\"organizer_name\").notNull(),\n  organizerEmail: text(\"organizer_email\").notNull(),\n  organizerPhone: text(\"organizer_phone\"),\n  website: text(\"website\"),\n  capacity: text(\"capacity\"),\n  category: text(\"category\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  eventDateIdx: index(\"events_event_date_idx\").on(table.eventDate),\n  cityIdx: index(\"events_city_idx\").on(table.city),\n}));\n\nexport const insertEventSchema = createInsertSchema(events).omit({\n  id: true,\n});\n\nexport type InsertEvent = z.infer<typeof insertEventSchema>;\nexport type Event = typeof events.$inferSelect;\n\nexport const banners = pgTable(\"banners\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  subtitle: text(\"subtitle\"),\n  imageUrl: text(\"image_url\").notNull(),\n  linkUrl: text(\"link_url\"),\n  displayOrder: text(\"display_order\").notNull().default('0'),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  displayOrderIdx: index(\"banners_display_order_idx\").on(table.displayOrder),\n}));\n\nexport const insertBannerSchema = createInsertSchema(banners).omit({\n  id: true,\n});\n\nexport type InsertBanner = z.infer<typeof insertBannerSchema>;\nexport type Banner = typeof banners.$inferSelect;\n\nexport const settings = pgTable(\"settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  key: text(\"key\").notNull().unique(),\n  value: text(\"value\").notNull(),\n}, (table) => ({\n  keyIdx: index(\"settings_key_idx\").on(table.key),\n}));\n\nexport const insertSettingSchema = createInsertSchema(settings).omit({\n  id: true,\n});\n\nexport type InsertSetting = z.infer<typeof insertSettingSchema>;\nexport type Setting = typeof settings.$inferSelect;\n\nexport const operatorProfileFields = pgTable(\"operator_profile_fields\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  fieldName: text(\"field_name\").notNull().unique(),\n  fieldLabel: text(\"field_label\").notNull(),\n  isRequired: text(\"is_required\").notNull().default('false'),\n  weight: text(\"weight\").notNull().default('1'),\n}, (table) => ({\n  fieldNameIdx: index(\"operator_profile_fields_field_name_idx\").on(table.fieldName),\n}));\n\nexport const insertOperatorProfileFieldSchema = createInsertSchema(operatorProfileFields).omit({\n  id: true,\n});\n\nexport type InsertOperatorProfileField = z.infer<typeof insertOperatorProfileFieldSchema>;\nexport type OperatorProfileField = typeof operatorProfileFields.$inferSelect;\n\nexport const jobs = pgTable(\"jobs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyId: varchar(\"company_id\").references(() => companies.id, { onDelete: 'cascade' }),\n  clientId: varchar(\"client_id\").references(() => clients.id, { onDelete: 'cascade' }),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  requirements: text(\"requirements\"),\n  responsibilities: text(\"responsibilities\"),\n  benefits: text(\"benefits\"),\n  location: text(\"location\").notNull(),\n  city: text(\"city\"),\n  state: text(\"state\"),\n  workType: text(\"work_type\").notNull(),\n  contractType: text(\"contract_type\").notNull(),\n  salary: text(\"salary\"),\n  salaryPeriod: text(\"salary_period\"),\n  sectorId: varchar(\"sector_id\").references(() => sectors.id),\n  subsectorId: varchar(\"subsector_id\").references(() => subsectors.id),\n  experienceLevel: text(\"experience_level\"),\n  educationLevel: text(\"education_level\"),\n  status: text(\"status\").notNull().default('active'),\n  tags: text(\"tags\").array(),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  updatedAt: text(\"updated_at\"),\n  expiryDate: text(\"expiry_date\"),\n  vacancies: text(\"vacancies\").notNull().default('1'),\n  viewCount: text(\"view_count\").notNull().default('0'),\n}, (table) => ({\n  companyIdIdx: index(\"jobs_company_id_idx\").on(table.companyId),\n  clientIdIdx: index(\"jobs_client_id_idx\").on(table.clientId),\n  statusIdx: index(\"jobs_status_idx\").on(table.status),\n  sectorIdIdx: index(\"jobs_sector_id_idx\").on(table.sectorId),\n}));\n\nexport const insertJobSchema = createInsertSchema(jobs).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertJob = z.infer<typeof insertJobSchema>;\nexport type Job = typeof jobs.$inferSelect;\n\nexport const applications = pgTable(\"applications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  jobId: varchar(\"job_id\").notNull().references(() => jobs.id, { onDelete: 'cascade' }),\n  operatorId: varchar(\"operator_id\").notNull().references(() => operators.id, { onDelete: 'cascade' }),\n  status: text(\"status\").notNull().default('pending'),\n  appliedAt: text(\"applied_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  notes: text(\"notes\"),\n}, (table) => ({\n  jobIdIdx: index(\"applications_job_id_idx\").on(table.jobId),\n  operatorIdIdx: index(\"applications_operator_id_idx\").on(table.operatorId),\n  statusIdx: index(\"applications_status_idx\").on(table.status),\n}));\n\nexport const insertApplicationSchema = createInsertSchema(applications).omit({\n  id: true,\n  appliedAt: true,\n});\n\nexport type InsertApplication = z.infer<typeof insertApplicationSchema>;\nexport type Application = typeof applications.$inferSelect;\n\nexport const savedJobs = pgTable(\"saved_jobs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  operatorId: varchar(\"operator_id\").notNull().references(() => operators.id, { onDelete: 'cascade' }),\n  jobId: varchar(\"job_id\").notNull().references(() => jobs.id, { onDelete: 'cascade' }),\n  savedAt: text(\"saved_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  operatorIdIdx: index(\"saved_jobs_operator_id_idx\").on(table.operatorId),\n  jobIdIdx: index(\"saved_jobs_job_id_idx\").on(table.jobId),\n  uniqueSave: index(\"saved_jobs_unique_save\").on(table.operatorId, table.jobId),\n}));\n\nexport const insertSavedJobSchema = createInsertSchema(savedJobs).omit({\n  id: true,\n  savedAt: true,\n});\n\nexport type InsertSavedJob = z.infer<typeof insertSavedJobSchema>;\nexport type SavedJob = typeof savedJobs.$inferSelect;\n\nexport const questions = pgTable(\"questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyId: varchar(\"company_id\").references(() => companies.id, { onDelete: 'cascade' }),\n  clientId: varchar(\"client_id\").references(() => clients.id, { onDelete: 'cascade' }),\n  questionText: text(\"question_text\").notNull(),\n  questionType: text(\"question_type\").notNull(),\n  options: text(\"options\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  companyIdIdx: index(\"questions_company_id_idx\").on(table.companyId),\n  clientIdIdx: index(\"questions_client_id_idx\").on(table.clientId),\n}));\n\nexport const insertQuestionSchema = createInsertSchema(questions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertQuestion = z.infer<typeof insertQuestionSchema>;\nexport type Question = typeof questions.$inferSelect;\n\nexport const jobQuestions = pgTable(\"job_questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  jobId: varchar(\"job_id\").notNull().references(() => jobs.id, { onDelete: 'cascade' }),\n  questionId: varchar(\"question_id\").notNull().references(() => questions.id, { onDelete: 'cascade' }),\n  isRequired: text(\"is_required\").notNull().default('false'),\n  displayOrder: text(\"display_order\"),\n}, (table) => ({\n  jobIdIdx: index(\"job_questions_job_id_idx\").on(table.jobId),\n  questionIdIdx: index(\"job_questions_question_id_idx\").on(table.questionId),\n}));\n\nexport const insertJobQuestionSchema = createInsertSchema(jobQuestions).omit({\n  id: true,\n});\n\nexport type InsertJobQuestion = z.infer<typeof insertJobQuestionSchema>;\nexport type JobQuestion = typeof jobQuestions.$inferSelect;\n\nexport type QuestionWithRequired = Question & { isRequired: string };\n\nexport const applicationAnswers = pgTable(\"application_answers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  applicationId: varchar(\"application_id\").notNull().references(() => applications.id, { onDelete: 'cascade' }),\n  questionId: varchar(\"question_id\").notNull().references(() => questions.id, { onDelete: 'cascade' }),\n  answerText: text(\"answer_text\"),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  applicationIdIdx: index(\"application_answers_application_id_idx\").on(table.applicationId),\n  questionIdIdx: index(\"application_answers_question_id_idx\").on(table.questionId),\n}));\n\nexport const insertApplicationAnswerSchema = createInsertSchema(applicationAnswers).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertApplicationAnswer = z.infer<typeof insertApplicationAnswerSchema>;\nexport type ApplicationAnswer = typeof applicationAnswers.$inferSelect;\n\nexport const siteVisits = pgTable(\"site_visits\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ipAddress: text(\"ip_address\").notNull(),\n  country: text(\"country\"),\n  city: text(\"city\"),\n  region: text(\"region\"),\n  userAgent: text(\"user_agent\"),\n  visitedAt: text(\"visited_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  visitedAtIdx: index(\"site_visits_visited_at_idx\").on(table.visitedAt),\n  ipAddressIdx: index(\"site_visits_ip_address_idx\").on(table.ipAddress),\n}));\n\nexport const insertSiteVisitSchema = createInsertSchema(siteVisits).omit({\n  id: true,\n  visitedAt: true,\n});\n\nexport type InsertSiteVisit = z.infer<typeof insertSiteVisitSchema>;\nexport type SiteVisit = typeof siteVisits.$inferSelect;\n\nexport const newsletterSubscriptions = pgTable(\"newsletter_subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  subscribedAt: text(\"subscribed_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  isActive: text(\"is_active\").notNull().default('true'),\n}, (table) => ({\n  emailIdx: index(\"newsletter_subscriptions_email_idx\").on(table.email),\n  subscribedAtIdx: index(\"newsletter_subscriptions_subscribed_at_idx\").on(table.subscribedAt),\n}));\n\nexport const insertNewsletterSubscriptionSchema = createInsertSchema(newsletterSubscriptions).omit({\n  id: true,\n  subscribedAt: true,\n});\n\nexport type InsertNewsletterSubscription = z.infer<typeof insertNewsletterSubscriptionSchema>;\nexport type NewsletterSubscription = typeof newsletterSubscriptions.$inferSelect;\n\nexport const passwordResetCodes = pgTable(\"password_reset_codes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull(),\n  code: text(\"code\").notNull(),\n  userType: text(\"user_type\").notNull(),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  expiresAt: text(\"expires_at\").notNull(),\n  isUsed: text(\"is_used\").notNull().default('false'),\n}, (table) => ({\n  emailIdx: index(\"password_reset_codes_email_idx\").on(table.email),\n  codeIdx: index(\"password_reset_codes_code_idx\").on(table.code),\n  expiresAtIdx: index(\"password_reset_codes_expires_at_idx\").on(table.expiresAt),\n}));\n\nexport const insertPasswordResetCodeSchema = createInsertSchema(passwordResetCodes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertPasswordResetCode = z.infer<typeof insertPasswordResetCodeSchema>;\nexport type PasswordResetCode = typeof passwordResetCodes.$inferSelect;\n\nexport const creditTransactions = pgTable(\"credit_transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyId: varchar(\"company_id\").notNull().references(() => companies.id, { onDelete: 'cascade' }),\n  type: text(\"type\").notNull(),\n  amount: text(\"amount\").notNull(),\n  description: text(\"description\").notNull(),\n  relatedPlanId: varchar(\"related_plan_id\").references(() => plans.id),\n  relatedJobId: varchar(\"related_job_id\").references(() => jobs.id),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n  balanceAfter: text(\"balance_after\").notNull(),\n}, (table) => ({\n  companyIdIdx: index(\"credit_transactions_company_id_idx\").on(table.companyId),\n  createdAtIdx: index(\"credit_transactions_created_at_idx\").on(table.createdAt),\n  typeIdx: index(\"credit_transactions_type_idx\").on(table.type),\n}));\n\nexport const insertCreditTransactionSchema = createInsertSchema(creditTransactions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertCreditTransaction = z.infer<typeof insertCreditTransactionSchema>;\nexport type CreditTransaction = typeof creditTransactions.$inferSelect;\n\nexport const workTypes = pgTable(\"work_types\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyId: varchar(\"company_id\").notNull().references(() => companies.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  companyIdIdx: index(\"work_types_company_id_idx\").on(table.companyId),\n}));\n\nexport const insertWorkTypeSchema = createInsertSchema(workTypes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertWorkType = z.infer<typeof insertWorkTypeSchema>;\nexport type WorkType = typeof workTypes.$inferSelect;\n\nexport const contractTypes = pgTable(\"contract_types\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyId: varchar(\"company_id\").notNull().references(() => companies.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  companyIdIdx: index(\"contract_types_company_id_idx\").on(table.companyId),\n}));\n\nexport const insertContractTypeSchema = createInsertSchema(contractTypes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertContractType = z.infer<typeof insertContractTypeSchema>;\nexport type ContractType = typeof contractTypes.$inferSelect;\n\nexport const tags = pgTable(\"tags\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  description: text(\"description\"),\n  color: text(\"color\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n}, (table) => ({\n  slugIdx: index(\"tags_slug_idx\").on(table.slug),\n}));\n\nexport const insertTagSchema = createInsertSchema(tags).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertTag = z.infer<typeof insertTagSchema>;\nexport type Tag = typeof tags.$inferSelect;\n\nexport const globalWorkTypes = pgTable(\"global_work_types\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n});\n\nexport const insertGlobalWorkTypeSchema = createInsertSchema(globalWorkTypes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertGlobalWorkType = z.infer<typeof insertGlobalWorkTypeSchema>;\nexport type GlobalWorkType = typeof globalWorkTypes.$inferSelect;\n\nexport const globalContractTypes = pgTable(\"global_contract_types\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  isActive: text(\"is_active\").notNull().default('true'),\n  createdAt: text(\"created_at\").notNull().default(sql`CURRENT_TIMESTAMP`),\n});\n\nexport const insertGlobalContractTypeSchema = createInsertSchema(globalContractTypes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertGlobalContractType = z.infer<typeof insertGlobalContractTypeSchema>;\nexport type GlobalContractType = typeof globalContractTypes.$inferSelect;\n","size_bytes":24667},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/examples/HeroSection.tsx":{"content":"import { HeroSection } from \"../HeroSection\";\n\nexport default function HeroSectionExample() {\n  return <HeroSection />;\n}\n","size_bytes":122},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"design_guidelines.md":{"content":"# Design Guidelines: Global Job Board Platform\n\n## Design Approach\n**System-Based Approach**: Using Material Design principles adapted for a data-intensive job platform. Drawing patterns from LinkedIn, Indeed, and AngelList for proven job search experiences while maintaining modern aesthetics.\n\n## Core Design Principles\n1. **Information Clarity**: Scannable job cards with clear visual hierarchy\n2. **Efficient Navigation**: Quick filtering and search without overwhelming users\n3. **Global Accessibility**: Intuitive for international audiences with bilingual support\n4. **Trust & Professionalism**: Clean, credible interface that employers and candidates trust\n\n---\n\n## Layout System\n\n### Spacing Scale\nUse Tailwind units: **2, 3, 4, 6, 8, 12, 16** for consistent rhythm\n- Compact spacing (2, 3, 4): Card internals, badges, small gaps\n- Medium spacing (6, 8): Between sections, component padding\n- Large spacing (12, 16): Page margins, section separation\n\n### Grid Structure\n- **Container**: `max-w-7xl mx-auto px-4 md:px-6 lg:px-8`\n- **Search/Filters**: Fixed sidebar (320px) + flexible main content\n- **Job Listings**: Single column cards on mobile, maintain single column on desktop for scannability\n- **Homepage**: Multi-section layout with featured jobs, stats, categories\n\n---\n\n## Typography Hierarchy\n\n### Font System\n- **Primary Font**: Inter (via Google Fonts CDN) - excellent for UI and data display\n- **Accent Font**: DM Sans - for headlines and company names\n\n### Type Scale\n```\nHeadings:\n- H1: text-4xl md:text-5xl font-bold (Page titles)\n- H2: text-2xl md:text-3xl font-bold (Section headers)\n- H3: text-xl font-semibold (Job titles, card headers)\n- H4: text-lg font-semibold (Subsections)\n\nBody:\n- Large: text-base (Job descriptions, primary content)\n- Regular: text-sm (Company info, metadata, filters)\n- Small: text-xs (Tags, timestamps, secondary info)\n\nSpecial:\n- Salary/Compensation: text-lg font-bold\n- Location: text-sm with icon prefix\n- Company Name: text-base font-medium\n```\n\n---\n\n## Component Library\n\n### Navigation Header\n- **Sticky header** with logo, main search bar, language toggle (PT/EN), \"Post Job\" CTA\n- Search bar: Full-width on mobile, centered max-w-2xl on desktop with search icon\n- Mobile: Hamburger menu with slide-out navigation\n\n### Job Cards (Primary Component)\n**Structure for each card:**\n- Company logo (48x48px rounded)\n- Job title (H3)\n- Company name + verification badge\n- Location with map pin icon + Remote/Hybrid/Onsite badge\n- Salary range (if available)\n- Contract type badge (Full-time, Part-time, Contract, Freelance)\n- 2-line job description excerpt\n- Posted time + Application count\n- Bookmark icon (top-right)\n- Border on hover, subtle shadow lift\n\n**Layout**: `p-6 rounded-lg border` with `gap-3` internal spacing\n\n### Filter Sidebar\n**Filter Groups (collapsible accordions):**\n- Search by keyword (text input with icon)\n- Location (country dropdown + city autocomplete)\n- Work Type (checkboxes: Remote, Hybrid, Onsite)\n- Job Category (multi-select with popular options)\n- Experience Level (Junior, Mid, Senior, Lead)\n- Salary Range (dual-range slider)\n- Posted Date (radio buttons: 24h, Week, Month, Any)\n\nActive filters shown as dismissible badges above results\n\n### Job Detail Page\n**Two-column layout on desktop:**\n- **Main Column (2/3 width):**\n  - Job title (H1)\n  - Company info bar with logo, name, industry, size\n  - Salary + benefits badges\n  - Full job description with formatted sections\n  - Requirements (bulleted list)\n  - Responsibilities (bulleted list)\n  - \"About Company\" section\n  \n- **Sidebar (1/3 width, sticky):**\n  - \"Apply Now\" CTA button (large, prominent)\n  - Quick stats (posted date, applicants, views)\n  - Location details + map embed\n  - Share buttons\n  - Similar jobs widget\n\n### Interactive Map\n- **Homepage Section**: Full-width map showing job density by country\n- Hover states showing job count\n- Click to filter by region\n- Legend with job count indicators\n\n### Category Browse Section\nGrid of category cards (2 cols mobile, 4 cols desktop):\n- Icon representing category (from Heroicons)\n- Category name\n- Job count badge\n- Background with subtle pattern\n\n### Stats Banner\nHorizontal row showing platform metrics:\n- Active Jobs | Companies | Countries | Average Salary\n- Large numbers with animated counter on scroll\n- Icons from Heroicons\n\n### Footer\n**Comprehensive footer with:**\n- Logo + tagline\n- Quick links (Browse Jobs, Post Job, Companies, About, Contact)\n- Location links (Jobs by Country - top 8 countries)\n- Category links (Jobs by Industry - top 6)\n- Newsletter signup (email input + subscribe button)\n- Social media icons\n- Language selector\n- Trust badges (secure, verified employers)\n- Copyright + legal links\n\n---\n\n## Forms & Inputs\n\n### Search Input\n- Large size (h-12), rounded-lg\n- Left icon (search), right button (CTA)\n- Placeholder text with examples\n\n### Filter Controls\n- **Checkboxes**: Custom styled, 20x20px with check icon\n- **Dropdowns**: Native select enhanced with chevron icon\n- **Range Sliders**: Custom dual-thumb for salary range\n- All form elements: `rounded-md` with consistent padding\n\n### Apply/CTA Buttons\n- **Primary**: Large (h-12 md:h-14), rounded-lg, full-width on mobile\n- **Secondary**: Medium (h-10), outlined style\n- **Icon Buttons**: Square (40x40px) for bookmark, share\n\n---\n\n## Icons\n**Heroicons** (via CDN) - outline style for consistency:\n- Search, map-pin, briefcase, clock, users, currency-dollar\n- Building-office, globe, filter, chevron-down, x-mark, bookmark\n- All icons: 20x20px (small), 24x24px (regular)\n\n---\n\n## Images\n\n### Hero Section\n**Large hero image**: Full-width, gradient overlay\n- Image: Diverse professionals collaborating in modern office/remote setting\n- Height: 60vh on desktop, 40vh on mobile\n- Overlay gradient for text readability\n- Centered search bar with blurred background card (backdrop-blur-md)\n- Headline: \"Find Your Dream Job Anywhere in the World\"\n- Subheading with job count stat\n\n### Company Logos\nDisplayed in job cards and detail pages:\n- Square format, 48x48px (cards), 80x80px (detail page)\n- Rounded corners, subtle border\n- Fallback: Company initial in colored circle\n\n### Map Visualization\nInteractive world map in homepage section showing job density\n\n### Category/Industry Icons\nIllustrative icons or simple graphics representing job categories (tech, healthcare, finance, etc.)\n\n---\n\n## Responsive Behavior\n\n### Breakpoints\n- Mobile: Base styles (single column, stacked filters)\n- Tablet (md: 768px): Two-column layouts emerge\n- Desktop (lg: 1024px): Full sidebar + main content, multi-column grids\n- Wide (xl: 1280px): Max container width, optimal spacing\n\n### Mobile Considerations\n- Bottom sheet for filters (slide up)\n- Sticky \"Show Results\" button when filtering\n- Simplified job cards with essential info only\n- Tap-friendly targets (minimum 44x44px)\n\n---\n\n## Animations\n**Minimal, purposeful motion:**\n- Page transitions: Fade in content (200ms)\n- Card hover: Subtle lift with shadow (150ms ease)\n- Filter apply: Smooth height transition\n- Counter animation: Stats number increment on view\n\nNo decorative animations, parallax, or complex scroll effects.\n\n---\n\nThis design creates a professional, scannable job platform that prioritizes information density and user efficiency while maintaining visual appeal and trust signals essential for both job seekers and employers.","size_bytes":7381},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type { Company, Operator, Admin } from \"@shared/schema\";\n\ntype User = Company | Operator | Admin;\ntype UserType = 'company' | 'operator' | 'admin';\n\ninterface AuthResponse {\n  user: User;\n  userType: UserType;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  userType: UserType | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const queryClient = useQueryClient();\n  const [isReady, setIsReady] = useState(false);\n\n  const { data, isLoading } = useQuery<AuthResponse>({\n    queryKey: ['/api/auth/me'],\n    retry: false,\n    staleTime: 5 * 60 * 1000, // 5 minutos\n  });\n\n  useEffect(() => {\n    if (!isLoading) {\n      setIsReady(true);\n    }\n  }, [isLoading]);\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n      if (!response.ok) {\n        throw new Error(\"Erro ao fazer logout\");\n      }\n    },\n    onSuccess: () => {\n      queryClient.setQueryData(['/api/auth/me'], null);\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      window.location.href = \"/\";\n    },\n  });\n\n  const logout = async () => {\n    await logoutMutation.mutateAsync();\n  };\n\n  const value: AuthContextType = {\n    user: data?.user || null,\n    userType: data?.userType || null,\n    isLoading: !isReady,\n    isAuthenticated: !!data?.user,\n    logout,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":2040},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/pages/AdminPlans.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Package, Plus, Pencil, Trash2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Plan } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function AdminPlans() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingPlan, setEditingPlan] = useState<Plan | null>(null);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    vacancyQuantity: \"\",\n    features: \"\",\n    isActive: \"true\",\n  });\n\n  const { data: plans, isLoading } = useQuery<Plan[]>({\n    queryKey: ['/api/plans'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const createPlanMutation = useMutation({\n    mutationFn: async (planData: typeof formData) => {\n      return await apiRequest('POST', '/api/plans', planData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/plans'] });\n      toast({\n        title: \"Plano criado\",\n        description: \"O plano foi criado com sucesso\",\n      });\n      setIsDialogOpen(false);\n      resetForm();\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar plano\",\n        description: \"Tente novamente\",\n      });\n    },\n  });\n\n  const updatePlanMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: typeof formData }) => {\n      return await apiRequest('PUT', `/api/plans/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/plans'] });\n      toast({\n        title: \"Plano atualizado\",\n        description: \"O plano foi atualizado com sucesso\",\n      });\n      setIsDialogOpen(false);\n      setEditingPlan(null);\n      resetForm();\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar plano\",\n        description: \"Tente novamente\",\n      });\n    },\n  });\n\n  const deletePlanMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest('DELETE', `/api/plans/${id}`);\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao excluir plano\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/plans'] });\n      toast({\n        title: \"Plano excluído\",\n        description: \"O plano foi excluído com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir plano\",\n        description: error.message,\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: \"\",\n      description: \"\",\n      price: \"\",\n      vacancyQuantity: \"\",\n      features: \"\",\n      isActive: \"true\",\n    });\n  };\n\n  const handleOpenDialog = (plan?: Plan) => {\n    if (plan) {\n      setEditingPlan(plan);\n      setFormData({\n        name: plan.name,\n        description: plan.description,\n        price: plan.price,\n        vacancyQuantity: plan.vacancyQuantity,\n        features: plan.features,\n        isActive: plan.isActive,\n      });\n    } else {\n      setEditingPlan(null);\n      resetForm();\n    }\n    setIsDialogOpen(true);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingPlan) {\n      updatePlanMutation.mutate({ id: editingPlan.id, data: formData });\n    } else {\n      createPlanMutation.mutate(formData);\n    }\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"Tem certeza que deseja excluir este plano?\")) {\n      deletePlanMutation.mutate(id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"mb-6 flex justify-end\">\n        <Button\n          onClick={() => handleOpenDialog()}\n          data-testid=\"button-create-plan\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Novo Plano\n        </Button>\n      </div>\n      {isLoading ? (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i}>\n              <CardHeader>\n                <Skeleton className=\"h-6 w-32\" />\n                <Skeleton className=\"h-4 w-24\" />\n              </CardHeader>\n              <CardContent>\n                <Skeleton className=\"h-20 w-full\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : plans && plans.length > 0 ? (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {plans.map((plan) => (\n            <Card key={plan.id} data-testid={`card-plan-${plan.id}`}>\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Package className=\"h-5 w-5\" />\n                      {plan.name}\n                    </CardTitle>\n                    <CardDescription className=\"mt-1\">\n                      R$ {plan.price} - {plan.vacancyQuantity} vagas\n                    </CardDescription>\n                  </div>\n                  <Badge variant={plan.isActive === 'true' ? 'default' : 'secondary'}>\n                    {plan.isActive === 'true' ? 'Ativo' : 'Inativo'}\n                  </Badge>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  {plan.description}\n                </p>\n                \n                <div className=\"mb-4\">\n                  <h4 className=\"text-sm font-medium mb-2\">Benefícios:</h4>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\n                    {plan.features}\n                  </p>\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleOpenDialog(plan)}\n                    data-testid={`button-edit-plan-${plan.id}`}\n                  >\n                    <Pencil className=\"h-4 w-4 mr-2\" />\n                    Editar\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleDelete(plan.id)}\n                    data-testid={`button-delete-plan-${plan.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\n                    Excluir\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-12\">\n          <Package className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n          <h3 className=\"text-lg font-semibold mb-2\">Nenhum plano cadastrado</h3>\n          <p className=\"text-sm text-muted-foreground mb-4\">\n            Comece criando seu primeiro plano\n          </p>\n          <Button onClick={() => handleOpenDialog()} data-testid=\"button-create-first-plan\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Criar Plano\n          </Button>\n        </div>\n      )}\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingPlan ? 'Editar Plano' : 'Novo Plano'}\n            </DialogTitle>\n            <DialogDescription>\n              Preencha os dados do plano\n            </DialogDescription>\n          </DialogHeader>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Nome do Plano *</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"Ex: Plano Básico\"\n                required\n                data-testid=\"input-plan-name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">Descrição *</Label>\n              <Textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Descreva o plano\"\n                required\n                data-testid=\"input-plan-description\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"price\">Preço *</Label>\n                <Input\n                  id=\"price\"\n                  value={formData.price}\n                  onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                  placeholder=\"Ex: 99,00\"\n                  required\n                  data-testid=\"input-plan-price\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"vacancyQuantity\">Quantidade de Vagas *</Label>\n                <Input\n                  id=\"vacancyQuantity\"\n                  value={formData.vacancyQuantity}\n                  onChange={(e) => setFormData({ ...formData, vacancyQuantity: e.target.value })}\n                  placeholder=\"Ex: 10\"\n                  required\n                  data-testid=\"input-plan-vacancy-quantity\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"features\">Benefícios *</Label>\n              <Textarea\n                id=\"features\"\n                value={formData.features}\n                onChange={(e) => setFormData({ ...formData, features: e.target.value })}\n                placeholder=\"Liste os benefícios, um por linha\"\n                rows={5}\n                required\n                data-testid=\"input-plan-features\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"isActive\">Status *</Label>\n              <Select\n                value={formData.isActive}\n                onValueChange={(value) => setFormData({ ...formData, isActive: value })}\n              >\n                <SelectTrigger data-testid=\"select-plan-status\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"true\">Ativo</SelectItem>\n                  <SelectItem value=\"false\">Inativo</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex justify-end gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  setIsDialogOpen(false);\n                  setEditingPlan(null);\n                  resetForm();\n                }}\n                data-testid=\"button-cancel\"\n              >\n                Cancelar\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createPlanMutation.isPending || updatePlanMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createPlanMutation.isPending || updatePlanMutation.isPending\n                  ? \"Salvando...\"\n                  : editingPlan\n                  ? \"Atualizar\"\n                  : \"Criar\"}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":12482},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider } from \"@/hooks/use-auth\";\nimport { AdminShell } from \"@/components/AdminShell\";\nimport { CompanyShell } from \"@/components/CompanyShell\";\nimport Home from \"@/pages/Home\";\nimport Login from \"@/pages/Login\";\nimport ForgotPassword from \"@/pages/ForgotPassword\";\nimport Signup from \"@/pages/Signup\";\nimport SignupCompany from \"@/pages/SignupCompany\";\nimport SignupOperator from \"@/pages/SignupOperator\";\nimport CompanyDashboard from \"@/pages/CompanyDashboard\";\nimport CompanyProfile from \"@/pages/CompanyProfile\";\nimport CompanyJobs from \"@/pages/CompanyJobs\";\nimport JobApplications from \"@/pages/JobApplications\";\nimport CompanyPlan from \"@/pages/CompanyPlan\";\nimport CompanyQuestions from \"@/pages/CompanyQuestions\";\nimport CompanyWorkTypes from \"@/pages/CompanyWorkTypes\";\nimport CompanyContractTypes from \"@/pages/CompanyContractTypes\";\nimport CompanyCredits from \"@/pages/CompanyCredits\";\nimport OperatorDashboard from \"@/pages/OperatorDashboard\";\nimport OperatorProfile from \"@/pages/OperatorProfile\";\nimport SavedJobs from \"@/pages/SavedJobs\";\nimport UsersList from \"@/pages/UsersList\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport AdminClients from \"@/pages/AdminClients\";\nimport AdminOperators from \"@/pages/AdminOperators\";\nimport AdminJobs from \"@/pages/AdminJobs\";\nimport AdminEditJob from \"@/pages/AdminEditJob\";\nimport AdminPlans from \"@/pages/AdminPlans\";\nimport AdminSectors from \"@/pages/AdminSectors\";\nimport AdminTaxonomy from \"@/pages/AdminTaxonomy\";\nimport AdminEvents from \"@/pages/AdminEvents\";\nimport AdminBanners from \"@/pages/AdminBanners\";\nimport AdminSettings from \"@/pages/AdminSettings\";\nimport AdminFinanceiro from \"@/pages/AdminFinanceiro\";\nimport AdminNewsletters from \"@/pages/AdminNewsletters\";\nimport Events from \"@/pages/Events\";\nimport JobView from \"@/pages/JobView\";\nimport PublicJobs from \"@/pages/PublicJobs\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/recuperar-senha\" component={ForgotPassword} />\n      <Route path=\"/cadastro\" component={Signup} />\n      <Route path=\"/cadastro/company\" component={SignupCompany} />\n      <Route path=\"/cadastro/operator\" component={SignupOperator} />\n      <Route path=\"/dashboard/empresa\" component={CompanyDashboard} />\n      <Route path=\"/empresa/vagas\" component={CompanyJobs} />\n      <Route path=\"/empresa/vaga/:id/candidatos\" component={JobApplications} />\n      <Route path=\"/empresa/plano\" component={CompanyPlan} />\n      <Route path=\"/empresa/perfil\" component={CompanyProfile} />\n      <Route path=\"/empresa/creditos\" component={CompanyCredits} />\n      <Route path=\"/empresa/banco-perguntas\" component={CompanyQuestions} />\n      <Route path=\"/empresa/tipos-trabalho\" component={CompanyWorkTypes} />\n      <Route path=\"/empresa/tipos-contrato\" component={CompanyContractTypes} />\n      <Route path=\"/dashboard/operador\" component={OperatorDashboard} />\n      <Route path=\"/perfil/operador\" component={OperatorProfile} />\n      <Route path=\"/vagas-salvas\" component={SavedJobs} />\n      <Route path=\"/vagas\" component={PublicJobs} />\n      <Route path=\"/vaga/:id\" component={JobView} />\n      <Route path=\"/eventos\" component={Events} />\n      <Route path=\"/usuarios\" component={UsersList} />\n      <Route path=\"/admin/login\" component={Login} />\n      <Route path=\"/admin\" component={AdminDashboard} />\n      <Route path=\"/admin/clientes\" component={AdminClients} />\n      <Route path=\"/admin/operadores\" component={AdminOperators} />\n      <Route path=\"/admin/vagas/:id/editar\" component={AdminEditJob} />\n      <Route path=\"/admin/vagas\" component={AdminJobs} />\n      <Route path=\"/admin/planos\" component={AdminPlans} />\n      <Route path=\"/admin/financeiro\" component={AdminFinanceiro} />\n      <Route path=\"/admin/setores\" component={AdminSectors} />\n      <Route path=\"/admin/taxonomia\" component={AdminTaxonomy} />\n      <Route path=\"/admin/eventos\" component={AdminEvents} />\n      <Route path=\"/admin/banners\" component={AdminBanners} />\n      <Route path=\"/admin/newsletter\" component={AdminNewsletters} />\n      <Route path=\"/admin/configuracoes\" component={AdminSettings} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <AdminShell>\n            <CompanyShell>\n              <Toaster />\n              <Router />\n            </CompanyShell>\n          </AdminShell>\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":4966},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".75rem\", /* 12px */\n        md: \".5rem\", /* 8px */\n        sm: \".375rem\", /* 6px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Manrope\", \"system-ui\", \"sans-serif\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        heading: [\"Outfit\", \"system-ui\", \"sans-serif\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4120},"client/src/components/examples/FilterSidebar.tsx":{"content":"import { FilterSidebar } from \"../FilterSidebar\";\n\nexport default function FilterSidebarExample() {\n  return <FilterSidebar />;\n}\n","size_bytes":130},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport memorystore from \"memorystore\";\nimport cookieParser from \"cookie-parser\";\nimport { db } from \"./db\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\nconst MemoryStore = memorystore(session);\n\n// Cookie parser middleware (must be before session)\napp.use(cookieParser());\n\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET || \"operlist-secret-key-change-in-production\",\n    resave: false,\n    saveUninitialized: false,\n    store: new MemoryStore({\n      checkPeriod: 86400000,\n    }),\n    cookie: {\n      secure: false,\n      httpOnly: true,\n      maxAge: 1000 * 60 * 60 * 24 * 7,\n      sameSite: 'lax',\n      path: '/',\n    },\n  })\n);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId?: string;\n    userType?: 'company' | 'operator' | 'admin';\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\n// Serve static assets from attached_assets directory\napp.use('/attached_assets', express.static('attached_assets'));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":3109},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/examples/Footer.tsx":{"content":"import { Footer } from \"../Footer\";\n\nexport default function FooterExample() {\n  return <Footer />;\n}\n","size_bytes":102},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ObjectUploader.tsx":{"content":"// Reference: blueprint:javascript_object_storage\nimport { useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Uppy from \"@uppy/core\";\nimport Dashboard from \"@uppy/dashboard\";\nimport XHR from \"@uppy/xhr-upload\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Button } from \"@/components/ui/button\";\nimport Portuguese from \"@uppy/locales/lib/pt_BR\";\n\ninterface ObjectUploaderProps {\n  maxNumberOfFiles?: number;\n  maxFileSize?: number;\n  onGetUploadParameters: () => Promise<{\n    method: \"PUT\";\n    url: string;\n    useLocal?: boolean;\n  }>;\n  onComplete?: (\n    result: UploadResult<Record<string, unknown>, Record<string, unknown>>\n  ) => void;\n  buttonClassName?: string;\n  children: ReactNode;\n}\n\nexport function ObjectUploader({\n  maxNumberOfFiles = 1,\n  maxFileSize = 10485760,\n  onGetUploadParameters,\n  onComplete,\n  buttonClassName,\n  children,\n}: ObjectUploaderProps) {\n  const [uppy] = useState(() => {\n    const uppyInstance = new Uppy({\n      restrictions: {\n        maxNumberOfFiles,\n        maxFileSize,\n        allowedFileTypes: ['image/*'],\n      },\n      autoProceed: false,\n      locale: Portuguese,\n    })\n      .use(Dashboard, {\n        inline: false,\n        proudlyDisplayPoweredByUppy: false,\n        showRemoveButtonAfterComplete: true,\n      })\n      .use(XHR, {\n        endpoint: '/api/upload/local',\n        method: 'POST',\n        formData: true,\n        fieldName: 'file',\n      })\n      .on('upload-success', (file, response) => {\n        // Intercepta a resposta do servidor e injeta o uploadURL\n        if (response && response.body) {\n          const filePath = response.body.filePath || response.body.uploadURL;\n          if (filePath && file) {\n            // Injeta o uploadURL diretamente no arquivo do Uppy\n            uppyInstance.setFileState(file.id, {\n              uploadURL: filePath,\n            });\n          }\n        }\n      })\n      .on(\"complete\", (result) => {\n        if (onComplete) {\n          onComplete(result as any);\n        }\n        const dashboardPlugin = uppyInstance.getPlugin('Dashboard') as any;\n        if (dashboardPlugin) {\n          dashboardPlugin.closeModal();\n        }\n      });\n    \n    return uppyInstance;\n  });\n\n  const handleOpenDashboard = () => {\n    const dashboardPlugin = uppy.getPlugin('Dashboard') as any;\n    if (dashboardPlugin) {\n      dashboardPlugin.openModal();\n    }\n  };\n\n  return (\n    <Button onClick={handleOpenDashboard} className={buttonClassName} data-testid=\"button-upload-photo\">\n      {children}\n    </Button>\n  );\n}\n","size_bytes":2550},"client/src/index.css":{"content":"@import url('https://unpkg.com/@uppy/core@5.1.1/dist/style.min.css');\n@import url('https://unpkg.com/@uppy/dashboard@5.0.4/dist/style.min.css');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .08);\n  --badge-outline: rgba(0,0,0, .04);\n  --opaque-button-border-intensity: -5;\n  --elevate-1: rgba(0,0,0, .02);\n  --elevate-2: rgba(0,0,0, .05);\n  --background: 0 0% 99%;\n  --foreground: 240 8% 15%;\n  --border: 240 6% 90%;\n  --card: 0 0% 100%;\n  --card-foreground: 240 8% 15%;\n  --card-border: 240 6% 94%;\n  --sidebar: 240 4% 97%;\n  --sidebar-foreground: 240 8% 15%;\n  --sidebar-border: 240 6% 90%;\n  --sidebar-primary: 250 95% 60%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 8% 93%;\n  --sidebar-accent-foreground: 240 8% 15%;\n  --sidebar-ring: 250 95% 60%;\n  --popover: 240 6% 96%;\n  --popover-foreground: 240 8% 15%;\n  --popover-border: 240 6% 92%;\n  --primary: 250 95% 60%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 240 8% 94%;\n  --secondary-foreground: 240 8% 15%;\n  --muted: 240 6% 95%;\n  --muted-foreground: 240 5% 45%;\n  --accent: 240 6% 96%;\n  --accent-foreground: 240 8% 15%;\n  --destructive: 0 72% 51%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 240 6% 85%;\n  --ring: 250 95% 60%;\n  --chart-1: 217 91% 48%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 71% 45%;\n  --chart-4: 43 96% 56%;\n  --chart-5: 27 87% 54%;\n  --font-sans: Manrope, system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .75rem;\n  --shadow-2xs: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-xs: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-sm: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-md: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-lg: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-xl: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --shadow-2xl: 0px 0px 0px 0px hsl(240 6% 50% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .08);\n  --badge-outline: rgba(255,255,255, .04);\n  --opaque-button-border-intensity: 6;\n  --elevate-1: rgba(255,255,255, .03);\n  --elevate-2: rgba(255,255,255, .06);\n  --background: 240 10% 10%;\n  --foreground: 0 0% 96%;\n  --border: 240 6% 20%;\n  --card: 240 8% 12%;\n  --card-foreground: 0 0% 96%;\n  --card-border: 240 6% 18%;\n  --sidebar: 240 8% 13%;\n  --sidebar-foreground: 0 0% 96%;\n  --sidebar-border: 240 6% 20%;\n  --sidebar-primary: 250 95% 65%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 6% 18%;\n  --sidebar-accent-foreground: 0 0% 96%;\n  --sidebar-ring: 250 95% 65%;\n  --popover: 240 8% 14%;\n  --popover-foreground: 0 0% 96%;\n  --popover-border: 240 6% 20%;\n  --primary: 250 95% 60%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 240 6% 20%;\n  --secondary-foreground: 0 0% 96%;\n  --muted: 240 6% 18%;\n  --muted-foreground: 240 4% 60%;\n  --accent: 240 6% 17%;\n  --accent-foreground: 0 0% 96%;\n  --destructive: 0 72% 51%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 240 6% 30%;\n  --ring: 250 95% 65%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 173 58% 60%;\n  --chart-3: 197 71% 68%;\n  --chart-4: 43 96% 70%;\n  --chart-5: 27 87% 68%;\n  --shadow-2xs: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-xs: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-sm: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-md: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-lg: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-xl: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n  --shadow-2xl: 0px 0px 0px 0px hsl(240 6% 5% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n\n/* Uppy Dashboard Customization - Operlist Identity */\n.uppy-Root {\n  font-family: var(--font-sans) !important;\n}\n\n.uppy-Dashboard-inner {\n  background-color: hsl(var(--card)) !important;\n  border: 1px solid hsl(var(--border)) !important;\n  border-radius: var(--radius) !important;\n}\n\n.uppy-Dashboard-AddFiles {\n  background-color: hsl(var(--background)) !important;\n  border: 2px dashed hsl(var(--border)) !important;\n  border-radius: calc(var(--radius) - 4px) !important;\n}\n\n.uppy-Dashboard-AddFiles-title {\n  color: hsl(var(--foreground)) !important;\n  font-weight: 600 !important;\n}\n\n.uppy-Dashboard-note {\n  color: hsl(var(--muted-foreground)) !important;\n}\n\n.uppy-DashboardContent-bar {\n  background-color: hsl(var(--card)) !important;\n  border-bottom: 1px solid hsl(var(--border)) !important;\n}\n\n.uppy-DashboardContent-title {\n  color: hsl(var(--foreground)) !important;\n  font-weight: 600 !important;\n}\n\n.uppy-Dashboard-Item {\n  border-bottom: 1px solid hsl(var(--border)) !important;\n}\n\n.uppy-Dashboard-Item-name {\n  color: hsl(var(--foreground)) !important;\n}\n\n.uppy-Dashboard-Item-status {\n  color: hsl(var(--muted-foreground)) !important;\n}\n\n.uppy-StatusBar {\n  background-color: hsl(var(--card)) !important;\n  border-top: 1px solid hsl(var(--border)) !important;\n  border-radius: 0 0 var(--radius) var(--radius) !important;\n}\n\n.uppy-StatusBar-progress {\n  background-color: hsl(var(--primary)) !important;\n}\n\n.uppy-StatusBar-actionBtn--upload {\n  background-color: hsl(var(--primary)) !important;\n  color: hsl(var(--primary-foreground)) !important;\n  border-radius: calc(var(--radius) / 2) !important;\n  font-weight: 500 !important;\n  transition: opacity 0.2s !important;\n}\n\n.uppy-StatusBar-actionBtn--upload:hover {\n  opacity: 0.9 !important;\n}\n\n.uppy-StatusBar-actionBtn--done {\n  background-color: hsl(var(--secondary)) !important;\n  color: hsl(var(--secondary-foreground)) !important;\n  border-radius: calc(var(--radius) / 2) !important;\n  font-weight: 500 !important;\n}\n\n.uppy-Dashboard-AddFiles-info {\n  color: hsl(var(--muted-foreground)) !important;\n}\n\n.uppy-Dashboard-browse {\n  color: hsl(var(--primary)) !important;\n  font-weight: 600 !important;\n}\n\n.uppy-Dashboard-browse:hover {\n  text-decoration: underline !important;\n}\n\n.dark .uppy-Dashboard-inner {\n  background-color: hsl(var(--card)) !important;\n  border-color: hsl(var(--border)) !important;\n}\n\n.dark .uppy-Dashboard-AddFiles {\n  background-color: hsl(var(--background)) !important;\n  border-color: hsl(var(--border)) !important;\n}\n\n.uppy-Dashboard-AddFiles-list {\n  display: flex !important;\n  flex-direction: column !important;\n  gap: 8px !important;\n  margin-top: 16px !important;\n}\n\n.uppy-DashboardTab {\n  border-radius: calc(var(--radius) / 2) !important;\n  color: hsl(var(--muted-foreground)) !important;\n  transition: all 0.2s !important;\n}\n\n.uppy-DashboardTab:hover {\n  background-color: hsl(var(--accent)) !important;\n  color: hsl(var(--accent-foreground)) !important;\n}\n\n.uppy-DashboardTab-btn svg {\n  fill: currentColor !important;\n}\n\n.uppy-Dashboard-dropFilesHereHint {\n  color: hsl(var(--primary)) !important;\n  font-weight: 600 !important;\n  background-color: hsl(var(--primary) / 0.1) !important;\n  border-radius: calc(var(--radius) / 2) !important;\n  padding: 12px 24px !important;\n}\n\n.uppy-ProviderBrowserItem {\n  border-radius: calc(var(--radius) / 2) !important;\n  transition: all 0.2s !important;\n}\n\n.uppy-ProviderBrowserItem:hover {\n  background-color: hsl(var(--accent)) !important;\n}\n\n.uppy-Dashboard-Item-action--remove {\n  color: hsl(var(--destructive)) !important;\n}\n\n.uppy-Dashboard-Item-action--remove:hover {\n  background-color: hsl(var(--destructive) / 0.1) !important;\n}\n","size_bytes":14105},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/StatsSection.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport function StatsSection() {\n  const { data: settingsData } = useQuery<Record<string, string>>({\n    queryKey: ['/api/settings'],\n    retry: false,\n  });\n\n  const stats = [\n    {\n      label: \"Vagas Ativas\",\n      value: settingsData?.stats_jobs_value || \"50.000+\",\n    },\n    {\n      label: \"Empresas\",\n      value: settingsData?.stats_companies_value || \"15.000+\",\n    },\n    {\n      label: \"Países\",\n      value: settingsData?.stats_countries_value || \"150+\",\n    },\n    {\n      label: \"Salário Médio\",\n      value: settingsData?.stats_salary_value || \"$75k\",\n    },\n  ];\n\n  return (\n    <section className=\"bg-card border-y py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8\">\n          {stats.map((stat, index) => (\n            <div key={index} className=\"text-center\" data-testid={`stat-${stat.label}`}>\n              <div className=\"text-3xl font-bold mb-1\" data-testid={`stat-value-${index}`}>\n                {stat.value}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">{stat.label}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":1255},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/pages/OperatorProfile.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport { \n  User, \n  Mail, \n  Phone, \n  MapPin,\n  Briefcase,\n  Calendar,\n  Award,\n  FileText,\n  Edit,\n  Save,\n  X,\n  Plus,\n  Trash2,\n  Check,\n  ChevronsUpDown,\n  Camera,\n  HardHat\n} from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { Operator, Experience } from \"@shared/schema\";\nimport { cn } from \"@/lib/utils\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\n\ninterface City {\n  id: number;\n  nome: string;\n  microrregiao: {\n    mesorregiao: {\n      UF: {\n        sigla: string;\n        nome: string;\n      };\n    };\n  };\n}\n\nfunction CitySelector({ value, onValueChange, disabled }: { value: string; onValueChange: (value: string) => void; disabled?: boolean }) {\n  const [open, setOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const { data: cities, isLoading } = useQuery<City[]>({\n    queryKey: ['/ibge/cities'],\n    queryFn: async () => {\n      const response = await fetch('https://servicodados.ibge.gov.br/api/v1/localidades/municipios');\n      return response.json();\n    },\n    staleTime: Infinity,\n  });\n\n  const filteredCities = cities?.filter(city => {\n    if (!city.microrregiao?.mesorregiao?.UF?.sigla) return false;\n    const searchLower = searchQuery.toLowerCase();\n    const cityName = `${city.nome} - ${city.microrregiao.mesorregiao.UF.sigla}`.toLowerCase();\n    return cityName.includes(searchLower);\n  }).slice(0, 100) || [];\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className=\"w-full justify-between\"\n          disabled={disabled}\n          data-testid=\"button-select-city\"\n        >\n          {value || \"Selecione uma cidade...\"}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\" align=\"start\">\n        <Command shouldFilter={false}>\n          <CommandInput \n            placeholder=\"Buscar cidade...\" \n            value={searchQuery}\n            onValueChange={setSearchQuery}\n            data-testid=\"input-search-city\"\n          />\n          <CommandList>\n            {isLoading ? (\n              <CommandEmpty>Carregando cidades...</CommandEmpty>\n            ) : filteredCities.length === 0 ? (\n              <CommandEmpty>Nenhuma cidade encontrada.</CommandEmpty>\n            ) : (\n              <CommandGroup>\n                {filteredCities.map((city) => {\n                  const cityLabel = `${city.nome} - ${city.microrregiao.mesorregiao.UF.sigla}`;\n                  return (\n                    <CommandItem\n                      key={city.id}\n                      value={cityLabel}\n                      onSelect={(currentValue) => {\n                        onValueChange(currentValue === value ? \"\" : currentValue);\n                        setOpen(false);\n                        setSearchQuery(\"\");\n                      }}\n                      data-testid={`city-option-${city.id}`}\n                    >\n                      <Check\n                        className={cn(\n                          \"mr-2 h-4 w-4\",\n                          value === cityLabel ? \"opacity-100\" : \"opacity-0\"\n                        )}\n                      />\n                      {cityLabel}\n                    </CommandItem>\n                  );\n                })}\n              </CommandGroup>\n            )}\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nfunction ExperiencesTab({ operatorId }: { operatorId?: string }) {\n  const [isAddingNew, setIsAddingNew] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  const [formData, setFormData] = useState({\n    company: \"\",\n    position: \"\",\n    startDate: \"\",\n    endDate: \"\",\n    isCurrent: \"false\",\n    description: \"\",\n    location: \"\",\n  });\n\n  const { data: experiences, isLoading } = useQuery<Experience[]>({\n    queryKey: ['/api/experiences', operatorId],\n    enabled: !!operatorId,\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/experiences\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/experiences', operatorId] });\n      toast({ title: \"Experiência adicionada com sucesso!\" });\n      resetForm();\n    },\n    onError: () => {\n      toast({ title: \"Erro ao adicionar experiência\", variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const response = await apiRequest(\"PATCH\", `/api/experiences/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/experiences', operatorId] });\n      toast({ title: \"Experiência atualizada com sucesso!\" });\n      resetForm();\n    },\n    onError: () => {\n      toast({ title: \"Erro ao atualizar experiência\", variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/experiences/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/experiences', operatorId] });\n      toast({ title: \"Experiência removida com sucesso!\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro ao remover experiência\", variant: \"destructive\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      company: \"\",\n      position: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      isCurrent: \"false\",\n      description: \"\",\n      location: \"\",\n    });\n    setIsAddingNew(false);\n    setEditingId(null);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingId) {\n      updateMutation.mutate({ id: editingId, data: formData });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (exp: Experience) => {\n    setFormData({\n      company: exp.company,\n      position: exp.position,\n      startDate: exp.startDate,\n      endDate: exp.endDate || \"\",\n      isCurrent: exp.isCurrent,\n      description: exp.description || \"\",\n      location: exp.location || \"\",\n    });\n    setEditingId(exp.id);\n    setIsAddingNew(true);\n  };\n\n  if (!operatorId) return null;\n\n  if (isLoading) {\n    return <div className=\"text-center p-4\">Carregando...</div>;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {!isAddingNew && (\n        <Button onClick={() => setIsAddingNew(true)} className=\"w-full\" data-testid=\"button-add-experience\">\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Adicionar Experiência\n        </Button>\n      )}\n\n      {isAddingNew && (\n        <Card className=\"border-primary\">\n          <CardHeader>\n            <CardTitle>{editingId ? 'Editar' : 'Nova'} Experiência</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"company\">Empresa *</Label>\n                  <Input\n                    id=\"company\"\n                    required\n                    value={formData.company}\n                    onChange={(e) => setFormData({ ...formData, company: e.target.value })}\n                    data-testid=\"input-company\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"position\">Cargo *</Label>\n                  <Input\n                    id=\"position\"\n                    required\n                    value={formData.position}\n                    onChange={(e) => setFormData({ ...formData, position: e.target.value })}\n                    data-testid=\"input-position\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"startDate\">Data de Início *</Label>\n                  <Input\n                    id=\"startDate\"\n                    type=\"month\"\n                    required\n                    value={formData.startDate}\n                    onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n                    data-testid=\"input-start-date\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"endDate\">Data de Término</Label>\n                  <Input\n                    id=\"endDate\"\n                    type=\"month\"\n                    value={formData.endDate}\n                    onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\n                    disabled={formData.isCurrent === 'true'}\n                    data-testid=\"input-end-date\"\n                  />\n                  <div className=\"flex items-center gap-2\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"isCurrent\"\n                      checked={formData.isCurrent === 'true'}\n                      onChange={(e) => setFormData({ ...formData, isCurrent: e.target.checked ? 'true' : 'false', endDate: e.target.checked ? '' : formData.endDate })}\n                      className=\"h-4 w-4\"\n                      data-testid=\"checkbox-current\"\n                    />\n                    <Label htmlFor=\"isCurrent\" className=\"text-sm\">Trabalho atual</Label>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"location\">Localização</Label>\n                <CitySelector\n                  value={formData.location}\n                  onValueChange={(value) => setFormData({ ...formData, location: value })}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Descrição</Label>\n                <Textarea\n                  id=\"description\"\n                  rows={4}\n                  placeholder=\"Descreva suas responsabilidades e conquistas...\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  data-testid=\"textarea-description\"\n                />\n              </div>\n\n              <div className=\"flex gap-2\">\n                <Button type=\"submit\" disabled={createMutation.isPending || updateMutation.isPending} data-testid=\"button-save-experience\">\n                  <Save className=\"mr-2 h-4 w-4\" />\n                  {editingId ? 'Atualizar' : 'Salvar'}\n                </Button>\n                <Button type=\"button\" variant=\"outline\" onClick={resetForm} data-testid=\"button-cancel-experience\">\n                  <X className=\"mr-2 h-4 w-4\" />\n                  Cancelar\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      )}\n\n      <div className=\"space-y-3\">\n        {experiences && experiences.length > 0 ? (\n          experiences.map((exp) => (\n            <Card key={exp.id} data-testid={`experience-card-${exp.id}`}>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-semibold text-lg\">{exp.position}</h3>\n                    <p className=\"text-muted-foreground\">{exp.company}</p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {new Date(exp.startDate).toLocaleDateString('pt-BR', { month: 'short', year: 'numeric' })} - {exp.isCurrent === 'true' ? 'Atual' : exp.endDate ? new Date(exp.endDate).toLocaleDateString('pt-BR', { month: 'short', year: 'numeric' }) : 'Presente'}\n                      {exp.location && ` • ${exp.location}`}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => handleEdit(exp)} data-testid={`button-edit-${exp.id}`}>\n                      <Edit className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => deleteMutation.mutate(exp.id)}\n                      disabled={deleteMutation.isPending}\n                      data-testid={`button-delete-${exp.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n                {exp.description && (\n                  <p className=\"text-sm whitespace-pre-wrap text-muted-foreground\">{exp.description}</p>\n                )}\n              </CardContent>\n            </Card>\n          ))\n        ) : (\n          <div className=\"text-center p-8 text-muted-foreground\">\n            <Briefcase className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>Nenhuma experiência cadastrada ainda.</p>\n            <p className=\"text-sm\">Adicione suas experiências profissionais para destacar seu perfil.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function OperatorProfile() {\n  const { toast } = useToast();\n  const { user, userType, isLoading, isAuthenticated } = useAuth();\n  const [, setLocation] = useLocation();\n  const [isEditing, setIsEditing] = useState(false);\n  \n  const operatorUser = user as Operator;\n  \n  const [profileData, setProfileData] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    cpf: \"\",\n    birthDate: \"\",\n    profession: \"\",\n    experienceYears: \"\",\n    certifications: \"\",\n    availability: \"\",\n    preferredLocation: \"\",\n    workType: \"\",\n    skills: \"\",\n    bio: \"\",\n  });\n\n  useEffect(() => {\n    if (!isLoading && (!isAuthenticated || userType !== 'operator')) {\n      setLocation(\"/login\");\n      return;\n    }\n\n    if (operatorUser) {\n      setProfileData({\n        fullName: operatorUser.fullName || \"\",\n        email: operatorUser.email || \"\",\n        phone: operatorUser.phone || \"\",\n        cpf: operatorUser.cpf || \"\",\n        birthDate: operatorUser.birthDate || \"\",\n        profession: operatorUser.profession || \"\",\n        experienceYears: operatorUser.experienceYears?.toString() || \"\",\n        certifications: operatorUser.certifications || \"\",\n        availability: operatorUser.availability || \"\",\n        preferredLocation: operatorUser.preferredLocation || \"\",\n        workType: operatorUser.workType || \"\",\n        skills: operatorUser.skills || \"\",\n        bio: operatorUser.bio || \"\",\n      });\n    }\n  }, [isLoading, isAuthenticated, userType, operatorUser, setLocation]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"PATCH\", \"/api/operators/profile\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Perfil atualizado!\",\n        description: \"Suas informações foram salvas com sucesso.\",\n      });\n      setIsEditing(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Erro ao atualizar perfil\",\n        description: \"Ocorreu um erro ao salvar suas informações. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    updateProfileMutation.mutate(profileData);\n  };\n\n  const handleCancel = () => {\n    if (operatorUser) {\n      setProfileData({\n        fullName: operatorUser.fullName || \"\",\n        email: operatorUser.email || \"\",\n        phone: operatorUser.phone || \"\",\n        cpf: operatorUser.cpf || \"\",\n        birthDate: operatorUser.birthDate || \"\",\n        profession: operatorUser.profession || \"\",\n        experienceYears: operatorUser.experienceYears?.toString() || \"\",\n        certifications: operatorUser.certifications || \"\",\n        availability: operatorUser.availability || \"\",\n        preferredLocation: operatorUser.preferredLocation || \"\",\n        workType: operatorUser.workType || \"\",\n        skills: operatorUser.skills || \"\",\n        bio: operatorUser.bio || \"\",\n      });\n    }\n    setIsEditing(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated || userType !== 'operator') {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-8 px-4 bg-background\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8\">\n            <div>\n              <h1 className=\"font-heading font-bold text-3xl mb-2\">\n                Meu Perfil\n              </h1>\n              <p className=\"text-muted-foreground\">\n                Visualize e edite suas informações profissionais\n              </p>\n            </div>\n\n            <div className=\"flex gap-3\">\n              {!isEditing ? (\n                <Button onClick={() => setIsEditing(true)} data-testid=\"button-edit-profile\">\n                  <Edit className=\"mr-2 h-5 w-5\" />\n                  Editar Perfil\n                </Button>\n              ) : (\n                <>\n                  <Button \n                    variant=\"outline\" \n                    onClick={handleCancel} \n                    disabled={updateProfileMutation.isPending}\n                    data-testid=\"button-cancel-edit\"\n                  >\n                    <X className=\"mr-2 h-5 w-5\" />\n                    Cancelar\n                  </Button>\n                  <Button \n                    onClick={handleSave} \n                    disabled={updateProfileMutation.isPending}\n                    data-testid=\"button-save-profile\"\n                  >\n                    <Save className=\"mr-2 h-5 w-5\" />\n                    {updateProfileMutation.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                  </Button>\n                </>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Informações Pessoais</CardTitle>\n                <CardDescription>\n                  Dados básicos e informações de contato\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex flex-col items-center gap-4 pb-6 border-b\">\n                  <Avatar className=\"h-32 w-32\" data-testid=\"avatar-profile\">\n                    <AvatarImage \n                      src={operatorUser?.profilePhotoUrl || undefined} \n                      alt={profileData.fullName}\n                      className=\"object-cover\"\n                    />\n                    <AvatarFallback className=\"text-3xl bg-primary/10\">\n                      <HardHat className=\"h-16 w-16 text-primary\" />\n                    </AvatarFallback>\n                  </Avatar>\n                  <ObjectUploader\n                    maxNumberOfFiles={1}\n                    maxFileSize={5242880}\n                    onGetUploadParameters={async () => {\n                      const response = await apiRequest(\"POST\", \"/api/objects/upload\");\n                      const data = await response.json();\n                      return {\n                        method: 'PUT' as const,\n                        url: data.uploadURL,\n                      };\n                    }}\n                    onComplete={async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n                      if (result.successful && result.successful.length > 0) {\n                        const uploadURL = result.successful[0].uploadURL;\n                        try {\n                          await apiRequest(\"PUT\", \"/api/operators/profile-photo\", {\n                            profilePhotoURL: uploadURL,\n                          });\n                          queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n                          toast({\n                            title: \"Foto atualizada!\",\n                            description: \"Sua foto de perfil foi atualizada com sucesso.\",\n                          });\n                        } catch (error) {\n                          toast({\n                            title: \"Erro ao atualizar foto\",\n                            description: \"Ocorreu um erro ao salvar sua foto. Tente novamente.\",\n                            variant: \"destructive\",\n                          });\n                        }\n                      }\n                    }}\n                    buttonClassName=\"gap-2\"\n                  >\n                    <Camera className=\"h-4 w-4\" />\n                    {operatorUser?.profilePhotoUrl ? \"Trocar Foto\" : \"Adicionar Foto\"}\n                  </ObjectUploader>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"fullName\">Nome Completo</Label>\n                    {isEditing ? (\n                      <Input\n                        id=\"fullName\"\n                        value={profileData.fullName}\n                        onChange={(e) => setProfileData({ ...profileData, fullName: e.target.value })}\n                        data-testid=\"input-edit-full-name\"\n                      />\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-full-name\">\n                        <User className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>{profileData.fullName}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"email\">E-mail</Label>\n                    {isEditing ? (\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={profileData.email}\n                        onChange={(e) => setProfileData({ ...profileData, email: e.target.value })}\n                        data-testid=\"input-edit-email\"\n                      />\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-email\">\n                        <Mail className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>{profileData.email}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone\">Telefone</Label>\n                    {isEditing ? (\n                      <Input\n                        id=\"phone\"\n                        value={profileData.phone}\n                        onChange={(e) => setProfileData({ ...profileData, phone: e.target.value })}\n                        data-testid=\"input-edit-phone\"\n                      />\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-phone\">\n                        <Phone className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>{profileData.phone}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"cpf\">CPF</Label>\n                    <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-cpf\">\n                      <FileText className=\"h-5 w-5 text-muted-foreground\" />\n                      <span>{profileData.cpf}</span>\n                      <Badge variant=\"outline\" className=\"ml-auto\">Não editável</Badge>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"birthDate\">Data de Nascimento</Label>\n                    {isEditing ? (\n                      <Input\n                        id=\"birthDate\"\n                        type=\"date\"\n                        value={profileData.birthDate}\n                        onChange={(e) => setProfileData({ ...profileData, birthDate: e.target.value })}\n                        data-testid=\"input-edit-birth-date\"\n                      />\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-birth-date\">\n                        <Calendar className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>{new Date(profileData.birthDate).toLocaleDateString('pt-BR')}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Informações Profissionais</CardTitle>\n                <CardDescription>\n                  Experiência e qualificações\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Tabs defaultValue=\"resumo\" className=\"w-full\">\n                  <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n                    <TabsTrigger value=\"resumo\" data-testid=\"tab-summary\">Resumo</TabsTrigger>\n                    <TabsTrigger value=\"experiencias\" data-testid=\"tab-experiences\">Experiências</TabsTrigger>\n                  </TabsList>\n                  \n                  <TabsContent value=\"resumo\" className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"profession\">Profissão/Especialidade</Label>\n                  {isEditing ? (\n                    <Input\n                      id=\"profession\"\n                      value={profileData.profession}\n                      onChange={(e) => setProfileData({ ...profileData, profession: e.target.value })}\n                      data-testid=\"input-edit-profession\"\n                    />\n                  ) : (\n                    <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-profession\">\n                      <Briefcase className=\"h-5 w-5 text-muted-foreground\" />\n                      <span>{profileData.profession}</span>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"experienceYears\">Anos de Experiência</Label>\n                  {isEditing ? (\n                    <Select\n                      value={profileData.experienceYears}\n                      onValueChange={(value) => setProfileData({ ...profileData, experienceYears: value })}\n                    >\n                      <SelectTrigger data-testid=\"select-edit-experience\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"0-1\">Menos de 1 ano</SelectItem>\n                        <SelectItem value=\"1-3\">1-3 anos</SelectItem>\n                        <SelectItem value=\"3-5\">3-5 anos</SelectItem>\n                        <SelectItem value=\"5-10\">5-10 anos</SelectItem>\n                        <SelectItem value=\"10+\">Mais de 10 anos</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  ) : (\n                    <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-experience\">\n                      <Award className=\"h-5 w-5 text-muted-foreground\" />\n                      <span>5-10 anos</span>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"certifications\">Certificações</Label>\n                  {isEditing ? (\n                    <Textarea\n                      id=\"certifications\"\n                      value={profileData.certifications}\n                      onChange={(e) => setProfileData({ ...profileData, certifications: e.target.value })}\n                      rows={3}\n                      data-testid=\"input-edit-certifications\"\n                    />\n                  ) : (\n                    <div className=\"p-3 bg-muted rounded-md\" data-testid=\"text-certifications\">\n                      <p className=\"text-sm whitespace-pre-wrap\">{profileData.certifications}</p>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"skills\">Habilidades</Label>\n                  {isEditing ? (\n                    <Textarea\n                      id=\"skills\"\n                      value={profileData.skills}\n                      onChange={(e) => setProfileData({ ...profileData, skills: e.target.value })}\n                      rows={3}\n                      data-testid=\"input-edit-skills\"\n                    />\n                  ) : (\n                    <div className=\"p-3 bg-muted rounded-md\" data-testid=\"text-skills\">\n                      <p className=\"text-sm whitespace-pre-wrap\">{profileData.skills}</p>\n                    </div>\n                  )}\n                </div>\n                  </TabsContent>\n\n                  <TabsContent value=\"experiencias\">\n                    <ExperiencesTab operatorId={operatorUser?.id} />\n                  </TabsContent>\n                </Tabs>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Preferências de Trabalho</CardTitle>\n                <CardDescription>\n                  Disponibilidade e localização\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"availability\">Disponibilidade</Label>\n                    {isEditing ? (\n                      <Select\n                        value={profileData.availability}\n                        onValueChange={(value) => setProfileData({ ...profileData, availability: value })}\n                      >\n                        <SelectTrigger data-testid=\"select-edit-availability\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"imediato\">Imediato</SelectItem>\n                          <SelectItem value=\"15-dias\">15 dias</SelectItem>\n                          <SelectItem value=\"30-dias\">30 dias</SelectItem>\n                          <SelectItem value=\"60-dias\">60 dias</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-availability\">\n                        <Calendar className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>30 dias</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"workType\">Tipo de Trabalho</Label>\n                    {isEditing ? (\n                      <Select\n                        value={profileData.workType}\n                        onValueChange={(value) => setProfileData({ ...profileData, workType: value })}\n                      >\n                        <SelectTrigger data-testid=\"select-edit-work-type\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"presencial\">Presencial</SelectItem>\n                          <SelectItem value=\"hibrido\">Híbrido</SelectItem>\n                          <SelectItem value=\"remoto\">Remoto</SelectItem>\n                          <SelectItem value=\"qualquer\">Qualquer</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-work-type\">\n                        <Briefcase className=\"h-5 w-5 text-muted-foreground\" />\n                        <span>Presencial</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"preferredLocation\">Localização Preferida</Label>\n                  {isEditing ? (\n                    <CitySelector\n                      value={profileData.preferredLocation}\n                      onValueChange={(value) => setProfileData({ ...profileData, preferredLocation: value })}\n                    />\n                  ) : (\n                    <div className=\"flex items-center gap-2 p-3 bg-muted rounded-md\" data-testid=\"text-location\">\n                      <MapPin className=\"h-5 w-5 text-muted-foreground\" />\n                      <span>{profileData.preferredLocation || \"Não informado\"}</span>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Sobre Você</CardTitle>\n                <CardDescription>\n                  Conte um pouco sobre sua trajetória profissional\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"bio\">Biografia</Label>\n                  {isEditing ? (\n                    <>\n                      <Textarea\n                        id=\"bio\"\n                        value={profileData.bio}\n                        onChange={(e) => setProfileData({ ...profileData, bio: e.target.value })}\n                        rows={5}\n                        maxLength={1000}\n                        data-testid=\"input-edit-bio\"\n                      />\n                      <p className=\"text-xs text-muted-foreground text-right\">\n                        {profileData.bio.length}/1000 caracteres\n                      </p>\n                    </>\n                  ) : (\n                    <div className=\"p-3 bg-muted rounded-md\" data-testid=\"text-bio\">\n                      <p className=\"text-sm whitespace-pre-wrap\">{profileData.bio}</p>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            {isEditing && (\n              <div className=\"flex justify-end gap-3 mt-6\">\n                <Button \n                  variant=\"outline\" \n                  onClick={handleCancel} \n                  disabled={updateProfileMutation.isPending}\n                  data-testid=\"button-cancel-edit-bottom\"\n                >\n                  <X className=\"mr-2 h-5 w-5\" />\n                  Cancelar\n                </Button>\n                <Button \n                  onClick={handleSave} \n                  disabled={updateProfileMutation.isPending}\n                  data-testid=\"button-save-profile-bottom\"\n                >\n                  <Save className=\"mr-2 h-5 w-5\" />\n                  {updateProfileMutation.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":37468},"server/storage.ts":{"content":"import { users, companies, operators, experiences, admins, plans, clients, purchases, emailSettings, sectors, subsectors, events, banners, settings, jobs, applications, savedJobs, questions, jobQuestions, applicationAnswers, siteVisits, newsletterSubscriptions, passwordResetCodes, creditTransactions, workTypes, contractTypes, tags, globalWorkTypes, globalContractTypes, type User, type InsertUser, type Company, type InsertCompany, type Operator, type InsertOperator, type Experience, type InsertExperience, type Admin, type InsertAdmin, type Plan, type InsertPlan, type Client, type InsertClient, type Purchase, type InsertPurchase, type EmailSettings, type InsertEmailSettings, type Sector, type InsertSector, type Subsector, type InsertSubsector, type Event, type InsertEvent, type Banner, type InsertBanner, type Setting, type InsertSetting, type Job, type InsertJob, type Application, type InsertApplication, type SavedJob, type InsertSavedJob, type Question, type InsertQuestion, type JobQuestion, type InsertJobQuestion, type ApplicationAnswer, type InsertApplicationAnswer, type SiteVisit, type InsertSiteVisit, type NewsletterSubscription, type InsertNewsletterSubscription, type PasswordResetCode, type InsertPasswordResetCode, type CreditTransaction, type InsertCreditTransaction, type WorkType, type InsertWorkType, type ContractType, type InsertContractType, type Tag, type InsertTag, type GlobalWorkType, type InsertGlobalWorkType, type GlobalContractType, type InsertGlobalContractType } from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, gte, lte, not, like, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  getCompany(id: string): Promise<Company | undefined>;\n  getCompanyByEmail(email: string): Promise<Company | undefined>;\n  getCompanyByCnpj(cnpj: string): Promise<Company | undefined>;\n  createCompany(company: InsertCompany): Promise<Company>;\n  updateCompany(id: string, company: Partial<InsertCompany>): Promise<Company>;\n  getAllCompanies(): Promise<Company[]>;\n  \n  getOperator(id: string): Promise<Operator | undefined>;\n  getOperatorByEmail(email: string): Promise<Operator | undefined>;\n  getOperatorByCpf(cpf: string): Promise<Operator | undefined>;\n  createOperator(operator: InsertOperator): Promise<Operator>;\n  updateOperator(id: string, operator: Partial<InsertOperator>): Promise<Operator>;\n  getAllOperators(): Promise<Operator[]>;\n  isOperatorProfileComplete(operatorId: string): Promise<{ complete: boolean; missingFields: string[]; percentage: number; filledCount: number; totalCount: number }>;\n  \n  getExperience(id: string): Promise<Experience | undefined>;\n  getExperiencesByOperator(operatorId: string): Promise<Experience[]>;\n  createExperience(experience: InsertExperience): Promise<Experience>;\n  updateExperience(id: string, experience: Partial<InsertExperience>): Promise<Experience>;\n  deleteExperience(id: string): Promise<void>;\n  \n  getAdmin(id: string): Promise<Admin | undefined>;\n  getAdminByEmail(email: string): Promise<Admin | undefined>;\n  createAdmin(admin: InsertAdmin): Promise<Admin>;\n  getAllAdmins(): Promise<Admin[]>;\n  \n  getPlan(id: string): Promise<Plan | undefined>;\n  getAllPlans(): Promise<Plan[]>;\n  createPlan(plan: InsertPlan): Promise<Plan>;\n  updatePlan(id: string, plan: Partial<InsertPlan>): Promise<Plan>;\n  deletePlan(id: string): Promise<void>;\n  \n  getClient(id: string): Promise<Client | undefined>;\n  getClientByEmail(email: string): Promise<Client | undefined>;\n  getClientByCnpj(cnpj: string): Promise<Client | undefined>;\n  getAllClients(): Promise<Client[]>;\n  createClient(client: InsertClient): Promise<Client>;\n  updateClient(id: string, client: Partial<InsertClient>): Promise<Client>;\n  deleteClient(id: string): Promise<void>;\n  \n  getPurchase(id: string): Promise<Purchase | undefined>;\n  getPurchasesByClient(clientId: string): Promise<Purchase[]>;\n  getPurchasesByPlan(planId: string): Promise<Purchase[]>;\n  getAllPurchases(): Promise<Purchase[]>;\n  getPurchasesWithFilters(filters: {\n    startDate?: string;\n    endDate?: string;\n    clientId?: string;\n    minAmount?: number;\n    maxAmount?: number;\n  }): Promise<Purchase[]>;\n  createPurchase(purchase: InsertPurchase): Promise<Purchase>;\n  \n  getEmailSettings(): Promise<EmailSettings | undefined>;\n  createEmailSettings(settings: InsertEmailSettings): Promise<EmailSettings>;\n  updateEmailSettings(id: string, settings: Partial<InsertEmailSettings>): Promise<EmailSettings>;\n  \n  getSector(id: string): Promise<Sector | undefined>;\n  getAllSectors(): Promise<Sector[]>;\n  createSector(sector: InsertSector): Promise<Sector>;\n  updateSector(id: string, sector: Partial<InsertSector>): Promise<Sector>;\n  deleteSector(id: string): Promise<void>;\n  \n  getSubsector(id: string): Promise<Subsector | undefined>;\n  getSubsectorsBySector(sectorId: string): Promise<Subsector[]>;\n  getAllSubsectors(): Promise<Subsector[]>;\n  createSubsector(subsector: InsertSubsector): Promise<Subsector>;\n  updateSubsector(id: string, subsector: Partial<InsertSubsector>): Promise<Subsector>;\n  deleteSubsector(id: string): Promise<void>;\n  \n  getEvent(id: string): Promise<Event | undefined>;\n  getAllEvents(): Promise<Event[]>;\n  getActiveEvents(): Promise<Event[]>;\n  getUpcomingEvents(): Promise<Event[]>;\n  createEvent(event: InsertEvent): Promise<Event>;\n  updateEvent(id: string, event: Partial<InsertEvent>): Promise<Event>;\n  deleteEvent(id: string): Promise<void>;\n  \n  getBanner(id: string): Promise<Banner | undefined>;\n  getAllBanners(): Promise<Banner[]>;\n  getActiveBanners(): Promise<Banner[]>;\n  createBanner(banner: InsertBanner): Promise<Banner>;\n  updateBanner(id: string, banner: Partial<InsertBanner>): Promise<Banner>;\n  deleteBanner(id: string): Promise<void>;\n  \n  getSetting(key: string): Promise<Setting | undefined>;\n  getAllSettings(): Promise<Setting[]>;\n  upsertSetting(setting: InsertSetting): Promise<Setting>;\n  incrementVisitCounter(): Promise<number>;\n  getVisitStats(): Promise<{ totalVisits: number; todayVisits: number }>;\n  \n  createSiteVisit(visit: InsertSiteVisit): Promise<SiteVisit>;\n  getAllSiteVisits(): Promise<SiteVisit[]>;\n  getSiteVisitsByDateRange(startDate: string, endDate: string): Promise<SiteVisit[]>;\n  \n  getJob(id: string): Promise<Job | undefined>;\n  getAllJobs(): Promise<Job[]>;\n  getAllJobsWithCompany(): Promise<Array<Job & { company: { id: string; name: string } | null }>>;\n  getActiveJobs(): Promise<Job[]>;\n  getJobsByCompany(companyId: string): Promise<Job[]>;\n  getJobsByClient(clientId: string): Promise<Job[]>;\n  createJob(job: InsertJob): Promise<Job>;\n  updateJob(id: string, job: Partial<InsertJob>): Promise<Job>;\n  deleteJob(id: string): Promise<void>;\n  incrementJobViewCount(jobId: string): Promise<void>;\n  \n  getApplication(id: string): Promise<Application | undefined>;\n  getApplicationsByJob(jobId: string): Promise<Application[]>;\n  getApplicationsWithOperatorByJob(jobId: string): Promise<Array<Application & { operator: Operator }>>;\n  getApplicationsByOperator(operatorId: string): Promise<Application[]>;\n  checkExistingApplication(jobId: string, operatorId: string): Promise<Application | undefined>;\n  createApplication(application: InsertApplication): Promise<Application>;\n  updateApplicationStatus(id: string, status: string): Promise<Application>;\n  \n  saveJob(operatorId: string, jobId: string): Promise<SavedJob>;\n  unsaveJob(operatorId: string, jobId: string): Promise<void>;\n  getSavedJobsByOperator(operatorId: string): Promise<Array<SavedJob & { job: Job }>>;\n  checkIfJobIsSaved(operatorId: string, jobId: string): Promise<boolean>;\n  \n  subscribeToNewsletter(email: string): Promise<NewsletterSubscription>;\n  getNewsletterSubscription(email: string): Promise<NewsletterSubscription | undefined>;\n  getAllNewsletterSubscriptions(): Promise<NewsletterSubscription[]>;\n  getActiveNewsletterSubscriptions(): Promise<NewsletterSubscription[]>;\n  \n  createPasswordResetCode(resetCode: InsertPasswordResetCode): Promise<PasswordResetCode>;\n  getPasswordResetCode(email: string, code: string): Promise<PasswordResetCode | undefined>;\n  markPasswordResetCodeAsUsed(id: string): Promise<void>;\n  deleteExpiredPasswordResetCodes(): Promise<void>;\n  \n  getQuestion(id: string): Promise<Question | undefined>;\n  getQuestionsByCompany(companyId: string): Promise<Question[]>;\n  getQuestionsByClient(clientId: string): Promise<Question[]>;\n  createQuestion(question: InsertQuestion): Promise<Question>;\n  updateQuestion(id: string, question: Partial<InsertQuestion>): Promise<Question>;\n  deleteQuestion(id: string): Promise<void>;\n  \n  getWorkType(id: string): Promise<WorkType | undefined>;\n  getWorkTypesByCompany(companyId: string): Promise<WorkType[]>;\n  createWorkType(workType: InsertWorkType): Promise<WorkType>;\n  updateWorkType(id: string, workType: Partial<InsertWorkType>): Promise<WorkType>;\n  deleteWorkType(id: string): Promise<void>;\n  \n  getContractType(id: string): Promise<ContractType | undefined>;\n  getContractTypesByCompany(companyId: string): Promise<ContractType[]>;\n  createContractType(contractType: InsertContractType): Promise<ContractType>;\n  updateContractType(id: string, contractType: Partial<InsertContractType>): Promise<ContractType>;\n  deleteContractType(id: string): Promise<void>;\n  \n  getTag(id: string): Promise<Tag | undefined>;\n  getAllTags(): Promise<Tag[]>;\n  getActiveTags(): Promise<Tag[]>;\n  createTag(tag: InsertTag): Promise<Tag>;\n  updateTag(id: string, tag: Partial<InsertTag>): Promise<Tag>;\n  deleteTag(id: string): Promise<void>;\n  \n  getGlobalWorkType(id: string): Promise<GlobalWorkType | undefined>;\n  getAllGlobalWorkTypes(): Promise<GlobalWorkType[]>;\n  getActiveGlobalWorkTypes(): Promise<GlobalWorkType[]>;\n  createGlobalWorkType(workType: InsertGlobalWorkType): Promise<GlobalWorkType>;\n  updateGlobalWorkType(id: string, workType: Partial<InsertGlobalWorkType>): Promise<GlobalWorkType>;\n  deleteGlobalWorkType(id: string): Promise<void>;\n  \n  getGlobalContractType(id: string): Promise<GlobalContractType | undefined>;\n  getAllGlobalContractTypes(): Promise<GlobalContractType[]>;\n  getActiveGlobalContractTypes(): Promise<GlobalContractType[]>;\n  createGlobalContractType(contractType: InsertGlobalContractType): Promise<GlobalContractType>;\n  updateGlobalContractType(id: string, contractType: Partial<InsertGlobalContractType>): Promise<GlobalContractType>;\n  deleteGlobalContractType(id: string): Promise<void>;\n  \n  getJobQuestion(id: string): Promise<JobQuestion | undefined>;\n  getJobQuestionsByJob(jobId: string): Promise<Array<JobQuestion & { question: Question }>>;\n  createJobQuestion(jobQuestion: InsertJobQuestion): Promise<JobQuestion>;\n  deleteJobQuestion(id: string): Promise<void>;\n  \n  getApplicationAnswer(id: string): Promise<ApplicationAnswer | undefined>;\n  getApplicationAnswersByApplication(applicationId: string): Promise<Array<ApplicationAnswer & { question: Question }>>;\n  createApplicationAnswer(answer: InsertApplicationAnswer): Promise<ApplicationAnswer>;\n  \n  getStats(): Promise<{\n    totalCompanies: number;\n    totalOperators: number;\n    totalClients: number;\n  }>;\n  \n  getCompanyDashboardStats(companyId: string): Promise<{\n    activeJobs: number;\n    totalJobs: number;\n    totalApplications: number;\n    recentApplications: number;\n  }>;\n  \n  getCreditTransactionsByCompany(companyId: string): Promise<CreditTransaction[]>;\n  createCreditTransaction(transaction: InsertCreditTransaction): Promise<CreditTransaction>;\n  getCompanyCredits(companyId: string): Promise<number>;\n  addCreditsToCompany(companyId: string, amount: number, description: string, relatedPlanId?: string): Promise<CreditTransaction>;\n  deductCreditsFromCompany(companyId: string, amount: number, description: string, relatedJobId?: string): Promise<CreditTransaction>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(insertUser)\n      .returning();\n    return user;\n  }\n\n  async getCompany(id: string): Promise<Company | undefined> {\n    const [company] = await db.select().from(companies).where(eq(companies.id, id));\n    return company || undefined;\n  }\n\n  async getCompanyByEmail(email: string): Promise<Company | undefined> {\n    const [company] = await db.select().from(companies).where(eq(companies.email, email));\n    return company || undefined;\n  }\n\n  async getCompanyByCnpj(cnpj: string): Promise<Company | undefined> {\n    const [company] = await db.select().from(companies).where(eq(companies.cnpj, cnpj));\n    return company || undefined;\n  }\n\n  async createCompany(insertCompany: InsertCompany): Promise<Company> {\n    const [company] = await db\n      .insert(companies)\n      .values(insertCompany)\n      .returning();\n    return company;\n  }\n\n  async updateCompany(id: string, updateData: Partial<InsertCompany>): Promise<Company> {\n    const [company] = await db\n      .update(companies)\n      .set(updateData)\n      .where(eq(companies.id, id))\n      .returning();\n    return company;\n  }\n\n  async getAllCompanies(): Promise<Company[]> {\n    return await db.select().from(companies);\n  }\n\n  async getOperator(id: string): Promise<Operator | undefined> {\n    const [operator] = await db.select().from(operators).where(eq(operators.id, id));\n    return operator || undefined;\n  }\n\n  async getOperatorByEmail(email: string): Promise<Operator | undefined> {\n    const [operator] = await db.select().from(operators).where(eq(operators.email, email));\n    return operator || undefined;\n  }\n\n  async getOperatorByCpf(cpf: string): Promise<Operator | undefined> {\n    const [operator] = await db.select().from(operators).where(eq(operators.cpf, cpf));\n    return operator || undefined;\n  }\n\n  async createOperator(insertOperator: InsertOperator): Promise<Operator> {\n    const [operator] = await db\n      .insert(operators)\n      .values(insertOperator)\n      .returning();\n    return operator;\n  }\n\n  async updateOperator(id: string, updateData: Partial<InsertOperator>): Promise<Operator> {\n    const [operator] = await db\n      .update(operators)\n      .set(updateData)\n      .where(eq(operators.id, id))\n      .returning();\n    return operator;\n  }\n\n  async getAllOperators(): Promise<Operator[]> {\n    return await db.select().from(operators);\n  }\n\n  async isOperatorProfileComplete(operatorId: string): Promise<{ complete: boolean; missingFields: string[]; percentage: number; filledCount: number; totalCount: number }> {\n    const operator = await this.getOperator(operatorId);\n    if (!operator) {\n      return { complete: false, missingFields: ['operator_not_found'], percentage: 0, filledCount: 0, totalCount: 13 };\n    }\n\n    // Lista de todos os campos do perfil (13 campos)\n    const profileFields = [\n      { name: 'fullName', value: operator.fullName },\n      { name: 'cpf', value: operator.cpf },\n      { name: 'phone', value: operator.phone },\n      { name: 'profession', value: operator.profession },\n      { name: 'birthDate', value: operator.birthDate },\n      { name: 'experienceYears', value: operator.experienceYears },\n      { name: 'certifications', value: operator.certifications },\n      { name: 'availability', value: operator.availability },\n      { name: 'preferredLocation', value: operator.preferredLocation },\n      { name: 'workType', value: operator.workType },\n      { name: 'skills', value: operator.skills },\n      { name: 'bio', value: operator.bio },\n      { name: 'profilePhotoUrl', value: operator.profilePhotoUrl },\n    ];\n\n    const totalCount = profileFields.length;\n    const missingFields: string[] = [];\n    let filledCount = 0;\n\n    // Conta campos preenchidos\n    for (const field of profileFields) {\n      if (field.value && field.value.trim() !== '') {\n        filledCount++;\n      } else {\n        missingFields.push(field.name);\n      }\n    }\n\n    const percentage = Math.round((filledCount / totalCount) * 100);\n    const complete = percentage >= 50; // 50% ou mais = completo\n\n    return {\n      complete,\n      missingFields,\n      percentage,\n      filledCount,\n      totalCount\n    };\n  }\n\n  async getExperience(id: string): Promise<Experience | undefined> {\n    const [experience] = await db.select().from(experiences).where(eq(experiences.id, id));\n    return experience || undefined;\n  }\n\n  async getExperiencesByOperator(operatorId: string): Promise<Experience[]> {\n    return await db\n      .select()\n      .from(experiences)\n      .where(eq(experiences.operatorId, operatorId))\n      .orderBy(desc(experiences.startDate));\n  }\n\n  async createExperience(insertExperience: InsertExperience): Promise<Experience> {\n    const [experience] = await db\n      .insert(experiences)\n      .values(insertExperience)\n      .returning();\n    return experience;\n  }\n\n  async updateExperience(id: string, updateData: Partial<InsertExperience>): Promise<Experience> {\n    const [experience] = await db\n      .update(experiences)\n      .set(updateData)\n      .where(eq(experiences.id, id))\n      .returning();\n    return experience;\n  }\n\n  async deleteExperience(id: string): Promise<void> {\n    await db.delete(experiences).where(eq(experiences.id, id));\n  }\n\n  async getAdmin(id: string): Promise<Admin | undefined> {\n    const [admin] = await db.select().from(admins).where(eq(admins.id, id));\n    return admin || undefined;\n  }\n\n  async getAdminByEmail(email: string): Promise<Admin | undefined> {\n    const [admin] = await db.select().from(admins).where(eq(admins.email, email));\n    return admin || undefined;\n  }\n\n  async createAdmin(insertAdmin: InsertAdmin): Promise<Admin> {\n    const [admin] = await db\n      .insert(admins)\n      .values(insertAdmin)\n      .returning();\n    return admin;\n  }\n\n  async getAllAdmins(): Promise<Admin[]> {\n    return await db.select().from(admins);\n  }\n\n  async getPlan(id: string): Promise<Plan | undefined> {\n    const [plan] = await db.select().from(plans).where(eq(plans.id, id));\n    return plan || undefined;\n  }\n\n  async getAllPlans(): Promise<Plan[]> {\n    return await db.select().from(plans);\n  }\n\n  async createPlan(insertPlan: InsertPlan): Promise<Plan> {\n    const [plan] = await db\n      .insert(plans)\n      .values(insertPlan)\n      .returning();\n    return plan;\n  }\n\n  async updatePlan(id: string, updateData: Partial<InsertPlan>): Promise<Plan> {\n    const [plan] = await db\n      .update(plans)\n      .set(updateData)\n      .where(eq(plans.id, id))\n      .returning();\n    return plan;\n  }\n\n  async deletePlan(id: string): Promise<void> {\n    await db.delete(plans).where(eq(plans.id, id));\n  }\n\n  async getClient(id: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.id, id));\n    return client || undefined;\n  }\n\n  async getClientByEmail(email: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.email, email));\n    return client || undefined;\n  }\n\n  async getClientByCnpj(cnpj: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.cnpj, cnpj));\n    return client || undefined;\n  }\n\n  async getAllClients(): Promise<Client[]> {\n    return await db.select().from(clients);\n  }\n\n  async createClient(insertClient: InsertClient): Promise<Client> {\n    const [client] = await db\n      .insert(clients)\n      .values(insertClient)\n      .returning();\n    return client;\n  }\n\n  async updateClient(id: string, updateData: Partial<InsertClient>): Promise<Client> {\n    const [client] = await db\n      .update(clients)\n      .set(updateData)\n      .where(eq(clients.id, id))\n      .returning();\n    return client;\n  }\n\n  async deleteClient(id: string): Promise<void> {\n    await db.delete(clients).where(eq(clients.id, id));\n  }\n\n  async getPurchase(id: string): Promise<Purchase | undefined> {\n    const [purchase] = await db.select().from(purchases).where(eq(purchases.id, id));\n    return purchase || undefined;\n  }\n\n  async getPurchasesByClient(clientId: string): Promise<Purchase[]> {\n    return await db.select().from(purchases).where(eq(purchases.clientId, clientId)).orderBy(desc(purchases.purchaseDate));\n  }\n\n  async getPurchasesByPlan(planId: string): Promise<Purchase[]> {\n    return await db.select().from(purchases).where(eq(purchases.planId, planId));\n  }\n\n  async getAllPurchases(): Promise<Purchase[]> {\n    return await db.select().from(purchases).orderBy(desc(purchases.purchaseDate));\n  }\n\n  async getPurchasesWithFilters(filters: {\n    startDate?: string;\n    endDate?: string;\n    clientId?: string;\n    minAmount?: number;\n    maxAmount?: number;\n  }): Promise<Purchase[]> {\n    let query = db.select().from(purchases);\n    const conditions = [];\n\n    if (filters.startDate) {\n      conditions.push(gte(purchases.purchaseDate, filters.startDate));\n    }\n    if (filters.endDate) {\n      conditions.push(lte(purchases.purchaseDate, filters.endDate));\n    }\n    if (filters.clientId) {\n      conditions.push(eq(purchases.clientId, filters.clientId));\n    }\n    if (filters.minAmount !== undefined) {\n      conditions.push(gte(purchases.amount, filters.minAmount.toString()));\n    }\n    if (filters.maxAmount !== undefined) {\n      conditions.push(lte(purchases.amount, filters.maxAmount.toString()));\n    }\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions)) as any;\n    }\n\n    return await query.orderBy(desc(purchases.purchaseDate));\n  }\n\n  async createPurchase(insertPurchase: InsertPurchase): Promise<Purchase> {\n    const [purchase] = await db\n      .insert(purchases)\n      .values(insertPurchase)\n      .returning();\n    return purchase;\n  }\n\n  async getEmailSettings(): Promise<EmailSettings | undefined> {\n    const [settings] = await db.select().from(emailSettings).limit(1);\n    return settings || undefined;\n  }\n\n  async createEmailSettings(insertSettings: InsertEmailSettings): Promise<EmailSettings> {\n    const [settings] = await db\n      .insert(emailSettings)\n      .values(insertSettings)\n      .returning();\n    return settings;\n  }\n\n  async updateEmailSettings(id: string, updateData: Partial<InsertEmailSettings>): Promise<EmailSettings> {\n    const [settings] = await db\n      .update(emailSettings)\n      .set(updateData)\n      .where(eq(emailSettings.id, id))\n      .returning();\n    return settings;\n  }\n\n  async getSector(id: string): Promise<Sector | undefined> {\n    const [sector] = await db.select().from(sectors).where(eq(sectors.id, id));\n    return sector || undefined;\n  }\n\n  async getAllSectors(): Promise<Sector[]> {\n    return await db.select().from(sectors).orderBy(sectors.name);\n  }\n\n  async createSector(insertSector: InsertSector): Promise<Sector> {\n    const [sector] = await db\n      .insert(sectors)\n      .values(insertSector)\n      .returning();\n    return sector;\n  }\n\n  async updateSector(id: string, updateData: Partial<InsertSector>): Promise<Sector> {\n    const [sector] = await db\n      .update(sectors)\n      .set(updateData)\n      .where(eq(sectors.id, id))\n      .returning();\n    return sector;\n  }\n\n  async deleteSector(id: string): Promise<void> {\n    await db.delete(sectors).where(eq(sectors.id, id));\n  }\n\n  async getSubsector(id: string): Promise<Subsector | undefined> {\n    const [subsector] = await db.select().from(subsectors).where(eq(subsectors.id, id));\n    return subsector || undefined;\n  }\n\n  async getSubsectorsBySector(sectorId: string): Promise<Subsector[]> {\n    return await db.select().from(subsectors).where(eq(subsectors.sectorId, sectorId)).orderBy(subsectors.name);\n  }\n\n  async getAllSubsectors(): Promise<Subsector[]> {\n    return await db.select().from(subsectors).orderBy(subsectors.name);\n  }\n\n  async createSubsector(insertSubsector: InsertSubsector): Promise<Subsector> {\n    const [subsector] = await db\n      .insert(subsectors)\n      .values(insertSubsector)\n      .returning();\n    return subsector;\n  }\n\n  async updateSubsector(id: string, updateData: Partial<InsertSubsector>): Promise<Subsector> {\n    const [subsector] = await db\n      .update(subsectors)\n      .set(updateData)\n      .where(eq(subsectors.id, id))\n      .returning();\n    return subsector;\n  }\n\n  async deleteSubsector(id: string): Promise<void> {\n    await db.delete(subsectors).where(eq(subsectors.id, id));\n  }\n\n  async getEvent(id: string): Promise<Event | undefined> {\n    const [event] = await db.select().from(events).where(eq(events.id, id));\n    return event || undefined;\n  }\n\n  async getAllEvents(): Promise<Event[]> {\n    return await db.select().from(events).orderBy(desc(events.eventDate));\n  }\n\n  async getActiveEvents(): Promise<Event[]> {\n    const today = new Date().toISOString().split('T')[0];\n    const allActiveEvents = await db.select().from(events).where(eq(events.isActive, 'true')).orderBy(desc(events.eventDate));\n    \n    return allActiveEvents.filter(event => {\n      if (!event.endDate) return true;\n      return event.endDate >= today;\n    });\n  }\n\n  async getUpcomingEvents(): Promise<Event[]> {\n    const today = new Date().toISOString().split('T')[0];\n    return await db.select().from(events)\n      .where(eq(events.isActive, 'true'))\n      .orderBy(events.eventDate);\n  }\n\n  async createEvent(insertEvent: InsertEvent): Promise<Event> {\n    const [event] = await db\n      .insert(events)\n      .values(insertEvent)\n      .returning();\n    return event;\n  }\n\n  async updateEvent(id: string, updateData: Partial<InsertEvent>): Promise<Event> {\n    const [event] = await db\n      .update(events)\n      .set(updateData)\n      .where(eq(events.id, id))\n      .returning();\n    return event;\n  }\n\n  async deleteEvent(id: string): Promise<void> {\n    await db.delete(events).where(eq(events.id, id));\n  }\n\n  async getBanner(id: string): Promise<Banner | undefined> {\n    const [banner] = await db.select().from(banners).where(eq(banners.id, id));\n    return banner || undefined;\n  }\n\n  async getAllBanners(): Promise<Banner[]> {\n    return await db.select().from(banners).orderBy(banners.displayOrder);\n  }\n\n  async getActiveBanners(): Promise<Banner[]> {\n    return await db.select().from(banners)\n      .where(eq(banners.isActive, 'true'))\n      .orderBy(banners.displayOrder);\n  }\n\n  async createBanner(insertBanner: InsertBanner): Promise<Banner> {\n    const [banner] = await db\n      .insert(banners)\n      .values(insertBanner)\n      .returning();\n    return banner;\n  }\n\n  async updateBanner(id: string, updateData: Partial<InsertBanner>): Promise<Banner> {\n    const [banner] = await db\n      .update(banners)\n      .set(updateData)\n      .where(eq(banners.id, id))\n      .returning();\n    return banner;\n  }\n\n  async deleteBanner(id: string): Promise<void> {\n    await db.delete(banners).where(eq(banners.id, id));\n  }\n\n  async getSetting(key: string): Promise<Setting | undefined> {\n    const [setting] = await db.select().from(settings).where(eq(settings.key, key));\n    return setting || undefined;\n  }\n\n  async getAllSettings(): Promise<Setting[]> {\n    return await db.select().from(settings);\n  }\n\n  async upsertSetting(insertSetting: InsertSetting): Promise<Setting> {\n    const existing = await this.getSetting(insertSetting.key);\n    \n    if (existing) {\n      const [updated] = await db\n        .update(settings)\n        .set({ value: insertSetting.value })\n        .where(eq(settings.key, insertSetting.key))\n        .returning();\n      return updated;\n    } else {\n      const [created] = await db\n        .insert(settings)\n        .values(insertSetting)\n        .returning();\n      return created;\n    }\n  }\n\n  async incrementVisitCounter(): Promise<number> {\n    const today = new Date().toISOString().split('T')[0];\n    \n    // Get current counters\n    const totalSetting = await this.getSetting('visit_counter_total');\n    const todaySetting = await this.getSetting('visit_counter_today');\n    const dateSetting = await this.getSetting('visit_counter_date');\n    \n    const currentTotal = totalSetting ? parseInt(totalSetting.value) : 0;\n    const currentToday = todaySetting ? parseInt(todaySetting.value) : 0;\n    const lastDate = dateSetting?.value || '';\n    \n    // Increment total\n    const newTotal = currentTotal + 1;\n    await this.upsertSetting({ key: 'visit_counter_total', value: newTotal.toString() });\n    \n    // Reset today counter if date changed\n    if (lastDate !== today) {\n      await this.upsertSetting({ key: 'visit_counter_today', value: '1' });\n      await this.upsertSetting({ key: 'visit_counter_date', value: today });\n    } else {\n      const newToday = currentToday + 1;\n      await this.upsertSetting({ key: 'visit_counter_today', value: newToday.toString() });\n    }\n    \n    return newTotal;\n  }\n\n  async getVisitStats(): Promise<{ totalVisits: number; todayVisits: number }> {\n    const today = new Date().toISOString().split('T')[0];\n    \n    const totalSetting = await this.getSetting('visit_counter_total');\n    const todaySetting = await this.getSetting('visit_counter_today');\n    const dateSetting = await this.getSetting('visit_counter_date');\n    \n    const totalVisits = totalSetting ? parseInt(totalSetting.value) : 0;\n    let todayVisits = 0;\n    \n    // Only count today's visits if the date matches\n    if (dateSetting?.value === today && todaySetting) {\n      todayVisits = parseInt(todaySetting.value);\n    }\n    \n    return { totalVisits, todayVisits };\n  }\n\n  async createSiteVisit(visit: InsertSiteVisit): Promise<SiteVisit> {\n    const [siteVisit] = await db\n      .insert(siteVisits)\n      .values(visit)\n      .returning();\n    return siteVisit;\n  }\n\n  async getAllSiteVisits(): Promise<SiteVisit[]> {\n    // Filter out localhost IPs (127.0.0.1, ::1, etc)\n    return await db\n      .select()\n      .from(siteVisits)\n      .where(\n        and(\n          not(like(siteVisits.ipAddress, '127.%')),\n          not(eq(siteVisits.ipAddress, '::1')),\n          not(eq(siteVisits.ipAddress, 'unknown'))\n        )\n      )\n      .orderBy(desc(siteVisits.visitedAt));\n  }\n\n  async getSiteVisitsByDateRange(startDate: string, endDate: string): Promise<SiteVisit[]> {\n    return await db\n      .select()\n      .from(siteVisits)\n      .where(and(\n        gte(siteVisits.visitedAt, startDate),\n        lte(siteVisits.visitedAt, endDate)\n      ))\n      .orderBy(desc(siteVisits.visitedAt));\n  }\n\n  async getJob(id: string): Promise<Job | undefined> {\n    const [job] = await db.select().from(jobs).where(eq(jobs.id, id));\n    return job || undefined;\n  }\n\n  async getAllJobs(): Promise<Job[]> {\n    return await db.select().from(jobs).orderBy(desc(jobs.createdAt));\n  }\n\n  async getAllJobsWithCompany(): Promise<Array<Job & { company: { id: string; name: string } | null }>> {\n    const results = await db\n      .select()\n      .from(jobs)\n      .leftJoin(companies, eq(jobs.companyId, companies.id))\n      .orderBy(desc(jobs.createdAt));\n\n    return results.map((result: any) => ({\n      ...result.jobs,\n      company: result.companies ? { \n        id: result.companies.id, \n        name: result.companies.companyName || result.companies.name || 'Empresa'\n      } : null,\n    }));\n  }\n\n  async getActiveJobs(): Promise<Job[]> {\n    return await db.select().from(jobs).where(eq(jobs.status, 'active')).orderBy(desc(jobs.createdAt));\n  }\n\n  async getJobsByCompany(companyId: string): Promise<Job[]> {\n    return await db.select().from(jobs).where(eq(jobs.companyId, companyId)).orderBy(desc(jobs.createdAt));\n  }\n\n  async getJobsByClient(clientId: string): Promise<Job[]> {\n    return await db.select().from(jobs).where(eq(jobs.clientId, clientId)).orderBy(desc(jobs.createdAt));\n  }\n\n  async createJob(insertJob: InsertJob): Promise<Job> {\n    const [job] = await db\n      .insert(jobs)\n      .values(insertJob)\n      .returning();\n    return job;\n  }\n\n  async updateJob(id: string, updateData: Partial<InsertJob>): Promise<Job> {\n    const [job] = await db\n      .update(jobs)\n      .set({ ...updateData, updatedAt: new Date().toISOString() })\n      .where(eq(jobs.id, id))\n      .returning();\n    return job;\n  }\n\n  async deleteJob(id: string): Promise<void> {\n    await db.delete(jobs).where(eq(jobs.id, id));\n  }\n\n  async incrementJobViewCount(jobId: string): Promise<void> {\n    const job = await this.getJob(jobId);\n    if (job) {\n      const currentCount = parseInt(job.viewCount || '0');\n      await db\n        .update(jobs)\n        .set({ viewCount: String(currentCount + 1) })\n        .where(eq(jobs.id, jobId));\n    }\n  }\n\n  async getApplication(id: string): Promise<Application | undefined> {\n    const [application] = await db.select().from(applications).where(eq(applications.id, id));\n    return application || undefined;\n  }\n\n  async getApplicationsByJob(jobId: string): Promise<Application[]> {\n    return await db.select().from(applications).where(eq(applications.jobId, jobId));\n  }\n\n  async getApplicationsWithOperatorByJob(jobId: string): Promise<Array<Application & { operator: Operator }>> {\n    const results = await db\n      .select({\n        application: applications,\n        operator: operators,\n      })\n      .from(applications)\n      .innerJoin(operators, eq(applications.operatorId, operators.id))\n      .where(eq(applications.jobId, jobId))\n      .orderBy(desc(applications.appliedAt));\n\n    return results.map((result) => ({\n      ...result.application,\n      operator: result.operator,\n    }));\n  }\n\n  async getApplicationsByOperator(operatorId: string): Promise<Application[]> {\n    return await db.select().from(applications).where(eq(applications.operatorId, operatorId)).orderBy(desc(applications.appliedAt));\n  }\n\n  async getApplicationsWithJobByOperator(operatorId: string): Promise<Array<Application & { job: Job & { company: Company } }>> {\n    const results = await db\n      .select({\n        application: applications,\n        job: jobs,\n        company: companies,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .innerJoin(companies, eq(jobs.companyId, companies.id))\n      .where(eq(applications.operatorId, operatorId))\n      .orderBy(desc(applications.appliedAt));\n\n    return results.map((result) => ({\n      ...result.application,\n      job: {\n        ...result.job,\n        company: result.company,\n      },\n    }));\n  }\n\n  async checkExistingApplication(jobId: string, operatorId: string): Promise<Application | undefined> {\n    const [application] = await db.select().from(applications).where(\n      and(\n        eq(applications.jobId, jobId),\n        eq(applications.operatorId, operatorId)\n      )\n    );\n    return application || undefined;\n  }\n\n  async createApplication(insertApplication: InsertApplication): Promise<Application> {\n    const [application] = await db\n      .insert(applications)\n      .values(insertApplication)\n      .returning();\n    return application;\n  }\n\n  async updateApplicationStatus(id: string, status: string): Promise<Application> {\n    const [application] = await db\n      .update(applications)\n      .set({ status })\n      .where(eq(applications.id, id))\n      .returning();\n    return application;\n  }\n\n  async saveJob(operatorId: string, jobId: string): Promise<SavedJob> {\n    const [savedJob] = await db\n      .insert(savedJobs)\n      .values({ operatorId, jobId })\n      .returning();\n    return savedJob;\n  }\n\n  async unsaveJob(operatorId: string, jobId: string): Promise<void> {\n    await db\n      .delete(savedJobs)\n      .where(and(\n        eq(savedJobs.operatorId, operatorId),\n        eq(savedJobs.jobId, jobId)\n      ));\n  }\n\n  async getSavedJobsByOperator(operatorId: string): Promise<Array<SavedJob & { job: Job }>> {\n    const results = await db\n      .select()\n      .from(savedJobs)\n      .leftJoin(jobs, eq(savedJobs.jobId, jobs.id))\n      .where(eq(savedJobs.operatorId, operatorId))\n      .orderBy(desc(savedJobs.savedAt));\n    \n    return results.map(row => ({\n      ...row.saved_jobs,\n      job: row.jobs!\n    }));\n  }\n\n  async checkIfJobIsSaved(operatorId: string, jobId: string): Promise<boolean> {\n    const [result] = await db\n      .select()\n      .from(savedJobs)\n      .where(and(\n        eq(savedJobs.operatorId, operatorId),\n        eq(savedJobs.jobId, jobId)\n      ))\n      .limit(1);\n    \n    return !!result;\n  }\n\n  async getStats(): Promise<{\n    totalCompanies: number;\n    totalOperators: number;\n    totalClients: number;\n  }> {\n    const [companiesResult] = await db.select({ count: db.$count(companies) }).from(companies);\n    const [operatorsResult] = await db.select({ count: db.$count(operators) }).from(operators);\n    const [clientsResult] = await db.select({ count: db.$count(clients) }).from(clients);\n    \n    return {\n      totalCompanies: companiesResult?.count || 0,\n      totalOperators: operatorsResult?.count || 0,\n      totalClients: clientsResult?.count || 0,\n    };\n  }\n  \n  async getCompanyDashboardStats(companyId: string): Promise<{\n    activeJobs: number;\n    totalJobs: number;\n    totalApplications: number;\n    recentApplications: number;\n  }> {\n    // Buscar todos os jobs da empresa\n    const companyJobs = await this.getJobsByCompany(companyId);\n    const totalJobs = companyJobs.length;\n    const activeJobs = companyJobs.filter(job => job.status === 'active').length;\n    \n    // Buscar todas as candidaturas para as vagas da empresa\n    const jobIds = companyJobs.map(job => job.id);\n    let totalApplications = 0;\n    let recentApplications = 0;\n    \n    if (jobIds.length > 0) {\n      for (const jobId of jobIds) {\n        const jobApplications = await this.getApplicationsByJob(jobId);\n        totalApplications += jobApplications.length;\n        \n        // Candidaturas dos últimos 7 dias\n        const sevenDaysAgo = new Date();\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n        recentApplications += jobApplications.filter(app => \n          new Date(app.appliedAt) >= sevenDaysAgo\n        ).length;\n      }\n    }\n    \n    return {\n      activeJobs,\n      totalJobs,\n      totalApplications,\n      recentApplications,\n    };\n  }\n\n  async getQuestion(id: string): Promise<Question | undefined> {\n    const [question] = await db.select().from(questions).where(eq(questions.id, id));\n    return question || undefined;\n  }\n\n  async getQuestionsByCompany(companyId: string): Promise<Question[]> {\n    return await db.select().from(questions)\n      .where(eq(questions.companyId, companyId))\n      .orderBy(desc(questions.createdAt));\n  }\n\n  async getQuestionsByClient(clientId: string): Promise<Question[]> {\n    return await db.select().from(questions)\n      .where(eq(questions.clientId, clientId))\n      .orderBy(desc(questions.createdAt));\n  }\n\n  async createQuestion(insertQuestion: InsertQuestion): Promise<Question> {\n    const [question] = await db\n      .insert(questions)\n      .values(insertQuestion)\n      .returning();\n    return question;\n  }\n\n  async updateQuestion(id: string, updateData: Partial<InsertQuestion>): Promise<Question> {\n    const [question] = await db\n      .update(questions)\n      .set(updateData)\n      .where(eq(questions.id, id))\n      .returning();\n    return question;\n  }\n\n  async deleteQuestion(id: string): Promise<void> {\n    await db.delete(questions).where(eq(questions.id, id));\n  }\n\n  async getWorkType(id: string): Promise<WorkType | undefined> {\n    const [workType] = await db.select().from(workTypes).where(eq(workTypes.id, id));\n    return workType || undefined;\n  }\n\n  async getWorkTypesByCompany(companyId: string): Promise<WorkType[]> {\n    return await db.select().from(workTypes)\n      .where(eq(workTypes.companyId, companyId))\n      .orderBy(desc(workTypes.createdAt));\n  }\n\n  async createWorkType(insertWorkType: InsertWorkType): Promise<WorkType> {\n    const [workType] = await db\n      .insert(workTypes)\n      .values(insertWorkType)\n      .returning();\n    return workType;\n  }\n\n  async updateWorkType(id: string, updateData: Partial<InsertWorkType>): Promise<WorkType> {\n    const [workType] = await db\n      .update(workTypes)\n      .set(updateData)\n      .where(eq(workTypes.id, id))\n      .returning();\n    return workType;\n  }\n\n  async deleteWorkType(id: string): Promise<void> {\n    await db.delete(workTypes).where(eq(workTypes.id, id));\n  }\n\n  async getContractType(id: string): Promise<ContractType | undefined> {\n    const [contractType] = await db.select().from(contractTypes).where(eq(contractTypes.id, id));\n    return contractType || undefined;\n  }\n\n  async getContractTypesByCompany(companyId: string): Promise<ContractType[]> {\n    return await db.select().from(contractTypes)\n      .where(eq(contractTypes.companyId, companyId))\n      .orderBy(desc(contractTypes.createdAt));\n  }\n\n  async createContractType(insertContractType: InsertContractType): Promise<ContractType> {\n    const [contractType] = await db\n      .insert(contractTypes)\n      .values(insertContractType)\n      .returning();\n    return contractType;\n  }\n\n  async updateContractType(id: string, updateData: Partial<InsertContractType>): Promise<ContractType> {\n    const [contractType] = await db\n      .update(contractTypes)\n      .set(updateData)\n      .where(eq(contractTypes.id, id))\n      .returning();\n    return contractType;\n  }\n\n  async deleteContractType(id: string): Promise<void> {\n    await db.delete(contractTypes).where(eq(contractTypes.id, id));\n  }\n\n  async getTag(id: string): Promise<Tag | undefined> {\n    const [tag] = await db.select().from(tags).where(eq(tags.id, id));\n    return tag || undefined;\n  }\n\n  async getAllTags(): Promise<Tag[]> {\n    return await db.select().from(tags).orderBy(desc(tags.createdAt));\n  }\n\n  async getActiveTags(): Promise<Tag[]> {\n    return await db.select().from(tags)\n      .where(eq(tags.isActive, 'true'))\n      .orderBy(desc(tags.createdAt));\n  }\n\n  async createTag(insertTag: InsertTag): Promise<Tag> {\n    const [tag] = await db\n      .insert(tags)\n      .values(insertTag)\n      .returning();\n    return tag;\n  }\n\n  async updateTag(id: string, updateData: Partial<InsertTag>): Promise<Tag> {\n    const [tag] = await db\n      .update(tags)\n      .set(updateData)\n      .where(eq(tags.id, id))\n      .returning();\n    return tag;\n  }\n\n  async deleteTag(id: string): Promise<void> {\n    await db.delete(tags).where(eq(tags.id, id));\n  }\n\n  async getGlobalWorkType(id: string): Promise<GlobalWorkType | undefined> {\n    const [workType] = await db.select().from(globalWorkTypes).where(eq(globalWorkTypes.id, id));\n    return workType || undefined;\n  }\n\n  async getAllGlobalWorkTypes(): Promise<GlobalWorkType[]> {\n    return await db.select().from(globalWorkTypes).orderBy(desc(globalWorkTypes.createdAt));\n  }\n\n  async getActiveGlobalWorkTypes(): Promise<GlobalWorkType[]> {\n    return await db.select().from(globalWorkTypes)\n      .where(eq(globalWorkTypes.isActive, 'true'))\n      .orderBy(desc(globalWorkTypes.createdAt));\n  }\n\n  async createGlobalWorkType(insertWorkType: InsertGlobalWorkType): Promise<GlobalWorkType> {\n    const [workType] = await db\n      .insert(globalWorkTypes)\n      .values(insertWorkType)\n      .returning();\n    return workType;\n  }\n\n  async updateGlobalWorkType(id: string, updateData: Partial<InsertGlobalWorkType>): Promise<GlobalWorkType> {\n    const [workType] = await db\n      .update(globalWorkTypes)\n      .set(updateData)\n      .where(eq(globalWorkTypes.id, id))\n      .returning();\n    return workType;\n  }\n\n  async deleteGlobalWorkType(id: string): Promise<void> {\n    await db.delete(globalWorkTypes).where(eq(globalWorkTypes.id, id));\n  }\n\n  async getGlobalContractType(id: string): Promise<GlobalContractType | undefined> {\n    const [contractType] = await db.select().from(globalContractTypes).where(eq(globalContractTypes.id, id));\n    return contractType || undefined;\n  }\n\n  async getAllGlobalContractTypes(): Promise<GlobalContractType[]> {\n    return await db.select().from(globalContractTypes).orderBy(desc(globalContractTypes.createdAt));\n  }\n\n  async getActiveGlobalContractTypes(): Promise<GlobalContractType[]> {\n    return await db.select().from(globalContractTypes)\n      .where(eq(globalContractTypes.isActive, 'true'))\n      .orderBy(desc(globalContractTypes.createdAt));\n  }\n\n  async createGlobalContractType(insertContractType: InsertGlobalContractType): Promise<GlobalContractType> {\n    const [contractType] = await db\n      .insert(globalContractTypes)\n      .values(insertContractType)\n      .returning();\n    return contractType;\n  }\n\n  async updateGlobalContractType(id: string, updateData: Partial<InsertGlobalContractType>): Promise<GlobalContractType> {\n    const [contractType] = await db\n      .update(globalContractTypes)\n      .set(updateData)\n      .where(eq(globalContractTypes.id, id))\n      .returning();\n    return contractType;\n  }\n\n  async deleteGlobalContractType(id: string): Promise<void> {\n    await db.delete(globalContractTypes).where(eq(globalContractTypes.id, id));\n  }\n\n  async getJobQuestion(id: string): Promise<JobQuestion | undefined> {\n    const [jobQuestion] = await db.select().from(jobQuestions).where(eq(jobQuestions.id, id));\n    return jobQuestion || undefined;\n  }\n\n  async getJobQuestionsByJob(jobId: string): Promise<Array<JobQuestion & { question: Question }>> {\n    const results = await db\n      .select({\n        jobQuestion: jobQuestions,\n        question: questions,\n      })\n      .from(jobQuestions)\n      .innerJoin(questions, eq(jobQuestions.questionId, questions.id))\n      .where(eq(jobQuestions.jobId, jobId))\n      .orderBy(jobQuestions.displayOrder);\n\n    return results.map((result) => ({\n      ...result.jobQuestion,\n      question: result.question,\n    }));\n  }\n\n  async createJobQuestion(insertJobQuestion: InsertJobQuestion): Promise<JobQuestion> {\n    const [jobQuestion] = await db\n      .insert(jobQuestions)\n      .values(insertJobQuestion)\n      .returning();\n    return jobQuestion;\n  }\n\n  async deleteJobQuestion(id: string): Promise<void> {\n    await db.delete(jobQuestions).where(eq(jobQuestions.id, id));\n  }\n\n  async getApplicationAnswer(id: string): Promise<ApplicationAnswer | undefined> {\n    const [answer] = await db.select().from(applicationAnswers).where(eq(applicationAnswers.id, id));\n    return answer || undefined;\n  }\n\n  async getApplicationAnswersByApplication(applicationId: string): Promise<Array<ApplicationAnswer & { question: Question }>> {\n    const results = await db\n      .select({\n        answer: applicationAnswers,\n        question: questions,\n      })\n      .from(applicationAnswers)\n      .innerJoin(questions, eq(applicationAnswers.questionId, questions.id))\n      .where(eq(applicationAnswers.applicationId, applicationId))\n      .orderBy(applicationAnswers.createdAt);\n\n    return results.map((result) => ({\n      ...result.answer,\n      question: result.question,\n    }));\n  }\n\n  async createApplicationAnswer(insertAnswer: InsertApplicationAnswer): Promise<ApplicationAnswer> {\n    const [answer] = await db\n      .insert(applicationAnswers)\n      .values(insertAnswer)\n      .returning();\n    return answer;\n  }\n\n  async subscribeToNewsletter(email: string): Promise<NewsletterSubscription> {\n    const existing = await this.getNewsletterSubscription(email);\n    \n    if (existing) {\n      if (existing.isActive === 'false') {\n        const [updated] = await db\n          .update(newsletterSubscriptions)\n          .set({ isActive: 'true' })\n          .where(eq(newsletterSubscriptions.email, email))\n          .returning();\n        return updated;\n      }\n      return existing;\n    }\n\n    const [subscription] = await db\n      .insert(newsletterSubscriptions)\n      .values({ email })\n      .returning();\n    return subscription;\n  }\n\n  async getNewsletterSubscription(email: string): Promise<NewsletterSubscription | undefined> {\n    const [subscription] = await db\n      .select()\n      .from(newsletterSubscriptions)\n      .where(eq(newsletterSubscriptions.email, email));\n    return subscription || undefined;\n  }\n\n  async getAllNewsletterSubscriptions(): Promise<NewsletterSubscription[]> {\n    return await db\n      .select()\n      .from(newsletterSubscriptions)\n      .orderBy(desc(newsletterSubscriptions.subscribedAt));\n  }\n\n  async getActiveNewsletterSubscriptions(): Promise<NewsletterSubscription[]> {\n    return await db\n      .select()\n      .from(newsletterSubscriptions)\n      .where(eq(newsletterSubscriptions.isActive, 'true'))\n      .orderBy(desc(newsletterSubscriptions.subscribedAt));\n  }\n\n  async createPasswordResetCode(resetCode: InsertPasswordResetCode): Promise<PasswordResetCode> {\n    const [code] = await db\n      .insert(passwordResetCodes)\n      .values(resetCode)\n      .returning();\n    return code;\n  }\n\n  async getPasswordResetCode(email: string, code: string): Promise<PasswordResetCode | undefined> {\n    const [resetCode] = await db\n      .select()\n      .from(passwordResetCodes)\n      .where(\n        and(\n          eq(passwordResetCodes.email, email),\n          eq(passwordResetCodes.code, code),\n          eq(passwordResetCodes.isUsed, 'false')\n        )\n      );\n    return resetCode || undefined;\n  }\n\n  async markPasswordResetCodeAsUsed(id: string): Promise<void> {\n    await db\n      .update(passwordResetCodes)\n      .set({ isUsed: 'true' })\n      .where(eq(passwordResetCodes.id, id));\n  }\n\n  async deleteExpiredPasswordResetCodes(): Promise<void> {\n    const now = new Date().toISOString();\n    await db\n      .delete(passwordResetCodes)\n      .where(lte(passwordResetCodes.expiresAt, now));\n  }\n\n  async getCreditTransactionsByCompany(companyId: string): Promise<CreditTransaction[]> {\n    return await db\n      .select()\n      .from(creditTransactions)\n      .where(eq(creditTransactions.companyId, companyId))\n      .orderBy(desc(creditTransactions.createdAt));\n  }\n\n  async createCreditTransaction(transaction: InsertCreditTransaction): Promise<CreditTransaction> {\n    const [newTransaction] = await db\n      .insert(creditTransactions)\n      .values(transaction)\n      .returning();\n    return newTransaction;\n  }\n\n  async getCompanyCredits(companyId: string): Promise<number> {\n    const [company] = await db\n      .select()\n      .from(companies)\n      .where(eq(companies.id, companyId));\n    return company ? parseInt(company.credits) : 0;\n  }\n\n  async addCreditsToCompany(\n    companyId: string,\n    amount: number,\n    description: string,\n    relatedPlanId?: string\n  ): Promise<CreditTransaction> {\n    const currentCredits = await this.getCompanyCredits(companyId);\n    const newBalance = currentCredits + amount;\n\n    await db\n      .update(companies)\n      .set({ credits: newBalance.toString() })\n      .where(eq(companies.id, companyId));\n\n    const transaction = await this.createCreditTransaction({\n      companyId,\n      type: 'credit',\n      amount: amount.toString(),\n      description,\n      relatedPlanId,\n      balanceAfter: newBalance.toString(),\n    });\n\n    return transaction;\n  }\n\n  async deductCreditsFromCompany(\n    companyId: string,\n    amount: number,\n    description: string,\n    relatedJobId?: string\n  ): Promise<CreditTransaction> {\n    const currentCredits = await this.getCompanyCredits(companyId);\n    \n    if (currentCredits < amount) {\n      throw new Error('Créditos insuficientes');\n    }\n\n    const newBalance = currentCredits - amount;\n\n    await db\n      .update(companies)\n      .set({ credits: newBalance.toString() })\n      .where(eq(companies.id, companyId));\n\n    const transaction = await this.createCreditTransaction({\n      companyId,\n      type: 'debit',\n      amount: amount.toString(),\n      description,\n      relatedJobId,\n      balanceAfter: newBalance.toString(),\n    });\n\n    return transaction;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":52049},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/pages/Home.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { HeroSection } from \"@/components/HeroSection\";\nimport { StatsSection } from \"@/components/StatsSection\";\nimport { CategorySection } from \"@/components/CategorySection\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { MapPin, Building2, Clock, DollarSign, Briefcase, ArrowRight } from \"lucide-react\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobWithCompany extends Job {\n  companyName?: string;\n  companyLogo?: string;\n}\n\nexport default function Home() {\n  const [language, setLanguage] = useState(\"PT\");\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    // Track visit to home page\n    const trackVisit = async () => {\n      try {\n        await apiRequest(\"POST\", \"/api/track-visit\", {});\n      } catch (error) {\n        // Silently fail - don't interrupt user experience\n        console.log(\"Visit tracking failed:\", error);\n      }\n    };\n    trackVisit();\n  }, []);\n\n  const handleLanguageToggle = () => {\n    setLanguage(language === \"PT\" ? \"EN\" : \"PT\");\n    console.log(\"Language switched to:\", language === \"PT\" ? \"EN\" : \"PT\");\n  };\n\n  // Fetch latest jobs\n  const { data: jobs = [], isLoading } = useQuery<JobWithCompany[]>({\n    queryKey: ['/api/public/jobs'],\n  });\n\n  // Get latest 10 jobs\n  const latestJobs = jobs\n    .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n    .slice(0, 10);\n\n  const formatSalary = (salary: string | null) => {\n    if (!salary) return null;\n    return `R$ ${parseFloat(salary).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;\n  };\n\n  const getWorkTypeLabel = (type: string | null) => {\n    const labels: Record<string, string> = {\n      'presencial': 'Presencial',\n      'remoto': 'Remoto',\n      'hibrido': 'Híbrido',\n    };\n    return type ? labels[type] || type : null;\n  };\n\n  const getContractTypeLabel = (type: string | null) => {\n    const labels: Record<string, string> = {\n      'clt': 'CLT',\n      'pj': 'PJ',\n      'estagio': 'Estágio',\n      'temporario': 'Temporário',\n    };\n    return type ? labels[type] || type : null;\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header onLanguageToggle={handleLanguageToggle} language={language} />\n      <HeroSection />\n      <StatsSection />\n      \n      <main className=\"flex-1\">\n        <CategorySection />\n        \n        {/* Latest Jobs Section */}\n        <section className=\"py-12 bg-background\">\n          <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8\">\n            <div className=\"flex items-center justify-between mb-8\">\n              <div>\n                <h2 className=\"font-heading font-bold text-3xl mb-2\">\n                  Últimas Vagas Cadastradas\n                </h2>\n                <p className=\"text-muted-foreground\">\n                  Confira as oportunidades mais recentes publicadas pelas empresas\n                </p>\n              </div>\n            </div>\n            \n            {isLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n                {[1, 2, 3, 4].map((i) => (\n                  <Card key={i}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex gap-4\">\n                        <Skeleton className=\"h-12 w-12 rounded-lg\" />\n                        <div className=\"flex-1 space-y-3\">\n                          <Skeleton className=\"h-5 w-3/4\" />\n                          <Skeleton className=\"h-4 w-1/2\" />\n                          <Skeleton className=\"h-16 w-full\" />\n                          <div className=\"flex gap-2\">\n                            <Skeleton className=\"h-6 w-20\" />\n                            <Skeleton className=\"h-6 w-16\" />\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : latestJobs.length === 0 ? (\n              <Card className=\"p-12\">\n                <div className=\"text-center\">\n                  <Briefcase className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n                  <h3 className=\"text-xl font-semibold mb-2\">\n                    Nenhuma vaga disponível\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    No momento não há vagas cadastradas. Volte em breve!\n                  </p>\n                </div>\n              </Card>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n                  {latestJobs.map((job) => (\n                    <Card \n                      key={job.id}\n                      className=\"hover-elevate cursor-pointer transition-all\"\n                      onClick={() => setLocation(`/vaga/${job.id}`)}\n                      data-testid={`home-job-card-${job.id}`}\n                    >\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex gap-4\">\n                          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                            {job.companyLogo ? (\n                              <img \n                                src={job.companyLogo} \n                                alt={job.companyName || 'Company'} \n                                className=\"h-full w-full object-cover\"\n                              />\n                            ) : (\n                              <Building2 className=\"h-6 w-6 text-primary\" />\n                            )}\n                          </div>\n                          \n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-semibold text-lg line-clamp-1 mb-1\">\n                              {job.title}\n                            </h3>\n                            {job.companyName && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-1 mb-3\">\n                                {job.companyName}\n                              </p>\n                            )}\n                            \n                            {job.description && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-2 mb-3\">\n                                {job.description}\n                              </p>\n                            )}\n                            \n                            <div className=\"flex flex-wrap gap-2 mb-3\">\n                              {job.workType && (\n                                <Badge variant=\"secondary\" className=\"text-xs\">\n                                  {getWorkTypeLabel(job.workType)}\n                                </Badge>\n                              )}\n                              {job.contractType && (\n                                <Badge variant=\"outline\" className=\"text-xs\">\n                                  {getContractTypeLabel(job.contractType)}\n                                </Badge>\n                              )}\n                              {job.salary && (\n                                <Badge variant=\"outline\" className=\"text-xs font-semibold text-green-600 dark:text-green-400\">\n                                  {formatSalary(job.salary)}\n                                </Badge>\n                              )}\n                            </div>\n                            \n                            <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                              {job.location && (\n                                <div className=\"flex items-center gap-1\">\n                                  <MapPin className=\"h-3 w-3\" />\n                                  <span className=\"line-clamp-1\">{job.location}</span>\n                                </div>\n                              )}\n                              <div className=\"flex items-center gap-1\">\n                                <Clock className=\"h-3 w-3\" />\n                                <span>\n                                  {new Date(job.createdAt).toLocaleDateString('pt-BR', {\n                                    day: '2-digit',\n                                    month: 'short',\n                                  })}\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {/* Ver Mais Button */}\n                <div className=\"text-center\">\n                  <Button\n                    size=\"lg\"\n                    onClick={() => setLocation('/vagas')}\n                    className=\"gap-2\"\n                    data-testid=\"button-view-all-jobs\"\n                  >\n                    Ver Mais Vagas\n                    <ArrowRight className=\"h-5 w-5\" />\n                  </Button>\n                </div>\n              </>\n            )}\n          </div>\n        </section>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}\n","size_bytes":9605},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"server/objectAcl.ts":{"content":"// Reference: blueprint:javascript_object_storage\nimport { File } from \"@google-cloud/storage\";\n\nconst ACL_POLICY_METADATA_KEY = \"custom:aclPolicy\";\n\nexport enum ObjectAccessGroupType {}\n\nexport interface ObjectAccessGroup {\n  type: ObjectAccessGroupType;\n  id: string;\n}\n\nexport enum ObjectPermission {\n  READ = \"read\",\n  WRITE = \"write\",\n}\n\nexport interface ObjectAclRule {\n  group: ObjectAccessGroup;\n  permission: ObjectPermission;\n}\n\nexport interface ObjectAclPolicy {\n  owner: string;\n  visibility: \"public\" | \"private\";\n  aclRules?: Array<ObjectAclRule>;\n}\n\nfunction isPermissionAllowed(\n  requested: ObjectPermission,\n  granted: ObjectPermission,\n): boolean {\n  if (requested === ObjectPermission.READ) {\n    return [ObjectPermission.READ, ObjectPermission.WRITE].includes(granted);\n  }\n  return granted === ObjectPermission.WRITE;\n}\n\nabstract class BaseObjectAccessGroup implements ObjectAccessGroup {\n  constructor(\n    public readonly type: ObjectAccessGroupType,\n    public readonly id: string,\n  ) {}\n\n  public abstract hasMember(userId: string): Promise<boolean>;\n}\n\nfunction createObjectAccessGroup(\n  group: ObjectAccessGroup,\n): BaseObjectAccessGroup {\n  switch (group.type) {\n    default:\n      throw new Error(`Unknown access group type: ${group.type}`);\n  }\n}\n\nexport async function setObjectAclPolicy(\n  objectFile: File,\n  aclPolicy: ObjectAclPolicy,\n): Promise<void> {\n  const [exists] = await objectFile.exists();\n  if (!exists) {\n    throw new Error(`Object not found: ${objectFile.name}`);\n  }\n\n  await objectFile.setMetadata({\n    metadata: {\n      [ACL_POLICY_METADATA_KEY]: JSON.stringify(aclPolicy),\n    },\n  });\n}\n\nexport async function getObjectAclPolicy(\n  objectFile: File,\n): Promise<ObjectAclPolicy | null> {\n  const [metadata] = await objectFile.getMetadata();\n  const aclPolicy = metadata?.metadata?.[ACL_POLICY_METADATA_KEY];\n  if (!aclPolicy) {\n    return null;\n  }\n  return JSON.parse(aclPolicy as string);\n}\n\nexport async function canAccessObject({\n  userId,\n  objectFile,\n  requestedPermission,\n}: {\n  userId?: string;\n  objectFile: File;\n  requestedPermission: ObjectPermission;\n}): Promise<boolean> {\n  const aclPolicy = await getObjectAclPolicy(objectFile);\n  if (!aclPolicy) {\n    return false;\n  }\n\n  if (\n    aclPolicy.visibility === \"public\" &&\n    requestedPermission === ObjectPermission.READ\n  ) {\n    return true;\n  }\n\n  if (!userId) {\n    return false;\n  }\n\n  if (aclPolicy.owner === userId) {\n    return true;\n  }\n\n  for (const rule of aclPolicy.aclRules || []) {\n    const accessGroup = createObjectAccessGroup(rule.group);\n    if (\n      (await accessGroup.hasMember(userId)) &&\n      isPermissionAllowed(requestedPermission, rule.permission)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","size_bytes":2757},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/JobCard.tsx":{"content":"import { MapPin, Bookmark, Clock, Users } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport interface JobCardProps {\n  id: string;\n  title: string;\n  company: string;\n  companyLogo?: string;\n  location: string;\n  country: string;\n  workType: \"Remote\" | \"Hybrid\" | \"Onsite\";\n  contractType: string;\n  salary?: string;\n  description: string;\n  postedTime: string;\n  applicants?: number;\n  verified?: boolean;\n}\n\nexport function JobCard({\n  id,\n  title,\n  company,\n  companyLogo,\n  location,\n  country,\n  workType,\n  contractType,\n  salary,\n  description,\n  postedTime,\n  applicants,\n  verified = false,\n}: JobCardProps) {\n  const { toast } = useToast();\n\n  // Check if job is saved\n  const { data: savedData } = useQuery<{ isSaved: boolean }>({\n    queryKey: ['/api/jobs', id, 'is-saved'],\n  });\n\n  const bookmarked = savedData?.isSaved || false;\n\n  // Save job mutation\n  const saveMutation = useMutation({\n    mutationFn: () => apiRequest('POST', `/api/jobs/${id}/save`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs', id, 'is-saved'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/operator/saved-jobs'] });\n      toast({\n        title: \"Vaga salva!\",\n        description: \"A vaga foi adicionada aos seus favoritos.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao salvar vaga\",\n        description: \"Não foi possível salvar a vaga. Tente novamente.\",\n      });\n    },\n  });\n\n  // Unsave job mutation\n  const unsaveMutation = useMutation({\n    mutationFn: () => apiRequest('DELETE', `/api/jobs/${id}/save`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs', id, 'is-saved'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/operator/saved-jobs'] });\n      toast({\n        title: \"Vaga removida\",\n        description: \"A vaga foi removida dos seus favoritos.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao remover vaga\",\n        description: \"Não foi possível remover a vaga. Tente novamente.\",\n      });\n    },\n  });\n\n  const workTypeColors = {\n    Remote: \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300\",\n    Hybrid: \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\",\n    Onsite: \"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300\",\n  };\n\n  return (\n    <Card className=\"p-6 hover-elevate active-elevate-2 cursor-pointer transition-shadow\" data-testid={`card-job-${title}`}>\n      <div className=\"flex gap-4\">\n        <Avatar className=\"h-12 w-12 rounded-md\">\n          <AvatarImage src={companyLogo} alt={company} />\n          <AvatarFallback className=\"rounded-md\">{company[0]}</AvatarFallback>\n        </Avatar>\n\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between gap-2 mb-2\">\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-semibold text-xl mb-1 line-clamp-1\" data-testid=\"text-job-title\">\n                {title}\n              </h3>\n              <div className=\"flex items-center gap-2 text-base text-foreground mb-1\">\n                <span className=\"font-medium\">{company}</span>\n                {verified && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    Verificada\n                  </Badge>\n                )}\n              </div>\n            </div>\n            \n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={(e) => {\n                e.stopPropagation();\n                if (bookmarked) {\n                  unsaveMutation.mutate();\n                } else {\n                  saveMutation.mutate();\n                }\n              }}\n              disabled={saveMutation.isPending || unsaveMutation.isPending}\n              className={bookmarked ? \"text-primary\" : \"\"}\n              data-testid=\"button-bookmark\"\n              title={bookmarked ? \"Remover dos favoritos\" : \"Salvar vaga\"}\n            >\n              <Bookmark className={`h-5 w-5 ${bookmarked ? \"fill-current\" : \"\"}`} />\n            </Button>\n          </div>\n\n          <div className=\"flex flex-wrap items-center gap-2 mb-3 text-sm text-muted-foreground\">\n            <div className=\"flex items-center gap-1\">\n              <MapPin className=\"h-4 w-4\" />\n              <span>{location}, {country}</span>\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2 mb-3\">\n            <Badge className={workTypeColors[workType]} data-testid=\"badge-work-type\">\n              {workType}\n            </Badge>\n            <Badge variant=\"secondary\" data-testid=\"badge-contract-type\">\n              {contractType}\n            </Badge>\n            {salary && (\n              <Badge variant=\"outline\" className=\"font-semibold\" data-testid=\"badge-salary\">\n                {salary}\n              </Badge>\n            )}\n          </div>\n\n          <p className=\"text-sm text-muted-foreground line-clamp-2 mb-3\">\n            {description}\n          </p>\n\n          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"h-3 w-3\" />\n              <span>{postedTime}</span>\n            </div>\n            {applicants && (\n              <div className=\"flex items-center gap-1\">\n                <Users className=\"h-3 w-3\" />\n                <span>{applicants} candidatos</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":5996},"client/src/pages/SignupCompany.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertCompanySchema } from \"@shared/schema\";\nimport type { InsertCompany } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Building2, Mail, Lock, Phone, Globe, FileText, Users } from \"lucide-react\";\n\nconst signupFormSchema = insertCompanySchema.extend({\n  confirmPassword: z.string().min(6, \"A senha deve ter no mínimo 6 caracteres\"),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"As senhas não coincidem\",\n  path: [\"confirmPassword\"],\n});\n\ntype SignupFormData = z.infer<typeof signupFormSchema>;\n\nexport default function SignupCompany() {\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const form = useForm<SignupFormData>({\n    resolver: zodResolver(signupFormSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      companyName: \"\",\n      cnpj: \"\",\n      phone: \"\",\n      website: undefined,\n      description: undefined,\n      industry: undefined,\n      size: undefined,\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: InsertCompany) => {\n      const response = await fetch(\"/api/companies/register\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao criar conta\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Conta criada com sucesso!\",\n        description: \"Redirecionando para o dashboard...\",\n      });\n      setTimeout(() => {\n        setLocation(\"/dashboard/empresa\");\n      }, 1500);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao criar conta\",\n        description: error.message || \"Tente novamente mais tarde\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: SignupFormData) => {\n    const { confirmPassword, ...companyData } = data;\n    registerMutation.mutate(companyData);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-12 px-4 bg-background\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"bg-card border rounded-xl p-8\">\n            <div className=\"text-center mb-8\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4\">\n                <Building2 className=\"w-8 h-8 text-primary\" />\n              </div>\n              <h1 className=\"font-heading font-bold text-3xl mb-2\">\n                Cadastro de Empresa\n              </h1>\n              <p className=\"text-muted-foreground\">\n                Preencha os dados da sua empresa para começar\n              </p>\n            </div>\n\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <h2 className=\"font-semibold text-lg\">Informações da Empresa</h2>\n\n                  <FormField\n                    control={form.control}\n                    name=\"companyName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome da Empresa</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Building2 className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              placeholder=\"Sua Empresa Ltda\"\n                              className=\"pl-10\"\n                              data-testid=\"input-company-name\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"cnpj\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>CNPJ</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <FileText className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              placeholder=\"00.000.000/0000-00\"\n                              className=\"pl-10\"\n                              data-testid=\"input-cnpj\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"industry\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Setor</FormLabel>\n                          <Select\n                            onValueChange={field.onChange}\n                            defaultValue={field.value ?? undefined}\n                          >\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-industry\">\n                                <SelectValue placeholder=\"Selecione o setor\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"mineracao\">Mineração</SelectItem>\n                              <SelectItem value=\"construcao\">Construção Civil</SelectItem>\n                              <SelectItem value=\"industria\">Indústria</SelectItem>\n                              <SelectItem value=\"agricultura\">Agricultura</SelectItem>\n                              <SelectItem value=\"logistica\">Logística</SelectItem>\n                              <SelectItem value=\"outro\">Outro</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"size\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Tamanho</FormLabel>\n                          <Select\n                            onValueChange={field.onChange}\n                            defaultValue={field.value ?? undefined}\n                          >\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-size\">\n                                <SelectValue placeholder=\"Nº de funcionários\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"1-10\">1-10</SelectItem>\n                              <SelectItem value=\"11-50\">11-50</SelectItem>\n                              <SelectItem value=\"51-200\">51-200</SelectItem>\n                              <SelectItem value=\"201-500\">201-500</SelectItem>\n                              <SelectItem value=\"500+\">500+</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição (Opcional)</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Conte um pouco sobre sua empresa...\"\n                            className=\"resize-none\"\n                            rows={3}\n                            data-testid=\"input-description\"\n                            {...field}\n                            value={field.value ?? \"\"}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h2 className=\"font-semibold text-lg\">Informações de Contato</h2>\n\n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>E-mail Corporativo</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              type=\"email\"\n                              placeholder=\"contato@empresa.com\"\n                              className=\"pl-10\"\n                              data-testid=\"input-email\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"phone\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Telefone</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              placeholder=\"(00) 0000-0000\"\n                              className=\"pl-10\"\n                              data-testid=\"input-phone\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"website\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Website (Opcional)</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Globe className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              placeholder=\"https://www.empresa.com\"\n                              className=\"pl-10\"\n                              data-testid=\"input-website\"\n                              {...field}\n                              value={field.value ?? \"\"}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h2 className=\"font-semibold text-lg\">Segurança</h2>\n\n                  <FormField\n                    control={form.control}\n                    name=\"password\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Senha</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              type=\"password\"\n                              placeholder=\"••••••••\"\n                              className=\"pl-10\"\n                              data-testid=\"input-password\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"confirmPassword\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Confirmar Senha</FormLabel>\n                        <FormControl>\n                          <div className=\"relative\">\n                            <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                            <Input\n                              type=\"password\"\n                              placeholder=\"••••••••\"\n                              className=\"pl-10\"\n                              data-testid=\"input-confirm-password\"\n                              {...field}\n                            />\n                          </div>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full h-11\"\n                  disabled={registerMutation.isPending}\n                  data-testid=\"button-register\"\n                >\n                  {registerMutation.isPending ? \"Criando conta...\" : \"Criar Conta\"}\n                </Button>\n              </form>\n            </Form>\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">\n                Já tem uma conta?{\" \"}\n                <a\n                  href=\"/login\"\n                  className=\"text-primary font-medium hover-elevate px-2 py-1 rounded-md\"\n                  data-testid=\"link-login\"\n                >\n                  Faça login\n                </a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":15667},"client/src/pages/UsersList.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Building2, HardHat, Mail, Phone, FileText } from \"lucide-react\";\nimport type { Company, Operator, Client } from \"@shared/schema\";\n\ninterface UsersListResponse {\n  companies: Omit<Company, 'password'>[];\n  operators: Omit<Operator, 'password'>[];\n  clients: Client[];\n  total: {\n    companies: number;\n    operators: number;\n    clients: number;\n  };\n}\n\nexport default function UsersList() {\n  const { data, isLoading } = useQuery<UsersListResponse>({\n    queryKey: ['/api/users/list'],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Header />\n        <main className=\"flex-1 flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">Carregando usuários...</p>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-12 px-4 bg-background\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"mb-8\">\n            <h1 className=\"font-heading font-bold text-3xl mb-2\">\n              Usuários Cadastrados\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Visualização de todos os usuários do sistema\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Building2 className=\"h-5 w-5\" />\n                  Empresas Cadastradas\n                </CardTitle>\n                <CardDescription>Empresas que se registraram no site</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-4xl font-bold\">{data?.total.companies || 0}</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Building2 className=\"h-5 w-5\" />\n                  Clientes Admin\n                </CardTitle>\n                <CardDescription>Empresas gerenciadas pelo Admin</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-4xl font-bold\">{data?.total.clients || 0}</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <HardHat className=\"h-5 w-5\" />\n                  Total de Operadores\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-4xl font-bold\">{data?.total.operators || 0}</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"space-y-8\">\n            <div>\n              <h2 className=\"font-heading font-bold text-2xl mb-4 flex items-center gap-2\">\n                <Building2 className=\"h-6 w-6 text-primary\" />\n                Empresas Cadastradas\n              </h2>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Empresas que se registraram através do formulário do site\n              </p>\n              \n              {!data?.companies || data.companies.length === 0 ? (\n                <Card>\n                  <CardContent className=\"py-12\">\n                    <div className=\"text-center text-muted-foreground\">\n                      <Building2 className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                      <p>Nenhuma empresa cadastrada</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {data.companies.map((company) => (\n                    <Card key={company.id} data-testid={`company-card-${company.id}`}>\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">{company.companyName}</CardTitle>\n                        <CardDescription className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <Mail className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{company.email}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Phone className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{company.phone}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <FileText className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">CNPJ: {company.cnpj}</span>\n                          </div>\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {company.industry && (\n                          <Badge variant=\"secondary\">{company.industry}</Badge>\n                        )}\n                        {company.size && (\n                          <Badge variant=\"outline\" className=\"ml-2\">{company.size}</Badge>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <h2 className=\"font-heading font-bold text-2xl mb-4 flex items-center gap-2\">\n                <Building2 className=\"h-6 w-6 text-primary\" />\n                Clientes Admin\n              </h2>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Empresas gerenciadas através do painel administrativo\n              </p>\n              \n              {!data?.clients || data.clients.length === 0 ? (\n                <Card>\n                  <CardContent className=\"py-12\">\n                    <div className=\"text-center text-muted-foreground\">\n                      <Building2 className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                      <p>Nenhum cliente cadastrado</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {data.clients.map((client) => (\n                    <Card key={client.id} data-testid={`client-card-${client.id}`}>\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">{client.companyName}</CardTitle>\n                        <CardDescription className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <Mail className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{client.email}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Phone className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{client.phone}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <FileText className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">CNPJ: {client.cnpj}</span>\n                          </div>\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <Badge variant={client.isActive === 'true' ? \"default\" : \"secondary\"}>\n                          {client.isActive === 'true' ? \"Ativo\" : \"Inativo\"}\n                        </Badge>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <h2 className=\"font-heading font-bold text-2xl mb-4 flex items-center gap-2\">\n                <HardHat className=\"h-6 w-6 text-primary\" />\n                Operadores\n              </h2>\n              \n              {!data?.operators || data.operators.length === 0 ? (\n                <Card>\n                  <CardContent className=\"py-12\">\n                    <div className=\"text-center text-muted-foreground\">\n                      <HardHat className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                      <p>Nenhum operador cadastrado</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {data.operators.map((operator) => (\n                    <Card key={operator.id} data-testid={`operator-card-${operator.id}`}>\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">{operator.fullName}</CardTitle>\n                        <CardDescription className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <Mail className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{operator.email}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Phone className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">{operator.phone}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <FileText className=\"h-4 w-4\" />\n                            <span className=\"text-xs\">CPF: {operator.cpf}</span>\n                          </div>\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <Badge variant=\"secondary\">{operator.profession}</Badge>\n                        {operator.experienceYears && (\n                          <Badge variant=\"outline\" className=\"ml-2\">\n                            {operator.experienceYears} anos\n                          </Badge>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":10774},"client/src/components/Footer.tsx":{"content":"import { Mail } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\nexport function Footer() {\n  const [email, setEmail] = useState(\"\");\n  const { toast } = useToast();\n\n  const subscribeMutation = useMutation({\n    mutationFn: async (email: string) => {\n      return await apiRequest(\"POST\", \"/api/newsletter/subscribe\", { email });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Inscrição realizada!\",\n        description: \"Você receberá nossas novidades por e-mail.\",\n      });\n      setEmail(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao realizar inscrição\",\n        description: error.message || \"Tente novamente mais tarde.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubscribe = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) {\n      toast({\n        title: \"Email obrigatório\",\n        description: \"Por favor, insira um e-mail válido.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    subscribeMutation.mutate(email);\n  };\n\n  return (\n    <footer className=\"bg-card border-t mt-16\">\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <div className=\"flex flex-col items-center text-center\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <img src={operlistLogo} alt=\"Operlist\" className=\"h-14\" />\n            </div>\n            <p className=\"text-sm text-muted-foreground mb-4 max-w-md\">\n              Conectando talentos a oportunidades em todo o mundo desde 2024.\n            </p>\n            <form onSubmit={handleSubscribe} className=\"flex gap-2 max-w-md w-full\">\n              <Input\n                type=\"email\"\n                placeholder=\"Seu e-mail\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"text-sm\"\n                data-testid=\"input-newsletter\"\n              />\n              <Button \n                type=\"submit\" \n                size=\"sm\" \n                disabled={subscribeMutation.isPending}\n                data-testid=\"button-subscribe\"\n              >\n                <Mail className=\"h-4 w-4\" />\n              </Button>\n            </form>\n          </div>\n        </div>\n\n        <div className=\"pt-8 border-t text-center text-sm text-muted-foreground\">\n          <p>&copy; 2024 Operlist. Todos os direitos reservados.</p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":2797},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: 1000 * 60 * 5,\n      gcTime: 1000 * 60 * 10,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1418},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/CategorySection.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { Banner } from \"@shared/schema\";\nimport { useState, useEffect } from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function CategorySection() {\n  const { data: banners } = useQuery<Banner[]>({\n    queryKey: ['/api/banners/active'],\n    retry: false,\n  });\n\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // Auto-rotate banners every 5 seconds\n  useEffect(() => {\n    if (!banners || banners.length <= 1) return;\n\n    const interval = setInterval(() => {\n      setCurrentIndex((prev) => (prev + 1) % banners.length);\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [banners]);\n\n  if (!banners || banners.length === 0) {\n    return null;\n  }\n\n  const currentBanner = banners[currentIndex];\n\n  const getBannerLink = (linkUrl: string | null | undefined) => {\n    if (!linkUrl) return '#';\n    \n    if (linkUrl.startsWith('http://') || linkUrl.startsWith('https://')) {\n      return linkUrl;\n    }\n    \n    return `https://${linkUrl}`;\n  };\n\n  const goToNext = () => {\n    setCurrentIndex((prev) => (prev + 1) % banners.length);\n  };\n\n  const goToPrev = () => {\n    setCurrentIndex((prev) => (prev - 1 + banners.length) % banners.length);\n  };\n\n  return (\n    <section className=\"py-12 bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8\">\n        {/* Ad Label */}\n        <div className=\"flex items-center justify-between mb-3\">\n          <span className=\"text-xs text-muted-foreground uppercase tracking-wider\">\n            Publicidade\n          </span>\n          {banners.length > 1 && (\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">\n                {currentIndex + 1} / {banners.length}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Banner Container */}\n        <div className=\"relative group\">\n          {/* Main Banner */}\n          <a\n            href={getBannerLink(currentBanner.linkUrl)}\n            target={currentBanner.linkUrl ? '_blank' : undefined}\n            rel={currentBanner.linkUrl ? 'noopener noreferrer' : undefined}\n            className=\"block relative overflow-hidden rounded-xl border border-border bg-muted/30 hover:border-primary/50 transition-all duration-300\"\n            data-testid={`banner-ad-${currentBanner.id}`}\n          >\n            {currentBanner.imageUrl ? (\n              <div className=\"relative w-full\">\n                <img\n                  src={currentBanner.imageUrl.startsWith('attached_assets') ? `/${currentBanner.imageUrl}` : (currentBanner.imageUrl.startsWith('/objects') ? currentBanner.imageUrl : `/objects${currentBanner.imageUrl}`)}\n                  alt={currentBanner.title}\n                  className=\"w-full h-auto max-h-[350px] object-cover\"\n                />\n                \n                {/* Optional Text Overlay (if title/subtitle are set) */}\n                {(currentBanner.title || currentBanner.subtitle) && (\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6\">\n                    {currentBanner.title && (\n                      <h3 className=\"text-white font-bold text-2xl mb-1\">\n                        {currentBanner.title}\n                      </h3>\n                    )}\n                    {currentBanner.subtitle && (\n                      <p className=\"text-white/90 text-base\">\n                        {currentBanner.subtitle}\n                      </p>\n                    )}\n                  </div>\n                )}\n              </div>\n            ) : (\n              // Fallback if no image\n              <div className=\"flex flex-col items-center justify-center min-h-[250px] p-12 text-center\">\n                <h3 className=\"text-3xl font-bold mb-3\">{currentBanner.title}</h3>\n                {currentBanner.subtitle && (\n                  <p className=\"text-xl text-muted-foreground max-w-2xl\">\n                    {currentBanner.subtitle}\n                  </p>\n                )}\n              </div>\n            )}\n          </a>\n\n          {/* Navigation Arrows (only show if multiple banners) */}\n          {banners.length > 1 && (\n            <>\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"absolute left-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  goToPrev();\n                }}\n                data-testid=\"banner-prev\"\n              >\n                <ChevronLeft className=\"h-5 w-5\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  goToNext();\n                }}\n                data-testid=\"banner-next\"\n              >\n                <ChevronRight className=\"h-5 w-5\" />\n              </Button>\n            </>\n          )}\n\n          {/* Dots Indicator */}\n          {banners.length > 1 && (\n            <div className=\"flex items-center justify-center gap-2 mt-4\">\n              {banners.map((_, index) => (\n                <button\n                  key={index}\n                  onClick={() => setCurrentIndex(index)}\n                  className={`h-2 rounded-full transition-all ${\n                    index === currentIndex\n                      ? 'w-8 bg-primary'\n                      : 'w-2 bg-muted-foreground/30 hover:bg-muted-foreground/50'\n                  }`}\n                  data-testid={`banner-dot-${index}`}\n                  aria-label={`Ir para banner ${index + 1}`}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":6101},"client/src/components/FilterSidebar.tsx":{"content":"import { Search, SlidersHorizontal, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useState } from \"react\";\n\nexport function FilterSidebar() {\n  const [keyword, setKeyword] = useState(\"\");\n  const [selectedWorkTypes, setSelectedWorkTypes] = useState<string[]>([]);\n  const [selectedCountry, setSelectedCountry] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [selectedLevel, setSelectedLevel] = useState(\"\");\n  const [selectedTimeFrame, setSelectedTimeFrame] = useState(\"any\");\n  const [activeFilters, setActiveFilters] = useState<string[]>([]);\n\n  const workTypes = [\n    { id: \"remote\", label: \"Remoto\" },\n    { id: \"hybrid\", label: \"Híbrido\" },\n    { id: \"onsite\", label: \"Presencial\" },\n  ];\n\n  const countries = [\"Brasil\", \"Estados Unidos\", \"Portugal\", \"Espanha\", \"Alemanha\", \"Reino Unido\"];\n  const categories = [\"Tecnologia\", \"Saúde\", \"Finanças\", \"Educação\", \"Marketing\", \"Design\"];\n  const levels = [\"Júnior\", \"Pleno\", \"Sênior\", \"Lead\"];\n\n  const handleWorkTypeChange = (id: string, checked: boolean) => {\n    if (checked) {\n      setSelectedWorkTypes([...selectedWorkTypes, id]);\n    } else {\n      setSelectedWorkTypes(selectedWorkTypes.filter((t) => t !== id));\n    }\n  };\n\n  const handleClearFilters = () => {\n    setKeyword(\"\");\n    setSelectedWorkTypes([]);\n    setSelectedCountry(\"\");\n    setSelectedCategory(\"\");\n    setSelectedLevel(\"\");\n    setSelectedTimeFrame(\"any\");\n    setActiveFilters([]);\n    console.log(\"Filters cleared\");\n  };\n\n  const handleApplyFilters = () => {\n    console.log(\"Filters applied:\", {\n      keyword,\n      selectedWorkTypes,\n      selectedCountry,\n      selectedCategory,\n      selectedLevel,\n      selectedTimeFrame,\n    });\n  };\n\n  return (\n    <aside className=\"w-full md:w-80 bg-card border rounded-lg p-4 h-fit sticky top-20\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-2\">\n          <SlidersHorizontal className=\"h-5 w-5\" />\n          <h2 className=\"font-semibold text-lg\">Filtros</h2>\n        </div>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={handleClearFilters}\n          data-testid=\"button-clear-filters\"\n        >\n          Limpar\n        </Button>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div>\n          <Label htmlFor=\"keyword-search\" className=\"mb-2 block\">\n            Palavra-chave\n          </Label>\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            <Input\n              id=\"keyword-search\"\n              placeholder=\"Ex: React, Designer...\"\n              value={keyword}\n              onChange={(e) => setKeyword(e.target.value)}\n              className=\"pl-9\"\n              data-testid=\"input-keyword\"\n            />\n          </div>\n        </div>\n\n        <Separator />\n\n        <div>\n          <Label className=\"mb-3 block\">Tipo de Trabalho</Label>\n          <div className=\"space-y-2\">\n            {workTypes.map((type) => (\n              <div key={type.id} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={type.id}\n                  checked={selectedWorkTypes.includes(type.id)}\n                  onCheckedChange={(checked) =>\n                    handleWorkTypeChange(type.id, checked as boolean)\n                  }\n                  data-testid={`checkbox-${type.id}`}\n                />\n                <label\n                  htmlFor={type.id}\n                  className=\"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\"\n                >\n                  {type.label}\n                </label>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <Separator />\n\n        <div>\n          <Label htmlFor=\"country-select\" className=\"mb-2 block\">\n            País\n          </Label>\n          <Select value={selectedCountry} onValueChange={setSelectedCountry}>\n            <SelectTrigger id=\"country-select\" data-testid=\"select-country\">\n              <SelectValue placeholder=\"Selecione o país\" />\n            </SelectTrigger>\n            <SelectContent>\n              {countries.map((country) => (\n                <SelectItem key={country} value={country}>\n                  {country}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        <Separator />\n\n        <div>\n          <Label htmlFor=\"category-select\" className=\"mb-2 block\">\n            Categoria\n          </Label>\n          <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n            <SelectTrigger id=\"category-select\" data-testid=\"select-category\">\n              <SelectValue placeholder=\"Selecione a categoria\" />\n            </SelectTrigger>\n            <SelectContent>\n              {categories.map((category) => (\n                <SelectItem key={category} value={category}>\n                  {category}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        <Separator />\n\n        <div>\n          <Label htmlFor=\"level-select\" className=\"mb-2 block\">\n            Nível de Experiência\n          </Label>\n          <Select value={selectedLevel} onValueChange={setSelectedLevel}>\n            <SelectTrigger id=\"level-select\" data-testid=\"select-level\">\n              <SelectValue placeholder=\"Selecione o nível\" />\n            </SelectTrigger>\n            <SelectContent>\n              {levels.map((level) => (\n                <SelectItem key={level} value={level}>\n                  {level}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        <Separator />\n\n        <div>\n          <Label className=\"mb-3 block\">Data de Publicação</Label>\n          <RadioGroup value={selectedTimeFrame} onValueChange={setSelectedTimeFrame}>\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"24h\" id=\"24h\" data-testid=\"radio-24h\" />\n              <Label htmlFor=\"24h\" className=\"cursor-pointer font-normal\">\n                Últimas 24 horas\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"week\" id=\"week\" data-testid=\"radio-week\" />\n              <Label htmlFor=\"week\" className=\"cursor-pointer font-normal\">\n                Última semana\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"month\" id=\"month\" data-testid=\"radio-month\" />\n              <Label htmlFor=\"month\" className=\"cursor-pointer font-normal\">\n                Último mês\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"any\" id=\"any\" data-testid=\"radio-any\" />\n              <Label htmlFor=\"any\" className=\"cursor-pointer font-normal\">\n                Qualquer período\n              </Label>\n            </div>\n          </RadioGroup>\n        </div>\n\n        <Button\n          className=\"w-full\"\n          onClick={handleApplyFilters}\n          data-testid=\"button-apply-filters\"\n        >\n          Aplicar Filtros\n        </Button>\n      </div>\n    </aside>\n  );\n}\n","size_bytes":7862},"client/src/components/AdminSidebar.tsx":{"content":"import { LayoutDashboard, Building2, HardHat, Briefcase, CreditCard, DollarSign, Settings, Calendar, Image, Mail, Tags } from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n} from \"@/components/ui/sidebar\";\nimport { useLocation, Link } from \"wouter\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\nconst menuItems = [\n  {\n    title: \"Dashboard\",\n    url: \"/admin\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Meus Clientes\",\n    url: \"/admin/clientes\",\n    icon: Building2,\n  },\n  {\n    title: \"Meus Operadores\",\n    url: \"/admin/operadores\",\n    icon: HardHat,\n  },\n  {\n    title: \"Vagas\",\n    url: \"/admin/vagas\",\n    icon: Briefcase,\n  },\n  {\n    title: \"Planos\",\n    url: \"/admin/planos\",\n    icon: CreditCard,\n  },\n  {\n    title: \"Financeiro\",\n    url: \"/admin/financeiro\",\n    icon: DollarSign,\n  },\n  {\n    title: \"Taxonomia\",\n    url: \"/admin/taxonomia\",\n    icon: Tags,\n  },\n  {\n    title: \"Configurações\",\n    url: \"/admin/configuracoes\",\n    icon: Settings,\n  },\n  {\n    title: \"Feiras e Eventos\",\n    url: \"/admin/eventos\",\n    icon: Calendar,\n  },\n  {\n    title: \"Banners\",\n    url: \"/admin/banners\",\n    icon: Image,\n  },\n  {\n    title: \"Newsletter\",\n    url: \"/admin/newsletter\",\n    icon: Mail,\n  },\n];\n\nexport function AdminSidebar() {\n  const [location, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  const handleLogoClick = () => {\n    setLocation(\"/\");\n  };\n\n  const prefetchData = (url: string) => {\n    if (url === '/admin/clientes') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/clients'],\n        staleTime: 1000 * 60 * 5,\n      });\n    } else if (url === '/admin/operadores') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/operators'],\n        staleTime: 1000 * 60 * 5,\n      });\n    } else if (url === '/admin/planos') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/plans'],\n        staleTime: 1000 * 60 * 5,\n      });\n    } else if (url === '/admin/financeiro') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/purchases/stats'],\n        staleTime: 1000 * 60 * 5,\n      });\n      queryClient.prefetchQuery({\n        queryKey: ['/api/purchases'],\n        staleTime: 1000 * 60 * 5,\n      });\n    } else if (url === '/admin/newsletter') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/admin/newsletter-subscriptions'],\n        staleTime: 1000 * 60 * 5,\n      });\n    } else if (url === '/admin/vagas') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/admin/jobs'],\n        staleTime: 1000 * 60 * 5,\n      });\n    }\n  };\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4 border-b\">\n        <div className=\"flex items-center gap-3\">\n          <img \n            src={operlistLogo} \n            alt=\"Operlist\" \n            className=\"h-8 cursor-pointer\"\n            onClick={handleLogoClick}\n            data-testid=\"logo-admin-sidebar\"\n          />\n          <div>\n            <h2 className=\"font-semibold\">Admin</h2>\n            <p className=\"text-xs text-muted-foreground\">Operlist</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Menu Principal</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.url}\n                    data-testid={`sidebar-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    <Link \n                      href={item.url}\n                      onMouseEnter={() => prefetchData(item.url)}\n                      onFocus={() => prefetchData(item.url)}\n                    >\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n","size_bytes":4363},"client/src/pages/CompanyDashboard.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  Building2, \n  Briefcase, \n  Users, \n  Eye, \n  Plus,\n  FileText,\n  TrendingUp,\n  MapPin,\n  Clock,\n  ChevronRight\n} from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { Job } from \"@shared/schema\";\n\ninterface DashboardStats {\n  activeJobs: number;\n  totalJobs: number;\n  totalApplications: number;\n  recentApplications: number;\n}\n\nexport default function CompanyDashboard() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: statsData, isLoading } = useQuery<DashboardStats>({\n    queryKey: ['/api/companies/dashboard-stats'],\n  });\n\n  const { data: jobs = [], isLoading: isLoadingJobs } = useQuery<Job[]>({\n    queryKey: ['/api/jobs'],\n  });\n\n  const stats = [\n    {\n      title: \"Vagas Ativas\",\n      value: statsData?.activeJobs?.toString() || \"0\",\n      icon: Briefcase,\n      description: statsData && statsData.activeJobs > 0 ? `${statsData.totalJobs - statsData.activeJobs} suspensas` : \"Nenhuma vaga publicada ainda\",\n      trend: null,\n    },\n    {\n      title: \"Candidaturas\",\n      value: statsData?.totalApplications?.toString() || \"0\",\n      icon: Users,\n      description: statsData && statsData.recentApplications > 0 ? `+${statsData.recentApplications} nos últimos 7 dias` : \"Total de candidaturas recebidas\",\n      trend: statsData && statsData.recentApplications > 0 ? `+${statsData.recentApplications}` : null,\n    },\n    {\n      title: \"Total de Vagas\",\n      value: statsData?.totalJobs?.toString() || \"0\",\n      icon: FileText,\n      description: \"Vagas publicadas (ativas e suspensas)\",\n      trend: null,\n    },\n    {\n      title: \"Média por Vaga\",\n      value: statsData && statsData.totalJobs > 0 ? Math.round(statsData.totalApplications / statsData.totalJobs).toString() : \"0\",\n      icon: TrendingUp,\n      description: \"Candidaturas por vaga em média\",\n      trend: null,\n    },\n  ];\n\n  const handleNewJob = () => {\n    setLocation('/empresa/vagas');\n  };\n\n  if (isLoading) {\n    return (\n      <>\n        <div className=\"max-w-7xl mx-auto px-6 py-6\">\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              {[1, 2, 3, 4].map((i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-6\">\n                    <Skeleton className=\"h-12 w-12 rounded-xl mb-4\" />\n                    <Skeleton className=\"h-8 w-16 mb-2\" />\n                    <Skeleton className=\"h-4 w-32\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {stats.map((stat) => (\n          <Card \n            key={stat.title} \n            className=\"hover-elevate\"\n            data-testid={`stat-${stat.title.toLowerCase().replace(/\\s/g, '-')}`}\n          >\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                  <stat.icon className=\"h-6 w-6 text-muted-foreground\" />\n                </div>\n                {stat.trend && (\n                  <Badge variant=\"secondary\" className=\"font-semibold\">\n                    {stat.trend}\n                  </Badge>\n                )}\n              </div>\n              <div className=\"text-3xl font-bold mb-1\">{stat.value}</div>\n              <p className=\"text-sm font-medium text-muted-foreground\">\n                {stat.title}\n              </p>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {stat.description}\n              </p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <Card className=\"lg:col-span-2\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-4\">\n            <div>\n              <CardTitle>Suas Vagas</CardTitle>\n              <CardDescription>\n                Últimas vagas publicadas\n              </CardDescription>\n            </div>\n            <Button \n              size=\"sm\" \n              onClick={() => setLocation('/empresa/vagas')}\n              data-testid=\"button-view-all-jobs\"\n            >\n              Ver todas\n              <ChevronRight className=\"h-4 w-4 ml-1\" />\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {isLoadingJobs ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <div key={i} className=\"flex items-start gap-4 p-4 border rounded-lg\">\n                    <Skeleton className=\"h-12 w-12 rounded\" />\n                    <div className=\"flex-1 space-y-2\">\n                      <Skeleton className=\"h-4 w-3/4\" />\n                      <Skeleton className=\"h-3 w-1/2\" />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : jobs.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                <Briefcase className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                <h3 className=\"font-semibold text-lg mb-2\">\n                  Nenhuma vaga publicada\n                </h3>\n                <p className=\"text-muted-foreground mb-6 max-w-sm\">\n                  Comece publicando sua primeira vaga para atrair os melhores talentos\n                </p>\n                <Button onClick={handleNewJob} data-testid=\"button-create-first-job\">\n                  <Plus className=\"mr-2 h-5 w-5\" />\n                  Publicar Primeira Vaga\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {jobs.slice(0, 3).map((job, index) => (\n                  <div key={job.id}>\n                    <div \n                      className=\"flex items-start gap-4 p-4 rounded-lg hover-elevate cursor-pointer transition-all\"\n                      onClick={() => setLocation(`/vaga/${job.id}`)}\n                      data-testid={`job-summary-${index}`}\n                    >\n                      <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                        <Briefcase className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between gap-2 mb-1\">\n                          <h4 className=\"font-semibold text-sm line-clamp-1\">{job.title}</h4>\n                          <Badge \n                            variant={job.status === 'active' ? 'default' : 'secondary'}\n                            className=\"flex-shrink-0\"\n                          >\n                            {job.status === 'active' ? '● Ativa' : '⏸ Suspensa'}\n                          </Badge>\n                        </div>\n                        <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                          <span className=\"flex items-center gap-1\">\n                            <MapPin className=\"h-3 w-3\" />\n                            {job.location}\n                          </span>\n                          <span className=\"flex items-center gap-1\">\n                            <Clock className=\"h-3 w-3\" />\n                            {new Date(job.createdAt).toLocaleDateString('pt-BR', { \n                              day: '2-digit', \n                              month: 'short' \n                            })}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    {index < Math.min(jobs.length - 1, 2) && <Separator className=\"my-3\" />}\n                  </div>\n                ))}\n                {jobs.length > 3 && (\n                  <div className=\"pt-2\">\n                    <Button \n                      variant=\"ghost\" \n                      className=\"w-full\" \n                      onClick={() => setLocation('/empresa/vagas')}\n                      data-testid=\"button-see-more-jobs\"\n                    >\n                      Ver mais {jobs.length - 3} vagas\n                      <ChevronRight className=\"h-4 w-4 ml-1\" />\n                    </Button>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <div className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Ações Rápidas</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <Button \n                variant=\"outline\" \n                className=\"w-full justify-start\" \n                onClick={handleNewJob}\n                data-testid=\"button-post-job\"\n              >\n                <Plus className=\"mr-2 h-5 w-5\" />\n                Publicar Nova Vaga\n              </Button>\n              <Button \n                variant=\"outline\" \n                className=\"w-full justify-start\" \n                onClick={() => setLocation('/empresa/vagas')}\n                data-testid=\"button-view-jobs\"\n              >\n                <Briefcase className=\"mr-2 h-5 w-5\" />\n                Minhas Vagas\n              </Button>\n              <Button \n                variant=\"outline\" \n                className=\"w-full justify-start\" \n                onClick={() => setLocation('/empresa/perfil')}\n                data-testid=\"button-company-profile\"\n              >\n                <Building2 className=\"mr-2 h-5 w-5\" />\n                Perfil da Empresa\n              </Button>\n              <Button \n                variant=\"outline\" \n                className=\"w-full justify-start disabled\" \n                disabled\n                data-testid=\"button-reports\"\n              >\n                <FileText className=\"mr-2 h-5 w-5\" />\n                Relatórios\n              </Button>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Status da Conta</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Plano</span>\n                <Badge>Gratuito</Badge>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Vagas Restantes</span>\n                <span className=\"font-medium\">Ilimitadas</span>\n              </div>\n              <Button variant=\"outline\" className=\"w-full\" disabled data-testid=\"button-upgrade\">\n                Fazer Upgrade\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":11498},"client/src/components/AdminShell.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useEffect } from \"react\";\n\ninterface AdminShellProps {\n  children: React.ReactNode;\n}\n\nexport function AdminShell({ children }: AdminShellProps) {\n  const { user, userType, isLoading } = useAuth();\n  const [location, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const isAdminRoute = location.startsWith('/admin') && location !== '/admin/login';\n\n  useEffect(() => {\n    if (isLoading) return;\n    \n    if (isAdminRoute) {\n      if (!userType || userType !== 'admin') {\n        toast({\n          variant: \"destructive\",\n          title: \"Sessão expirada\",\n          description: \"Faça login novamente para acessar o painel admin\",\n        });\n        setLocation('/admin/login');\n      }\n    }\n  }, [userType, isLoading, setLocation, isAdminRoute, toast]);\n\n  const handleLogout = async () => {\n    try {\n      await apiRequest('POST', '/api/auth/logout');\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Logout realizado\",\n        description: \"Você saiu do painel administrativo\",\n      });\n      setLocation('/admin/login');\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer logout\",\n        description: \"Tente novamente\",\n      });\n    }\n  };\n\n  const getPageInfo = () => {\n    if (location === '/admin' || location === '/admin/') {\n      return { title: \"Dashboard\", description: user ? (user as any).email : \"\" };\n    }\n    if (location === '/admin/clientes') {\n      return { title: \"Meus Clientes\", description: \"Gerenciamento de empresas cadastradas\" };\n    }\n    if (location === '/admin/operadores') {\n      return { title: \"Meus Operadores\", description: \"Gerenciamento de profissionais cadastrados\" };\n    }\n    if (location === '/admin/vagas') {\n      return { title: \"Vagas\", description: \"Visualize todas as vagas criadas pelos clientes\" };\n    }\n    if (location.startsWith('/admin/vagas/') && location.endsWith('/editar')) {\n      return { title: \"Editar Vaga\", description: \"Atualize as informações da vaga\" };\n    }\n    if (location === '/admin/planos') {\n      return { title: \"Planos de Assinatura\", description: \"Gerencie os planos disponíveis para clientes\" };\n    }\n    if (location === '/admin/taxonomia') {\n      return { title: \"Taxonomia\", description: \"Gerencie as classificações e categorias do sistema\" };\n    }\n    if (location === '/admin/newsletter') {\n      return { title: \"Newsletter\", description: \"Gerencie as inscrições da newsletter\" };\n    }\n    return { title: \"Dashboard\", description: \"\" };\n  };\n\n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  if (!isAdminRoute) {\n    return <>{children}</>;\n  }\n\n  const pageInfo = getPageInfo();\n\n  return (\n    <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b\">\n            <div className=\"flex items-center gap-3\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div>\n                <h1 className=\"text-lg font-semibold\">{pageInfo.title}</h1>\n                {pageInfo.description && (\n                  <p className=\"text-xs text-muted-foreground\">{pageInfo.description}</p>\n                )}\n              </div>\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={handleLogout}\n              data-testid=\"button-admin-logout\"\n            >\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Sair\n            </Button>\n          </header>\n\n          <main className=\"flex-1 overflow-auto p-6\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":4280},"client/src/pages/AdminSectors.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Layers, Plus, Edit2, Trash2, ChevronRight } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Sector, Subsector, InsertSector, InsertSubsector } from \"@shared/schema\";\nimport { insertSectorSchema, insertSubsectorSchema } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nconst sectorFormSchema = insertSectorSchema;\nconst subsectorFormSchema = insertSubsectorSchema;\n\nexport default function AdminSectors() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  const [isSectorDialogOpen, setIsSectorDialogOpen] = useState(false);\n  const [isSubsectorDialogOpen, setIsSubsectorDialogOpen] = useState(false);\n  const [selectedSector, setSelectedSector] = useState<Sector | null>(null);\n\n  const sectorForm = useForm<z.infer<typeof sectorFormSchema>>({\n    resolver: zodResolver(sectorFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const subsectorForm = useForm<z.infer<typeof subsectorFormSchema>>({\n    resolver: zodResolver(subsectorFormSchema),\n    defaultValues: {\n      sectorId: \"\",\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const { data: sectorsData, isLoading: sectorsLoading } = useQuery<Sector[]>({\n    queryKey: ['/api/sectors'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const { data: subsectorsData, isLoading: subsectorsLoading } = useQuery<Subsector[]>({\n    queryKey: ['/api/subsectors'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const createSectorMutation = useMutation({\n    mutationFn: async (sectorData: InsertSector) => {\n      const response = await apiRequest('POST', '/api/sectors', sectorData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/sectors'] });\n      toast({\n        title: \"Setor criado!\",\n        description: \"O setor foi cadastrado com sucesso.\",\n      });\n      setIsSectorDialogOpen(false);\n      sectorForm.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar setor\",\n        description: error.message,\n      });\n    },\n  });\n\n  const createSubsectorMutation = useMutation({\n    mutationFn: async (subsectorData: InsertSubsector) => {\n      const response = await apiRequest('POST', '/api/subsectors', subsectorData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Subsetor criado!\",\n        description: \"O subsetor foi cadastrado com sucesso.\",\n      });\n      setIsSubsectorDialogOpen(false);\n      subsectorForm.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar subsetor\",\n        description: error.message,\n      });\n    },\n  });\n\n  const deleteSectorMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/sectors/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/sectors'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Setor excluído\",\n        description: \"O setor foi removido com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir setor\",\n        description: error.message,\n      });\n    },\n  });\n\n  const deleteSubsectorMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/subsectors/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Subsetor excluído\",\n        description: \"O subsetor foi removido com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir subsetor\",\n        description: error.message,\n      });\n    },\n  });\n\n  const handleSectorSubmit = async (values: z.infer<typeof sectorFormSchema>) => {\n    createSectorMutation.mutate(values);\n  };\n\n  const handleSubsectorSubmit = async (values: z.infer<typeof subsectorFormSchema>) => {\n    createSubsectorMutation.mutate(values);\n  };\n\n  const getSectorSubsectors = (sectorId: string) => {\n    return subsectorsData?.filter(sub => sub.sectorId === sectorId) || [];\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <Dialog open={isSectorDialogOpen} onOpenChange={setIsSectorDialogOpen}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-new-sector\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo Setor\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-lg\">\n              <DialogHeader>\n                <DialogTitle>Novo Setor</DialogTitle>\n                <DialogDescription>\n                  Cadastre um novo setor de atuação\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...sectorForm}>\n                <form onSubmit={sectorForm.handleSubmit(handleSectorSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome do Setor*</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Ex: Mineração\" {...field} data-testid=\"input-sector-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Descrição do setor\"\n                            {...field}\n                            value={field.value || \"\"}\n                            className=\"resize-none\"\n                            rows={3}\n                            data-testid=\"input-sector-description\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Status</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-sector-status\">\n                              <SelectValue />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"true\">Ativo</SelectItem>\n                            <SelectItem value=\"false\">Inativo</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsSectorDialogOpen(false)}\n                      data-testid=\"button-cancel-sector\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createSectorMutation.isPending}\n                      data-testid=\"button-save-sector\"\n                    >\n                      {createSectorMutation.isPending ? \"Salvando...\" : \"Cadastrar Setor\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n\n          <Dialog open={isSubsectorDialogOpen} onOpenChange={setIsSubsectorDialogOpen}>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" data-testid=\"button-new-subsector\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo Subsetor\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-lg\">\n              <DialogHeader>\n                <DialogTitle>Novo Subsetor</DialogTitle>\n                <DialogDescription>\n                  Cadastre um novo subsetor vinculado a um setor\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...subsectorForm}>\n                <form onSubmit={subsectorForm.handleSubmit(handleSubsectorSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"sectorId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Setor*</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-sector\">\n                              <SelectValue placeholder=\"Selecione um setor\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {sectorsData?.map((sector) => (\n                              <SelectItem key={sector.id} value={sector.id}>\n                                {sector.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome do Subsetor*</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Ex: Extração de Minério\" {...field} data-testid=\"input-subsector-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Descrição do subsetor\"\n                            {...field}\n                            value={field.value || \"\"}\n                            className=\"resize-none\"\n                            rows={3}\n                            data-testid=\"input-subsector-description\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Status</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-subsector-status\">\n                              <SelectValue />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"true\">Ativo</SelectItem>\n                            <SelectItem value=\"false\">Inativo</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsSubsectorDialogOpen(false)}\n                      data-testid=\"button-cancel-subsector\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createSubsectorMutation.isPending}\n                      data-testid=\"button-save-subsector\"\n                    >\n                      {createSubsectorMutation.isPending ? \"Salvando...\" : \"Cadastrar Subsetor\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2 mb-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Setores\n              </CardTitle>\n              <CardDescription>Setores cadastrados no sistema</CardDescription>\n            </div>\n            <Layers className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-sectors\">\n              {sectorsLoading ? (\n                <Skeleton className=\"h-10 w-20\" />\n              ) : (\n                sectorsData?.length || 0\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Subsetores\n              </CardTitle>\n              <CardDescription>Subsetores cadastrados no sistema</CardDescription>\n            </div>\n            <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-subsectors\">\n              {subsectorsLoading ? (\n                <Skeleton className=\"h-10 w-20\" />\n              ) : (\n                subsectorsData?.length || 0\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {sectorsLoading ? (\n        <div className=\"space-y-3\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-20 w-full\" />\n          ))}\n        </div>\n      ) : sectorsData && sectorsData.length > 0 ? (\n        <Accordion type=\"single\" collapsible className=\"space-y-3\">\n          {sectorsData.map((sector) => {\n            const subsectors = getSectorSubsectors(sector.id);\n            return (\n              <AccordionItem \n                key={sector.id} \n                value={sector.id}\n                className=\"border rounded-lg px-4\"\n                data-testid={`accordion-sector-${sector.id}`}\n              >\n                <AccordionTrigger className=\"hover:no-underline\">\n                  <div className=\"flex items-center justify-between w-full pr-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Layers className=\"h-5 w-5 text-primary\" />\n                      <div className=\"text-left\">\n                        <h3 className=\"font-semibold\" data-testid={`text-sector-name-${sector.id}`}>\n                          {sector.name}\n                        </h3>\n                        {sector.description && (\n                          <p className=\"text-sm text-muted-foreground\">{sector.description}</p>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant={sector.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                        {sector.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        {subsectors.length} {subsectors.length === 1 ? 'subsetor' : 'subsetores'}\n                      </Badge>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          if (confirm(\"Tem certeza que deseja excluir este setor?\")) {\n                            deleteSectorMutation.mutate(sector.id);\n                          }\n                        }}\n                        data-testid={`button-delete-sector-${sector.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </AccordionTrigger>\n                <AccordionContent className=\"pt-4\">\n                  {subsectors.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {subsectors.map((subsector) => (\n                        <div\n                          key={subsector.id}\n                          className=\"flex items-center justify-between p-3 rounded-lg border hover-elevate\"\n                          data-testid={`card-subsector-${subsector.id}`}\n                        >\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium\" data-testid={`text-subsector-name-${subsector.id}`}>\n                              {subsector.name}\n                            </h4>\n                            {subsector.description && (\n                              <p className=\"text-sm text-muted-foreground\">{subsector.description}</p>\n                            )}\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant={subsector.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                              {subsector.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                            </Badge>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => {\n                                if (confirm(\"Tem certeza que deseja excluir este subsetor?\")) {\n                                  deleteSubsectorMutation.mutate(subsector.id);\n                                }\n                              }}\n                              data-testid={`button-delete-subsector-${subsector.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground text-center py-4\">\n                      Nenhum subsetor cadastrado neste setor\n                    </p>\n                  )}\n                </AccordionContent>\n              </AccordionItem>\n            );\n          })}\n        </Accordion>\n      ) : (\n        <Card>\n          <CardContent className=\"pt-6 text-center\">\n            <Layers className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\">\n              Nenhum setor cadastrado ainda. Comece criando um novo setor.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":21612},"client/src/pages/AdminSettings.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Mail, Settings as SettingsIcon, Save, AlertCircle, Type, BarChart3, Send } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { EmailSettings } from \"@shared/schema\";\nimport { useState, useEffect } from \"react\";\n\nexport default function AdminSettings() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  \n  const [provider, setProvider] = useState(\"gmail\");\n  const [apiKey, setApiKey] = useState(\"\");\n  const [senderEmail, setSenderEmail] = useState(\"\");\n  const [senderName, setSenderName] = useState(\"\");\n  const [smtpHost, setSmtpHost] = useState(\"\");\n  const [smtpPort, setSmtpPort] = useState(\"\");\n  const [smtpUser, setSmtpUser] = useState(\"\");\n  const [smtpPassword, setSmtpPassword] = useState(\"\");\n  const [isActive, setIsActive] = useState(\"true\");\n\n  const [heroTitle, setHeroTitle] = useState(\"Encontre Seu Emprego dos Sonhos em Qualquer Lugar do Mundo\");\n  const [heroSubtitle, setHeroSubtitle] = useState(\"Mais de 50.000 vagas em 150+ países\");\n\n  const [statsJobs, setStatsJobs] = useState(\"50.000+\");\n  const [statsCompanies, setStatsCompanies] = useState(\"15.000+\");\n  const [statsCountries, setStatsCountries] = useState(\"150+\");\n  const [statsSalary, setStatsSalary] = useState(\"$75k\");\n\n  const { data: emailSettings, isLoading: emailLoading } = useQuery<EmailSettings>({\n    queryKey: ['/api/email-settings'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const { data: settingsData, isLoading: settingsLoading } = useQuery<Record<string, string>>({\n    queryKey: ['/api/settings'],\n    retry: false,\n  });\n\n  useEffect(() => {\n    if (emailSettings) {\n      setProvider(emailSettings.provider || \"gmail\");\n      setApiKey(emailSettings.apiKey || \"\");\n      setSenderEmail(emailSettings.senderEmail || \"\");\n      setSenderName(emailSettings.senderName || \"\");\n      setSmtpHost(emailSettings.smtpHost || \"smtp.gmail.com\");\n      setSmtpPort(emailSettings.smtpPort || \"587\");\n      setSmtpUser(emailSettings.smtpUser || \"\");\n      setSmtpPassword(emailSettings.smtpPassword || \"\");\n      setIsActive(emailSettings.isActive || \"true\");\n    }\n  }, [emailSettings]);\n\n  useEffect(() => {\n    if (settingsData) {\n      setHeroTitle(settingsData.hero_title || \"Encontre Seu Emprego dos Sonhos em Qualquer Lugar do Mundo\");\n      setHeroSubtitle(settingsData.hero_subtitle || \"Mais de 50.000 vagas em 150+ países\");\n      setStatsJobs(settingsData.stats_jobs_value || \"50.000+\");\n      setStatsCompanies(settingsData.stats_companies_value || \"15.000+\");\n      setStatsCountries(settingsData.stats_countries_value || \"150+\");\n      setStatsSalary(settingsData.stats_salary_value || \"$75k\");\n    }\n  }, [settingsData]);\n\n  const saveEmailSettingsMutation = useMutation({\n    mutationFn: async () => {\n      const data = {\n        provider,\n        apiKey: null,\n        senderEmail,\n        senderName,\n        smtpHost: provider === 'gmail' ? 'smtp.gmail.com' : smtpHost,\n        smtpPort,\n        smtpUser,\n        smtpPassword,\n        isActive,\n      };\n      return await apiRequest('POST', '/api/email-settings', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/email-settings'] });\n      toast({\n        title: \"Configurações salvas!\",\n        description: \"As configurações de email foram atualizadas com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao salvar\",\n        description: \"Não foi possível salvar as configurações. Tente novamente.\",\n      });\n    },\n  });\n\n  const sendTestEmailMutation = useMutation({\n    mutationFn: async (recipientEmail: string) => {\n      return await apiRequest('POST', '/api/email-settings/test', { recipientEmail });\n    },\n    onSuccess: (_, recipientEmail) => {\n      toast({\n        title: \"Email enviado!\",\n        description: `Email de teste enviado com sucesso para ${recipientEmail}.`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao enviar email\",\n        description: error?.message || \"Verifique as configurações SMTP e tente novamente.\",\n      });\n    },\n  });\n\n  const saveHeroTextsMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest('POST', '/api/settings', {\n        key: 'hero_title',\n        value: heroTitle,\n      });\n      await apiRequest('POST', '/api/settings', {\n        key: 'hero_subtitle',\n        value: heroSubtitle,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/settings'] });\n      toast({\n        title: \"Textos atualizados!\",\n        description: \"Os textos da página inicial foram atualizados com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao salvar\",\n        description: \"Não foi possível salvar os textos. Tente novamente.\",\n      });\n    },\n  });\n\n  const handleSaveEmail = () => {\n    if (!senderEmail || !senderName) {\n      toast({\n        variant: \"destructive\",\n        title: \"Campos obrigatórios\",\n        description: \"Preencha o email e nome do remetente.\",\n      });\n      return;\n    }\n\n    if (!smtpHost || !smtpPort || !smtpUser || !smtpPassword) {\n      toast({\n        variant: \"destructive\",\n        title: \"Campos obrigatórios\",\n        description: \"Preencha todas as configurações SMTP.\",\n      });\n      return;\n    }\n\n    saveEmailSettingsMutation.mutate();\n  };\n\n  const saveStatsMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest('POST', '/api/settings', {\n        key: 'stats_jobs_value',\n        value: statsJobs,\n      });\n      await apiRequest('POST', '/api/settings', {\n        key: 'stats_companies_value',\n        value: statsCompanies,\n      });\n      await apiRequest('POST', '/api/settings', {\n        key: 'stats_countries_value',\n        value: statsCountries,\n      });\n      await apiRequest('POST', '/api/settings', {\n        key: 'stats_salary_value',\n        value: statsSalary,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/settings'] });\n      toast({\n        title: \"Estatísticas atualizadas!\",\n        description: \"As estatísticas foram atualizadas com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao salvar\",\n        description: \"Não foi possível salvar as estatísticas. Tente novamente.\",\n      });\n    },\n  });\n\n  const handleSaveHeroTexts = () => {\n    if (!heroTitle || !heroSubtitle) {\n      toast({\n        variant: \"destructive\",\n        title: \"Campos obrigatórios\",\n        description: \"Preencha o título e subtítulo.\",\n      });\n      return;\n    }\n    saveHeroTextsMutation.mutate();\n  };\n\n  const handleSaveStats = () => {\n    if (!statsJobs || !statsCompanies || !statsCountries || !statsSalary) {\n      toast({\n        variant: \"destructive\",\n        title: \"Campos obrigatórios\",\n        description: \"Preencha todos os campos de estatísticas.\",\n      });\n      return;\n    }\n    saveStatsMutation.mutate();\n  };\n\n  const isLoading = emailLoading || settingsLoading;\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n          <div className=\"h-8 w-64 bg-muted animate-pulse rounded\" />\n          <Card>\n            <CardHeader>\n              <div className=\"h-6 w-48 bg-muted animate-pulse rounded\" />\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"h-10 bg-muted animate-pulse rounded\" />\n              <div className=\"h-10 bg-muted animate-pulse rounded\" />\n              <div className=\"h-10 bg-muted animate-pulse rounded\" />\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div className=\"flex items-center gap-3\">\n          <SettingsIcon className=\"h-8 w-8 text-primary\" />\n          <h1 className=\"text-3xl font-bold\">Configurações</h1>\n        </div>\n\n        {/* Hero Texts Configuration */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Type className=\"h-5 w-5\" />\n                Textos da Página Inicial\n              </CardTitle>\n              <CardDescription className=\"mt-2\">\n                Personalize o título e subtítulo exibidos na seção principal da home\n              </CardDescription>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"heroTitle\">Título Principal</Label>\n                <Input\n                  id=\"heroTitle\"\n                  placeholder=\"Ex: Encontre Seu Emprego dos Sonhos\"\n                  value={heroTitle}\n                  onChange={(e) => setHeroTitle(e.target.value)}\n                  data-testid=\"input-hero-title\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"heroSubtitle\">Subtítulo</Label>\n                <Input\n                  id=\"heroSubtitle\"\n                  placeholder=\"Ex: Mais de 50.000 vagas em 150+ países\"\n                  value={heroSubtitle}\n                  onChange={(e) => setHeroSubtitle(e.target.value)}\n                  data-testid=\"input-hero-subtitle\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end pt-4 border-t\">\n              <Button \n                onClick={handleSaveHeroTexts}\n                disabled={saveHeroTextsMutation.isPending}\n                data-testid=\"button-save-hero-texts\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saveHeroTextsMutation.isPending ? 'Salvando...' : 'Salvar Textos'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Statistics Configuration */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <BarChart3 className=\"h-5 w-5\" />\n                Estatísticas da Página Inicial\n              </CardTitle>\n              <CardDescription className=\"mt-2\">\n                Configure os números exibidos na seção de estatísticas\n              </CardDescription>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"statsJobs\">Vagas Ativas</Label>\n                <Input\n                  id=\"statsJobs\"\n                  placeholder=\"Ex: 50.000+\"\n                  value={statsJobs}\n                  onChange={(e) => setStatsJobs(e.target.value)}\n                  data-testid=\"input-stats-jobs\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"statsCompanies\">Empresas</Label>\n                <Input\n                  id=\"statsCompanies\"\n                  placeholder=\"Ex: 15.000+\"\n                  value={statsCompanies}\n                  onChange={(e) => setStatsCompanies(e.target.value)}\n                  data-testid=\"input-stats-companies\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"statsCountries\">Países</Label>\n                <Input\n                  id=\"statsCountries\"\n                  placeholder=\"Ex: 150+\"\n                  value={statsCountries}\n                  onChange={(e) => setStatsCountries(e.target.value)}\n                  data-testid=\"input-stats-countries\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"statsSalary\">Salário Médio</Label>\n                <Input\n                  id=\"statsSalary\"\n                  placeholder=\"Ex: $75k\"\n                  value={statsSalary}\n                  onChange={(e) => setStatsSalary(e.target.value)}\n                  data-testid=\"input-stats-salary\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end pt-4 border-t\">\n              <Button \n                onClick={handleSaveStats}\n                disabled={saveStatsMutation.isPending}\n                data-testid=\"button-save-stats\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saveStatsMutation.isPending ? 'Salvando...' : 'Salvar Estatísticas'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Email Configuration */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Mail className=\"h-5 w-5\" />\n                Configuração de Email\n              </CardTitle>\n              <CardDescription className=\"mt-2\">\n                Configure o provedor de email para envio de notificações\n              </CardDescription>\n            </div>\n            {emailSettings && (\n              <Badge variant={isActive === 'true' ? \"default\" : \"secondary\"} data-testid=\"badge-email-status\">\n                {isActive === 'true' ? 'Ativo' : 'Inativo'}\n              </Badge>\n            )}\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4 flex gap-3\">\n              <AlertCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\n              <div className=\"text-sm text-blue-900 dark:text-blue-100\">\n                <p className=\"font-medium mb-1\">Configuração de SMTP Gmail</p>\n                <p className=\"text-blue-700 dark:text-blue-300\">\n                  Para usar Gmail SMTP, você precisa criar uma \"Senha de App\" nas configurações de segurança da sua conta Google. \n                  Não use sua senha normal do Gmail.\n                </p>\n                <ul className=\"list-disc list-inside mt-2 text-blue-700 dark:text-blue-300 space-y-1\">\n                  <li>Host: smtp.gmail.com</li>\n                  <li>Porta: 587 (TLS) ou 465 (SSL)</li>\n                  <li>Usuário: seu email completo do Gmail</li>\n                  <li>Senha: Senha de App (16 caracteres)</li>\n                </ul>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"provider\">Provedor de Email</Label>\n                <Select value={provider} onValueChange={setProvider}>\n                  <SelectTrigger id=\"provider\" data-testid=\"select-email-provider\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"gmail\">Gmail SMTP</SelectItem>\n                    <SelectItem value=\"smtp\">Outro SMTP</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"senderEmail\">Email do Remetente</Label>\n                  <Input\n                    id=\"senderEmail\"\n                    type=\"email\"\n                    placeholder=\"noreply@operlist.com\"\n                    value={senderEmail}\n                    onChange={(e) => setSenderEmail(e.target.value)}\n                    data-testid=\"input-sender-email\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"senderName\">Nome do Remetente</Label>\n                  <Input\n                    id=\"senderName\"\n                    placeholder=\"Operlist\"\n                    value={senderName}\n                    onChange={(e) => setSenderName(e.target.value)}\n                    data-testid=\"input-sender-name\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"smtpHost\">Host SMTP</Label>\n                  <Input\n                    id=\"smtpHost\"\n                    placeholder=\"smtp.gmail.com\"\n                    value={smtpHost}\n                    onChange={(e) => setSmtpHost(e.target.value)}\n                    data-testid=\"input-smtp-host\"\n                    disabled={provider === 'gmail'}\n                  />\n                  {provider === 'gmail' && (\n                    <p className=\"text-xs text-muted-foreground\">Gmail usa smtp.gmail.com automaticamente</p>\n                  )}\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"smtpPort\">Porta SMTP</Label>\n                  <Input\n                    id=\"smtpPort\"\n                    placeholder=\"587\"\n                    value={smtpPort}\n                    onChange={(e) => setSmtpPort(e.target.value)}\n                    data-testid=\"input-smtp-port\"\n                  />\n                  <p className=\"text-xs text-muted-foreground\">Use 587 (TLS) ou 465 (SSL)</p>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"smtpUser\">Usuário SMTP (Email Gmail)</Label>\n                  <Input\n                    id=\"smtpUser\"\n                    type=\"email\"\n                    placeholder=\"seuemail@gmail.com\"\n                    value={smtpUser}\n                    onChange={(e) => setSmtpUser(e.target.value)}\n                    data-testid=\"input-smtp-user\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"smtpPassword\">Senha de App Gmail</Label>\n                  <Input\n                    id=\"smtpPassword\"\n                    type=\"password\"\n                    placeholder=\"Senha de 16 caracteres\"\n                    value={smtpPassword}\n                    onChange={(e) => setSmtpPassword(e.target.value)}\n                    data-testid=\"input-smtp-password\"\n                  />\n                  <p className=\"text-xs text-muted-foreground\">Não use sua senha normal do Gmail</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status\">Status</Label>\n                <Select value={isActive} onValueChange={setIsActive}>\n                  <SelectTrigger id=\"status\" data-testid=\"select-email-status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"true\">Ativo</SelectItem>\n                    <SelectItem value=\"false\">Inativo</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"flex justify-between items-center pt-4 border-t gap-3\">\n              <Button \n                variant=\"outline\"\n                onClick={() => sendTestEmailMutation.mutate('stafim2@gmail.com')}\n                disabled={sendTestEmailMutation.isPending || !emailSettings}\n                data-testid=\"button-test-email\"\n              >\n                <Send className=\"h-4 w-4 mr-2\" />\n                {sendTestEmailMutation.isPending ? 'Enviando...' : 'Testar Email'}\n              </Button>\n              <Button \n                onClick={handleSaveEmail}\n                disabled={saveEmailSettingsMutation.isPending}\n                data-testid=\"button-save-settings\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saveEmailSettingsMutation.isPending ? 'Salvando...' : 'Salvar Configurações'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":20921},"client/src/components/AdminRouter.tsx":{"content":"import { Switch, Route, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useEffect } from \"react\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport AdminClients from \"@/pages/AdminClients\";\nimport AdminOperators from \"@/pages/AdminOperators\";\nimport AdminPlans from \"@/pages/AdminPlans\";\n\nexport function AdminRouter() {\n  const { user, userType } = useAuth();\n  const [location, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (userType && userType !== 'admin') {\n      setLocation('/admin/login');\n    }\n  }, [userType, setLocation]);\n\n  const handleLogout = async () => {\n    try {\n      await apiRequest('POST', '/api/auth/logout');\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Logout realizado\",\n        description: \"Você saiu do painel administrativo\",\n      });\n      setLocation('/admin/login');\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer logout\",\n        description: \"Tente novamente\",\n      });\n    }\n  };\n\n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  const getPageInfo = () => {\n    if (location === '/admin' || location === '/admin/') {\n      return { title: \"Dashboard\", description: user ? (user as any).email : \"\" };\n    }\n    if (location === '/admin/clientes') {\n      return { title: \"Meus Clientes\", description: \"Gerenciamento de empresas cadastradas\" };\n    }\n    if (location === '/admin/operadores') {\n      return { title: \"Meus Operadores\", description: \"Gerenciamento de profissionais cadastrados\" };\n    }\n    if (location === '/admin/planos') {\n      return { title: \"Planos de Assinatura\", description: \"Gerencie os planos disponíveis para clientes\" };\n    }\n    return { title: \"Dashboard\", description: \"\" };\n  };\n\n  const pageInfo = getPageInfo();\n\n  return (\n    <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b\">\n            <div className=\"flex items-center gap-3\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div>\n                <h1 className=\"text-xl font-semibold\">{pageInfo.title}</h1>\n                {pageInfo.description && (\n                  <p className=\"text-sm text-muted-foreground\">{pageInfo.description}</p>\n                )}\n              </div>\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={handleLogout}\n              data-testid=\"button-admin-logout\"\n            >\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Sair\n            </Button>\n          </header>\n\n          <main className=\"flex-1 overflow-auto p-6\">\n            <Switch>\n              <Route path=\"/admin\" component={AdminDashboard} />\n              <Route path=\"/admin/clientes\" component={AdminClients} />\n              <Route path=\"/admin/operadores\" component={AdminOperators} />\n              <Route path=\"/admin/planos\" component={AdminPlans} />\n            </Switch>\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":3664},"client/src/pages/Events.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { Calendar, MapPin, DollarSign, Users, ExternalLink, Mail, Phone, Globe, Filter, X } from \"lucide-react\";\nimport type { Event } from \"@shared/schema\";\nimport { useState, useMemo } from \"react\";\n\nexport default function Events() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCity, setSelectedCity] = useState<string>(\"all\");\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n  const [selectedType, setSelectedType] = useState<string>(\"all\");\n  const [showFilters, setShowFilters] = useState(false);\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n\n  const { data: events, isLoading } = useQuery<Event[]>({\n    queryKey: ['/api/events/active'],\n    retry: false,\n  });\n\n  const cities = useMemo(() => {\n    if (!events) return [];\n    const uniqueCities = new Set(events.map(e => `${e.city}, ${e.state}`));\n    return Array.from(uniqueCities).sort();\n  }, [events]);\n\n  const categories = useMemo(() => {\n    if (!events) return [];\n    const uniqueCategories = new Set(events.filter(e => e.category).map(e => e.category!));\n    return Array.from(uniqueCategories).sort();\n  }, [events]);\n\n  const filteredEvents = useMemo(() => {\n    if (!events) return [];\n\n    return events.filter(event => {\n      const matchesSearch = !searchQuery || \n        event.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        event.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        event.location.toLowerCase().includes(searchQuery.toLowerCase());\n\n      const matchesCity = selectedCity === \"all\" || \n        `${event.city}, ${event.state}` === selectedCity;\n\n      const matchesCategory = selectedCategory === \"all\" || \n        event.category === selectedCategory;\n\n      const matchesType = selectedType === \"all\" || \n        (selectedType === \"free\" && event.isFree === \"true\") ||\n        (selectedType === \"paid\" && event.isFree === \"false\");\n\n      return matchesSearch && matchesCity && matchesCategory && matchesType;\n    });\n  }, [events, searchQuery, selectedCity, selectedCategory, selectedType]);\n\n  const clearFilters = () => {\n    setSearchQuery(\"\");\n    setSelectedCity(\"all\");\n    setSelectedCategory(\"all\");\n    setSelectedType(\"all\");\n  };\n\n  const hasActiveFilters = searchQuery || selectedCity !== \"all\" || selectedCategory !== \"all\" || selectedType !== \"all\";\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return \"\";\n    const date = new Date(dateString);\n    return date.toLocaleDateString('pt-BR', { \n      day: '2-digit', \n      month: 'long', \n      year: 'numeric' \n    });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-12 px-4 bg-background\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"mb-8 text-center\">\n            <h1 className=\"font-heading font-bold text-4xl mb-4\">\n              Feiras e Eventos\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Conheça os principais eventos do setor de mineração e equipamentos pesados\n            </p>\n          </div>\n\n          <Card className=\"mb-8\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Filter className=\"h-5 w-5\" />\n                  <CardTitle className=\"text-lg\">Filtros</CardTitle>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {hasActiveFilters && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={clearFilters}\n                      data-testid=\"button-clear-filters\"\n                    >\n                      <X className=\"h-4 w-4 mr-2\" />\n                      Limpar\n                    </Button>\n                  )}\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setShowFilters(!showFilters)}\n                    data-testid=\"button-toggle-filters\"\n                  >\n                    {showFilters ? \"Ocultar\" : \"Mostrar\"}\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            {showFilters && (\n              <CardContent>\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                  <div>\n                    <label className=\"text-sm font-medium mb-2 block\">\n                      Buscar\n                    </label>\n                    <Input\n                      placeholder=\"Buscar eventos...\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      data-testid=\"input-search-events\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium mb-2 block\">\n                      Cidade\n                    </label>\n                    <Select value={selectedCity} onValueChange={setSelectedCity}>\n                      <SelectTrigger data-testid=\"select-city\">\n                        <SelectValue placeholder=\"Todas as cidades\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">Todas as cidades</SelectItem>\n                        {cities.map((city) => (\n                          <SelectItem key={city} value={city}>\n                            {city}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium mb-2 block\">\n                      Categoria\n                    </label>\n                    <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                      <SelectTrigger data-testid=\"select-category\">\n                        <SelectValue placeholder=\"Todas as categorias\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">Todas as categorias</SelectItem>\n                        {categories.map((category) => (\n                          <SelectItem key={category} value={category}>\n                            {category}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium mb-2 block\">\n                      Tipo\n                    </label>\n                    <Select value={selectedType} onValueChange={setSelectedType}>\n                      <SelectTrigger data-testid=\"select-type\">\n                        <SelectValue placeholder=\"Todos os tipos\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">Todos os tipos</SelectItem>\n                        <SelectItem value=\"free\">Gratuito</SelectItem>\n                        <SelectItem value=\"paid\">Pago</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                {hasActiveFilters && (\n                  <div className=\"mt-4 flex items-center gap-2 text-sm text-muted-foreground\">\n                    <span>\n                      Mostrando {filteredEvents.length} de {events?.length || 0} eventos\n                    </span>\n                  </div>\n                )}\n              </CardContent>\n            )}\n          </Card>\n\n          {isLoading ? (\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <Skeleton key={i} className=\"h-96 w-full\" />\n              ))}\n            </div>\n          ) : filteredEvents && filteredEvents.length > 0 ? (\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {filteredEvents.map((event) => (\n                <Card \n                  key={event.id} \n                  data-testid={`card-event-${event.id}`} \n                  className=\"hover-elevate overflow-hidden flex flex-col\"\n                >\n                  {event.coverImageUrl && (\n                    <div \n                      className=\"h-48 overflow-hidden cursor-pointer hover:opacity-90 transition-opacity\"\n                      onClick={() => {\n                        const imgSrc = event.coverImageUrl!.startsWith('/objects') \n                          ? event.coverImageUrl! \n                          : event.coverImageUrl!.startsWith('attached_assets')\n                          ? `/${event.coverImageUrl}`\n                          : `/objects${event.coverImageUrl}`;\n                        setSelectedImage(imgSrc);\n                      }}\n                    >\n                      <img \n                        src={\n                          event.coverImageUrl.startsWith('/objects') \n                            ? event.coverImageUrl \n                            : event.coverImageUrl.startsWith('attached_assets')\n                            ? `/${event.coverImageUrl}`\n                            : `/objects${event.coverImageUrl}`\n                        }\n                        alt={event.title}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  )}\n                  \n                  <CardHeader className=\"flex-1\">\n                    <div className=\"flex items-start justify-between gap-2 mb-2\">\n                      <CardTitle className=\"text-xl\" data-testid={`text-event-title-${event.id}`}>\n                        {event.title}\n                      </CardTitle>\n                    </div>\n                    \n                    {event.category && (\n                      <Badge variant=\"secondary\" className=\"w-fit mb-2\">\n                        {event.category}\n                      </Badge>\n                    )}\n                    \n                    <CardDescription className=\"line-clamp-3\">\n                      {event.description}\n                    </CardDescription>\n                  </CardHeader>\n\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Calendar className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                      <div>\n                        <div className=\"font-medium\">{formatDate(event.eventDate)}</div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-start gap-2 text-sm\">\n                      <MapPin className=\"h-4 w-4 text-primary flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <div className=\"font-medium\">{event.location}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {event.city}, {event.state} - {event.country}\n                        </div>\n                      </div>\n                    </div>\n\n                    {event.capacity && (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <Users className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">Capacidade: {event.capacity}</span>\n                      </div>\n                    )}\n\n                    <div className=\"flex items-center gap-2 pt-2\">\n                      <Badge variant={event.isFree === \"true\" ? \"default\" : \"secondary\"}>\n                        <DollarSign className=\"h-3 w-3 mr-1\" />\n                        {event.isFree === \"true\" ? \"Gratuito\" : (event.price || \"Pago\")}\n                      </Badge>\n                    </div>\n\n                    <div className=\"pt-3\">\n                      <Button \n                        variant=\"outline\" \n                        className=\"w-full\"\n                        onClick={() => setSelectedEvent(event)}\n                        data-testid={`button-view-more-${event.id}`}\n                      >\n                        Ver Mais Detalhes\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : events && events.length > 0 ? (\n            <Card className=\"max-w-2xl mx-auto\">\n              <CardContent className=\"pt-12 pb-12 text-center\">\n                <Filter className=\"h-16 w-16 mx-auto text-muted-foreground mb-6\" />\n                <h3 className=\"text-xl font-semibold mb-2\">\n                  Nenhum evento encontrado\n                </h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Não encontramos eventos com os filtros selecionados. Tente ajustar os filtros.\n                </p>\n                <Button variant=\"outline\" onClick={clearFilters}>\n                  Limpar Filtros\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card className=\"max-w-2xl mx-auto\">\n              <CardContent className=\"pt-12 pb-12 text-center\">\n                <Calendar className=\"h-16 w-16 mx-auto text-muted-foreground mb-6\" />\n                <h3 className=\"text-xl font-semibold mb-2\">\n                  Nenhum evento disponível\n                </h3>\n                <p className=\"text-muted-foreground\">\n                  Não há eventos cadastrados no momento. Volte em breve para conferir novos eventos!\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n\n      <Dialog open={!!selectedImage} onOpenChange={() => setSelectedImage(null)}>\n        <DialogContent className=\"max-w-4xl p-0\">\n          {selectedImage && (\n            <img \n              src={selectedImage}\n              alt=\"Visualização em tamanho grande\"\n              className=\"w-full h-auto\"\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={!!selectedEvent} onOpenChange={() => setSelectedEvent(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          {selectedEvent && (\n            <div className=\"space-y-6\">\n              {selectedEvent.coverImageUrl && (\n                <div \n                  className=\"w-full h-64 overflow-hidden rounded-md cursor-pointer hover:opacity-90 transition-opacity\"\n                  onClick={() => {\n                    const imgSrc = selectedEvent.coverImageUrl!.startsWith('/objects') \n                      ? selectedEvent.coverImageUrl! \n                      : selectedEvent.coverImageUrl!.startsWith('attached_assets')\n                      ? `/${selectedEvent.coverImageUrl}`\n                      : `/objects${selectedEvent.coverImageUrl}`;\n                    setSelectedImage(imgSrc);\n                  }}\n                >\n                  <img \n                    src={\n                      selectedEvent.coverImageUrl.startsWith('/objects') \n                        ? selectedEvent.coverImageUrl \n                        : selectedEvent.coverImageUrl.startsWith('attached_assets')\n                        ? `/${selectedEvent.coverImageUrl}`\n                        : `/objects${selectedEvent.coverImageUrl}`\n                    }\n                    alt={selectedEvent.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n              )}\n\n              <div>\n                <div className=\"flex items-start justify-between gap-4 mb-3\">\n                  <h2 className=\"text-2xl font-bold\" data-testid=\"text-event-detail-title\">\n                    {selectedEvent.title}\n                  </h2>\n                  {selectedEvent.category && (\n                    <Badge variant=\"secondary\" className=\"flex-shrink-0\">\n                      {selectedEvent.category}\n                    </Badge>\n                  )}\n                </div>\n                \n                <p className=\"text-muted-foreground whitespace-pre-wrap\">\n                  {selectedEvent.description}\n                </p>\n              </div>\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-base\">Data e Horário</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Calendar className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                      <div>\n                        <div className=\"font-medium\">{formatDate(selectedEvent.eventDate)}</div>\n                        {selectedEvent.endDate && (\n                          <div className=\"text-xs text-muted-foreground\">\n                            até {formatDate(selectedEvent.endDate)}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-base\">Localização</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"flex items-start gap-2 text-sm\">\n                      <MapPin className=\"h-4 w-4 text-primary flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <div className=\"font-medium\">{selectedEvent.location}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {selectedEvent.city}, {selectedEvent.state} - {selectedEvent.country}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {selectedEvent.capacity && (\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"text-base\">Capacidade</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <Users className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                        <span className=\"font-medium\">{selectedEvent.capacity} pessoas</span>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-base\">Investimento</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Badge variant={selectedEvent.isFree === \"true\" ? \"default\" : \"secondary\"} className=\"text-sm\">\n                      <DollarSign className=\"h-4 w-4 mr-1\" />\n                      {selectedEvent.isFree === \"true\" ? \"Gratuito\" : (selectedEvent.price || \"Pago\")}\n                    </Badge>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Contato do Organizador</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  {selectedEvent.organizerEmail && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Mail className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                      <a href={`mailto:${selectedEvent.organizerEmail}`} className=\"hover:text-primary hover:underline\">\n                        {selectedEvent.organizerEmail}\n                      </a>\n                    </div>\n                  )}\n                  \n                  {selectedEvent.organizerPhone && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Phone className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                      <span>{selectedEvent.organizerPhone}</span>\n                    </div>\n                  )}\n                  \n                  {selectedEvent.website && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Globe className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                      <button\n                        className=\"text-primary hover:underline flex items-center gap-1\"\n                        onClick={() => window.open(selectedEvent.website!, '_blank')}\n                      >\n                        Acessar Site do Evento\n                        <ExternalLink className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":21768},"client/src/components/AdminLayout.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useEffect } from \"react\";\n\ninterface AdminLayoutProps {\n  children: React.ReactNode;\n  title: string;\n  description?: string;\n}\n\nexport function AdminLayout({ children, title, description }: AdminLayoutProps) {\n  const { user, userType } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (userType && userType !== 'admin') {\n      setLocation('/admin/login');\n    }\n  }, [userType, setLocation]);\n\n  const handleLogout = async () => {\n    try {\n      await apiRequest('POST', '/api/auth/logout');\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Logout realizado\",\n        description: \"Você saiu do painel administrativo\",\n      });\n      setLocation('/admin/login');\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer logout\",\n        description: \"Tente novamente\",\n      });\n    }\n  };\n\n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b\">\n            <div className=\"flex items-center gap-3\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div>\n                <h1 className=\"text-xl font-semibold\">{title}</h1>\n                {description && (\n                  <p className=\"text-sm text-muted-foreground\">{description}</p>\n                )}\n                {!description && user && (user as any).email && (\n                  <p className=\"text-sm text-muted-foreground\">{(user as any).email}</p>\n                )}\n              </div>\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={handleLogout}\n              data-testid=\"button-admin-logout\"\n            >\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Sair\n            </Button>\n          </header>\n\n          <main className=\"flex-1 overflow-auto p-6\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":2717},"client/src/pages/AdminEvents.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Calendar, Plus, MapPin, DollarSign, Users, Trash2, Upload, X, Pencil } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Event, InsertEvent } from \"@shared/schema\";\nimport { insertEventSchema } from \"@shared/schema\";\nimport { useState, useRef, useMemo } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nconst BRAZILIAN_STATES = [\n  { value: \"AC\", label: \"Acre\" },\n  { value: \"AL\", label: \"Alagoas\" },\n  { value: \"AP\", label: \"Amapá\" },\n  { value: \"AM\", label: \"Amazonas\" },\n  { value: \"BA\", label: \"Bahia\" },\n  { value: \"CE\", label: \"Ceará\" },\n  { value: \"DF\", label: \"Distrito Federal\" },\n  { value: \"ES\", label: \"Espírito Santo\" },\n  { value: \"GO\", label: \"Goiás\" },\n  { value: \"MA\", label: \"Maranhão\" },\n  { value: \"MT\", label: \"Mato Grosso\" },\n  { value: \"MS\", label: \"Mato Grosso do Sul\" },\n  { value: \"MG\", label: \"Minas Gerais\" },\n  { value: \"PA\", label: \"Pará\" },\n  { value: \"PB\", label: \"Paraíba\" },\n  { value: \"PR\", label: \"Paraná\" },\n  { value: \"PE\", label: \"Pernambuco\" },\n  { value: \"PI\", label: \"Piauí\" },\n  { value: \"RJ\", label: \"Rio de Janeiro\" },\n  { value: \"RN\", label: \"Rio Grande do Norte\" },\n  { value: \"RS\", label: \"Rio Grande do Sul\" },\n  { value: \"RO\", label: \"Rondônia\" },\n  { value: \"RR\", label: \"Roraima\" },\n  { value: \"SC\", label: \"Santa Catarina\" },\n  { value: \"SP\", label: \"São Paulo\" },\n  { value: \"SE\", label: \"Sergipe\" },\n  { value: \"TO\", label: \"Tocantins\" },\n];\n\nconst BRAZILIAN_CITIES_BY_STATE: Record<string, string[]> = {\n  \"AC\": [\"Rio Branco\", \"Cruzeiro do Sul\", \"Sena Madureira\", \"Tarauacá\"],\n  \"AL\": [\"Maceió\", \"Arapiraca\", \"Palmeira dos Índios\", \"Rio Largo\"],\n  \"AP\": [\"Macapá\", \"Santana\", \"Laranjal do Jari\", \"Oiapoque\"],\n  \"AM\": [\"Manaus\", \"Parintins\", \"Itacoatiara\", \"Manacapuru\"],\n  \"BA\": [\"Salvador\", \"Feira de Santana\", \"Vitória da Conquista\", \"Camaçari\", \"Itabuna\", \"Juazeiro\", \"Lauro de Freitas\"],\n  \"CE\": [\"Fortaleza\", \"Caucaia\", \"Juazeiro do Norte\", \"Maracanaú\", \"Sobral\"],\n  \"DF\": [\"Brasília\"],\n  \"ES\": [\"Vitória\", \"Vila Velha\", \"Serra\", \"Cariacica\", \"Cachoeiro de Itapemirim\"],\n  \"GO\": [\"Goiânia\", \"Aparecida de Goiânia\", \"Anápolis\", \"Rio Verde\", \"Luziânia\"],\n  \"MA\": [\"São Luís\", \"Imperatriz\", \"Caxias\", \"Timon\", \"Codó\"],\n  \"MT\": [\"Cuiabá\", \"Várzea Grande\", \"Rondonópolis\", \"Sinop\", \"Tangará da Serra\"],\n  \"MS\": [\"Campo Grande\", \"Dourados\", \"Três Lagoas\", \"Corumbá\", \"Ponta Porã\"],\n  \"MG\": [\"Belo Horizonte\", \"Uberlândia\", \"Contagem\", \"Juiz de Fora\", \"Betim\", \"Montes Claros\", \"Ribeirão das Neves\", \"Uberaba\", \"Governador Valadares\", \"Ipatinga\"],\n  \"PA\": [\"Belém\", \"Ananindeua\", \"Santarém\", \"Marabá\", \"Castanhal\"],\n  \"PB\": [\"João Pessoa\", \"Campina Grande\", \"Santa Rita\", \"Patos\", \"Bayeux\"],\n  \"PR\": [\"Curitiba\", \"Londrina\", \"Maringá\", \"Ponta Grossa\", \"Cascavel\", \"São José dos Pinhais\", \"Foz do Iguaçu\"],\n  \"PE\": [\"Recife\", \"Jaboatão dos Guararapes\", \"Olinda\", \"Caruaru\", \"Petrolina\"],\n  \"PI\": [\"Teresina\", \"Parnaíba\", \"Picos\", \"Piripiri\", \"Floriano\"],\n  \"RJ\": [\"Rio de Janeiro\", \"São Gonçalo\", \"Duque de Caxias\", \"Nova Iguaçu\", \"Niterói\", \"Belford Roxo\", \"Campos dos Goytacazes\", \"Petrópolis\"],\n  \"RN\": [\"Natal\", \"Mossoró\", \"Parnamirim\", \"São Gonçalo do Amarante\", \"Macaíba\"],\n  \"RS\": [\"Porto Alegre\", \"Caxias do Sul\", \"Pelotas\", \"Canoas\", \"Santa Maria\", \"Gravataí\", \"Viamão\", \"Novo Hamburgo\"],\n  \"RO\": [\"Porto Velho\", \"Ji-Paraná\", \"Ariquemes\", \"Vilhena\", \"Cacoal\"],\n  \"RR\": [\"Boa Vista\", \"Rorainópolis\", \"Caracaraí\", \"São João da Baliza\"],\n  \"SC\": [\"Florianópolis\", \"Joinville\", \"Blumenau\", \"São José\", \"Criciúma\", \"Chapecó\", \"Itajaí\"],\n  \"SP\": [\"São Paulo\", \"Guarulhos\", \"Campinas\", \"São Bernardo do Campo\", \"Santo André\", \"Osasco\", \"São José dos Campos\", \"Ribeirão Preto\", \"Sorocaba\", \"Santos\", \"Mauá\", \"São José do Rio Preto\", \"Piracicaba\", \"Bauru\"],\n  \"SE\": [\"Aracaju\", \"Nossa Senhora do Socorro\", \"Lagarto\", \"Itabaiana\", \"Estância\"],\n  \"TO\": [\"Palmas\", \"Araguaína\", \"Gurupi\", \"Porto Nacional\", \"Paraíso do Tocantins\"],\n};\n\nconst formSchema = insertEventSchema;\n\nexport default function AdminEvents() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingEvent, setEditingEvent] = useState<Event | null>(null);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string>(\"\");\n  const [uploadingCover, setUploadingCover] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      eventDate: \"\",\n      endDate: \"\",\n      location: \"\",\n      address: \"\",\n      city: \"\",\n      state: \"\",\n      country: \"Brasil\",\n      isFree: \"true\",\n      price: \"\",\n      coverImageUrl: \"\",\n      organizerName: \"\",\n      organizerEmail: \"\",\n      organizerPhone: \"\",\n      website: \"\",\n      capacity: \"\",\n      category: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const selectedState = form.watch(\"state\");\n\n  const availableCities = useMemo(() => {\n    if (!selectedState) return [];\n    return BRAZILIAN_CITIES_BY_STATE[selectedState] || [];\n  }, [selectedState]);\n\n  const { data: eventsData, isLoading } = useQuery<Event[]>({\n    queryKey: ['/api/events'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const createEventMutation = useMutation({\n    mutationFn: async (eventData: InsertEvent) => {\n      const response = await apiRequest('POST', '/api/events', eventData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n      toast({\n        title: \"Evento criado!\",\n        description: \"O evento foi cadastrado com sucesso.\",\n      });\n      setIsDialogOpen(false);\n      setEditingEvent(null);\n      form.reset();\n      setSelectedFile(null);\n      setPreviewUrl(\"\");\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar evento\",\n        description: error.message,\n      });\n    },\n  });\n\n  const updateEventMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertEvent> }) => {\n      const response = await apiRequest('PATCH', `/api/events/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n      toast({\n        title: \"Evento atualizado!\",\n        description: \"O evento foi atualizado com sucesso.\",\n      });\n      setIsDialogOpen(false);\n      setEditingEvent(null);\n      form.reset();\n      setSelectedFile(null);\n      setPreviewUrl(\"\");\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar evento\",\n        description: error.message,\n      });\n    },\n  });\n\n  const deleteEventMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/events/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n      toast({\n        title: \"Evento excluído\",\n        description: \"O evento foi removido com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir evento\",\n        description: error.message,\n      });\n    },\n  });\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          variant: \"destructive\",\n          title: \"Arquivo muito grande\",\n          description: \"A imagem deve ter no máximo 5MB\",\n        });\n        return;\n      }\n\n      setSelectedFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreviewUrl(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleUploadCover = async (eventId: string) => {\n    if (!selectedFile) return null;\n\n    try {\n      setUploadingCover(true);\n      \n      const uploadResponse = await apiRequest('POST', '/api/events/upload-cover');\n      const { uploadURL } = await uploadResponse.json();\n\n      const uploadResult = await fetch(uploadURL, {\n        method: 'PUT',\n        body: selectedFile,\n        headers: {\n          'Content-Type': selectedFile.type,\n        },\n      });\n\n      if (!uploadResult.ok) {\n        throw new Error('Erro ao fazer upload da imagem');\n      }\n\n      const setCoverResponse = await apiRequest('POST', '/api/events/set-cover', {\n        coverURL: uploadURL\n      });\n      const { objectPath } = await setCoverResponse.json();\n\n      await apiRequest('PATCH', `/api/events/${eventId}`, {\n        coverImageUrl: objectPath\n      });\n\n      return objectPath;\n    } catch (error) {\n      console.error('Error uploading cover:', error);\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer upload\",\n        description: \"Não foi possível fazer upload da imagem\",\n      });\n      return null;\n    } finally {\n      setUploadingCover(false);\n    }\n  };\n\n  const handleSubmit = async (values: z.infer<typeof formSchema>) => {\n    const eventData = { ...values };\n    \n    if (editingEvent) {\n      await updateEventMutation.mutateAsync({ id: editingEvent.id, data: eventData });\n      \n      if (selectedFile) {\n        await handleUploadCover(editingEvent.id);\n        queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n      }\n    } else {\n      const createdEvent = await createEventMutation.mutateAsync(eventData);\n      \n      if (selectedFile && createdEvent) {\n        await handleUploadCover(createdEvent.id);\n        queryClient.invalidateQueries({ queryKey: ['/api/events'] });\n      }\n    }\n  };\n\n  const handleEditEvent = (event: Event) => {\n    setEditingEvent(event);\n    form.reset({\n      title: event.title,\n      description: event.description,\n      eventDate: event.eventDate,\n      endDate: event.endDate || \"\",\n      location: event.location,\n      address: event.address,\n      city: event.city,\n      state: event.state,\n      country: event.country,\n      isFree: event.isFree,\n      price: event.price || \"\",\n      coverImageUrl: event.coverImageUrl || \"\",\n      organizerName: event.organizerName,\n      organizerEmail: event.organizerEmail,\n      organizerPhone: event.organizerPhone || \"\",\n      website: event.website || \"\",\n      capacity: event.capacity || \"\",\n      category: event.category || \"\",\n      isActive: event.isActive,\n    });\n    if (event.coverImageUrl) {\n      setPreviewUrl(event.coverImageUrl.startsWith('/objects') ? event.coverImageUrl : `/objects${event.coverImageUrl}`);\n    }\n    setIsDialogOpen(true);\n  };\n\n  const handleNewEvent = () => {\n    setEditingEvent(null);\n    form.reset();\n    setSelectedFile(null);\n    setPreviewUrl(\"\");\n    setIsDialogOpen(true);\n  };\n\n  const formatDate = (dateString: string) => {\n    if (!dateString) return \"\";\n    const date = new Date(dateString);\n    return date.toLocaleDateString('pt-BR', { \n      day: '2-digit', \n      month: 'short', \n      year: 'numeric' \n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <Button onClick={handleNewEvent} data-testid=\"button-new-event\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Novo Evento\n        </Button>\n\n        <Dialog open={isDialogOpen} onOpenChange={(open) => {\n          setIsDialogOpen(open);\n          if (!open) {\n            setEditingEvent(null);\n            form.reset();\n            setSelectedFile(null);\n            setPreviewUrl(\"\");\n          }\n        }}>\n          <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>{editingEvent ? \"Editar Evento\" : \"Novo Evento\"}</DialogTitle>\n              <DialogDescription>\n                {editingEvent ? \"Atualize as informações do evento\" : \"Cadastre uma nova feira ou evento\"}\n              </DialogDescription>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Imagem de Capa</h3>\n                  <div className=\"space-y-3\">\n                    {previewUrl ? (\n                      <div className=\"relative\">\n                        <img \n                          src={previewUrl} \n                          alt=\"Preview\" \n                          className=\"w-full h-48 object-cover rounded-lg\"\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"destructive\"\n                          size=\"icon\"\n                          className=\"absolute top-2 right-2\"\n                          onClick={() => {\n                            setSelectedFile(null);\n                            setPreviewUrl(\"\");\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = \"\";\n                            }\n                          }}\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    ) : (\n                      <div className=\"border-2 border-dashed rounded-lg p-8 text-center\">\n                        <Upload className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                        <p className=\"text-sm text-muted-foreground mb-2\">\n                          Clique para selecionar uma imagem\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          PNG, JPG até 5MB\n                        </p>\n                      </div>\n                    )}\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                      id=\"cover-upload\"\n                    />\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => fileInputRef.current?.click()}\n                      className=\"w-full\"\n                    >\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      {previewUrl ? \"Trocar Imagem\" : \"Selecionar Imagem\"}\n                    </Button>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Informações do Evento</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem className=\"md:col-span-2\">\n                          <FormLabel>Título do Evento*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: ExpoMining 2024\" {...field} data-testid=\"input-title\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem className=\"md:col-span-2\">\n                          <FormLabel>Descrição*</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              placeholder=\"Descrição completa do evento\"\n                              {...field}\n                              className=\"resize-none\"\n                              rows={4}\n                              data-testid=\"input-description\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"category\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Categoria</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: Feira, Workshop\" {...field} value={field.value || \"\"} data-testid=\"input-category\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"capacity\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Capacidade</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: 5000 pessoas\" {...field} value={field.value || \"\"} data-testid=\"input-capacity\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"eventDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Data de Início*</FormLabel>\n                          <FormControl>\n                            <Input type=\"date\" {...field} data-testid=\"input-event-date\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"endDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Data de Expiração</FormLabel>\n                          <FormControl>\n                            <Input type=\"date\" {...field} value={field.value || \"\"} data-testid=\"input-end-date\" />\n                          </FormControl>\n                          <FormDescription className=\"text-xs\">\n                            Após esta data, o evento ficará automaticamente invisível para os usuários\n                          </FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Localização</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={form.control}\n                      name=\"location\"\n                      render={({ field }) => (\n                        <FormItem className=\"md:col-span-2\">\n                          <FormLabel>Local*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: Centro de Convenções\" {...field} data-testid=\"input-location\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"address\"\n                      render={({ field }) => (\n                        <FormItem className=\"md:col-span-2\">\n                          <FormLabel>Endereço*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Rua, número\" {...field} data-testid=\"input-address\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"state\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Estado*</FormLabel>\n                          <Select \n                            onValueChange={(value) => {\n                              field.onChange(value);\n                              form.setValue(\"city\", \"\");\n                            }} \n                            value={field.value}\n                          >\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-state\">\n                                <SelectValue placeholder=\"Selecione o estado\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {BRAZILIAN_STATES.map((state) => (\n                                <SelectItem key={state.value} value={state.value}>\n                                  {state.label}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"city\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Cidade*</FormLabel>\n                          <Select \n                            onValueChange={field.onChange} \n                            value={field.value}\n                            disabled={!selectedState}\n                          >\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-city\">\n                                <SelectValue placeholder={selectedState ? \"Selecione a cidade\" : \"Selecione o estado primeiro\"} />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {availableCities.map((city) => (\n                                <SelectItem key={city} value={city}>\n                                  {city}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"country\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>País*</FormLabel>\n                          <FormControl>\n                            <Input {...field} data-testid=\"input-country\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Valores</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={form.control}\n                      name=\"isFree\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Tipo*</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-is-free\">\n                                <SelectValue />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"true\">Gratuito</SelectItem>\n                              <SelectItem value=\"false\">Pago</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"price\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Preço</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: R$ 150,00\" {...field} value={field.value || \"\"} data-testid=\"input-price\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Organizador</h3>\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <FormField\n                      control={form.control}\n                      name=\"organizerName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nome*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Nome do organizador\" {...field} data-testid=\"input-organizer-name\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"organizerEmail\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email*</FormLabel>\n                          <FormControl>\n                            <Input type=\"email\" placeholder=\"contato@evento.com\" {...field} data-testid=\"input-organizer-email\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"organizerPhone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Telefone</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"(00) 00000-0000\" {...field} value={field.value || \"\"} data-testid=\"input-organizer-phone\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"website\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Website</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"https://evento.com.br\" {...field} value={field.value || \"\"} data-testid=\"input-website\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Status*</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-is-active\">\n                                <SelectValue />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"true\">Ativo</SelectItem>\n                              <SelectItem value=\"false\">Inativo</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <DialogFooter>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={() => setIsDialogOpen(false)}\n                    data-testid=\"button-cancel\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button \n                    type=\"submit\" \n                    disabled={createEventMutation.isPending || updateEventMutation.isPending || uploadingCover}\n                    data-testid=\"button-save\"\n                  >\n                    {(createEventMutation.isPending || updateEventMutation.isPending || uploadingCover) \n                      ? \"Salvando...\" \n                      : (editingEvent ? \"Atualizar Evento\" : \"Cadastrar Evento\")}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-3 mb-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Eventos\n              </CardTitle>\n              <CardDescription>Eventos cadastrados</CardDescription>\n            </div>\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-events\">\n              {isLoading ? <Skeleton className=\"h-10 w-20\" /> : eventsData?.length || 0}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-80 w-full\" />\n          ))}\n        </div>\n      ) : eventsData && eventsData.length > 0 ? (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {eventsData.map((event) => (\n            <Card key={event.id} data-testid={`card-event-${event.id}`} className=\"hover-elevate overflow-hidden\">\n              {event.coverImageUrl && (\n                <div className=\"h-48 overflow-hidden\">\n                  <img \n                    src={event.coverImageUrl.startsWith('/objects') ? event.coverImageUrl : `/objects${event.coverImageUrl}`}\n                    alt={event.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n              )}\n              <CardHeader>\n                <div className=\"flex items-start justify-between gap-2\">\n                  <CardTitle className=\"text-lg\" data-testid={`text-event-title-${event.id}`}>\n                    {event.title}\n                  </CardTitle>\n                  <div className=\"flex gap-1\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleEditEvent(event)}\n                      data-testid={`button-edit-event-${event.id}`}\n                    >\n                      <Pencil className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => {\n                        if (confirm(\"Tem certeza que deseja excluir este evento?\")) {\n                          deleteEventMutation.mutate(event.id);\n                        }\n                      }}\n                      data-testid={`button-delete-event-${event.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n                <CardDescription className=\"line-clamp-2\">\n                  {event.description}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"space-y-1\">\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                    <span>{formatDate(event.eventDate)}</span>\n                  </div>\n                  {event.endDate && (\n                    <div className=\"text-xs text-muted-foreground ml-6\">\n                      Expira em: {formatDate(event.endDate)}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                  <span>{event.city}, {event.state}</span>\n                </div>\n                {event.capacity && (\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <Users className=\"h-4 w-4 text-muted-foreground\" />\n                    <span>{event.capacity}</span>\n                  </div>\n                )}\n                <div className=\"flex items-center gap-2 pt-2\">\n                  <Badge variant={event.isFree === \"true\" ? \"default\" : \"secondary\"}>\n                    {event.isFree === \"true\" ? \"Gratuito\" : event.price || \"Pago\"}\n                  </Badge>\n                  <Badge variant={event.isActive === \"true\" ? \"default\" : \"outline\"}>\n                    {event.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <Card>\n          <CardContent className=\"pt-6 text-center\">\n            <Calendar className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\">\n              Nenhum evento cadastrado ainda. Comece criando um novo evento.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":35985},"client/src/pages/AdminBanners.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Image as ImageIcon, Plus, Trash2, Pencil, ExternalLink } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Banner, InsertBanner } from \"@shared/schema\";\nimport { insertBannerSchema } from \"@shared/schema\";\nimport { useState, useRef } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nconst formSchema = insertBannerSchema;\n\nexport default function AdminBanners() {\n  const { userType } = useAuth();\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingBanner, setEditingBanner] = useState<Banner | null>(null);\n  const [uploadingImage, setUploadingImage] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      subtitle: \"\",\n      imageUrl: \"\",\n      linkUrl: \"\",\n      displayOrder: \"0\",\n      isActive: \"true\",\n    },\n  });\n\n  const { data: bannersData, isLoading } = useQuery<Banner[]>({\n    queryKey: ['/api/banners'],\n    retry: false,\n    enabled: userType === 'admin',\n  });\n\n  const createBannerMutation = useMutation({\n    mutationFn: async (bannerData: InsertBanner) => {\n      const response = await apiRequest('POST', '/api/banners', bannerData);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/banners'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/banners/active'] });\n      toast({\n        title: \"Banner criado!\",\n        description: \"O banner foi cadastrado com sucesso.\",\n      });\n      handleCloseDialog();\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar banner\",\n        description: error.message,\n      });\n    },\n  });\n\n  const updateBannerMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertBanner> }) => {\n      const response = await apiRequest('PATCH', `/api/banners/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/banners'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/banners/active'] });\n      toast({\n        title: \"Banner atualizado!\",\n        description: \"O banner foi atualizado com sucesso.\",\n      });\n      handleCloseDialog();\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar banner\",\n        description: error.message,\n      });\n    },\n  });\n\n  const deleteBannerMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/banners/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/banners'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/banners/active'] });\n      toast({\n        title: \"Banner excluído!\",\n        description: \"O banner foi excluído com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir banner\",\n        description: error.message,\n      });\n    },\n  });\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    try {\n      setUploadingImage(true);\n\n      const uploadResponse = await apiRequest(\"POST\", \"/api/banners/upload-image\");\n      const { uploadURL } = await uploadResponse.json();\n\n      const uploadResult = await fetch(uploadURL, {\n        method: 'PUT',\n        body: file,\n        headers: {\n          'Content-Type': file.type,\n        },\n      });\n\n      if (!uploadResult.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const setImageResponse = await apiRequest('POST', '/api/banners/set-image', {\n        imageURL: uploadURL\n      });\n      const { objectPath } = await setImageResponse.json();\n\n      form.setValue('imageUrl', objectPath);\n      setPreviewUrl(objectPath.startsWith('/objects') ? objectPath : `/objects${objectPath}`);\n\n      toast({\n        title: \"Imagem carregada!\",\n        description: \"A imagem foi carregada com sucesso.\",\n      });\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer upload\",\n        description: \"Não foi possível fazer upload da imagem.\",\n      });\n    } finally {\n      setUploadingImage(false);\n    }\n  };\n\n  const handleSubmit = (data: z.infer<typeof formSchema>) => {\n    if (editingBanner) {\n      updateBannerMutation.mutate({ id: editingBanner.id, data });\n    } else {\n      createBannerMutation.mutate(data);\n    }\n  };\n\n  const handleEditBanner = (banner: Banner) => {\n    setEditingBanner(banner);\n    form.reset({\n      title: banner.title,\n      subtitle: banner.subtitle || \"\",\n      imageUrl: banner.imageUrl,\n      linkUrl: banner.linkUrl || \"\",\n      displayOrder: banner.displayOrder || \"0\",\n      isActive: banner.isActive,\n    });\n    if (banner.imageUrl) {\n      setPreviewUrl(banner.imageUrl.startsWith('/objects') ? banner.imageUrl : `/objects${banner.imageUrl}`);\n    }\n    setIsDialogOpen(true);\n  };\n\n  const handleNewBanner = () => {\n    setEditingBanner(null);\n    form.reset({\n      title: \"\",\n      subtitle: \"\",\n      imageUrl: \"\",\n      linkUrl: \"\",\n      displayOrder: \"0\",\n      isActive: \"true\",\n    });\n    setPreviewUrl(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingBanner(null);\n    setPreviewUrl(null);\n    form.reset();\n  };\n\n  if (userType !== 'admin') {\n    return (\n      <div className=\"p-8\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <p className=\"text-center text-muted-foreground\">\n              Acesso negado. Esta página é apenas para administradores.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"mb-6 flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"title-admin-banners\">\n            Banners da Home\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Gerencie os banners exibidos na seção \"Explore por Categoria\" da página inicial\n          </p>\n        </div>\n\n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button onClick={handleNewBanner} data-testid=\"button-new-banner\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Novo Banner\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingBanner ? 'Editar Banner' : 'Novo Banner'}\n              </DialogTitle>\n              <DialogDescription>\n                {editingBanner \n                  ? 'Atualize as informações do banner abaixo.'\n                  : 'Preencha as informações do novo banner abaixo.'}\n              </DialogDescription>\n            </DialogHeader>\n\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Imagem do Banner</h3>\n                  <div className=\"space-y-3\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleImageUpload}\n                      className=\"hidden\"\n                      data-testid=\"input-image-upload\"\n                    />\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => fileInputRef.current?.click()}\n                      disabled={uploadingImage}\n                      data-testid=\"button-upload-image\"\n                    >\n                      <ImageIcon className=\"h-4 w-4 mr-2\" />\n                      {uploadingImage ? 'Fazendo upload...' : 'Selecionar Imagem'}\n                    </Button>\n                    {previewUrl && (\n                      <div className=\"mt-3 border rounded-md overflow-hidden\">\n                        <img \n                          src={previewUrl} \n                          alt=\"Preview\" \n                          className=\"w-full h-48 object-cover\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold\">Informações do Banner</h3>\n                  <div className=\"grid gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Título*</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: Tecnologia\" {...field} data-testid=\"input-title\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"subtitle\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Subtítulo</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: 12.500 vagas\" {...field} value={field.value || \"\"} data-testid=\"input-subtitle\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"linkUrl\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Link (URL)</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"https://...\" {...field} value={field.value || \"\"} data-testid=\"input-link-url\" />\n                          </FormControl>\n                          <FormDescription className=\"text-xs\">\n                            Link para onde o banner deve redirecionar quando clicado\n                          </FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"displayOrder\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Ordem de Exibição*</FormLabel>\n                          <FormControl>\n                            <Input type=\"number\" placeholder=\"0\" {...field} data-testid=\"input-display-order\" />\n                          </FormControl>\n                          <FormDescription className=\"text-xs\">\n                            Banners com menor número aparecem primeiro\n                          </FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Status*</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-is-active\">\n                                <SelectValue />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"true\">Ativo</SelectItem>\n                              <SelectItem value=\"false\">Inativo</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n\n                <DialogFooter>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={handleCloseDialog}\n                    data-testid=\"button-cancel\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button \n                    type=\"submit\" \n                    disabled={createBannerMutation.isPending || updateBannerMutation.isPending || uploadingImage}\n                    data-testid=\"button-save\"\n                  >\n                    {(createBannerMutation.isPending || updateBannerMutation.isPending || uploadingImage) \n                      ? \"Salvando...\" \n                      : (editingBanner ? \"Atualizar Banner\" : \"Cadastrar Banner\")}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-3 mb-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Banners\n              </CardTitle>\n              <CardDescription>Banners cadastrados</CardDescription>\n            </div>\n            <ImageIcon className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-banners\">\n              {isLoading ? <Skeleton className=\"h-10 w-20\" /> : bannersData?.length || 0}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-80 w-full\" />\n          ))}\n        </div>\n      ) : bannersData && bannersData.length > 0 ? (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {bannersData.map((banner) => (\n            <Card key={banner.id} data-testid={`card-banner-${banner.id}`} className=\"hover-elevate overflow-hidden\">\n              {banner.imageUrl && (\n                <div className=\"h-48 overflow-hidden\">\n                  <img \n                    src={banner.imageUrl.startsWith('/objects') ? banner.imageUrl : `/objects${banner.imageUrl}`}\n                    alt={banner.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n              )}\n              <CardHeader>\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"flex-1\">\n                    <CardTitle className=\"text-lg\" data-testid={`text-banner-title-${banner.id}`}>\n                      {banner.title}\n                    </CardTitle>\n                    {banner.subtitle && (\n                      <CardDescription className=\"mt-1\">\n                        {banner.subtitle}\n                      </CardDescription>\n                    )}\n                  </div>\n                  <div className=\"flex gap-1\">\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => handleEditBanner(banner)}\n                      data-testid={`button-edit-banner-${banner.id}`}\n                    >\n                      <Pencil className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => {\n                        if (confirm(\"Tem certeza que deseja excluir este banner?\")) {\n                          deleteBannerMutation.mutate(banner.id);\n                        }\n                      }}\n                      data-testid={`button-delete-banner-${banner.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {banner.linkUrl && (\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <ExternalLink className=\"h-4 w-4\" />\n                    <span className=\"truncate\">{banner.linkUrl}</span>\n                  </div>\n                )}\n                <div className=\"flex items-center gap-2 pt-2\">\n                  <Badge variant=\"secondary\">\n                    Ordem: {banner.displayOrder}\n                  </Badge>\n                  <Badge variant={banner.isActive === \"true\" ? \"default\" : \"outline\"}>\n                    {banner.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <Card>\n          <CardContent className=\"pt-6 text-center\">\n            <ImageIcon className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\">\n              Nenhum banner cadastrado ainda. Comece criando um novo banner.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":19004},"client/src/components/CompanyShell.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { CompanySidebar } from \"@/components/CompanySidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useEffect } from \"react\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\n\ninterface CompanyShellProps {\n  children: React.ReactNode;\n}\n\nexport function CompanyShell({ children }: CompanyShellProps) {\n  const { user, userType, isLoading } = useAuth();\n  const [location, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const isCompanyRoute = location.startsWith('/dashboard/empresa') || location.startsWith('/empresa/');\n\n  useEffect(() => {\n    if (isLoading) return;\n    \n    if (isCompanyRoute) {\n      if (!userType || userType !== 'company') {\n        toast({\n          variant: \"destructive\",\n          title: \"Sessão expirada\",\n          description: \"Faça login novamente para acessar o painel\",\n        });\n        setLocation('/login');\n      }\n    }\n  }, [userType, isLoading, setLocation, isCompanyRoute, toast]);\n\n  const handleLogout = async () => {\n    try {\n      await apiRequest('POST', '/api/auth/logout');\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Logout realizado\",\n        description: \"Você saiu do sistema\",\n      });\n      setLocation('/');\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer logout\",\n        description: \"Tente novamente\",\n      });\n    }\n  };\n\n  const getPageInfo = () => {\n    if (location === '/dashboard/empresa') {\n      return { title: \"Dashboard\", description: user ? (user as any).companyName || (user as any).email : \"\" };\n    }\n    if (location === '/empresa/vagas') {\n      return { title: \"Minhas Vagas\", description: \"Gerencie suas vagas publicadas\" };\n    }\n    if (location === '/empresa/plano') {\n      return { title: \"Meu Plano\", description: \"Visualize seus planos e assinaturas\" };\n    }\n    if (location === '/empresa/perfil') {\n      return { title: \"Perfil da Empresa\", description: \"Informações e configurações da empresa\" };\n    }\n    if (location === '/empresa/creditos') {\n      return { title: \"Meus Créditos\", description: \"Gerencie seus créditos e histórico de transações\" };\n    }\n    return { title: \"Dashboard\", description: \"\" };\n  };\n\n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  if (!isCompanyRoute || isLoading) {\n    return <>{children}</>;\n  }\n\n  const pageInfo = getPageInfo();\n\n  return (\n    <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n      <div className=\"flex h-screen w-full bg-background\">\n        <CompanySidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"sticky top-0 z-50 flex items-center justify-between px-6 py-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n            <div className=\"flex items-center gap-3\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div>\n                <h1 className=\"text-xl font-bold\">{pageInfo.title}</h1>\n                {pageInfo.description && (\n                  <p className=\"text-xs text-muted-foreground\">{pageInfo.description}</p>\n                )}\n              </div>\n            </div>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\"\n              onClick={handleLogout}\n              data-testid=\"button-logout\"\n              title=\"Sair\"\n              className=\"hover-elevate\"\n            >\n              <LogOut className=\"h-5 w-5\" />\n            </Button>\n          </header>\n          \n          <main className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-6\">\n              {children}\n            </div>\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":4145},"client/src/pages/CompanyJobs.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from \"@/components/ui/command\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Briefcase, Plus, Search, MapPin, Clock, DollarSign, Users, ChevronRight, ChevronLeft, Building2, Check, ChevronsUpDown, Eye, Trash2, UserCheck, ExternalLink, Pause, Play, Filter, X, Coins, AlertCircle } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Link } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { insertJobSchema, type Job, type Question, type GlobalWorkType, type GlobalContractType, type Tag } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { brazilianCities } from \"@/lib/brazilian-cities\";\nimport { cn } from \"@/lib/utils\";\n\nconst jobFormSchema = insertJobSchema.extend({\n  title: z.string().min(5, \"Título deve ter pelo menos 5 caracteres\"),\n  description: z.string().min(20, \"Descrição deve ter pelo menos 20 caracteres\"),\n  location: z.string().min(3, \"Localização é obrigatória\"),\n  workType: z.string().min(1, \"Tipo de trabalho é obrigatório\"),\n  contractType: z.string().min(1, \"Tipo de contrato é obrigatório\"),\n});\n\ntype JobFormValues = z.infer<typeof jobFormSchema>;\ntype JobWithApplicationCount = Job & { applicationCount?: number };\n\nexport default function CompanyJobs() {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [locationFilter, setLocationFilter] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [dateFrom, setDateFrom] = useState(\"\");\n  const [dateTo, setDateTo] = useState(\"\");\n  const [showFilters, setShowFilters] = useState(false);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [locationOpen, setLocationOpen] = useState(false);\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [jobToDelete, setJobToDelete] = useState<string | null>(null);\n  const [selectedQuestions, setSelectedQuestions] = useState<string[]>([]);\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n  const [creditsDialogOpen, setCreditsDialogOpen] = useState(false);\n\n  const { data: jobs = [], isLoading } = useQuery<JobWithApplicationCount[]>({\n    queryKey: ['/api/jobs'],\n  });\n\n  const { data: questions = [] } = useQuery<Question[]>({\n    queryKey: ['/api/company/questions'],\n  });\n\n  const { data: companyCredits = 0 } = useQuery<number>({\n    queryKey: ['/api/company/credits'],\n  });\n\n  const { data: globalWorkTypes = [] } = useQuery<GlobalWorkType[]>({\n    queryKey: ['/api/admin/global-work-types'],\n  });\n\n  const { data: globalContractTypes = [] } = useQuery<GlobalContractType[]>({\n    queryKey: ['/api/admin/global-contract-types'],\n  });\n\n  const { data: tags = [] } = useQuery<Tag[]>({\n    queryKey: ['/api/admin/tags'],\n  });\n\n  const createJobMutation = useMutation({\n    mutationFn: async (data: JobFormValues) => {\n      const response = await apiRequest('POST', '/api/jobs', data);\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao criar vaga\");\n      }\n      const job = await response.json();\n      \n      if (selectedQuestions.length > 0) {\n        const questionsResponse = await apiRequest('POST', `/api/jobs/${job.id}/questions`, {\n          questionIds: selectedQuestions\n        });\n        if (!questionsResponse.ok) {\n          const error = await questionsResponse.json();\n          throw new Error(error.message || \"Erro ao adicionar perguntas\");\n        }\n      }\n      \n      return job;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/company/credits'] });\n      setDialogOpen(false);\n      setCurrentStep(1);\n      setSelectedQuestions([]);\n      setSelectedTags([]);\n      form.reset();\n      toast({\n        title: \"Vaga criada com sucesso!\",\n        description: \"Sua vaga foi publicada e 1 crédito foi debitado da sua conta.\",\n      });\n    },\n    onError: (error: any) => {\n      if (error?.insufficientCredits) {\n        toast({\n          variant: \"destructive\",\n          title: \"Créditos insuficientes\",\n          description: error.message || \"Você não possui créditos suficientes para publicar uma vaga.\",\n          action: (\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              onClick={() => window.location.href = '/empresa/plano'}\n              data-testid=\"button-buy-credits-toast\"\n            >\n              Comprar Créditos\n            </Button>\n          ),\n        });\n      } else {\n        toast({\n          variant: \"destructive\",\n          title: \"Erro ao criar vaga\",\n          description: error.message || \"Tente novamente mais tarde.\",\n        });\n      }\n    },\n  });\n\n  const deleteJobMutation = useMutation({\n    mutationFn: async (jobId: string) => {\n      await apiRequest('DELETE', `/api/jobs/${jobId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs'] });\n      setDeleteDialogOpen(false);\n      setJobToDelete(null);\n      toast({\n        title: \"Vaga excluída com sucesso!\",\n        description: \"A vaga foi removida do sistema.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir vaga\",\n        description: \"Tente novamente mais tarde.\",\n      });\n    },\n  });\n\n  const toggleStatusMutation = useMutation({\n    mutationFn: async ({ jobId, newStatus }: { jobId: string; newStatus: string }) => {\n      const response = await apiRequest('PATCH', `/api/jobs/${jobId}/status`, { status: newStatus });\n      return response.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs'] });\n      toast({\n        title: variables.newStatus === 'active' ? \"Vaga ativada!\" : \"Vaga suspensa!\",\n        description: variables.newStatus === 'active' \n          ? \"A vaga agora está visível para candidatos.\" \n          : \"A vaga foi pausada temporariamente.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar status\",\n        description: \"Tente novamente mais tarde.\",\n      });\n    },\n  });\n\n  const form = useForm<JobFormValues>({\n    resolver: zodResolver(jobFormSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      requirements: \"\",\n      responsibilities: \"\",\n      benefits: \"\",\n      location: \"\",\n      city: \"\",\n      state: \"\",\n      workType: \"\",\n      contractType: \"\",\n      salary: \"\",\n      salaryPeriod: \"mensal\",\n      experienceLevel: \"\",\n      educationLevel: \"\",\n      vacancies: \"1\",\n      status: \"active\",\n    },\n  });\n\n  const handlePublishJob = async () => {\n    const isValid = await form.trigger();\n    if (isValid) {\n      const data = form.getValues();\n      const jobData = {\n        ...data,\n        tags: selectedTags,\n      };\n      createJobMutation.mutate(jobData);\n    }\n  };\n\n  const handleFormSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n  };\n\n  const nextStep = async () => {\n    let fieldsToValidate: (keyof JobFormValues)[] = [];\n    \n    if (currentStep === 1) {\n      fieldsToValidate = ['title', 'location', 'workType', 'contractType'];\n    } else if (currentStep === 2) {\n      fieldsToValidate = ['description'];\n    }\n\n    const isValid = await form.trigger(fieldsToValidate);\n    \n    if (isValid) {\n      setCurrentStep((prev) => Math.min(prev + 1, 4));\n    }\n  };\n\n  const prevStep = () => {\n    setCurrentStep((prev) => Math.max(prev - 1, 1));\n  };\n\n  const clearFilters = () => {\n    setSearchTerm(\"\");\n    setLocationFilter(\"\");\n    setStatusFilter(\"all\");\n    setDateFrom(\"\");\n    setDateTo(\"\");\n  };\n\n  const hasActiveFilters = searchTerm || locationFilter || statusFilter !== \"all\" || dateFrom || dateTo;\n\n  const filteredJobs = jobs.filter((job) => {\n    // Filtro por nome da vaga\n    if (searchTerm && !job.title.toLowerCase().includes(searchTerm.toLowerCase())) {\n      return false;\n    }\n\n    // Filtro por localização\n    if (locationFilter && !job.location.toLowerCase().includes(locationFilter.toLowerCase())) {\n      return false;\n    }\n\n    // Filtro por status\n    if (statusFilter !== \"all\" && job.status !== statusFilter) {\n      return false;\n    }\n\n    // Filtro por data de criação\n    if (dateFrom) {\n      const jobDate = new Date(job.createdAt);\n      const fromDate = new Date(dateFrom);\n      if (jobDate < fromDate) {\n        return false;\n      }\n    }\n\n    if (dateTo) {\n      const jobDate = new Date(job.createdAt);\n      const toDate = new Date(dateTo);\n      toDate.setHours(23, 59, 59, 999); // Incluir o dia inteiro\n      if (jobDate > toDate) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  const activeJobs = jobs.filter((job) => job.status === 'active').length;\n  const suspendedJobs = jobs.filter((job) => job.status === 'suspended').length;\n\n  return (\n    <>\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        <div className=\"space-y-6\">\n          <div className=\"flex flex-col gap-4\">\n        <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\n          <div className=\"relative flex-1 max-w-md\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Buscar por nome da vaga...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n              data-testid=\"input-search-jobs\"\n            />\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"default\"\n              onClick={() => setShowFilters(!showFilters)}\n              data-testid=\"button-toggle-filters\"\n            >\n              <Filter className=\"h-4 w-4 mr-2\" />\n              Filtros\n              {hasActiveFilters && (\n                <span className=\"ml-2 bg-primary text-primary-foreground rounded-full w-5 h-5 flex items-center justify-center text-xs\">\n                  !\n                </span>\n              )}\n            </Button>\n            \n            <Button \n              size=\"lg\" \n              onClick={() => setCreditsDialogOpen(true)} \n              className=\"shadow-lg\" \n              data-testid=\"button-new-job\"\n            >\n              <Plus className=\"h-5 w-5 mr-2\" />\n              Nova Vaga\n            </Button>\n\n            <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n              <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n                <DialogHeader>\n                  <DialogTitle>Criar Nova Vaga</DialogTitle>\n                  <DialogDescription>\n                    Preencha as informações da vaga em {currentStep} de 4 etapas\n                  </DialogDescription>\n                </DialogHeader>\n\n            <div className=\"flex items-center justify-between mb-6\">\n              {[1, 2, 3, 4].map((step) => (\n                <div key={step} className=\"flex items-center flex-1\">\n                  <div\n                    className={`flex items-center justify-center w-8 h-8 rounded-full border-2 ${\n                      currentStep >= step\n                        ? 'bg-primary border-primary text-primary-foreground'\n                        : 'border-muted-foreground text-muted-foreground'\n                    }`}\n                  >\n                    {step}\n                  </div>\n                  {step < 4 && (\n                    <div\n                      className={`flex-1 h-0.5 mx-2 ${\n                        currentStep > step ? 'bg-primary' : 'bg-muted'\n                      }`}\n                    />\n                  )}\n                </div>\n              ))}\n            </div>\n\n            <Form {...form}>\n              <form onSubmit={handleFormSubmit} className=\"space-y-4\">\n                {currentStep === 1 && (\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-lg\">Informações Básicas</h3>\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Título da Vaga *</FormLabel>\n                          <FormControl>\n                            <Input placeholder=\"Ex: Operador de Guindaste\" {...field} data-testid=\"input-job-title\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"location\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex flex-col\">\n                            <FormLabel>Localização *</FormLabel>\n                            <Popover open={locationOpen} onOpenChange={setLocationOpen}>\n                              <PopoverTrigger asChild>\n                                <FormControl>\n                                  <Button\n                                    variant=\"outline\"\n                                    role=\"combobox\"\n                                    aria-expanded={locationOpen}\n                                    className={cn(\n                                      \"justify-between\",\n                                      !field.value && \"text-muted-foreground\"\n                                    )}\n                                    data-testid=\"select-job-location\"\n                                  >\n                                    {field.value\n                                      ? brazilianCities.find(\n                                          (city) => city.value === field.value\n                                        )?.label\n                                      : \"Selecione uma cidade\"}\n                                    <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n                                  </Button>\n                                </FormControl>\n                              </PopoverTrigger>\n                              <PopoverContent className=\"w-[300px] p-0\">\n                                <Command>\n                                  <CommandInput placeholder=\"Buscar cidade...\" />\n                                  <CommandList>\n                                    <CommandEmpty>Nenhuma cidade encontrada.</CommandEmpty>\n                                    <CommandGroup>\n                                      {brazilianCities.map((city) => (\n                                        <CommandItem\n                                          key={city.value}\n                                          value={city.label}\n                                          onSelect={() => {\n                                            form.setValue(\"location\", city.value);\n                                            form.setValue(\"city\", city.label.split(\",\")[0].trim());\n                                            form.setValue(\"state\", city.state);\n                                            setLocationOpen(false);\n                                          }}\n                                        >\n                                          <Check\n                                            className={cn(\n                                              \"mr-2 h-4 w-4\",\n                                              field.value === city.value\n                                                ? \"opacity-100\"\n                                                : \"opacity-0\"\n                                            )}\n                                          />\n                                          {city.label}\n                                        </CommandItem>\n                                      ))}\n                                    </CommandGroup>\n                                  </CommandList>\n                                </Command>\n                              </PopoverContent>\n                            </Popover>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"vacancies\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Número de Vagas</FormLabel>\n                            <FormControl>\n                              <Input type=\"number\" min=\"1\" {...field} data-testid=\"input-job-vacancies\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"workType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Tipo de Trabalho *</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-work-type\">\n                                  <SelectValue placeholder=\"Selecione\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {globalWorkTypes\n                                  .filter(wt => wt.isActive === 'true')\n                                  .map((workType) => (\n                                    <SelectItem key={workType.id} value={workType.name}>\n                                      {workType.name}\n                                    </SelectItem>\n                                  ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"contractType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Tipo de Contrato *</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-contract-type\">\n                                  <SelectValue placeholder=\"Selecione\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {globalContractTypes\n                                  .filter(ct => ct.isActive === 'true')\n                                  .map((contractType) => (\n                                    <SelectItem key={contractType.id} value={contractType.name}>\n                                      {contractType.name}\n                                    </SelectItem>\n                                  ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <FormLabel>Tags (Opcional)</FormLabel>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Selecione tags que descrevem melhor esta vaga\n                      </p>\n                      {tags.filter(t => t.isActive === 'true').length === 0 ? (\n                        <p className=\"text-sm text-muted-foreground py-4\">\n                          Nenhuma tag disponível no momento.\n                        </p>\n                      ) : (\n                        <div className=\"flex flex-wrap gap-2\">\n                          {tags\n                            .filter(t => t.isActive === 'true')\n                            .map((tag) => (\n                              <Badge\n                                key={tag.id}\n                                variant={selectedTags.includes(tag.name) ? \"default\" : \"outline\"}\n                                className=\"cursor-pointer\"\n                                onClick={() => {\n                                  if (selectedTags.includes(tag.name)) {\n                                    setSelectedTags(selectedTags.filter(t => t !== tag.name));\n                                  } else {\n                                    setSelectedTags([...selectedTags, tag.name]);\n                                  }\n                                }}\n                                data-testid={`badge-tag-${tag.id}`}\n                              >\n                                {tag.name}\n                              </Badge>\n                            ))}\n                        </div>\n                      )}\n                      {selectedTags.length > 0 && (\n                        <p className=\"text-sm text-muted-foreground mt-2\">\n                          {selectedTags.length} {selectedTags.length === 1 ? 'tag selecionada' : 'tags selecionadas'}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {currentStep === 2 && (\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-lg\">Descrição e Requisitos</h3>\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Descrição da Vaga *</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Descreva as principais atividades e responsabilidades...\"\n                              className=\"min-h-[120px]\"\n                              {...field}\n                              data-testid=\"textarea-job-description\"\n                            />\n                          </FormControl>\n                          <FormDescription>\n                            Mínimo de 20 caracteres\n                          </FormDescription>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"requirements\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Requisitos</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Liste os requisitos necessários (um por linha)\"\n                              className=\"min-h-[100px]\"\n                              {...field}\n                              value={field.value || ''}\n                              data-testid=\"textarea-job-requirements\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"responsibilities\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Responsabilidades</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Liste as principais responsabilidades (uma por linha)\"\n                              className=\"min-h-[100px]\"\n                              {...field}\n                              value={field.value || ''}\n                              data-testid=\"textarea-job-responsibilities\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                )}\n\n                {currentStep === 3 && (\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-lg\">Detalhes Complementares</h3>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"salary\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Salário</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Ex: R$ 5.000,00\" {...field} value={field.value || ''} data-testid=\"input-job-salary\" />\n                            </FormControl>\n                            <FormDescription>Deixe em branco para \"A combinar\"</FormDescription>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n\n                      <FormField\n                        control={form.control}\n                        name=\"experienceLevel\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Nível de Experiência</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value || ''}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-experience-level\">\n                                  <SelectValue placeholder=\"Selecione\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"junior\">Júnior</SelectItem>\n                                <SelectItem value=\"pleno\">Pleno</SelectItem>\n                                <SelectItem value=\"senior\">Sênior</SelectItem>\n                                <SelectItem value=\"especialista\">Especialista</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"benefits\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Benefícios</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Liste os benefícios oferecidos (um por linha)\"\n                              className=\"min-h-[100px]\"\n                              {...field}\n                              value={field.value || ''}\n                              data-testid=\"textarea-job-benefits\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"educationLevel\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Escolaridade</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value || ''}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-education-level\">\n                                <SelectValue placeholder=\"Selecione\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"fundamental\">Ensino Fundamental</SelectItem>\n                              <SelectItem value=\"medio\">Ensino Médio</SelectItem>\n                              <SelectItem value=\"tecnico\">Técnico</SelectItem>\n                              <SelectItem value=\"superior\">Superior</SelectItem>\n                              <SelectItem value=\"pos\">Pós-graduação</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                )}\n\n                {currentStep === 4 && (\n                  <div className=\"space-y-4\">\n                    <h3 className=\"font-semibold text-lg\">Questionário (Opcional)</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Selecione as perguntas que os candidatos devem responder ao se candidatar a esta vaga.\n                    </p>\n                    \n                    {questions.filter(q => q.isActive === 'true').length === 0 ? (\n                      <Card className=\"p-6 text-center\">\n                        <p className=\"text-muted-foreground mb-4\">\n                          Você ainda não criou nenhuma pergunta. Crie perguntas no Banco de Perguntas para poder adicioná-las às suas vagas.\n                        </p>\n                        <Link href=\"/empresa/banco-perguntas\">\n                          <Button variant=\"outline\" data-testid=\"link-create-questions\">\n                            Ir para Banco de Perguntas\n                          </Button>\n                        </Link>\n                      </Card>\n                    ) : (\n                      <div className=\"space-y-3\">\n                        {questions\n                          .filter(q => q.isActive === 'true')\n                          .map((question) => (\n                            <Card key={question.id} className=\"p-4\">\n                              <div className=\"flex items-start gap-3\">\n                                <Checkbox\n                                  checked={selectedQuestions.includes(question.id)}\n                                  onCheckedChange={(checked) => {\n                                    if (checked) {\n                                      setSelectedQuestions([...selectedQuestions, question.id]);\n                                    } else {\n                                      setSelectedQuestions(selectedQuestions.filter(id => id !== question.id));\n                                    }\n                                  }}\n                                  data-testid={`checkbox-question-${question.id}`}\n                                />\n                                <div className=\"flex-1\">\n                                  <p className=\"font-medium\">{question.questionText}</p>\n                                  <div className=\"flex items-center gap-2 mt-1\">\n                                    <Badge variant=\"outline\" className=\"text-xs\">\n                                      {question.questionType === 'text' && 'Texto Livre'}\n                                      {question.questionType === 'multiple_choice' && 'Múltipla Escolha'}\n                                      {question.questionType === 'textarea' && 'Texto Longo'}\n                                    </Badge>\n                                  </div>\n                                  {question.questionType === 'multiple_choice' && question.options && (\n                                    <p className=\"text-xs text-muted-foreground mt-1\">\n                                      Opções: {question.options.split(',').join(', ')}\n                                    </p>\n                                  )}\n                                </div>\n                              </div>\n                            </Card>\n                          ))}\n                      </div>\n                    )}\n                    \n                    {selectedQuestions.length > 0 && (\n                      <p className=\"text-sm text-muted-foreground\">\n                        {selectedQuestions.length} {selectedQuestions.length === 1 ? 'pergunta selecionada' : 'perguntas selecionadas'}\n                      </p>\n                    )}\n                  </div>\n                )}\n\n                <Separator className=\"my-4\" />\n\n                <div className=\"flex justify-between\">\n                  {currentStep > 1 && (\n                    <Button type=\"button\" variant=\"outline\" onClick={prevStep} data-testid=\"button-prev-step\">\n                      <ChevronLeft className=\"h-4 w-4 mr-2\" />\n                      Anterior\n                    </Button>\n                  )}\n                  \n                  {currentStep < 4 ? (\n                    <Button type=\"button\" onClick={nextStep} className=\"ml-auto\" data-testid=\"button-next-step\">\n                      Próximo\n                      <ChevronRight className=\"h-4 w-4 ml-2\" />\n                    </Button>\n                  ) : (\n                    <Button \n                      type=\"button\"\n                      onClick={handlePublishJob}\n                      disabled={createJobMutation.isPending}\n                      className=\"ml-auto\"\n                      data-testid=\"button-submit-job\"\n                    >\n                      {createJobMutation.isPending ? \"Criando...\" : \"Publicar Vaga\"}\n                    </Button>\n                  )}\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n          </div>\n        </div>\n\n        {/* Painel de Filtros Expandido */}\n        {showFilters && (\n          <Card className=\"p-4\">\n            <div className=\"grid gap-4 md:grid-cols-3\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">Localização</label>\n                <Input\n                  placeholder=\"Ex: São Paulo, SP\"\n                  value={locationFilter}\n                  onChange={(e) => setLocationFilter(e.target.value)}\n                  data-testid=\"input-filter-location\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">Status</label>\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                  <SelectTrigger data-testid=\"select-filter-status\">\n                    <SelectValue placeholder=\"Todos\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Todas</SelectItem>\n                    <SelectItem value=\"active\">Ativas</SelectItem>\n                    <SelectItem value=\"suspended\">Suspensas</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">Data de Criação</label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    type=\"date\"\n                    placeholder=\"De\"\n                    value={dateFrom}\n                    onChange={(e) => setDateFrom(e.target.value)}\n                    data-testid=\"input-filter-date-from\"\n                  />\n                  <Input\n                    type=\"date\"\n                    placeholder=\"Até\"\n                    value={dateTo}\n                    onChange={(e) => setDateTo(e.target.value)}\n                    data-testid=\"input-filter-date-to\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {hasActiveFilters && (\n              <div className=\"mt-4 pt-4 border-t flex justify-between items-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  {filteredJobs.length} {filteredJobs.length === 1 ? 'vaga encontrada' : 'vagas encontradas'}\n                </p>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={clearFilters}\n                  data-testid=\"button-clear-filters\"\n                >\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Limpar Filtros\n                </Button>\n              </div>\n            )}\n          </Card>\n        )}\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-3 mb-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Vagas Ativas\n            </CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-active-jobs\">{activeJobs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Vagas publicadas atualmente\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Total de Vagas\n            </CardTitle>\n            <Building2 className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-jobs\">{jobs.length}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Todas as vagas criadas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Vagas Suspensas\n            </CardTitle>\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-suspended-jobs\">{suspendedJobs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Temporariamente pausadas\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center text-muted-foreground\">Carregando vagas...</div>\n          </CardContent>\n        </Card>\n      ) : filteredJobs.length > 0 ? (\n        <div className=\"space-y-6\">\n          {filteredJobs.map((job) => (\n            <Card key={job.id} className=\"hover-elevate transition-all border-2 shadow-sm\" data-testid={`card-job-${job.id}`}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start justify-between gap-3 mb-3\">\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-semibold mb-1.5 text-foreground\">{job.title}</h3>\n                    <div className=\"flex flex-wrap gap-1.5 mb-2\">\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        <MapPin className=\"h-3 w-3 mr-1\" />\n                        {job.location}\n                      </Badge>\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {job.workType}\n                      </Badge>\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {job.contractType}\n                      </Badge>\n                      {job.salary && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          <DollarSign className=\"h-3 w-3 mr-1\" />\n                          {job.salary}\n                        </Badge>\n                      )}\n                      {job.tags && job.tags.length > 0 && job.tags.map((tag, index) => (\n                        <Badge key={index} variant=\"default\" className=\"text-xs\">\n                          {tag}\n                        </Badge>\n                      ))}\n                    </div>\n                    <p className=\"text-sm text-muted-foreground truncate\">\n                      {job.description.length > 20 \n                        ? `${job.description.substring(0, 20)}...` \n                        : job.description}\n                    </p>\n                  </div>\n                  <Badge\n                    className={cn(\n                      \"shrink-0 text-xs\",\n                      job.status === 'active'\n                        ? 'bg-green-500/15 text-green-700 border-green-500/30 dark:text-green-400'\n                        : 'bg-orange-500/15 text-orange-700 border-orange-500/30 dark:text-orange-400'\n                    )}\n                    variant=\"outline\"\n                  >\n                    {job.status === 'active' ? '● Ativa' : '⏸ Suspensa'}\n                  </Badge>\n                </div>\n\n                <div className=\"flex items-center justify-between gap-3 pt-3 border-t\">\n                  <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                    <span className=\"flex items-center gap-1\">\n                      <Clock className=\"h-3 w-3\" />\n                      {new Date(job.createdAt).toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' })}\n                    </span>\n                    {job.vacancies && (\n                      <span className=\"flex items-center gap-1\">\n                        <Users className=\"h-3 w-3\" />\n                        {job.vacancies} {job.vacancies === '1' ? 'vaga' : 'vagas'}\n                      </span>\n                    )}\n                    <span className=\"flex items-center gap-1\">\n                      <UserCheck className=\"h-3 w-3\" />\n                      {job.applicationCount || 0} {job.applicationCount === 1 ? 'candidatura' : 'candidaturas'}\n                    </span>\n                    <span className=\"flex items-center gap-1\" title=\"Visualizações\">\n                      <Eye className=\"h-3 w-3\" />\n                      {job.viewCount || 0}\n                    </span>\n                  </div>\n\n                  <div className=\"flex items-center gap-1.5\">\n                    <Link href={`/vaga/${job.id}`}>\n                      <Button\n                        size=\"sm\"\n                        variant=\"default\"\n                        data-testid={`button-view-job-page-${job.id}`}\n                      >\n                        <ExternalLink className=\"h-4 w-4 mr-1.5\" />\n                        Visualizar Vaga\n                      </Button>\n                    </Link>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setSelectedJob(job);\n                        setDetailsOpen(true);\n                      }}\n                      data-testid={`button-view-details-${job.id}`}\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                    <Link href={`/empresa/vaga/${job.id}/candidatos`}>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        title=\"Ver candidatos\"\n                        data-testid={`button-candidates-${job.id}`}\n                      >\n                        <UserCheck className=\"h-4 w-4\" />\n                      </Button>\n                    </Link>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        const newStatus = job.status === 'active' ? 'suspended' : 'active';\n                        toggleStatusMutation.mutate({ jobId: job.id, newStatus });\n                      }}\n                      disabled={toggleStatusMutation.isPending}\n                      data-testid={`button-toggle-status-${job.id}`}\n                      title={job.status === 'active' ? 'Suspender vaga' : 'Ativar vaga'}\n                    >\n                      {job.status === 'active' ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setJobToDelete(job.id);\n                        setDeleteDialogOpen(true);\n                      }}\n                      data-testid={`button-delete-job-${job.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <Card>\n          <CardHeader>\n            <CardTitle>Suas Vagas</CardTitle>\n            <CardDescription>\n              Gerencie e acompanhe suas vagas publicadas\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n              <div className=\"bg-muted rounded-full p-6 mb-4\">\n                <Briefcase className=\"h-12 w-12 text-muted-foreground\" />\n              </div>\n              <h3 className=\"font-semibold text-lg mb-2\">\n                Nenhuma vaga publicada\n              </h3>\n              <p className=\"text-muted-foreground mb-6 max-w-sm\">\n                Comece publicando sua primeira vaga para atrair os melhores profissionais do setor\n              </p>\n              <Button onClick={() => setDialogOpen(true)} data-testid=\"button-create-first-job\">\n                <Plus className=\"mr-2 h-5 w-5\" />\n                Publicar Primeira Vaga\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Modal de Detalhes da Vaga */}\n      <Dialog open={detailsOpen} onOpenChange={setDetailsOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{selectedJob?.title}</DialogTitle>\n            <DialogDescription>\n              Detalhes completos da vaga\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedJob && (\n            <div className=\"space-y-6\">\n              <div className=\"flex flex-wrap gap-2\">\n                <Badge variant=\"outline\">\n                  <MapPin className=\"h-3 w-3 mr-1\" />\n                  {selectedJob.location}\n                </Badge>\n                <Badge variant=\"outline\">{selectedJob.workType}</Badge>\n                <Badge variant=\"outline\">{selectedJob.contractType}</Badge>\n                {selectedJob.salary && (\n                  <Badge variant=\"outline\">\n                    <DollarSign className=\"h-3 w-3 mr-1\" />\n                    {selectedJob.salary}\n                  </Badge>\n                )}\n                <Badge\n                  className={\n                    selectedJob.status === 'active'\n                      ? 'bg-green-500/10 text-green-700 dark:text-green-400'\n                      : 'bg-orange-500/10 text-orange-700 dark:text-orange-400'\n                  }\n                >\n                  {selectedJob.status === 'active' ? 'Ativa' : 'Suspensa'}\n                </Badge>\n              </div>\n\n              <Separator />\n\n              <div>\n                <h3 className=\"font-semibold mb-2\">Descrição</h3>\n                <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                  {selectedJob.description}\n                </p>\n              </div>\n\n              {selectedJob.requirements && (\n                <div>\n                  <h3 className=\"font-semibold mb-2\">Requisitos</h3>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                    {selectedJob.requirements}\n                  </p>\n                </div>\n              )}\n\n              {selectedJob.responsibilities && (\n                <div>\n                  <h3 className=\"font-semibold mb-2\">Responsabilidades</h3>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                    {selectedJob.responsibilities}\n                  </p>\n                </div>\n              )}\n\n              {selectedJob.benefits && (\n                <div>\n                  <h3 className=\"font-semibold mb-2\">Benefícios</h3>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                    {selectedJob.benefits}\n                  </p>\n                </div>\n              )}\n\n              <Separator />\n\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                {selectedJob.experienceLevel && (\n                  <div>\n                    <span className=\"font-semibold\">Nível de Experiência:</span>\n                    <p className=\"text-muted-foreground capitalize\">{selectedJob.experienceLevel}</p>\n                  </div>\n                )}\n                {selectedJob.educationLevel && (\n                  <div>\n                    <span className=\"font-semibold\">Escolaridade:</span>\n                    <p className=\"text-muted-foreground capitalize\">{selectedJob.educationLevel}</p>\n                  </div>\n                )}\n                {selectedJob.vacancies && (\n                  <div>\n                    <span className=\"font-semibold\">Vagas:</span>\n                    <p className=\"text-muted-foreground\">{selectedJob.vacancies}</p>\n                  </div>\n                )}\n                <div>\n                  <span className=\"font-semibold\">Publicado em:</span>\n                  <p className=\"text-muted-foreground\">\n                    {new Date(selectedJob.createdAt).toLocaleDateString('pt-BR')}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Dialog de Verificação de Créditos */}\n      <AlertDialog open={creditsDialogOpen} onOpenChange={setCreditsDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"flex items-center gap-2\">\n              <Coins className=\"h-6 w-6 text-primary\" />\n              Publicar Nova Vaga\n            </AlertDialogTitle>\n            <AlertDialogDescription asChild>\n              <div className=\"space-y-4 pt-2\">\n                <div className=\"bg-muted rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm font-medium text-foreground\">Créditos Disponíveis:</span>\n                    <Badge variant={companyCredits > 0 ? \"default\" : \"destructive\"} className=\"text-lg px-3 py-1\">\n                      <Coins className=\"h-4 w-4 mr-1\" />\n                      {companyCredits}\n                    </Badge>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-foreground\">Custo da Publicação:</span>\n                    <Badge variant=\"outline\" className=\"text-lg px-3 py-1\">\n                      <Coins className=\"h-4 w-4 mr-1\" />\n                      1\n                    </Badge>\n                  </div>\n                </div>\n\n                {companyCredits > 0 ? (\n                  <div className=\"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg\">\n                    <AlertCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\n                    <div className=\"text-sm text-blue-900 dark:text-blue-100\">\n                      <p className=\"font-medium mb-1\">Confirmar publicação</p>\n                      <p>\n                        Ao publicar esta vaga, <strong>1 crédito</strong> será debitado da sua conta. \n                        Você ficará com <strong>{companyCredits - 1} crédito{companyCredits - 1 !== 1 ? 's' : ''}</strong> restante{companyCredits - 1 !== 1 ? 's' : ''}.\n                      </p>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg\">\n                    <AlertCircle className=\"h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5\" />\n                    <div className=\"text-sm text-orange-900 dark:text-orange-100\">\n                      <p className=\"font-medium mb-1\">Créditos Insuficientes</p>\n                      <p>\n                        Você não possui créditos suficientes para publicar uma vaga. \n                        Adquira mais créditos através da compra de planos para continuar publicando suas oportunidades.\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-credits\">Cancelar</AlertDialogCancel>\n            {companyCredits > 0 ? (\n              <AlertDialogAction\n                onClick={() => {\n                  setCreditsDialogOpen(false);\n                  setCurrentStep(1);\n                  setDialogOpen(true);\n                }}\n                data-testid=\"button-confirm-credits\"\n              >\n                Continuar\n              </AlertDialogAction>\n            ) : (\n              <AlertDialogAction\n                onClick={() => {\n                  setCreditsDialogOpen(false);\n                  window.location.href = '/empresa/plano';\n                }}\n                data-testid=\"button-buy-credits\"\n              >\n                Comprar Créditos\n              </AlertDialogAction>\n            )}\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Dialog de Confirmação de Exclusão */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Tem certeza?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Esta ação não pode ser desfeita. A vaga será permanentemente excluída do sistema.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => {\n                if (jobToDelete) {\n                  deleteJobMutation.mutate(jobToDelete);\n                }\n              }}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete\"\n            >\n              {deleteJobMutation.isPending ? \"Excluindo...\" : \"Excluir Vaga\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":57334},"client/src/components/CompanySidebar.tsx":{"content":"import { Building2, LayoutDashboard, Briefcase, CreditCard, Coins, FileQuestion } from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n} from \"@/components/ui/sidebar\";\nimport { useLocation, Link } from \"wouter\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport type { Company } from \"@shared/schema\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useMemo } from \"react\";\n\nconst mainMenuItems = [\n  {\n    title: \"Dashboard\",\n    url: \"/dashboard/empresa\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Minhas Vagas\",\n    url: \"/empresa/vagas\",\n    icon: Briefcase,\n  },\n  {\n    title: \"Meu Plano\",\n    url: \"/empresa/plano\",\n    icon: CreditCard,\n  },\n  {\n    title: \"Meus Créditos\",\n    url: \"/empresa/creditos\",\n    icon: Coins,\n  },\n  {\n    title: \"Perfil da Empresa\",\n    url: \"/empresa/perfil\",\n    icon: Building2,\n  },\n];\n\nconst questionnaireMenuItems = [\n  {\n    title: \"Banco de Perguntas\",\n    url: \"/empresa/banco-perguntas\",\n    icon: FileQuestion,\n  },\n];\n\nexport function CompanySidebar() {\n  const [location] = useLocation();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  \n  const company = user as Company;\n\n  // Timestamp fixo para cache-busting do logo (só muda quando logoUrl muda)\n  const logoTimestamp = useMemo(() => Date.now(), [company?.logoUrl]);\n\n  const prefetchData = (url: string) => {\n    if (url === '/empresa/vagas') {\n      queryClient.prefetchQuery({\n        queryKey: ['/api/jobs'],\n        staleTime: 1000 * 60 * 5,\n      });\n    }\n  };\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-6 border-b\">\n        <div className=\"flex items-center gap-3\">\n          <Avatar className=\"h-14 w-14 border-2 border-primary/20\">\n            <AvatarImage \n              src={company?.logoUrl ? `${company.logoUrl}?t=${logoTimestamp}` : undefined} \n              alt={company?.companyName || 'Logo da empresa'} \n            />\n            <AvatarFallback className=\"bg-gradient-to-br from-primary/10 to-primary/20 text-primary\">\n              <Building2 className=\"h-7 w-7\" />\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <h2 className=\"font-bold truncate text-base\" data-testid=\"text-company-name\">\n              {company?.companyName || 'Empresa'}\n            </h2>\n            <p className=\"text-xs text-muted-foreground font-medium\">Área da Empresa</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent className=\"pt-4 px-3\">\n        {/* Menu Principal */}\n        <SidebarGroup>\n          <SidebarGroupContent>\n            <SidebarMenu className=\"gap-2\">\n              {mainMenuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.url}\n                    data-testid={`sidebar-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                    className=\"h-11 px-4 rounded-lg font-medium\"\n                  >\n                    <Link \n                      href={item.url}\n                      onMouseEnter={() => prefetchData(item.url)}\n                      onFocus={() => prefetchData(item.url)}\n                    >\n                      <item.icon className=\"h-5 w-5 mr-3\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        {/* Questionários */}\n        <SidebarGroup className=\"mt-6\">\n          <SidebarGroupLabel className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-4 mb-2\">\n            Questionários\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu className=\"gap-2\">\n              {questionnaireMenuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.url}\n                    data-testid={`sidebar-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                    className=\"h-11 px-4 rounded-lg font-medium\"\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-5 w-5 mr-3\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n","size_bytes":4897},"client/src/pages/CompanyProfile.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Building2, Mail, Phone, Globe, FileText, Save, Camera, Image as ImageIcon, Sparkles, Target, Heart } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Company } from \"@shared/schema\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Separator } from \"@/components/ui/separator\";\n\nexport default function CompanyProfile() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [isEditing, setIsEditing] = useState(false);\n\n  const company = user as Company;\n\n  const [formData, setFormData] = useState({\n    companyName: company?.companyName || \"\",\n    email: company?.email || \"\",\n    phone: company?.phone || \"\",\n    website: company?.website || \"\",\n    description: company?.description || \"\",\n    industry: company?.industry || \"\",\n    size: company?.size || \"\",\n    about: company?.about || \"\",\n    mission: company?.mission || \"\",\n    culture: company?.culture || \"\",\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: Partial<Company>) => {\n      const response = await apiRequest(\"PATCH\", \"/api/companies/profile\", data);\n      if (!response.ok) {\n        throw new Error(\"Erro ao atualizar perfil\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n      toast({\n        title: \"Perfil atualizado!\",\n        description: \"As informações da empresa foram atualizadas com sucesso.\",\n      });\n      setIsEditing(false);\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar\",\n        description: \"Não foi possível atualizar o perfil. Tente novamente.\",\n      });\n    },\n  });\n\n  const handleLogoUpload = async (result: UploadResult<any, any>) => {\n    try {\n      if (result.successful && result.successful.length > 0) {\n        const uploadedFile = result.successful[0];\n        const logoURL = uploadedFile.uploadURL;\n\n        const response = await apiRequest(\"PUT\", \"/api/companies/logo\", {\n          logoURL,\n        });\n\n        if (response.ok) {\n          queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n          toast({\n            title: \"Logo atualizado!\",\n            description: \"O logo da empresa foi atualizado com sucesso.\",\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error uploading logo:\", error);\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer upload\",\n        description: \"Não foi possível atualizar o logo. Tente novamente.\",\n      });\n    }\n  };\n\n  const handleBannerUpload = async (result: UploadResult<any, any>) => {\n    try {\n      if (result.successful && result.successful.length > 0) {\n        const uploadedFile = result.successful[0];\n        const bannerURL = uploadedFile.uploadURL;\n\n        const response = await apiRequest(\"PUT\", \"/api/companies/banner\", {\n          bannerURL: bannerURL,\n        });\n\n        if (response.ok) {\n          queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n          toast({\n            title: \"Banner atualizado!\",\n            description: \"O banner da empresa foi atualizado com sucesso.\",\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error uploading banner:\", error);\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao fazer upload\",\n        description: \"Não foi possível atualizar o banner. Tente novamente.\",\n      });\n    }\n  };\n\n  const handleSave = () => {\n    updateProfileMutation.mutate(formData);\n  };\n\n  const handleCancel = () => {\n    setFormData({\n      companyName: company?.companyName || \"\",\n      email: company?.email || \"\",\n      phone: company?.phone || \"\",\n      website: company?.website || \"\",\n      description: company?.description || \"\",\n      industry: company?.industry || \"\",\n      size: company?.size || \"\",\n      about: company?.about || \"\",\n      mission: company?.mission || \"\",\n      culture: company?.culture || \"\",\n    });\n    setIsEditing(false);\n  };\n\n  return (\n    <>\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        <div className=\"space-y-6\">\n          <div className=\"flex justify-end\">\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} data-testid=\"button-edit-profile\">\n            Editar Perfil\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={handleCancel} data-testid=\"button-cancel-edit\">\n              Cancelar\n            </Button>\n            <Button \n              onClick={handleSave} \n              disabled={updateProfileMutation.isPending}\n              data-testid=\"button-save-profile\"\n            >\n              <Save className=\"h-4 w-4 mr-2\" />\n              {updateProfileMutation.isPending ? \"Salvando...\" : \"Salvar\"}\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Página de Apresentação */}\n      <Card className=\"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Sparkles className=\"h-5 w-5 text-primary\" />\n            Página de Apresentação\n          </CardTitle>\n          <CardDescription>\n            Crie uma página atrativa para candidatos conhecerem sua empresa antes de se candidatar às vagas\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Banner */}\n          <div className=\"space-y-3\">\n            <Label className=\"flex items-center gap-2\">\n              <ImageIcon className=\"h-4 w-4\" />\n              Banner de Apresentação\n            </Label>\n            {company?.bannerUrl && (\n              <div className=\"relative rounded-lg overflow-hidden border\">\n                <img \n                  src={company.bannerUrl} \n                  alt=\"Banner da empresa\"\n                  className=\"w-full h-48 object-cover\"\n                />\n              </div>\n            )}\n            <ObjectUploader\n              maxNumberOfFiles={1}\n              maxFileSize={5242880}\n              onGetUploadParameters={async () => {\n                const response = await apiRequest(\"POST\", \"/api/objects/upload\");\n                const data = await response.json();\n                return {\n                  method: \"PUT\",\n                  url: data.uploadURL,\n                  headers: {},\n                };\n              }}\n              onComplete={handleBannerUpload}\n              buttonClassName=\"gap-2\"\n              data-testid=\"uploader-company-banner\"\n            >\n              <Camera className=\"h-4 w-4\" />\n              {company?.bannerUrl ? \"Trocar Banner\" : \"Adicionar Banner\"}\n            </ObjectUploader>\n            <p className=\"text-xs text-muted-foreground\">\n              Imagem de capa que aparecerá no topo da sua página. Recomendado: 1200x400px\n            </p>\n          </div>\n\n          <Separator />\n\n          {/* Sobre a Empresa */}\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"about\" className=\"flex items-center gap-2 text-base font-semibold\">\n              <Building2 className=\"h-5 w-5 text-primary\" />\n              Sobre a Empresa\n            </Label>\n            <Textarea\n              id=\"about\"\n              value={isEditing ? formData.about : (company?.about || \"\")}\n              onChange={(e) => setFormData({ ...formData, about: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"Conte a história da sua empresa, o que vocês fazem, presença no mercado, principais conquistas...\"\n              rows={8}\n              className=\"text-base\"\n              data-testid=\"textarea-about\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Apresente sua empresa para os candidatos. Fale sobre o que vocês fazem, área de atuação e diferenciais.\n            </p>\n          </div>\n\n          <Separator />\n\n          {/* Missão */}\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"mission\" className=\"flex items-center gap-2 text-base font-semibold\">\n              <Target className=\"h-5 w-5 text-primary\" />\n              Nossa Missão\n            </Label>\n            <Textarea\n              id=\"mission\"\n              value={isEditing ? formData.mission : (company?.mission || \"\")}\n              onChange={(e) => setFormData({ ...formData, mission: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"Descreva a missão e objetivos da empresa...\"\n              rows={5}\n              className=\"text-base\"\n              data-testid=\"textarea-mission\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Qual é o propósito da sua empresa? O que vocês buscam alcançar?\n            </p>\n          </div>\n\n          <Separator />\n\n          {/* Cultura e Valores */}\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"culture\" className=\"flex items-center gap-2 text-base font-semibold\">\n              <Heart className=\"h-5 w-5 text-primary\" />\n              Cultura e Valores\n            </Label>\n            <Textarea\n              id=\"culture\"\n              value={isEditing ? formData.culture : (company?.culture || \"\")}\n              onChange={(e) => setFormData({ ...formData, culture: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"Descreva a cultura organizacional, valores, benefícios, ambiente de trabalho, oportunidades de crescimento...\"\n              rows={8}\n              className=\"text-base\"\n              data-testid=\"textarea-culture\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              O que torna sua empresa um ótimo lugar para trabalhar? Quais benefícios e oportunidades vocês oferecem?\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Informações da Empresa */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5\" />\n            Informações da Empresa\n          </CardTitle>\n          <CardDescription>\n            Dados cadastrais e informações de contato\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex flex-col items-center gap-4 p-4 border rounded-lg\">\n            <Avatar className=\"h-32 w-32\">\n              <AvatarImage \n                src={company?.logoUrl || undefined} \n                alt={company?.companyName}\n                className=\"object-cover\"\n              />\n              <AvatarFallback className=\"text-3xl bg-primary/10\">\n                <Building2 className=\"h-16 w-16 text-primary\" />\n              </AvatarFallback>\n            </Avatar>\n            <ObjectUploader\n              maxNumberOfFiles={1}\n              maxFileSize={5242880}\n              onGetUploadParameters={async () => {\n                const response = await apiRequest(\"POST\", \"/api/objects/upload\");\n                const data = await response.json();\n                return {\n                  method: \"PUT\",\n                  url: data.uploadURL,\n                  headers: {},\n                };\n              }}\n              onComplete={handleLogoUpload}\n              buttonClassName=\"gap-2\"\n              data-testid=\"uploader-company-logo\"\n            >\n              <Camera className=\"h-4 w-4\" />\n              {company?.logoUrl ? \"Trocar Logo\" : \"Adicionar Logo\"}\n            </ObjectUploader>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"companyName\">Nome da Empresa</Label>\n              <Input\n                id=\"companyName\"\n                value={isEditing ? formData.companyName : (company?.companyName || \"\")}\n                onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\n                disabled={!isEditing}\n                data-testid=\"input-company-name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"cnpj\">CNPJ</Label>\n              <Input\n                id=\"cnpj\"\n                value={company?.cnpj || \"\"}\n                disabled\n                data-testid=\"input-cnpj\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\" className=\"flex items-center gap-2\">\n                <Mail className=\"h-4 w-4\" />\n                E-mail\n              </Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                value={isEditing ? formData.email : (company?.email || \"\")}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                disabled={!isEditing}\n                data-testid=\"input-email\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\" className=\"flex items-center gap-2\">\n                <Phone className=\"h-4 w-4\" />\n                Telefone\n              </Label>\n              <Input\n                id=\"phone\"\n                value={isEditing ? formData.phone : (company?.phone || \"\")}\n                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                disabled={!isEditing}\n                data-testid=\"input-phone\"\n              />\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"website\" className=\"flex items-center gap-2\">\n                <Globe className=\"h-4 w-4\" />\n                Website\n              </Label>\n              <Input\n                id=\"website\"\n                value={isEditing ? formData.website : (company?.website || \"\")}\n                onChange={(e) => setFormData({ ...formData, website: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"https://www.suaempresa.com\"\n                data-testid=\"input-website\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Sobre a Empresa (Descrição Curta) */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Informações Adicionais\n          </CardTitle>\n          <CardDescription>\n            Detalhes sobre setor e tamanho da empresa\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Descrição Resumida</Label>\n            <Textarea\n              id=\"description\"\n              value={isEditing ? formData.description : (company?.description || \"\")}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              disabled={!isEditing}\n              placeholder=\"Breve descrição da empresa (aparece em listagens)...\"\n              rows={4}\n              data-testid=\"textarea-description\"\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"industry\">Indústria/Setor</Label>\n              <Input\n                id=\"industry\"\n                value={isEditing ? formData.industry : (company?.industry || \"\")}\n                onChange={(e) => setFormData({ ...formData, industry: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Ex: Mineração, Construção...\"\n                data-testid=\"input-industry\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"size\">Tamanho da Empresa</Label>\n              <Input\n                id=\"size\"\n                value={isEditing ? formData.size : (company?.size || \"\")}\n                onChange={(e) => setFormData({ ...formData, size: e.target.value })}\n                disabled={!isEditing}\n                placeholder=\"Ex: 50-100 funcionários\"\n                data-testid=\"input-size\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":16936},"server/emailService.ts":{"content":"import nodemailer from 'nodemailer';\nimport type { EmailSettings } from '@shared/schema';\n\nexport class EmailService {\n  private settings: EmailSettings;\n\n  constructor(settings: EmailSettings) {\n    this.settings = settings;\n  }\n\n  private async createTransporter() {\n    if (!this.settings || this.settings.isActive !== 'true') {\n      throw new Error('Email service is not configured or inactive');\n    }\n\n    const config: any = {\n      host: this.settings.smtpHost,\n      port: parseInt(this.settings.smtpPort || '587'),\n      secure: parseInt(this.settings.smtpPort || '587') === 465,\n      auth: {\n        user: this.settings.smtpUser,\n        pass: this.settings.smtpPassword,\n      },\n    };\n\n    return nodemailer.createTransport(config);\n  }\n\n  private static async createTransporter(settings: EmailSettings) {\n    if (!settings || settings.isActive !== 'true') {\n      throw new Error('Email service is not configured or inactive');\n    }\n\n    const config: any = {\n      host: settings.smtpHost,\n      port: parseInt(settings.smtpPort || '587'),\n      secure: parseInt(settings.smtpPort || '587') === 465,\n      auth: {\n        user: settings.smtpUser,\n        pass: settings.smtpPassword,\n      },\n    };\n\n    return nodemailer.createTransport(config);\n  }\n\n  static async sendTestEmail(settings: EmailSettings, recipientEmail: string): Promise<void> {\n    const transporter = await this.createTransporter(settings);\n\n    const mailOptions = {\n      from: `\"${settings.senderName}\" <${settings.senderEmail}>`,\n      to: recipientEmail,\n      subject: '🧪 Teste de Conexão SMTP - Operlist',\n      html: `\n        <!DOCTYPE html>\n        <html lang=\"pt-BR\">\n        <head>\n          <meta charset=\"UTF-8\">\n          <style>\n            body {\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n              line-height: 1.6;\n              color: #333;\n              max-width: 600px;\n              margin: 0 auto;\n              padding: 20px;\n            }\n            .header {\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              color: white;\n              padding: 30px;\n              border-radius: 8px;\n              text-align: center;\n              margin-bottom: 30px;\n            }\n            .header h1 {\n              margin: 0;\n              font-size: 28px;\n            }\n            .content {\n              background: #f8f9fa;\n              padding: 30px;\n              border-radius: 8px;\n              margin-bottom: 20px;\n            }\n            .success-badge {\n              display: inline-block;\n              background: #10b981;\n              color: white;\n              padding: 8px 16px;\n              border-radius: 20px;\n              font-weight: 600;\n              margin-bottom: 20px;\n            }\n            .info-box {\n              background: white;\n              border-left: 4px solid #667eea;\n              padding: 15px;\n              margin: 15px 0;\n              border-radius: 4px;\n            }\n            .footer {\n              text-align: center;\n              color: #6b7280;\n              font-size: 14px;\n              padding-top: 20px;\n              border-top: 1px solid #e5e7eb;\n            }\n            .config-list {\n              list-style: none;\n              padding: 0;\n            }\n            .config-list li {\n              padding: 8px 0;\n              border-bottom: 1px solid #e5e7eb;\n            }\n            .config-list li:last-child {\n              border-bottom: none;\n            }\n            strong {\n              color: #667eea;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>✅ Email Enviado com Sucesso!</h1>\n          </div>\n          \n          <div class=\"content\">\n            <div class=\"success-badge\">✓ Conexão SMTP Confirmada</div>\n            \n            <p>Parabéns! Sua configuração de email SMTP está funcionando perfeitamente.</p>\n            \n            <div class=\"info-box\">\n              <h3 style=\"margin-top: 0;\">📧 Configurações Testadas:</h3>\n              <ul class=\"config-list\">\n                <li><strong>Servidor SMTP:</strong> ${settings.smtpHost}</li>\n                <li><strong>Porta:</strong> ${settings.smtpPort}</li>\n                <li><strong>Usuário:</strong> ${settings.smtpUser}</li>\n                <li><strong>Remetente:</strong> ${settings.senderName} &lt;${settings.senderEmail}&gt;</li>\n                <li><strong>Status:</strong> Ativo</li>\n              </ul>\n            </div>\n            \n            <p>Este é um email de teste enviado pela plataforma <strong>Operlist</strong> para verificar a conectividade do servidor SMTP.</p>\n            \n            <p>Agora você pode usar o sistema de email para:</p>\n            <ul>\n              <li>Notificações de novas candidaturas</li>\n              <li>Alertas de novas vagas</li>\n              <li>Recuperação de senha</li>\n              <li>Confirmação de cadastro</li>\n            </ul>\n          </div>\n          \n          <div class=\"footer\">\n            <p>Enviado automaticamente pela plataforma Operlist</p>\n            <p style=\"font-size: 12px; color: #9ca3af;\">\n              Data: ${new Date().toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo' })}\n            </p>\n          </div>\n        </body>\n        </html>\n      `,\n      text: `\nTeste de Conexão SMTP - Operlist\n\n✅ Conexão SMTP Confirmada!\n\nParabéns! Sua configuração de email SMTP está funcionando perfeitamente.\n\nConfigurações Testadas:\n- Servidor SMTP: ${settings.smtpHost}\n- Porta: ${settings.smtpPort}\n- Usuário: ${settings.smtpUser}\n- Remetente: ${settings.senderName} <${settings.senderEmail}>\n- Status: Ativo\n\nEste é um email de teste enviado pela plataforma Operlist para verificar a conectividade do servidor SMTP.\n\n---\nEnviado automaticamente pela plataforma Operlist\nData: ${new Date().toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo' })}\n      `.trim(),\n    };\n\n    await transporter.sendMail(mailOptions);\n  }\n\n  static async sendEmail(\n    settings: EmailSettings,\n    to: string,\n    subject: string,\n    html: string,\n    text?: string\n  ): Promise<void> {\n    const transporter = await this.createTransporter(settings);\n\n    const mailOptions = {\n      from: `\"${settings.senderName}\" <${settings.senderEmail}>`,\n      to,\n      subject,\n      html,\n      text: text || html.replace(/<[^>]*>/g, ''),\n    };\n\n    await transporter.sendMail(mailOptions);\n  }\n\n  async sendPasswordResetCode(email: string, code: string, userName: string): Promise<void> {\n    const transporter = await this.createTransporter();\n\n    const mailOptions = {\n      from: `\"${this.settings.senderName}\" <${this.settings.senderEmail}>`,\n      to: email,\n      subject: '🔐 Código de Recuperação de Senha - Operlist',\n      html: `\n        <!DOCTYPE html>\n        <html lang=\"pt-BR\">\n        <head>\n          <meta charset=\"UTF-8\">\n          <style>\n            body {\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n              line-height: 1.6;\n              color: #333;\n              max-width: 600px;\n              margin: 0 auto;\n              padding: 20px;\n              background-color: #f8f9fa;\n            }\n            .container {\n              background: white;\n              border-radius: 12px;\n              overflow: hidden;\n              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            }\n            .header {\n              background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);\n              color: white;\n              padding: 40px 30px;\n              text-align: center;\n            }\n            .header h1 {\n              margin: 0;\n              font-size: 28px;\n              font-weight: 600;\n            }\n            .content {\n              padding: 40px 30px;\n            }\n            .greeting {\n              font-size: 18px;\n              margin-bottom: 20px;\n              color: #1f2937;\n            }\n            .code-container {\n              background: #f3f4f6;\n              border: 2px dashed #dc2626;\n              border-radius: 8px;\n              padding: 30px;\n              text-align: center;\n              margin: 30px 0;\n            }\n            .code {\n              font-size: 48px;\n              font-weight: 700;\n              letter-spacing: 8px;\n              color: #dc2626;\n              font-family: 'Courier New', monospace;\n            }\n            .code-label {\n              font-size: 14px;\n              color: #6b7280;\n              margin-top: 10px;\n            }\n            .info-box {\n              background: #fef3c7;\n              border-left: 4px solid #f59e0b;\n              padding: 15px;\n              margin: 20px 0;\n              border-radius: 4px;\n            }\n            .info-box strong {\n              color: #92400e;\n            }\n            .warning-box {\n              background: #fee2e2;\n              border-left: 4px solid #dc2626;\n              padding: 15px;\n              margin: 20px 0;\n              border-radius: 4px;\n              color: #991b1b;\n            }\n            .footer {\n              text-align: center;\n              color: #6b7280;\n              font-size: 14px;\n              padding: 30px;\n              background: #f9fafb;\n              border-top: 1px solid #e5e7eb;\n            }\n            .button {\n              display: inline-block;\n              background: #dc2626;\n              color: white;\n              padding: 12px 30px;\n              text-decoration: none;\n              border-radius: 6px;\n              font-weight: 600;\n              margin: 20px 0;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1>🔐 Recuperação de Senha</h1>\n            </div>\n            \n            <div class=\"content\">\n              <div class=\"greeting\">\n                Olá, <strong>${userName}</strong>!\n              </div>\n              \n              <p>Recebemos uma solicitação para redefinir a senha da sua conta na plataforma <strong>Operlist</strong>.</p>\n              \n              <p>Use o código abaixo para continuar com a recuperação:</p>\n              \n              <div class=\"code-container\">\n                <div class=\"code\">${code}</div>\n                <div class=\"code-label\">Código de Verificação</div>\n              </div>\n              \n              <div class=\"info-box\">\n                <strong>⏱️ Atenção:</strong> Este código é válido por <strong>15 minutos</strong>.\n              </div>\n              \n              <p>Após inserir o código, você poderá criar uma nova senha para sua conta.</p>\n              \n              <div class=\"warning-box\">\n                <strong>🔒 Segurança:</strong> Se você não solicitou esta recuperação de senha, ignore este email. Sua senha permanecerá inalterada.\n              </div>\n              \n              <p style=\"margin-top: 30px;\">Se tiver qualquer dúvida, entre em contato com nosso suporte.</p>\n            </div>\n            \n            <div class=\"footer\">\n              <p><strong>Operlist</strong> - Plataforma de Vagas para Operadores</p>\n              <p style=\"font-size: 12px; color: #9ca3af; margin-top: 10px;\">\n                Email enviado em ${new Date().toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo' })}\n              </p>\n            </div>\n          </div>\n        </body>\n        </html>\n      `,\n      text: `\n🔐 Recuperação de Senha - Operlist\n\nOlá, ${userName}!\n\nRecebemos uma solicitação para redefinir a senha da sua conta na plataforma Operlist.\n\nUse o código abaixo para continuar com a recuperação:\n\nCÓDIGO: ${code}\n\n⏱️ Atenção: Este código é válido por 15 minutos.\n\nApós inserir o código, você poderá criar uma nova senha para sua conta.\n\n🔒 Segurança: Se você não solicitou esta recuperação de senha, ignore este email. Sua senha permanecerá inalterada.\n\nSe tiver qualquer dúvida, entre em contato com nosso suporte.\n\n---\nOperlist - Plataforma de Vagas para Operadores\nEmail enviado em ${new Date().toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo' })}\n      `.trim(),\n    };\n\n    await transporter.sendMail(mailOptions);\n  }\n}\n","size_bytes":12426},"client/src/pages/PublicJobs.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Header } from \"@/components/Header\";\nimport { SaveJobButton } from \"@/components/SaveJobButton\";\nimport { \n  MapPin, \n  Briefcase, \n  Clock,\n  DollarSign,\n  Search,\n  Building2,\n  Filter,\n  X\n} from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport type { Job, GlobalWorkType, GlobalContractType } from \"@shared/schema\";\n\ninterface JobWithCompany extends Job {\n  companyName?: string;\n  companyLogo?: string;\n}\n\ninterface Filters {\n  workTypes: string[];\n  contractTypes: string[];\n  companies: string[];\n  locations: string[];\n}\n\nexport default function PublicJobs() {\n  const [location, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showFilters, setShowFilters] = useState(true);\n  const [filters, setFilters] = useState<Filters>({\n    workTypes: [],\n    contractTypes: [],\n    companies: [],\n    locations: [],\n  });\n\n  // Read search query from URL on mount and when URL changes\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const buscaParam = params.get('busca');\n    if (buscaParam) {\n      setSearchTerm(buscaParam);\n    }\n  }, [location]);\n\n  const { data: jobs = [], isLoading } = useQuery<JobWithCompany[]>({\n    queryKey: ['/api/public/jobs'],\n  });\n\n  const { data: globalWorkTypes = [] } = useQuery<GlobalWorkType[]>({\n    queryKey: ['/api/admin/global-work-types'],\n  });\n\n  const { data: globalContractTypes = [] } = useQuery<GlobalContractType[]>({\n    queryKey: ['/api/admin/global-contract-types'],\n  });\n\n  // Get unique values for filters\n  const filterOptions = useMemo(() => {\n    const companies = new Set<string>();\n    const locations = new Set<string>();\n    \n    jobs.forEach(job => {\n      if (job.companyName) companies.add(job.companyName);\n      if (job.location) locations.add(job.location);\n    });\n\n    return {\n      companies: Array.from(companies).sort(),\n      locations: Array.from(locations).sort(),\n    };\n  }, [jobs]);\n\n  const filteredJobs = jobs.filter(job => {\n    // Text search\n    if (searchTerm) {\n      const search = searchTerm.toLowerCase();\n      const matchesSearch = \n        job.title?.toLowerCase().includes(search) ||\n        job.location?.toLowerCase().includes(search) ||\n        job.companyName?.toLowerCase().includes(search) ||\n        job.description?.toLowerCase().includes(search);\n      \n      if (!matchesSearch) return false;\n    }\n\n    // Work type filter\n    if (filters.workTypes.length > 0 && job.workType) {\n      if (!filters.workTypes.includes(job.workType)) return false;\n    }\n\n    // Contract type filter\n    if (filters.contractTypes.length > 0 && job.contractType) {\n      if (!filters.contractTypes.includes(job.contractType)) return false;\n    }\n\n    // Company filter\n    if (filters.companies.length > 0 && job.companyName) {\n      if (!filters.companies.includes(job.companyName)) return false;\n    }\n\n    // Location filter\n    if (filters.locations.length > 0 && job.location) {\n      if (!filters.locations.includes(job.location)) return false;\n    }\n\n    return true;\n  });\n\n  const toggleFilter = (category: keyof Filters, value: string) => {\n    setFilters(prev => {\n      const current = prev[category];\n      const newValues = current.includes(value)\n        ? current.filter(v => v !== value)\n        : [...current, value];\n      \n      return { ...prev, [category]: newValues };\n    });\n  };\n\n  const clearAllFilters = () => {\n    setFilters({\n      workTypes: [],\n      contractTypes: [],\n      companies: [],\n      locations: [],\n    });\n  };\n\n  const hasActiveFilters = \n    filters.workTypes.length > 0 ||\n    filters.contractTypes.length > 0 ||\n    filters.companies.length > 0 ||\n    filters.locations.length > 0;\n\n  const formatSalary = (salary: string | null) => {\n    if (!salary) return null;\n    return `R$ ${parseFloat(salary).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;\n  };\n\n  const getWorkTypeLabel = (type: string | null) => {\n    if (!type) return null;\n    const workType = globalWorkTypes.find(wt => wt.name === type);\n    return workType?.name || type;\n  };\n\n  const getContractTypeLabel = (type: string | null) => {\n    if (!type) return null;\n    const contractType = globalContractTypes.find(ct => ct.name === type);\n    return contractType?.name || type;\n  };\n\n  return (\n    <>\n      <Header />\n      <div className=\"min-h-screen bg-gradient-to-b from-background to-muted/20\">\n        <div className=\"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-8\">\n          {/* Header Section */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold mb-2\">Vagas Disponíveis</h1>\n            <p className=\"text-muted-foreground text-lg\">\n              Explore oportunidades de trabalho nas melhores empresas\n            </p>\n          </div>\n\n          {/* Search Bar and Filter Toggle */}\n          <div className=\"mb-8 flex flex-col sm:flex-row gap-4\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n              <Input\n                placeholder=\"Buscar por cargo, empresa ou localização...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10 h-12 text-base\"\n                data-testid=\"input-search-jobs\"\n              />\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowFilters(!showFilters)}\n              className=\"sm:w-auto h-12\"\n              data-testid=\"button-toggle-filters\"\n            >\n              <Filter className=\"h-5 w-5 mr-2\" />\n              {showFilters ? 'Ocultar' : 'Mostrar'} Filtros\n              {hasActiveFilters && (\n                <Badge variant=\"default\" className=\"ml-2\">\n                  {filters.workTypes.length + filters.contractTypes.length + filters.companies.length + filters.locations.length}\n                </Badge>\n              )}\n            </Button>\n          </div>\n\n          {/* Main Content with Sidebar */}\n          <div className=\"flex flex-col lg:flex-row gap-6\">\n            {/* Sidebar Filters */}\n            {showFilters && (\n              <aside className=\"lg:w-80 flex-shrink-0\">\n                <Card className=\"sticky top-6\">\n                  <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-4\">\n                    <CardTitle className=\"text-lg\">Filtros</CardTitle>\n                    {hasActiveFilters && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={clearAllFilters}\n                        data-testid=\"button-clear-filters\"\n                      >\n                        <X className=\"h-4 w-4 mr-1\" />\n                        Limpar\n                      </Button>\n                    )}\n                  </CardHeader>\n                  <CardContent className=\"space-y-6\">\n                    {/* Work Type Filter */}\n                    <div className=\"space-y-3\">\n                      <h3 className=\"font-semibold text-sm\">Tipo de Trabalho</h3>\n                      <div className=\"space-y-2\">\n                        {globalWorkTypes\n                          .filter(wt => wt.isActive === 'true')\n                          .map((workType) => (\n                          <div key={workType.id} className=\"flex items-center space-x-2\">\n                            <Checkbox\n                              id={`work-${workType.name}`}\n                              checked={filters.workTypes.includes(workType.name)}\n                              onCheckedChange={() => toggleFilter('workTypes', workType.name)}\n                              data-testid={`checkbox-work-${workType.name}`}\n                            />\n                            <Label htmlFor={`work-${workType.name}`} className=\"text-sm cursor-pointer\">\n                              {workType.name}\n                            </Label>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <Separator />\n\n                    {/* Contract Type Filter */}\n                    <div className=\"space-y-3\">\n                      <h3 className=\"font-semibold text-sm\">Tipo de Contrato</h3>\n                      <div className=\"space-y-2\">\n                        {globalContractTypes\n                          .filter(ct => ct.isActive === 'true')\n                          .map((contractType) => (\n                          <div key={contractType.id} className=\"flex items-center space-x-2\">\n                            <Checkbox\n                              id={`contract-${contractType.name}`}\n                              checked={filters.contractTypes.includes(contractType.name)}\n                              onCheckedChange={() => toggleFilter('contractTypes', contractType.name)}\n                              data-testid={`checkbox-contract-${contractType.name}`}\n                            />\n                            <Label htmlFor={`contract-${contractType.name}`} className=\"text-sm cursor-pointer\">\n                              {contractType.name}\n                            </Label>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <Separator />\n\n                    {/* Location Filter */}\n                    {filterOptions.locations.length > 0 && (\n                      <>\n                        <div className=\"space-y-3\">\n                          <h3 className=\"font-semibold text-sm\">Localização</h3>\n                          <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                            {filterOptions.locations.map((location) => (\n                              <div key={location} className=\"flex items-center space-x-2\">\n                                <Checkbox\n                                  id={`location-${location}`}\n                                  checked={filters.locations.includes(location)}\n                                  onCheckedChange={() => toggleFilter('locations', location)}\n                                  data-testid={`checkbox-location-${location}`}\n                                />\n                                <Label htmlFor={`location-${location}`} className=\"text-sm cursor-pointer\">\n                                  {location}\n                                </Label>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                        <Separator />\n                      </>\n                    )}\n\n                    {/* Company Filter */}\n                    {filterOptions.companies.length > 0 && (\n                      <div className=\"space-y-3\">\n                        <h3 className=\"font-semibold text-sm\">Empresa</h3>\n                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                          {filterOptions.companies.map((company) => (\n                            <div key={company} className=\"flex items-center space-x-2\">\n                              <Checkbox\n                                id={`company-${company}`}\n                                checked={filters.companies.includes(company)}\n                                onCheckedChange={() => toggleFilter('companies', company)}\n                                data-testid={`checkbox-company-${company}`}\n                              />\n                              <Label htmlFor={`company-${company}`} className=\"text-sm cursor-pointer\">\n                                {company}\n                              </Label>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </aside>\n            )}\n\n            {/* Main Content */}\n            <div className=\"flex-1\">\n              {/* Results Count */}\n              <div className=\"mb-6\">\n                <p className=\"text-sm text-muted-foreground\">\n                  {isLoading ? (\n                    <span>Carregando vagas...</span>\n                  ) : (\n                    <span>\n                      <strong>{filteredJobs.length}</strong> {filteredJobs.length === 1 ? 'vaga encontrada' : 'vagas encontradas'}\n                    </span>\n                  )}\n                </p>\n              </div>\n\n              {/* Jobs Grid */}\n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <Card key={i} className=\"overflow-hidden\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <Skeleton className=\"h-12 w-12 rounded-lg\" />\n                        <div className=\"flex-1 space-y-2\">\n                          <Skeleton className=\"h-4 w-3/4\" />\n                          <Skeleton className=\"h-3 w-1/2\" />\n                        </div>\n                      </div>\n                      <Skeleton className=\"h-20 w-full\" />\n                      <div className=\"flex gap-2\">\n                        <Skeleton className=\"h-6 w-20\" />\n                        <Skeleton className=\"h-6 w-16\" />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredJobs.length === 0 ? (\n            <Card className=\"p-12\">\n              <div className=\"text-center\">\n                <Briefcase className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-xl font-semibold mb-2\">\n                  {searchTerm ? 'Nenhuma vaga encontrada' : 'Nenhuma vaga disponível'}\n                </h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  {searchTerm \n                    ? 'Tente ajustar sua busca ou limpar os filtros' \n                    : 'No momento não há vagas publicadas. Volte em breve!'}\n                </p>\n                {searchTerm && (\n                  <Button onClick={() => setSearchTerm('')} data-testid=\"button-clear-search\">\n                    Limpar Busca\n                  </Button>\n                )}\n              </div>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredJobs.map((job) => (\n                <Card \n                  key={job.id} \n                  className=\"overflow-hidden hover-elevate cursor-pointer transition-all group\"\n                  onClick={() => setLocation(`/vaga/${job.id}`)}\n                  data-testid={`job-card-${job.id}`}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      {/* Company Info */}\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                          {job.companyLogo ? (\n                            <img \n                              src={job.companyLogo} \n                              alt={job.companyName || 'Company'} \n                              className=\"h-full w-full object-cover\"\n                            />\n                          ) : (\n                            <Building2 className=\"h-6 w-6 text-primary\" />\n                          )}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <h3 className=\"font-semibold text-base line-clamp-2 group-hover:text-primary transition-colors\">\n                            {job.title}\n                          </h3>\n                          {job.companyName && (\n                            <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                              {job.companyName}\n                            </p>\n                          )}\n                        </div>\n                        <SaveJobButton jobId={job.id} />\n                      </div>\n\n                      {/* Description */}\n                      {job.description && (\n                        <p className=\"text-sm text-muted-foreground line-clamp-3\">\n                          {job.description}\n                        </p>\n                      )}\n\n                      {/* Job Details */}\n                      <div className=\"space-y-2\">\n                        {job.location && (\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                            <MapPin className=\"h-4 w-4 flex-shrink-0\" />\n                            <span className=\"line-clamp-1\">{job.location}</span>\n                          </div>\n                        )}\n                        \n                        {job.salary && (\n                          <div className=\"flex items-center gap-2 text-sm font-medium text-green-600 dark:text-green-400\">\n                            <DollarSign className=\"h-4 w-4 flex-shrink-0\" />\n                            <span>{formatSalary(job.salary)}</span>\n                          </div>\n                        )}\n\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                          <Clock className=\"h-4 w-4 flex-shrink-0\" />\n                          <span>\n                            {new Date(job.createdAt).toLocaleDateString('pt-BR', {\n                              day: '2-digit',\n                              month: 'short',\n                              year: 'numeric'\n                            })}\n                          </span>\n                        </div>\n                      </div>\n\n                      {/* Badges */}\n                      <div className=\"flex flex-wrap gap-2\">\n                        {job.workType && (\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {getWorkTypeLabel(job.workType)}\n                          </Badge>\n                        )}\n                        {job.contractType && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {getContractTypeLabel(job.contractType)}\n                          </Badge>\n                        )}\n                        {job.tags && job.tags.length > 0 && job.tags.map((tag, index) => (\n                          <Badge key={index} variant=\"default\" className=\"text-xs\">\n                            {tag}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":19706},"client/src/pages/CompanyPlan.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { CreditCard, Calendar, Check, Clock, X, Package, ShoppingCart, Coins } from \"lucide-react\";\nimport type { Purchase, Plan } from \"@shared/schema\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { CompanyShell } from \"@/components/CompanyShell\";\n\ninterface PurchaseWithPlan extends Purchase {\n  plan: Plan;\n}\n\nexport default function CompanyPlan() {\n  const { toast } = useToast();\n  const { data: purchases = [], isLoading } = useQuery<PurchaseWithPlan[]>({\n    queryKey: ['/api/companies/my-purchases'],\n  });\n\n  const { data: availablePlans = [], isLoading: isLoadingPlans } = useQuery<Plan[]>({\n    queryKey: ['/api/plans'],\n  });\n\n  const purchaseMutation = useMutation({\n    mutationFn: async (planId: string) => {\n      const response = await apiRequest('POST', '/api/companies/purchase-plan', { planId });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Erro ao adquirir plano\");\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/companies/my-purchases'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/company/credits'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/company/credit-transactions'] });\n      toast({\n        title: \"Plano adquirido!\",\n        description: `Você recebeu ${data.creditsAdded} créditos. Agora você pode publicar vagas!`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao adquirir plano\",\n        description: error.message,\n      });\n    },\n  });\n\n  const activePurchases = purchases.filter((p) => p.status === 'active');\n  const expiredPurchases = purchases.filter((p) => p.status !== 'active');\n\n  const isExpired = (expiryDate: string) => {\n    return new Date(expiryDate) < new Date();\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('pt-BR');\n  };\n\n  const getDaysRemaining = (expiryDate: string) => {\n    const now = new Date();\n    const expiry = new Date(expiryDate);\n    const diffTime = expiry.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  if (isLoading || isLoadingPlans) {\n    return (\n      <CompanyShell>\n        <div className=\"space-y-6\">\n          <div className=\"grid gap-4 md:grid-cols-3\">\n        {[1, 2, 3].map((i) => (\n          <Card key={i}>\n            <CardHeader>\n              <Skeleton className=\"h-4 w-32\" />\n            </CardHeader>\n            <CardContent>\n              <Skeleton className=\"h-8 w-16 mb-2\" />\n              <Skeleton className=\"h-3 w-48\" />\n            </CardContent>\n          </Card>\n        ))}\n          </div>\n        </div>\n      </CompanyShell>\n    );\n  }\n\n  const activePlansFiltered = availablePlans.filter(p => p.isActive === 'true');\n\n  return (\n    <CompanyShell>\n      <div className=\"space-y-6\">\n      {/* Planos Disponíveis */}\n      {activePlansFiltered.length > 0 && (\n        <div className=\"space-y-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold\">Planos Disponíveis</h2>\n            <p className=\"text-muted-foreground\">Adquira créditos para publicar suas vagas</p>\n          </div>\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            {activePlansFiltered.map((plan) => (\n              <Card key={plan.id} className=\"hover-elevate\">\n                <CardHeader>\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div>\n                      <CardTitle className=\"text-xl mb-2\">{plan.name}</CardTitle>\n                      <CardDescription>{plan.description}</CardDescription>\n                    </div>\n                    <Badge variant=\"secondary\" className=\"bg-primary/10 text-primary\">\n                      Ativo\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-baseline gap-2\">\n                    <span className=\"text-3xl font-bold\">R$ {plan.price}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 p-3 bg-muted/50 rounded-lg\">\n                    <Coins className=\"h-5 w-5 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{plan.vacancyQuantity} Créditos</p>\n                      <p className=\"text-xs text-muted-foreground\">Para publicar vagas</p>\n                    </div>\n                  </div>\n\n                  {plan.features && (\n                    <div className=\"pt-3 border-t\">\n                      <p className=\"text-sm font-medium mb-2\">Recursos:</p>\n                      <p className=\"text-sm text-muted-foreground\">{plan.features}</p>\n                    </div>\n                  )}\n\n                  <Button \n                    className=\"w-full\" \n                    onClick={() => purchaseMutation.mutate(plan.id)}\n                    disabled={purchaseMutation.isPending}\n                    data-testid={`button-buy-plan-${plan.id}`}\n                  >\n                    <ShoppingCart className=\"h-4 w-4 mr-2\" />\n                    {purchaseMutation.isPending ? \"Processando...\" : \"Adquirir Plano\"}\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Estatísticas */}\n      {purchases.length > 0 && (\n        <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card className=\"hover-elevate\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                <Check className=\"h-6 w-6 text-muted-foreground\" />\n              </div>\n            </div>\n            <div className=\"text-3xl font-bold mb-1\">{activePurchases.length}</div>\n            <p className=\"text-sm font-medium text-muted-foreground\">\n              Planos Ativos\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover-elevate\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                <Package className=\"h-6 w-6 text-muted-foreground\" />\n              </div>\n            </div>\n            <div className=\"text-3xl font-bold mb-1\">{purchases.length}</div>\n            <p className=\"text-sm font-medium text-muted-foreground\">\n              Total de Planos\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"hover-elevate\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                <Clock className=\"h-6 w-6 text-muted-foreground\" />\n              </div>\n            </div>\n            <div className=\"text-3xl font-bold mb-1\">{expiredPurchases.length}</div>\n            <p className=\"text-sm font-medium text-muted-foreground\">\n              Planos Expirados\n            </p>\n          </CardContent>\n        </Card>\n        </div>\n      )}\n\n      {/* Lista de Planos Ativos */}\n      {activePurchases.length > 0 && (\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-bold\">Planos Ativos</h2>\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            {activePurchases.map((purchase) => {\n              const daysRemaining = getDaysRemaining(purchase.expiryDate);\n              const isNearExpiry = daysRemaining <= 30 && daysRemaining > 0;\n              \n              return (\n                <Card key={purchase.id} className=\"hover-elevate\">\n                  <CardHeader>\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <CardTitle className=\"text-xl mb-2\">{purchase.plan?.name}</CardTitle>\n                        <CardDescription>{purchase.plan?.description}</CardDescription>\n                      </div>\n                      <Badge variant=\"secondary\">\n                        Ativo\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"font-semibold text-lg\">R$ {purchase.amount}</span>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <p className=\"text-muted-foreground mb-1\">Data de Compra</p>\n                        <p className=\"font-medium flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {formatDate(purchase.purchaseDate)}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground mb-1\">Validade</p>\n                        <p className=\"font-medium flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {formatDate(purchase.expiryDate)}\n                        </p>\n                      </div>\n                    </div>\n\n                    {isNearExpiry && (\n                      <div className=\"bg-muted/50 border rounded-lg p-3\">\n                        <p className=\"text-sm font-medium\">\n                          Expira em {daysRemaining} {daysRemaining === 1 ? 'dia' : 'dias'}\n                        </p>\n                      </div>\n                    )}\n\n                    {purchase.plan && (\n                      <div className=\"pt-3 border-t\">\n                        <p className=\"text-sm font-medium mb-2\">Recursos inclusos:</p>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {purchase.plan.vacancyQuantity} {purchase.plan.vacancyQuantity === '1' ? 'vaga' : 'vagas'}\n                          </Badge>\n                          {purchase.plan.features && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {purchase.plan.features}\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Lista de Planos Expirados */}\n      {expiredPurchases.length > 0 && (\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-bold\">Histórico de Planos</h2>\n          <div className=\"space-y-3\">\n            {expiredPurchases.map((purchase) => (\n              <Card key={purchase.id} className=\"hover-elevate\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <h3 className=\"font-semibold\">{purchase.plan?.name}</h3>\n                        <Badge variant=\"outline\">\n                          Expirado\n                        </Badge>\n                      </div>\n                      <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {formatDate(purchase.purchaseDate)} - {formatDate(purchase.expiryDate)}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <CreditCard className=\"h-3 w-3\" />\n                          R$ {purchase.amount}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n      </div>\n    </CompanyShell>\n  );\n}\n","size_bytes":12877},"client/src/pages/JobView.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { \n  Building2, \n  MapPin, \n  Briefcase, \n  Clock, \n  DollarSign, \n  GraduationCap, \n  Award,\n  Globe,\n  Phone,\n  Mail,\n  Sparkles,\n  Target,\n  Heart,\n  CheckCircle2,\n  Info\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Job, Company, QuestionWithRequired } from \"@shared/schema\";\nimport { useState, useEffect } from \"react\";\nimport { Header } from \"@/components/Header\";\n\nexport default function JobView() {\n  const [, params] = useRoute(\"/vaga/:id\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const { isAuthenticated } = useAuth();\n  const [hasApplied, setHasApplied] = useState(false);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [answers, setAnswers] = useState<Record<string, string>>({});\n\n  const jobQuery = useQuery<{ job: Job; company: Company }>({\n    queryKey: ['/api/jobs', params?.id],\n    enabled: !!params?.id,\n  });\n\n  const checkApplicationQuery = useQuery<{ hasApplied: boolean }>({\n    queryKey: ['/api/applications/check', params?.id],\n    enabled: !!params?.id,\n  });\n\n  const questionsQuery = useQuery<QuestionWithRequired[]>({\n    queryKey: ['/api/jobs', params?.id, 'questions'],\n    enabled: !!params?.id,\n  });\n\n  useEffect(() => {\n    if (checkApplicationQuery.data) {\n      setHasApplied(checkApplicationQuery.data.hasApplied);\n    }\n  }, [checkApplicationQuery.data]);\n\n  // Increment view count when page loads\n  useEffect(() => {\n    const incrementView = async () => {\n      if (params?.id) {\n        try {\n          await apiRequest(\"POST\", `/api/jobs/${params.id}/increment-view`);\n        } catch (error) {\n          // Silently fail - view count is not critical\n        }\n      }\n    };\n\n    incrementView();\n  }, [params?.id]);\n\n  const applyMutation = useMutation({\n    mutationFn: async (answers?: Record<string, string>) => {\n      const response = await apiRequest(\"POST\", \"/api/applications\", {\n        jobId: params?.id,\n        answers: answers || {},\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        const errorObj = { \n          profileIncomplete: error.profileIncomplete || false,\n          message: error.message || \"Erro ao aplicar a vaga\",\n          missingFields: error.missingFields || []\n        };\n        throw errorObj;\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      setHasApplied(true);\n      setDialogOpen(false);\n      setAnswers({});\n      queryClient.invalidateQueries({ queryKey: ['/api/applications/check', params?.id] });\n      toast({\n        title: \"Candidatura enviada!\",\n        description: \"Sua candidatura foi enviada com sucesso. A empresa entrará em contato em breve.\",\n      });\n    },\n    onError: (error: any) => {\n      if (error?.profileIncomplete === true) {\n        setDialogOpen(false);\n        toast({\n          title: \"Complete seu perfil\",\n          description: \"Para se candidatar a esta vaga, precisamos que você complete seu perfil com todas as informações obrigatórias. É rápido e simples!\",\n          action: (\n            <Button\n              size=\"sm\"\n              onClick={() => setLocation('/perfil/operador')}\n              data-testid=\"button-complete-profile-toast\"\n              className=\"bg-blue-500 hover:bg-blue-600 text-white\"\n            >\n              Completar Agora\n            </Button>\n          ),\n        });\n      } else {\n        toast({\n          variant: \"destructive\",\n          title: \"Erro ao aplicar\",\n          description: error?.message || \"Erro ao aplicar a vaga\",\n        });\n      }\n    },\n  });\n\n  const handleApplyClick = () => {\n    if (!isAuthenticated) {\n      toast({\n        title: \"Login necessário\",\n        description: \"Você precisa estar logado para se candidatar a uma vaga.\",\n        variant: \"destructive\",\n      });\n      setLocation('/login');\n      return;\n    }\n\n    const questions = questionsQuery.data || [];\n    if (questions.length > 0) {\n      setDialogOpen(true);\n    } else {\n      applyMutation.mutate({});\n    }\n  };\n\n  const handleSubmitApplication = () => {\n    const questions = questionsQuery.data || [];\n    \n    // Validate only required questions\n    const requiredQuestions = questions.filter(q => q.isRequired === 'true');\n    const allRequiredAnswered = requiredQuestions.every(q => answers[q.id] && answers[q.id].trim() !== '');\n    \n    if (!allRequiredAnswered) {\n      toast({\n        variant: \"destructive\",\n        title: \"Respostas incompletas\",\n        description: \"Por favor, responda todas as perguntas obrigatórias antes de enviar.\",\n      });\n      return;\n    }\n    \n    applyMutation.mutate(answers);\n  };\n\n  if (jobQuery.isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando vaga...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (jobQuery.error || !jobQuery.data) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Card className=\"max-w-md\">\n          <CardHeader>\n            <CardTitle>Vaga não encontrada</CardTitle>\n            <CardDescription>\n              A vaga que você está procurando não existe ou foi removida.\n            </CardDescription>\n          </CardHeader>\n        </Card>\n      </div>\n    );\n  }\n\n  const { job, company } = jobQuery.data;\n\n  return (\n    <>\n      <Header />\n      <div className=\"w-full\">\n        {/* Banner da empresa */}\n        {company?.bannerUrl && (\n          <div className=\"relative w-full overflow-hidden\">\n            <img \n              src={`${company.bannerUrl}?t=${Date.now()}`}\n              alt={company.companyName}\n              className=\"w-full h-80 object-cover\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n          </div>\n        )}\n\n      <div className=\"max-w-7xl mx-auto px-6 py-6 space-y-6\">\n        {/* Perfil da Empresa */}\n        <Card className=\"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20\">\n        <CardHeader>\n          <div className=\"flex items-start gap-4\">\n            <Avatar className=\"h-24 w-24\">\n              <AvatarImage \n                src={company?.logoUrl || undefined} \n                alt={company?.companyName}\n                className=\"object-cover\"\n              />\n              <AvatarFallback className=\"text-2xl bg-primary/10\">\n                <Building2 className=\"h-12 w-12 text-primary\" />\n              </AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1\">\n              <div className=\"flex flex-wrap gap-3 text-sm text-muted-foreground\">\n                {company?.industry && (\n                  <div className=\"flex items-center gap-1\">\n                    <Briefcase className=\"h-4 w-4\" />\n                    {company.industry}\n                  </div>\n                )}\n                {company?.size && (\n                  <div className=\"flex items-center gap-1\">\n                    <Building2 className=\"h-4 w-4\" />\n                    {company.size}\n                  </div>\n                )}\n                {company?.website && (\n                  <a \n                    href={company.website} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-1 hover:text-primary\"\n                  >\n                    <Globe className=\"h-4 w-4\" />\n                    Website\n                  </a>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {company?.about && (\n            <div className=\"space-y-2\">\n              <h3 className=\"flex items-center gap-2 font-semibold text-lg\">\n                <Sparkles className=\"h-5 w-5 text-primary\" />\n                Sobre a Empresa\n              </h3>\n              <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{company.about}</p>\n            </div>\n          )}\n\n          {company?.mission && (\n            <>\n              <Separator />\n              <div className=\"space-y-2\">\n                <h3 className=\"flex items-center gap-2 font-semibold text-lg\">\n                  <Target className=\"h-5 w-5 text-primary\" />\n                  Nossa Missão\n                </h3>\n                <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{company.mission}</p>\n              </div>\n            </>\n          )}\n\n          {company?.culture && (\n            <>\n              <Separator />\n              <div className=\"space-y-2\">\n                <h3 className=\"flex items-center gap-2 font-semibold text-lg\">\n                  <Heart className=\"h-5 w-5 text-primary\" />\n                  Cultura e Valores\n                </h3>\n                <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{company.culture}</p>\n              </div>\n            </>\n          )}\n\n          {(company?.email || company?.phone) && (\n            <>\n              <Separator />\n              <div className=\"flex flex-wrap gap-4 text-sm\">\n                {company?.email && (\n                  <div className=\"flex items-center gap-2\">\n                    <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                    <span>{company.email}</span>\n                  </div>\n                )}\n                {company?.phone && (\n                  <div className=\"flex items-center gap-2\">\n                    <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                    <span>{company.phone}</span>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Detalhes da Vaga */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <CardTitle className=\"text-3xl mb-2\">{job.title}</CardTitle>\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                <Badge variant=\"secondary\" className=\"gap-1\">\n                  <MapPin className=\"h-3 w-3\" />\n                  {job.location}\n                </Badge>\n                <Badge variant=\"secondary\" className=\"gap-1\">\n                  <Briefcase className=\"h-3 w-3\" />\n                  {job.workType}\n                </Badge>\n                <Badge variant=\"secondary\" className=\"gap-1\">\n                  <Clock className=\"h-3 w-3\" />\n                  {job.contractType}\n                </Badge>\n                {job.salary && (\n                  <Badge variant=\"secondary\" className=\"gap-1\">\n                    <DollarSign className=\"h-3 w-3\" />\n                    {job.salary}\n                  </Badge>\n                )}\n                {job.tags && job.tags.length > 0 && job.tags.map((tag, index) => (\n                  <Badge key={index} variant=\"default\" className=\"text-xs\">\n                    {tag}\n                  </Badge>\n                ))}\n                {job.status === 'suspended' && (\n                  <Badge \n                    variant=\"outline\" \n                    className=\"bg-orange-500/15 text-orange-700 border-orange-500/30 dark:text-orange-400\"\n                  >\n                    ⏸ Vaga Suspensa\n                  </Badge>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Botão de Aplicar */}\n          {job.status === 'suspended' ? (\n            <div className=\"space-y-2\">\n              <Button \n                size=\"default\" \n                disabled\n                variant=\"secondary\"\n                data-testid=\"button-job-suspended\"\n              >\n                ⏸ Vaga Suspensa - Não aceita candidaturas\n              </Button>\n              <p className=\"text-xs text-muted-foreground\">\n                Esta vaga foi temporariamente pausada pela empresa e não está aceitando novas candidaturas no momento.\n              </p>\n            </div>\n          ) : hasApplied ? (\n            <Button \n              size=\"default\" \n              disabled\n              data-testid=\"button-already-applied\"\n            >\n              <CheckCircle2 className=\"mr-2 h-4 w-4\" />\n              Você já se candidatou a esta vaga\n            </Button>\n          ) : (\n            <Button \n              size=\"default\" \n              onClick={handleApplyClick}\n              disabled={applyMutation.isPending}\n              data-testid=\"button-apply\"\n            >\n              {applyMutation.isPending ? \"Aplicando...\" : \"Aplicar a esta vaga\"}\n            </Button>\n          )}\n\n          <Separator />\n\n          {/* Descrição */}\n          {job.description && (\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold text-lg\">Descrição da Vaga</h3>\n              <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{job.description}</p>\n            </div>\n          )}\n\n          {/* Requisitos */}\n          {job.requirements && (\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold text-lg\">Requisitos</h3>\n              <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{job.requirements}</p>\n            </div>\n          )}\n\n          {/* Responsabilidades */}\n          {job.responsibilities && (\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold text-lg\">Responsabilidades</h3>\n              <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{job.responsibilities}</p>\n            </div>\n          )}\n\n          {/* Benefícios */}\n          {job.benefits && (\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold text-lg\">Benefícios</h3>\n              <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{job.benefits}</p>\n            </div>\n          )}\n\n          <Separator />\n\n          {/* Informações Adicionais */}\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            {job.experienceLevel && (\n              <div className=\"flex items-center gap-2\">\n                <Award className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Nível de Experiência</p>\n                  <p className=\"font-medium\">{job.experienceLevel}</p>\n                </div>\n              </div>\n            )}\n            {job.educationLevel && (\n              <div className=\"flex items-center gap-2\">\n                <GraduationCap className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Escolaridade</p>\n                  <p className=\"font-medium\">{job.educationLevel}</p>\n                </div>\n              </div>\n            )}\n            {job.vacancies && (\n              <div className=\"flex items-center gap-2\">\n                <Building2 className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Vagas Disponíveis</p>\n                  <p className=\"font-medium\">{job.vacancies}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n      </div>\n    </div>\n\n    {/* Diálogo de Questionário */}\n    <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Questionário da Vaga</DialogTitle>\n          <DialogDescription>\n            Por favor, responda as seguintes perguntas para completar sua candidatura.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 mt-4\">\n          {questionsQuery.data?.map((question, index) => (\n            <div key={question.id} className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                <Label className=\"text-base font-medium\">\n                  {index + 1}. {question.questionText}\n                  {question.isRequired === 'true' && (\n                    <span className=\"text-destructive ml-1\">*</span>\n                  )}\n                </Label>\n                {question.isRequired === 'true' && (\n                  <Badge variant=\"destructive\" className=\"text-xs\">\n                    Obrigatória\n                  </Badge>\n                )}\n              </div>\n              \n              {question.questionType === 'text' && (\n                <Input\n                  value={answers[question.id] || ''}\n                  onChange={(e) => setAnswers({ ...answers, [question.id]: e.target.value })}\n                  placeholder=\"Sua resposta...\"\n                  data-testid={`input-answer-${question.id}`}\n                />\n              )}\n              \n              {question.questionType === 'textarea' && (\n                <div className=\"space-y-1\">\n                  <Textarea\n                    value={answers[question.id] || ''}\n                    onChange={(e) => setAnswers({ ...answers, [question.id]: e.target.value })}\n                    placeholder=\"Sua resposta...\"\n                    className=\"min-h-[200px]\"\n                    maxLength={1000}\n                    data-testid={`textarea-answer-${question.id}`}\n                  />\n                  <p className=\"text-xs text-muted-foreground text-right\">\n                    {(answers[question.id] || '').length}/1000 caracteres\n                  </p>\n                </div>\n              )}\n              \n              {question.questionType === 'multiple_choice' && question.options && (\n                <RadioGroup\n                  value={answers[question.id] || ''}\n                  onValueChange={(value) => setAnswers({ ...answers, [question.id]: value })}\n                >\n                  {question.options.split(',').map((option, optionIndex) => (\n                    <div key={optionIndex} className=\"flex items-center space-x-2\">\n                      <RadioGroupItem \n                        value={option.trim()} \n                        id={`${question.id}-${optionIndex}`}\n                        data-testid={`radio-answer-${question.id}-${optionIndex}`}\n                      />\n                      <Label htmlFor={`${question.id}-${optionIndex}`} className=\"font-normal cursor-pointer\">\n                        {option.trim()}\n                      </Label>\n                    </div>\n                  ))}\n                </RadioGroup>\n              )}\n            </div>\n          ))}\n        </div>\n\n        <Separator className=\"my-4\" />\n\n        <div className=\"flex justify-end gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setDialogOpen(false)}\n            data-testid=\"button-cancel-application\"\n          >\n            Cancelar\n          </Button>\n          <Button\n            onClick={handleSubmitApplication}\n            disabled={applyMutation.isPending}\n            data-testid=\"button-submit-application\"\n          >\n            {applyMutation.isPending ? \"Enviando...\" : \"Enviar Candidatura\"}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}\n","size_bytes":20256},"client/src/pages/JobApplications.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { \n  ArrowLeft, \n  Users, \n  Mail,\n  MapPin, \n  Calendar, \n  Briefcase, \n  Award,\n  Clock,\n  User,\n  FileText,\n  FileDown,\n  Search,\n  Filter\n} from \"lucide-react\";\nimport { SiWhatsapp } from \"react-icons/si\";\nimport { useLocation, useRoute } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport type { Job, Operator, Application, Question, ApplicationAnswer } from \"@shared/schema\";\nimport jsPDF from \"jspdf\";\n\ntype ApplicationWithOperator = Application & { operator: Operator };\ntype AnswerWithQuestion = ApplicationAnswer & { question: Question };\n\nexport default function JobApplications() {\n  const [, setLocation] = useLocation();\n  const [selectedCandidate, setSelectedCandidate] = useState<ApplicationWithOperator | null>(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [locationFilter, setLocationFilter] = useState(\"all\");\n  \n  // Get jobId from URL params\n  const [, params] = useRoute(\"/empresa/vaga/:id/candidatos\");\n  const jobId = params?.id;\n\n  const { data: job, isLoading: isLoadingJob } = useQuery<Job>({\n    queryKey: ['/api/jobs', jobId],\n    enabled: !!jobId,\n  });\n\n  const { data: applications = [], isLoading: isLoadingApplications } = useQuery<ApplicationWithOperator[]>({\n    queryKey: ['/api/jobs', jobId, 'applications'],\n    enabled: !!jobId,\n  });\n\n  const { data: answers = [] } = useQuery<AnswerWithQuestion[]>({\n    queryKey: ['/api/applications', selectedCandidate?.id, 'answers'],\n    enabled: !!selectedCandidate?.id,\n  });\n\n  // Filtros\n  const uniqueLocations = useMemo(() => {\n    const locations = new Set<string>();\n    applications.forEach(app => {\n      if (app.operator.preferredLocation) {\n        locations.add(app.operator.preferredLocation);\n      }\n    });\n    return Array.from(locations).sort();\n  }, [applications]);\n\n  const filteredApplications = useMemo(() => {\n    return applications.filter(app => {\n      // Filtro de busca\n      const matchesSearch = searchTerm === \"\" || \n        app.operator.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        app.operator.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        app.operator.profession.toLowerCase().includes(searchTerm.toLowerCase());\n\n      // Filtro de status\n      const matchesStatus = statusFilter === \"all\" || app.status === statusFilter;\n\n      // Filtro de localização\n      const matchesLocation = locationFilter === \"all\" || app.operator.preferredLocation === locationFilter;\n\n      return matchesSearch && matchesStatus && matchesLocation;\n    });\n  }, [applications, searchTerm, statusFilter, locationFilter]);\n\n  const getInitials = (name: string) => {\n    const names = name.split(' ');\n    if (names.length >= 2) {\n      return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase();\n    }\n    return name.substring(0, 2).toUpperCase();\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      return format(new Date(dateString), \"dd 'de' MMMM 'de' yyyy\", { locale: ptBR });\n    } catch {\n      return dateString;\n    }\n  };\n\n  const formatDateTime = (dateString: string) => {\n    try {\n      return format(new Date(dateString), \"dd/MM/yyyy 'às' HH:mm\", { locale: ptBR });\n    } catch {\n      return dateString;\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'pending':\n        return <Badge variant=\"secondary\">Pendente</Badge>;\n      case 'accepted':\n        return <Badge className=\"bg-green-500 hover:bg-green-600\">Aceito</Badge>;\n      case 'rejected':\n        return <Badge variant=\"destructive\">Rejeitado</Badge>;\n      default:\n        return <Badge>{status}</Badge>;\n    }\n  };\n\n  const downloadCV = (operator: Operator, jobTitle: string) => {\n    const doc = new jsPDF();\n    const pageWidth = doc.internal.pageSize.getWidth();\n    let yPos = 20;\n\n    // Header\n    doc.setFontSize(20);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"CURRÍCULO\", pageWidth / 2, yPos, { align: \"center\" });\n    yPos += 15;\n\n    // Nome\n    doc.setFontSize(16);\n    doc.text(operator.fullName, pageWidth / 2, yPos, { align: \"center\" });\n    yPos += 10;\n\n    // Profissão\n    doc.setFontSize(12);\n    doc.setFont(\"helvetica\", \"normal\");\n    if (operator.profession) {\n      doc.text(operator.profession, pageWidth / 2, yPos, { align: \"center\" });\n      yPos += 15;\n    }\n\n    // Linha separadora\n    doc.setLineWidth(0.5);\n    doc.line(20, yPos, pageWidth - 20, yPos);\n    yPos += 10;\n\n    // Informações de Contato\n    doc.setFontSize(14);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"INFORMAÇÕES DE CONTATO\", 20, yPos);\n    yPos += 8;\n\n    doc.setFontSize(10);\n    doc.setFont(\"helvetica\", \"normal\");\n    doc.text(`Email: ${operator.email}`, 20, yPos);\n    yPos += 6;\n    doc.text(`Telefone: ${operator.phone}`, 20, yPos);\n    yPos += 6;\n    \n    if (operator.birthDate) {\n      doc.text(`Data de Nascimento: ${formatDate(operator.birthDate)}`, 20, yPos);\n      yPos += 6;\n    }\n\n    if (operator.preferredLocation) {\n      doc.text(`Localização Preferida: ${operator.preferredLocation}`, 20, yPos);\n      yPos += 10;\n    } else {\n      yPos += 4;\n    }\n\n    // Experiência Profissional\n    doc.setFontSize(14);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"EXPERIÊNCIA PROFISSIONAL\", 20, yPos);\n    yPos += 8;\n\n    doc.setFontSize(10);\n    doc.setFont(\"helvetica\", \"normal\");\n    if (operator.experienceYears) {\n      doc.text(`Tempo de Experiência: ${operator.experienceYears} anos`, 20, yPos);\n      yPos += 6;\n    }\n\n    if (operator.workType) {\n      doc.text(`Tipo de Trabalho Preferido: ${operator.workType}`, 20, yPos);\n      yPos += 6;\n    }\n\n    if (operator.availability) {\n      doc.text(`Disponibilidade: ${operator.availability}`, 20, yPos);\n      yPos += 10;\n    } else {\n      yPos += 4;\n    }\n\n    // Habilidades\n    if (operator.skills) {\n      doc.setFontSize(14);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"HABILIDADES\", 20, yPos);\n      yPos += 8;\n\n      doc.setFontSize(10);\n      doc.setFont(\"helvetica\", \"normal\");\n      const skillsLines = doc.splitTextToSize(operator.skills, pageWidth - 40);\n      doc.text(skillsLines, 20, yPos);\n      yPos += (skillsLines.length * 6) + 4;\n    }\n\n    // Certificações\n    if (operator.certifications) {\n      if (yPos > 250) {\n        doc.addPage();\n        yPos = 20;\n      }\n\n      doc.setFontSize(14);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"CERTIFICAÇÕES\", 20, yPos);\n      yPos += 8;\n\n      doc.setFontSize(10);\n      doc.setFont(\"helvetica\", \"normal\");\n      const certLines = doc.splitTextToSize(operator.certifications, pageWidth - 40);\n      doc.text(certLines, 20, yPos);\n      yPos += (certLines.length * 6) + 4;\n    }\n\n    // Sobre\n    if (operator.bio) {\n      if (yPos > 250) {\n        doc.addPage();\n        yPos = 20;\n      }\n\n      doc.setFontSize(14);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"SOBRE\", 20, yPos);\n      yPos += 8;\n\n      doc.setFontSize(10);\n      doc.setFont(\"helvetica\", \"normal\");\n      const bioLines = doc.splitTextToSize(operator.bio, pageWidth - 40);\n      doc.text(bioLines, 20, yPos);\n    }\n\n    // Footer\n    const timestamp = format(new Date(), \"dd/MM/yyyy 'às' HH:mm\", { locale: ptBR });\n    doc.setFontSize(8);\n    doc.setTextColor(128, 128, 128);\n    doc.text(`Currículo gerado para a vaga: ${jobTitle}`, pageWidth / 2, doc.internal.pageSize.getHeight() - 10, { align: \"center\" });\n    doc.text(`Data de geração: ${timestamp}`, pageWidth / 2, doc.internal.pageSize.getHeight() - 6, { align: \"center\" });\n\n    // Download\n    const fileName = `CV_${operator.fullName.replace(/\\s+/g, '_')}_${new Date().getTime()}.pdf`;\n    doc.save(fileName);\n  };\n\n  if (isLoadingJob || isLoadingApplications) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <Skeleton className=\"h-10 w-64 mb-6\" />\n        <Skeleton className=\"h-32 w-full mb-6\" />\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-64 w-full\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (!job) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Vaga não encontrada</CardTitle>\n            <CardDescription>A vaga que você procura não existe ou foi removida.</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button onClick={() => setLocation('/empresa/vagas')} data-testid=\"button-back-jobs\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Voltar para Minhas Vagas\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"container mx-auto px-4 py-8 max-w-7xl\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <Button \n            variant=\"ghost\" \n            onClick={() => setLocation('/empresa/vagas')}\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Voltar\n          </Button>\n        </div>\n\n        <Card className=\"mb-4\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div className=\"flex-1\">\n                <CardTitle className=\"text-2xl\" data-testid=\"text-job-title\">\n                  {job.title}\n                </CardTitle>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"flex items-center gap-2 text-primary mb-1\">\n                  <Users className=\"h-5 w-5\" />\n                  <span className=\"text-3xl font-bold\" data-testid=\"text-total-applications\">\n                    {applications.length}\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  {applications.length === 1 ? 'Candidato' : 'Candidatos'}\n                </p>\n              </div>\n            </div>\n          </CardHeader>\n        </Card>\n\n        {applications.length > 0 && (\n          <Card className=\"mb-4\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                <h3 className=\"font-semibold text-sm\">Filtros</h3>\n              </div>\n              <div className=\"grid gap-3 md:grid-cols-3\">\n                {/* Busca */}\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Buscar por nome, email...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-9\"\n                    data-testid=\"input-search-candidates\"\n                  />\n                </div>\n\n                {/* Filtro de Status */}\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                  <SelectTrigger data-testid=\"select-status-filter\">\n                    <SelectValue placeholder=\"Status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Todos os Status</SelectItem>\n                    <SelectItem value=\"pending\">Pendente</SelectItem>\n                    <SelectItem value=\"accepted\">Aceito</SelectItem>\n                    <SelectItem value=\"rejected\">Rejeitado</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                {/* Filtro de Localização */}\n                <Select value={locationFilter} onValueChange={setLocationFilter}>\n                  <SelectTrigger data-testid=\"select-location-filter\">\n                    <SelectValue placeholder=\"Localização\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Todas as Localizações</SelectItem>\n                    {uniqueLocations.map((location) => (\n                      <SelectItem key={location} value={location}>\n                        {location}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {filteredApplications.length !== applications.length && (\n                <div className=\"mt-3 text-sm text-muted-foreground\">\n                  Mostrando {filteredApplications.length} de {applications.length} candidatos\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {applications.length === 0 ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <Users className=\"h-16 w-16 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">Nenhum candidato ainda</h3>\n              <p className=\"text-muted-foreground text-center max-w-md\">\n                Esta vaga ainda não recebeu candidaturas. Quando operadores se candidatarem, eles aparecerão aqui.\n              </p>\n            </CardContent>\n          </Card>\n        ) : filteredApplications.length === 0 ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <Search className=\"h-16 w-16 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">Nenhum candidato encontrado</h3>\n              <p className=\"text-muted-foreground text-center max-w-md\">\n                Não há candidatos que correspondam aos filtros selecionados.\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredApplications.map((application) => {\n              const { operator } = application;\n              \n              return (\n                <Card \n                  key={application.id} \n                  className=\"hover-elevate cursor-pointer transition-all\"\n                  onClick={() => setSelectedCandidate(application)}\n                  data-testid={`card-candidate-${application.id}`}\n                >\n                  <CardContent className=\"p-3\">\n                    <div className=\"flex items-center gap-3\">\n                      {/* Avatar e Nome */}\n                      <Avatar className=\"h-10 w-10 flex-shrink-0\">\n                        <AvatarImage src={operator.profilePhotoUrl || undefined} />\n                        <AvatarFallback className=\"text-xs\">\n                          {getInitials(operator.fullName)}\n                        </AvatarFallback>\n                      </Avatar>\n                      \n                      {/* Informações principais */}\n                      <div className=\"flex-1 min-w-0 grid grid-cols-1 md:grid-cols-4 gap-2 items-center\">\n                        <div className=\"min-w-0\">\n                          <h3 className=\"font-semibold text-sm truncate\" data-testid={`text-candidate-name-${application.id}`}>\n                            {operator.fullName}\n                          </h3>\n                          <p className=\"text-xs text-muted-foreground truncate\">\n                            {operator.profession}\n                          </p>\n                        </div>\n\n                        <div className=\"flex items-center gap-4 text-xs\">\n                          {operator.experienceYears && (\n                            <div className=\"flex items-center gap-1 text-muted-foreground\">\n                              <Briefcase className=\"h-3 w-3\" />\n                              <span>{operator.experienceYears}</span>\n                            </div>\n                          )}\n                          {operator.preferredLocation && (\n                            <div className=\"flex items-center gap-1 text-muted-foreground\">\n                              <MapPin className=\"h-3 w-3\" />\n                              <span className=\"truncate max-w-[120px]\">{operator.preferredLocation}</span>\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex items-center gap-3 text-xs\">\n                          <div className=\"flex items-center gap-1 text-muted-foreground\">\n                            <Mail className=\"h-3 w-3\" />\n                            <span className=\"truncate max-w-[150px]\">{operator.email}</span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-2 justify-end\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              downloadCV(operator, job.title);\n                            }}\n                            title=\"Baixar CV\"\n                            data-testid={`button-download-cv-${application.id}`}\n                            className=\"h-7 px-2\"\n                          >\n                            <FileDown className=\"h-3 w-3\" />\n                          </Button>\n                          \n                          <div className=\"text-xs text-muted-foreground whitespace-nowrap\">\n                            {formatDateTime(application.appliedAt)}\n                          </div>\n                          \n                          {getStatusBadge(application.status)}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Modal com detalhes completos do candidato */}\n      <Dialog open={!!selectedCandidate} onOpenChange={() => setSelectedCandidate(null)}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          {selectedCandidate && (\n            <div className=\"space-y-6\">\n              <DialogHeader>\n                <div className=\"flex items-start gap-4\">\n                  <Avatar className=\"h-20 w-20\">\n                    <AvatarImage src={selectedCandidate.operator.profilePhotoUrl || undefined} />\n                    <AvatarFallback className=\"text-2xl\">\n                      {getInitials(selectedCandidate.operator.fullName)}\n                    </AvatarFallback>\n                  </Avatar>\n                  \n                  <div className=\"flex-1\">\n                    <DialogTitle className=\"text-2xl mb-2\">\n                      {selectedCandidate.operator.fullName}\n                    </DialogTitle>\n                    <DialogDescription className=\"text-base\">\n                      {selectedCandidate.operator.profession}\n                    </DialogDescription>\n                    <div className=\"mt-2\">\n                      {getStatusBadge(selectedCandidate.status)}\n                    </div>\n                  </div>\n                </div>\n              </DialogHeader>\n\n              <Separator />\n\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                    <User className=\"h-5 w-5\" />\n                    Informações de Contato\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                      <a href={`mailto:${selectedCandidate.operator.email}`} className=\"text-primary hover:underline\">\n                        {selectedCandidate.operator.email}\n                      </a>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <SiWhatsapp className=\"h-4 w-4 text-muted-foreground\" />\n                      <a href={`tel:${selectedCandidate.operator.phone}`} className=\"text-primary hover:underline\">\n                        {selectedCandidate.operator.phone}\n                      </a>\n                    </div>\n                    {selectedCandidate.operator.birthDate && (\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{formatDate(selectedCandidate.operator.birthDate)}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <Separator />\n\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                    <Briefcase className=\"h-5 w-5\" />\n                    Experiência Profissional\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {selectedCandidate.operator.experienceYears && (\n                      <div className=\"flex items-start gap-2\">\n                        <Clock className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                        <div>\n                          <p className=\"font-medium\">Tempo de Experiência</p>\n                          <p className=\"text-muted-foreground\">{selectedCandidate.operator.experienceYears} anos</p>\n                        </div>\n                      </div>\n                    )}\n                    {selectedCandidate.operator.preferredLocation && (\n                      <div className=\"flex items-start gap-2\">\n                        <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                        <div>\n                          <p className=\"font-medium\">Localização Preferida</p>\n                          <p className=\"text-muted-foreground\">{selectedCandidate.operator.preferredLocation}</p>\n                        </div>\n                      </div>\n                    )}\n                    {selectedCandidate.operator.workType && (\n                      <div className=\"flex items-start gap-2\">\n                        <Briefcase className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                        <div>\n                          <p className=\"font-medium\">Tipo de Trabalho Preferido</p>\n                          <p className=\"text-muted-foreground\">{selectedCandidate.operator.workType}</p>\n                        </div>\n                      </div>\n                    )}\n                    {selectedCandidate.operator.availability && (\n                      <div className=\"flex items-start gap-2\">\n                        <Calendar className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                        <div>\n                          <p className=\"font-medium\">Disponibilidade</p>\n                          <p className=\"text-muted-foreground\">{selectedCandidate.operator.availability}</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {selectedCandidate.operator.certifications && (\n                  <>\n                    <Separator />\n                    <div>\n                      <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                        <Award className=\"h-5 w-5\" />\n                        Certificações\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                        {selectedCandidate.operator.certifications}\n                      </p>\n                    </div>\n                  </>\n                )}\n\n                {selectedCandidate.operator.skills && (\n                  <>\n                    <Separator />\n                    <div>\n                      <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                        <FileText className=\"h-5 w-5\" />\n                        Habilidades\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                        {selectedCandidate.operator.skills}\n                      </p>\n                    </div>\n                  </>\n                )}\n\n                {selectedCandidate.operator.bio && (\n                  <>\n                    <Separator />\n                    <div>\n                      <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                        <User className=\"h-5 w-5\" />\n                        Sobre\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">\n                        {selectedCandidate.operator.bio}\n                      </p>\n                    </div>\n                  </>\n                )}\n\n                {answers.length > 0 && (\n                  <>\n                    <Separator />\n                    <div>\n                      <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2\">\n                        <FileText className=\"h-5 w-5\" />\n                        Respostas do Questionário\n                      </h3>\n                      <div className=\"space-y-4\">\n                        {answers.map((answer, index) => (\n                          <div key={answer.id} className=\"bg-muted/30 p-4 rounded-md space-y-2\">\n                            <p className=\"font-medium text-sm\">\n                              {index + 1}. {answer.question.questionText}\n                            </p>\n                            <p className=\"text-sm text-muted-foreground whitespace-pre-wrap pl-4\">\n                              {answer.answerText}\n                            </p>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </>\n                )}\n\n                <Separator />\n\n                <div className=\"bg-muted/50 p-4 rounded-md\">\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span>Candidatura enviada em {formatDateTime(selectedCandidate.appliedAt)}</span>\n                  </div>\n                </div>\n\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full bg-green-500/10 hover:bg-green-500/20 border-green-500/30 text-green-700 dark:text-green-400\"\n                  onClick={() => {\n                    const phoneNumber = selectedCandidate.operator.phone.replace(/\\D/g, '');\n                    window.open(`https://wa.me/55${phoneNumber}`, '_blank');\n                  }}\n                  data-testid=\"button-whatsapp-candidate\"\n                >\n                  <SiWhatsapp className=\"h-4 w-4 mr-2\" />\n                  WhatsApp\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":27827},"client/src/pages/CompanyQuestions.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { Plus, Trash2, Edit, FileQuestion, MessageSquare, AlignLeft } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertQuestionSchema, type Question } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\n\nconst questionFormSchema = insertQuestionSchema.extend({\n  questionText: z.string().min(5, \"A pergunta deve ter pelo menos 5 caracteres\"),\n  questionType: z.enum([\"text\", \"textarea\"]),\n  options: z.string().optional(),\n}).omit({ companyId: true, clientId: true });\n\ntype QuestionFormData = z.infer<typeof questionFormSchema>;\n\nconst questionTypeLabels = {\n  text: \"Resposta Curta (20 caracteres)\",\n  textarea: \"Resposta Longa (1000 caracteres)\",\n};\n\nconst questionTypeIcons = {\n  text: AlignLeft,\n  textarea: MessageSquare,\n};\n\nexport default function CompanyQuestions() {\n  const { toast } = useToast();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingQuestion, setEditingQuestion] = useState<Question | null>(null);\n\n  const { data: questions, isLoading } = useQuery<Question[]>({\n    queryKey: [\"/api/company/questions\"],\n  });\n\n  const form = useForm<QuestionFormData>({\n    resolver: zodResolver(questionFormSchema),\n    defaultValues: {\n      questionText: \"\",\n      questionType: \"text\",\n      options: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const questionType = form.watch(\"questionType\");\n\n  const createMutation = useMutation({\n    mutationFn: async (data: QuestionFormData) => {\n      return await apiRequest(\"POST\", \"/api/company/questions\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/questions\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Pergunta criada\",\n        description: \"Sua pergunta foi criada com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar pergunta\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<QuestionFormData> }) => {\n      return await apiRequest(\"PATCH\", `/api/company/questions/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/questions\"] });\n      setEditingQuestion(null);\n      form.reset();\n      toast({\n        title: \"Pergunta atualizada\",\n        description: \"Sua pergunta foi atualizada com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar pergunta\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/company/questions/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/questions\"] });\n      toast({\n        title: \"Pergunta deletada\",\n        description: \"A pergunta foi removida com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao deletar pergunta\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: QuestionFormData) => {\n    if (editingQuestion) {\n      updateMutation.mutate({ id: editingQuestion.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (question: Question) => {\n    setEditingQuestion(question);\n    form.reset({\n      questionText: question.questionText,\n      questionType: question.questionType as \"text\" | \"textarea\",\n      options: question.options || \"\",\n      isActive: question.isActive,\n    });\n  };\n\n  const handleCloseDialog = () => {\n    if (editingQuestion) {\n      setEditingQuestion(null);\n    } else {\n      setIsCreateDialogOpen(false);\n    }\n    form.reset();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6 space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">Banco de Perguntas</h1>\n            <p className=\"text-muted-foreground\">Crie e gerencie perguntas para suas vagas</p>\n          </div>\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"space-y-2\">\n                <div className=\"h-4 bg-muted rounded w-1/4\"></div>\n                <div className=\"h-6 bg-muted rounded w-3/4\"></div>\n              </CardHeader>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const activeQuestions = questions?.filter(q => q.isActive === \"true\") || [];\n  const inactiveQuestions = questions?.filter(q => q.isActive === \"false\") || [];\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Banco de Perguntas</h1>\n          <p className=\"text-muted-foreground\">\n            Crie perguntas personalizadas para incluir nas suas vagas\n          </p>\n        </div>\n        <Button onClick={() => setIsCreateDialogOpen(true)} data-testid=\"button-create-question\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Nova Pergunta\n        </Button>\n        \n        <Dialog open={isCreateDialogOpen || !!editingQuestion} onOpenChange={handleCloseDialog}>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingQuestion ? \"Editar Pergunta\" : \"Criar Nova Pergunta\"}\n              </DialogTitle>\n              <DialogDescription>\n                {editingQuestion\n                  ? \"Atualize os dados da sua pergunta\"\n                  : \"Crie uma nova pergunta para usar nas suas vagas\"}\n              </DialogDescription>\n            </DialogHeader>\n\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"questionType\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tipo de Pergunta</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        defaultValue={field.value}\n                        data-testid=\"select-question-type\"\n                      >\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Selecione o tipo\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"text\">\n                            <div className=\"flex items-center gap-2\">\n                              <AlignLeft className=\"h-4 w-4\" />\n                              Resposta Curta (20 caracteres)\n                            </div>\n                          </SelectItem>\n                          <SelectItem value=\"textarea\">\n                            <div className=\"flex items-center gap-2\">\n                              <MessageSquare className=\"h-4 w-4\" />\n                              Resposta Longa (1000 caracteres)\n                            </div>\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"questionText\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Pergunta</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          {...field}\n                          placeholder=\"Ex: Descreva sua experiência com equipamentos pesados...\"\n                          rows={3}\n                          data-testid=\"input-question-text\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"isActive\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Status</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-question-status\">\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"true\">Ativa</SelectItem>\n                          <SelectItem value=\"false\">Inativa</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"flex justify-end gap-2\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={handleCloseDialog}\n                    data-testid=\"button-cancel-question\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createMutation.isPending || updateMutation.isPending}\n                    data-testid=\"button-save-question\"\n                  >\n                    {editingQuestion ? \"Atualizar\" : \"Criar\"} Pergunta\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {activeQuestions.length === 0 && inactiveQuestions.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center p-12 text-center\">\n            <FileQuestion className=\"h-16 w-16 text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Nenhuma pergunta criada</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              Crie sua primeira pergunta para começar a personalizar suas vagas\n            </p>\n            <Button onClick={() => setIsCreateDialogOpen(true)} data-testid=\"button-create-first-question\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Criar Primeira Pergunta\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          {activeQuestions.length > 0 && (\n            <div className=\"space-y-4\">\n              <h2 className=\"text-xl font-semibold\">Perguntas Ativas ({activeQuestions.length})</h2>\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                {activeQuestions.map((question) => {\n                  const Icon = questionTypeIcons[question.questionType as keyof typeof questionTypeIcons];\n                  return (\n                    <Card key={question.id} data-testid={`card-question-${question.id}`}>\n                      <CardHeader className=\"space-y-2\">\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <Badge variant=\"secondary\" className=\"w-fit\">\n                            <Icon className=\"h-3 w-3 mr-1\" />\n                            {questionTypeLabels[question.questionType as keyof typeof questionTypeLabels]}\n                          </Badge>\n                          <div className=\"flex gap-1\">\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              onClick={() => handleEdit(question)}\n                              data-testid={`button-edit-question-${question.id}`}\n                            >\n                              <Edit className=\"h-4 w-4\" />\n                            </Button>\n                            <AlertDialog>\n                              <AlertDialogTrigger asChild>\n                                <Button\n                                  size=\"icon\"\n                                  variant=\"ghost\"\n                                  data-testid={`button-delete-question-${question.id}`}\n                                >\n                                  <Trash2 className=\"h-4 w-4 text-destructive\" />\n                                </Button>\n                              </AlertDialogTrigger>\n                              <AlertDialogContent>\n                                <AlertDialogHeader>\n                                  <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n                                  <AlertDialogDescription>\n                                    Tem certeza que deseja deletar esta pergunta? Esta ação não pode ser desfeita.\n                                  </AlertDialogDescription>\n                                </AlertDialogHeader>\n                                <AlertDialogFooter>\n                                  <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancelar</AlertDialogCancel>\n                                  <AlertDialogAction\n                                    onClick={() => deleteMutation.mutate(question.id)}\n                                    data-testid=\"button-confirm-delete\"\n                                  >\n                                    Deletar\n                                  </AlertDialogAction>\n                                </AlertDialogFooter>\n                              </AlertDialogContent>\n                            </AlertDialog>\n                          </div>\n                        </div>\n                        <CardTitle className=\"text-base line-clamp-3\">\n                          {question.questionText}\n                        </CardTitle>\n                      </CardHeader>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {inactiveQuestions.length > 0 && (\n            <div className=\"space-y-4\">\n              <h2 className=\"text-xl font-semibold text-muted-foreground\">\n                Perguntas Inativas ({inactiveQuestions.length})\n              </h2>\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                {inactiveQuestions.map((question) => {\n                  const Icon = questionTypeIcons[question.questionType as keyof typeof questionTypeIcons];\n                  return (\n                    <Card key={question.id} className=\"opacity-60\" data-testid={`card-question-${question.id}`}>\n                      <CardHeader className=\"space-y-2\">\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <Badge variant=\"outline\" className=\"w-fit\">\n                            <Icon className=\"h-3 w-3 mr-1\" />\n                            {questionTypeLabels[question.questionType as keyof typeof questionTypeLabels]}\n                          </Badge>\n                          <div className=\"flex gap-1\">\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              onClick={() => handleEdit(question)}\n                              data-testid={`button-edit-question-${question.id}`}\n                            >\n                              <Edit className=\"h-4 w-4\" />\n                            </Button>\n                            <AlertDialog>\n                              <AlertDialogTrigger asChild>\n                                <Button\n                                  size=\"icon\"\n                                  variant=\"ghost\"\n                                  data-testid={`button-delete-question-${question.id}`}\n                                >\n                                  <Trash2 className=\"h-4 w-4 text-destructive\" />\n                                </Button>\n                              </AlertDialogTrigger>\n                              <AlertDialogContent>\n                                <AlertDialogHeader>\n                                  <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n                                  <AlertDialogDescription>\n                                    Tem certeza que deseja deletar esta pergunta? Esta ação não pode ser desfeita.\n                                  </AlertDialogDescription>\n                                </AlertDialogHeader>\n                                <AlertDialogFooter>\n                                  <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancelar</AlertDialogCancel>\n                                  <AlertDialogAction\n                                    onClick={() => deleteMutation.mutate(question.id)}\n                                    data-testid=\"button-confirm-delete\"\n                                  >\n                                    Deletar\n                                  </AlertDialogAction>\n                                </AlertDialogFooter>\n                              </AlertDialogContent>\n                            </AlertDialog>\n                          </div>\n                        </div>\n                        <CardTitle className=\"text-base line-clamp-3\">\n                          {question.questionText}\n                        </CardTitle>\n                      </CardHeader>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","size_bytes":18992},"client/src/lib/brazilian-cities.ts":{"content":"export const brazilianCities = [\n  // São Paulo\n  { value: \"São Paulo, SP\", label: \"São Paulo, SP\", state: \"SP\" },\n  { value: \"Campinas, SP\", label: \"Campinas, SP\", state: \"SP\" },\n  { value: \"Santos, SP\", label: \"Santos, SP\", state: \"SP\" },\n  { value: \"São Bernardo do Campo, SP\", label: \"São Bernardo do Campo, SP\", state: \"SP\" },\n  { value: \"Santo André, SP\", label: \"Santo André, SP\", state: \"SP\" },\n  { value: \"Osasco, SP\", label: \"Osasco, SP\", state: \"SP\" },\n  { value: \"Sorocaba, SP\", label: \"Sorocaba, SP\", state: \"SP\" },\n  { value: \"Ribeirão Preto, SP\", label: \"Ribeirão Preto, SP\", state: \"SP\" },\n  { value: \"São José dos Campos, SP\", label: \"São José dos Campos, SP\", state: \"SP\" },\n  { value: \"Guarulhos, SP\", label: \"Guarulhos, SP\", state: \"SP\" },\n  \n  // Rio de Janeiro\n  { value: \"Rio de Janeiro, RJ\", label: \"Rio de Janeiro, RJ\", state: \"RJ\" },\n  { value: \"Niterói, RJ\", label: \"Niterói, RJ\", state: \"RJ\" },\n  { value: \"Duque de Caxias, RJ\", label: \"Duque de Caxias, RJ\", state: \"RJ\" },\n  { value: \"Nova Iguaçu, RJ\", label: \"Nova Iguaçu, RJ\", state: \"RJ\" },\n  { value: \"Belford Roxo, RJ\", label: \"Belford Roxo, RJ\", state: \"RJ\" },\n  { value: \"São Gonçalo, RJ\", label: \"São Gonçalo, RJ\", state: \"RJ\" },\n  { value: \"Campos dos Goytacazes, RJ\", label: \"Campos dos Goytacazes, RJ\", state: \"RJ\" },\n  { value: \"Petrópolis, RJ\", label: \"Petrópolis, RJ\", state: \"RJ\" },\n  \n  // Minas Gerais\n  { value: \"Belo Horizonte, MG\", label: \"Belo Horizonte, MG\", state: \"MG\" },\n  { value: \"Uberlândia, MG\", label: \"Uberlândia, MG\", state: \"MG\" },\n  { value: \"Contagem, MG\", label: \"Contagem, MG\", state: \"MG\" },\n  { value: \"Juiz de Fora, MG\", label: \"Juiz de Fora, MG\", state: \"MG\" },\n  { value: \"Betim, MG\", label: \"Betim, MG\", state: \"MG\" },\n  { value: \"Montes Claros, MG\", label: \"Montes Claros, MG\", state: \"MG\" },\n  { value: \"Ribeirão das Neves, MG\", label: \"Ribeirão das Neves, MG\", state: \"MG\" },\n  { value: \"Uberaba, MG\", label: \"Uberaba, MG\", state: \"MG\" },\n  \n  // Bahia\n  { value: \"Salvador, BA\", label: \"Salvador, BA\", state: \"BA\" },\n  { value: \"Feira de Santana, BA\", label: \"Feira de Santana, BA\", state: \"BA\" },\n  { value: \"Vitória da Conquista, BA\", label: \"Vitória da Conquista, BA\", state: \"BA\" },\n  { value: \"Camaçari, BA\", label: \"Camaçari, BA\", state: \"BA\" },\n  { value: \"Itabuna, BA\", label: \"Itabuna, BA\", state: \"BA\" },\n  { value: \"Juazeiro, BA\", label: \"Juazeiro, BA\", state: \"BA\" },\n  \n  // Paraná\n  { value: \"Curitiba, PR\", label: \"Curitiba, PR\", state: \"PR\" },\n  { value: \"Londrina, PR\", label: \"Londrina, PR\", state: \"PR\" },\n  { value: \"Maringá, PR\", label: \"Maringá, PR\", state: \"PR\" },\n  { value: \"Ponta Grossa, PR\", label: \"Ponta Grossa, PR\", state: \"PR\" },\n  { value: \"Cascavel, PR\", label: \"Cascavel, PR\", state: \"PR\" },\n  { value: \"São José dos Pinhais, PR\", label: \"São José dos Pinhais, PR\", state: \"PR\" },\n  { value: \"Foz do Iguaçu, PR\", label: \"Foz do Iguaçu, PR\", state: \"PR\" },\n  \n  // Rio Grande do Sul\n  { value: \"Porto Alegre, RS\", label: \"Porto Alegre, RS\", state: \"RS\" },\n  { value: \"Caxias do Sul, RS\", label: \"Caxias do Sul, RS\", state: \"RS\" },\n  { value: \"Pelotas, RS\", label: \"Pelotas, RS\", state: \"RS\" },\n  { value: \"Canoas, RS\", label: \"Canoas, RS\", state: \"RS\" },\n  { value: \"Santa Maria, RS\", label: \"Santa Maria, RS\", state: \"RS\" },\n  { value: \"Gravataí, RS\", label: \"Gravataí, RS\", state: \"RS\" },\n  { value: \"Novo Hamburgo, RS\", label: \"Novo Hamburgo, RS\", state: \"RS\" },\n  \n  // Pernambuco\n  { value: \"Recife, PE\", label: \"Recife, PE\", state: \"PE\" },\n  { value: \"Jaboatão dos Guararapes, PE\", label: \"Jaboatão dos Guararapes, PE\", state: \"PE\" },\n  { value: \"Olinda, PE\", label: \"Olinda, PE\", state: \"PE\" },\n  { value: \"Caruaru, PE\", label: \"Caruaru, PE\", state: \"PE\" },\n  { value: \"Petrolina, PE\", label: \"Petrolina, PE\", state: \"PE\" },\n  \n  // Ceará\n  { value: \"Fortaleza, CE\", label: \"Fortaleza, CE\", state: \"CE\" },\n  { value: \"Caucaia, CE\", label: \"Caucaia, CE\", state: \"CE\" },\n  { value: \"Juazeiro do Norte, CE\", label: \"Juazeiro do Norte, CE\", state: \"CE\" },\n  { value: \"Maracanaú, CE\", label: \"Maracanaú, CE\", state: \"CE\" },\n  { value: \"Sobral, CE\", label: \"Sobral, CE\", state: \"CE\" },\n  \n  // Pará\n  { value: \"Belém, PA\", label: \"Belém, PA\", state: \"PA\" },\n  { value: \"Ananindeua, PA\", label: \"Ananindeua, PA\", state: \"PA\" },\n  { value: \"Santarém, PA\", label: \"Santarém, PA\", state: \"PA\" },\n  { value: \"Marabá, PA\", label: \"Marabá, PA\", state: \"PA\" },\n  \n  // Santa Catarina\n  { value: \"Florianópolis, SC\", label: \"Florianópolis, SC\", state: \"SC\" },\n  { value: \"Joinville, SC\", label: \"Joinville, SC\", state: \"SC\" },\n  { value: \"Blumenau, SC\", label: \"Blumenau, SC\", state: \"SC\" },\n  { value: \"São José, SC\", label: \"São José, SC\", state: \"SC\" },\n  { value: \"Criciúma, SC\", label: \"Criciúma, SC\", state: \"SC\" },\n  { value: \"Chapecó, SC\", label: \"Chapecó, SC\", state: \"SC\" },\n  \n  // Goiás\n  { value: \"Goiânia, GO\", label: \"Goiânia, GO\", state: \"GO\" },\n  { value: \"Aparecida de Goiânia, GO\", label: \"Aparecida de Goiânia, GO\", state: \"GO\" },\n  { value: \"Anápolis, GO\", label: \"Anápolis, GO\", state: \"GO\" },\n  { value: \"Rio Verde, GO\", label: \"Rio Verde, GO\", state: \"GO\" },\n  \n  // Maranhão\n  { value: \"São Luís, MA\", label: \"São Luís, MA\", state: \"MA\" },\n  { value: \"Imperatriz, MA\", label: \"Imperatriz, MA\", state: \"MA\" },\n  { value: \"São José de Ribamar, MA\", label: \"São José de Ribamar, MA\", state: \"MA\" },\n  \n  // Amazonas\n  { value: \"Manaus, AM\", label: \"Manaus, AM\", state: \"AM\" },\n  { value: \"Parintins, AM\", label: \"Parintins, AM\", state: \"AM\" },\n  { value: \"Itacoatiara, AM\", label: \"Itacoatiara, AM\", state: \"AM\" },\n  \n  // Espírito Santo\n  { value: \"Vitória, ES\", label: \"Vitória, ES\", state: \"ES\" },\n  { value: \"Vila Velha, ES\", label: \"Vila Velha, ES\", state: \"ES\" },\n  { value: \"Serra, ES\", label: \"Serra, ES\", state: \"ES\" },\n  { value: \"Cariacica, ES\", label: \"Cariacica, ES\", state: \"ES\" },\n  \n  // Paraíba\n  { value: \"João Pessoa, PB\", label: \"João Pessoa, PB\", state: \"PB\" },\n  { value: \"Campina Grande, PB\", label: \"Campina Grande, PB\", state: \"PB\" },\n  { value: \"Santa Rita, PB\", label: \"Santa Rita, PB\", state: \"PB\" },\n  \n  // Rio Grande do Norte\n  { value: \"Natal, RN\", label: \"Natal, RN\", state: \"RN\" },\n  { value: \"Mossoró, RN\", label: \"Mossoró, RN\", state: \"RN\" },\n  { value: \"Parnamirim, RN\", label: \"Parnamirim, RN\", state: \"RN\" },\n  \n  // Mato Grosso\n  { value: \"Cuiabá, MT\", label: \"Cuiabá, MT\", state: \"MT\" },\n  { value: \"Várzea Grande, MT\", label: \"Várzea Grande, MT\", state: \"MT\" },\n  { value: \"Rondonópolis, MT\", label: \"Rondonópolis, MT\", state: \"MT\" },\n  \n  // Mato Grosso do Sul\n  { value: \"Campo Grande, MS\", label: \"Campo Grande, MS\", state: \"MS\" },\n  { value: \"Dourados, MS\", label: \"Dourados, MS\", state: \"MS\" },\n  { value: \"Três Lagoas, MS\", label: \"Três Lagoas, MS\", state: \"MS\" },\n  \n  // Distrito Federal\n  { value: \"Brasília, DF\", label: \"Brasília, DF\", state: \"DF\" },\n  \n  // Alagoas\n  { value: \"Maceió, AL\", label: \"Maceió, AL\", state: \"AL\" },\n  { value: \"Arapiraca, AL\", label: \"Arapiraca, AL\", state: \"AL\" },\n  \n  // Piauí\n  { value: \"Teresina, PI\", label: \"Teresina, PI\", state: \"PI\" },\n  { value: \"Parnaíba, PI\", label: \"Parnaíba, PI\", state: \"PI\" },\n  \n  // Sergipe\n  { value: \"Aracaju, SE\", label: \"Aracaju, SE\", state: \"SE\" },\n  { value: \"Nossa Senhora do Socorro, SE\", label: \"Nossa Senhora do Socorro, SE\", state: \"SE\" },\n  \n  // Rondônia\n  { value: \"Porto Velho, RO\", label: \"Porto Velho, RO\", state: \"RO\" },\n  { value: \"Ji-Paraná, RO\", label: \"Ji-Paraná, RO\", state: \"RO\" },\n  \n  // Tocantins\n  { value: \"Palmas, TO\", label: \"Palmas, TO\", state: \"TO\" },\n  { value: \"Araguaína, TO\", label: \"Araguaína, TO\", state: \"TO\" },\n  \n  // Acre\n  { value: \"Rio Branco, AC\", label: \"Rio Branco, AC\", state: \"AC\" },\n  { value: \"Cruzeiro do Sul, AC\", label: \"Cruzeiro do Sul, AC\", state: \"AC\" },\n  \n  // Amapá\n  { value: \"Macapá, AP\", label: \"Macapá, AP\", state: \"AP\" },\n  { value: \"Santana, AP\", label: \"Santana, AP\", state: \"AP\" },\n  \n  // Roraima\n  { value: \"Boa Vista, RR\", label: \"Boa Vista, RR\", state: \"RR\" },\n].sort((a, b) => a.label.localeCompare(b.label));\n","size_bytes":8184},"client/src/pages/AdminFinanceiro.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  DollarSign, \n  TrendingUp, \n  Users, \n  ShoppingCart,\n  Calendar,\n  Filter,\n  Download\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar\n} from \"recharts\";\nimport type { Purchase, Client, Plan } from \"@shared/schema\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\n\ninterface PurchaseWithDetails extends Purchase {\n  clientName?: string;\n  planName?: string;\n}\n\ninterface SalesStats {\n  totalRevenue: number;\n  totalSales: number;\n  activePurchases: number;\n  totalClients: number;\n  recentRevenue: number;\n  recentSales: number;\n}\n\nexport default function AdminFinanceiro() {\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [selectedClient, setSelectedClient] = useState<string>(\"\");\n  const [minAmount, setMinAmount] = useState(\"\");\n  const [maxAmount, setMaxAmount] = useState(\"\");\n\n  const { data: stats, isLoading: statsLoading } = useQuery<SalesStats>({\n    queryKey: ['/api/purchases/stats'],\n  });\n\n  const { data: clients = [] } = useQuery<Client[]>({\n    queryKey: ['/api/clients'],\n  });\n\n  const { data: plans = [] } = useQuery<Plan[]>({\n    queryKey: ['/api/plans'],\n  });\n\n  const buildQueryParams = () => {\n    const params = new URLSearchParams();\n    if (startDate) params.append('startDate', startDate);\n    if (endDate) params.append('endDate', endDate);\n    if (selectedClient) params.append('clientId', selectedClient);\n    if (minAmount) params.append('minAmount', minAmount);\n    if (maxAmount) params.append('maxAmount', maxAmount);\n    return params.toString();\n  };\n\n  const { data: purchases = [], isLoading: purchasesLoading } = useQuery<Purchase[]>({\n    queryKey: ['/api/purchases', startDate, endDate, selectedClient, minAmount, maxAmount],\n    queryFn: async () => {\n      const params = buildQueryParams();\n      const url = params ? `/api/purchases?${params}` : '/api/purchases';\n      const response = await fetch(url, { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch purchases');\n      return response.json();\n    },\n  });\n\n  const purchasesWithDetails: PurchaseWithDetails[] = purchases.map(p => ({\n    ...p,\n    clientName: clients.find(c => c.id === p.clientId)?.companyName,\n    planName: plans.find(pl => pl.id === p.planId)?.name,\n  }));\n\n  const chartData = purchasesWithDetails\n    .reduce((acc, p) => {\n      const month = format(new Date(p.purchaseDate), 'MMM yyyy', { locale: ptBR });\n      const existing = acc.find(item => item.month === month);\n      if (existing) {\n        existing.vendas += 1;\n        existing.receita += parseFloat(p.amount);\n      } else {\n        acc.push({\n          month,\n          vendas: 1,\n          receita: parseFloat(p.amount),\n        });\n      }\n      return acc;\n    }, [] as { month: string; vendas: number; receita: number }[])\n    .slice(-6);\n\n  const salesByClient = Object.values(\n    purchasesWithDetails.reduce((acc, p) => {\n      const clientName = p.clientName || 'Desconhecido';\n      if (!acc[clientName]) {\n        acc[clientName] = { cliente: clientName, vendas: 0, valor: 0 };\n      }\n      acc[clientName].vendas += 1;\n      acc[clientName].valor += parseFloat(p.amount);\n      return acc;\n    }, {} as Record<string, { cliente: string; vendas: number; valor: number }>)\n  ).sort((a, b) => b.valor - a.valor).slice(0, 10);\n\n  const handleClearFilters = () => {\n    setStartDate(\"\");\n    setEndDate(\"\");\n    setSelectedClient(\"\");\n    setMinAmount(\"\");\n    setMaxAmount(\"\");\n  };\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(value);\n  };\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\"> = {\n      active: \"default\",\n      expired: \"secondary\",\n      cancelled: \"destructive\",\n    };\n    const labels: Record<string, string> = {\n      active: \"Ativo\",\n      expired: \"Expirado\",\n      cancelled: \"Cancelado\",\n    };\n    return (\n      <Badge variant={variants[status] || \"secondary\"} data-testid={`badge-status-${status}`}>\n        {labels[status] || status}\n      </Badge>\n    );\n  };\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between p-4 border-b\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <h1 className=\"text-2xl font-bold\">Relatórios Financeiros</h1>\n            <div className=\"w-10\" />\n          </header>\n\n          <main className=\"flex-1 overflow-auto p-6\">\n            <div className=\"space-y-6\">\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                <Card data-testid=\"card-total-revenue\">\n                  <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                    <CardTitle className=\"text-sm font-medium\">\n                      Receita Total\n                    </CardTitle>\n                    <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-total-revenue\">\n                      {statsLoading ? \"...\" : formatCurrency(stats?.totalRevenue || 0)}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      +{formatCurrency(stats?.recentRevenue || 0)} nos últimos 30 dias\n                    </p>\n                  </CardContent>\n                </Card>\n\n                <Card data-testid=\"card-total-sales\">\n                  <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                    <CardTitle className=\"text-sm font-medium\">\n                      Total de Vendas\n                    </CardTitle>\n                    <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-total-sales\">\n                      {statsLoading ? \"...\" : stats?.totalSales || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      +{stats?.recentSales || 0} nos últimos 30 dias\n                    </p>\n                  </CardContent>\n                </Card>\n\n                <Card data-testid=\"card-active-sales\">\n                  <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                    <CardTitle className=\"text-sm font-medium\">\n                      Vendas Ativas\n                    </CardTitle>\n                    <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-active-sales\">\n                      {statsLoading ? \"...\" : stats?.activePurchases || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Assinaturas ativas atualmente\n                    </p>\n                  </CardContent>\n                </Card>\n\n                <Card data-testid=\"card-total-clients\">\n                  <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                    <CardTitle className=\"text-sm font-medium\">\n                      Clientes Ativos\n                    </CardTitle>\n                    <Users className=\"h-4 w-4 text-muted-foreground\" />\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\" data-testid=\"text-total-clients\">\n                      {statsLoading ? \"...\" : stats?.totalClients || 0}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Com compras registradas\n                    </p>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <div className=\"grid gap-4 lg:grid-cols-2\">\n                <Card data-testid=\"card-revenue-chart\">\n                  <CardHeader>\n                    <CardTitle>Receita por Mês</CardTitle>\n                    <CardDescription>Últimos 6 meses</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {chartData.length > 0 ? (\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <LineChart data={chartData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"month\" />\n                          <YAxis />\n                          <Tooltip formatter={(value) => formatCurrency(Number(value))} />\n                          <Legend />\n                          <Line \n                            type=\"monotone\" \n                            dataKey=\"receita\" \n                            stroke=\"hsl(var(--primary))\" \n                            strokeWidth={2}\n                            name=\"Receita (R$)\"\n                          />\n                        </LineChart>\n                      </ResponsiveContainer>\n                    ) : (\n                      <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                        Nenhum dado disponível\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                <Card data-testid=\"card-sales-by-client\">\n                  <CardHeader>\n                    <CardTitle>Top 10 Clientes</CardTitle>\n                    <CardDescription>Por valor total de vendas</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {salesByClient.length > 0 ? (\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <BarChart data={salesByClient} layout=\"vertical\">\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis type=\"number\" />\n                          <YAxis dataKey=\"cliente\" type=\"category\" width={120} />\n                          <Tooltip formatter={(value) => formatCurrency(Number(value))} />\n                          <Bar dataKey=\"valor\" fill=\"hsl(var(--primary))\" name=\"Valor Total (R$)\" />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    ) : (\n                      <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                        Nenhum dado disponível\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card data-testid=\"card-sales-list\">\n                <CardHeader>\n                  <CardTitle>Vendas Realizadas</CardTitle>\n                  <CardDescription>\n                    Filtre e visualize todas as vendas registradas\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-5\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"start-date\">Data Inicial</Label>\n                        <Input\n                          id=\"start-date\"\n                          type=\"date\"\n                          value={startDate}\n                          onChange={(e) => setStartDate(e.target.value)}\n                          data-testid=\"input-start-date\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"end-date\">Data Final</Label>\n                        <Input\n                          id=\"end-date\"\n                          type=\"date\"\n                          value={endDate}\n                          onChange={(e) => setEndDate(e.target.value)}\n                          data-testid=\"input-end-date\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"client-filter\">Cliente</Label>\n                        <Select value={selectedClient} onValueChange={setSelectedClient}>\n                          <SelectTrigger id=\"client-filter\" data-testid=\"select-client\">\n                            <SelectValue placeholder=\"Todos os clientes\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"all\">Todos os clientes</SelectItem>\n                            {clients.map((client) => (\n                              <SelectItem key={client.id} value={client.id}>\n                                {client.companyName}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"min-amount\">Valor Mínimo</Label>\n                        <Input\n                          id=\"min-amount\"\n                          type=\"number\"\n                          placeholder=\"R$ 0,00\"\n                          value={minAmount}\n                          onChange={(e) => setMinAmount(e.target.value)}\n                          data-testid=\"input-min-amount\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"max-amount\">Valor Máximo</Label>\n                        <Input\n                          id=\"max-amount\"\n                          type=\"number\"\n                          placeholder=\"R$ 10.000,00\"\n                          value={maxAmount}\n                          onChange={(e) => setMaxAmount(e.target.value)}\n                          data-testid=\"input-max-amount\"\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"flex gap-2\">\n                      <Button \n                        variant=\"outline\" \n                        onClick={handleClearFilters}\n                        data-testid=\"button-clear-filters\"\n                      >\n                        <Filter className=\"mr-2 h-4 w-4\" />\n                        Limpar Filtros\n                      </Button>\n                    </div>\n\n                    <div className=\"border rounded-md\">\n                      <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Data</TableHead>\n                            <TableHead>Cliente</TableHead>\n                            <TableHead>Plano</TableHead>\n                            <TableHead>Valor</TableHead>\n                            <TableHead>Status</TableHead>\n                            <TableHead>Expiração</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {purchasesLoading ? (\n                            <TableRow>\n                              <TableCell colSpan={6} className=\"text-center text-muted-foreground\">\n                                Carregando vendas...\n                              </TableCell>\n                            </TableRow>\n                          ) : purchasesWithDetails.length === 0 ? (\n                            <TableRow>\n                              <TableCell colSpan={6} className=\"text-center text-muted-foreground\">\n                                Nenhuma venda encontrada\n                              </TableCell>\n                            </TableRow>\n                          ) : (\n                            purchasesWithDetails.map((purchase) => (\n                              <TableRow \n                                key={purchase.id} \n                                data-testid={`row-purchase-${purchase.id}`}\n                              >\n                                <TableCell data-testid={`text-purchase-date-${purchase.id}`}>\n                                  {format(new Date(purchase.purchaseDate), 'dd/MM/yyyy', { locale: ptBR })}\n                                </TableCell>\n                                <TableCell data-testid={`text-client-name-${purchase.id}`}>\n                                  {purchase.clientName || \"Desconhecido\"}\n                                </TableCell>\n                                <TableCell data-testid={`text-plan-name-${purchase.id}`}>\n                                  {purchase.planName || \"Desconhecido\"}\n                                </TableCell>\n                                <TableCell data-testid={`text-amount-${purchase.id}`}>\n                                  {formatCurrency(parseFloat(purchase.amount))}\n                                </TableCell>\n                                <TableCell>\n                                  {getStatusBadge(purchase.status)}\n                                </TableCell>\n                                <TableCell data-testid={`text-expiry-date-${purchase.id}`}>\n                                  {format(new Date(purchase.expiryDate), 'dd/MM/yyyy', { locale: ptBR })}\n                                </TableCell>\n                              </TableRow>\n                            ))\n                          )}\n                        </TableBody>\n                      </Table>\n                    </div>\n\n                    {purchasesWithDetails.length > 0 && (\n                      <div className=\"flex justify-between items-center text-sm text-muted-foreground\">\n                        <p data-testid=\"text-total-filtered\">\n                          Total de {purchasesWithDetails.length} venda(s) encontrada(s)\n                        </p>\n                        <p data-testid=\"text-total-filtered-amount\">\n                          Valor total: {formatCurrency(\n                            purchasesWithDetails.reduce((sum, p) => sum + parseFloat(p.amount), 0)\n                          )}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":19651},"client/src/pages/CompanyCredits.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { CompanyShell } from \"@/components/CompanyShell\";\nimport { \n  Coins, \n  TrendingUp, \n  TrendingDown,\n  Calendar,\n  CreditCard,\n  Package,\n  Briefcase,\n  ArrowUpCircle,\n  ArrowDownCircle\n} from \"lucide-react\";\nimport type { CreditTransaction } from \"@shared/schema\";\n\nexport default function CompanyCredits() {\n  const creditsQuery = useQuery<number>({\n    queryKey: ['/api/company/credits'],\n  });\n\n  const transactionsQuery = useQuery<CreditTransaction[]>({\n    queryKey: ['/api/company/credit-transactions'],\n  });\n\n  const credits = creditsQuery.data || 0;\n  const transactions = transactionsQuery.data || [];\n\n  const stats = [\n    {\n      title: \"Saldo Atual\",\n      value: credits.toString(),\n      description: \"Créditos disponíveis\",\n      icon: Coins,\n    },\n    {\n      title: \"Total Adquirido\",\n      value: transactions\n        .filter(t => t.type === 'credit')\n        .reduce((sum, t) => sum + parseInt(t.amount), 0)\n        .toString(),\n      description: \"Créditos comprados\",\n      icon: TrendingUp,\n    },\n    {\n      title: \"Total Utilizado\",\n      value: transactions\n        .filter(t => t.type === 'debit')\n        .reduce((sum, t) => sum + parseInt(t.amount), 0)\n        .toString(),\n      description: \"Créditos gastos\",\n      icon: TrendingDown,\n    },\n    {\n      title: \"Transações\",\n      value: transactions.length.toString(),\n      description: \"Total de movimentações\",\n      icon: Calendar,\n    },\n  ];\n\n  return (\n    <CompanyShell>\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Meus Créditos</h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Gerencie seus créditos e acompanhe o histórico de transações\n          </p>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {creditsQuery.isLoading ? (\n            Array(4).fill(0).map((_, i) => (\n              <Card key={i}>\n                <CardContent className=\"p-6\">\n                  <Skeleton className=\"h-12 w-12 rounded-xl mb-4\" />\n                  <Skeleton className=\"h-8 w-20 mb-2\" />\n                  <Skeleton className=\"h-4 w-32\" />\n                </CardContent>\n              </Card>\n            ))\n          ) : (\n            stats.map((stat) => (\n              <Card \n                key={stat.title} \n                className=\"hover-elevate\"\n                data-testid={`stat-${stat.title.toLowerCase().replace(/\\s/g, '-')}`}\n              >\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                      <stat.icon className=\"h-6 w-6 text-muted-foreground\" />\n                    </div>\n                  </div>\n                  <div className=\"text-3xl font-bold mb-1\">{stat.value}</div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">\n                    {stat.title}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {stat.description}\n                  </p>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Credit Info Card */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CreditCard className=\"h-5 w-5\" />\n              Como Funcionam os Créditos\n            </CardTitle>\n            <CardDescription>\n              Entenda o sistema de créditos da plataforma\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div className=\"flex items-start gap-3 p-4 rounded-lg bg-muted/50\">\n                <Package className=\"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Compra de Planos</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Adquira créditos através da compra de planos. Cada plano oferece uma quantidade específica de créditos.\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3 p-4 rounded-lg bg-muted/50\">\n                <Briefcase className=\"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n                <div>\n                  <h4 className=\"font-semibold mb-1\">Publicação de Vagas</h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Utilize seus créditos para publicar vagas e atrair os melhores talentos para sua empresa.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Transactions History */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Histórico de Transações</CardTitle>\n            <CardDescription>\n              Acompanhe todas as movimentações de créditos\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {transactionsQuery.isLoading ? (\n              <div className=\"space-y-3\">\n                {Array(5).fill(0).map((_, i) => (\n                  <div key={i} className=\"flex items-center gap-4 p-4 border rounded-lg\">\n                    <Skeleton className=\"h-10 w-10 rounded-full\" />\n                    <div className=\"flex-1 space-y-2\">\n                      <Skeleton className=\"h-4 w-3/4\" />\n                      <Skeleton className=\"h-3 w-1/2\" />\n                    </div>\n                    <Skeleton className=\"h-6 w-16\" />\n                  </div>\n                ))}\n              </div>\n            ) : transactions.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                <Coins className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                <h3 className=\"font-semibold text-lg mb-2\">\n                  Nenhuma transação ainda\n                </h3>\n                <p className=\"text-muted-foreground max-w-sm\">\n                  Suas transações de créditos aparecerão aqui quando você adquirir ou utilizar créditos\n                </p>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {transactions.map((transaction) => {\n                  const isCredit = transaction.type === 'credit';\n                  const Icon = isCredit ? ArrowUpCircle : ArrowDownCircle;\n\n                  return (\n                    <div \n                      key={transaction.id} \n                      className=\"flex items-center gap-4 p-4 border rounded-lg hover-elevate\"\n                      data-testid={`transaction-${transaction.id}`}\n                    >\n                      <div className=\"h-10 w-10 rounded-full bg-muted flex items-center justify-center flex-shrink-0\">\n                        <Icon className=\"h-5 w-5 text-muted-foreground\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-medium text-sm truncate\">\n                          {transaction.description}\n                        </p>\n                        <div className=\"flex items-center gap-2 text-xs text-muted-foreground mt-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {new Date(transaction.createdAt).toLocaleDateString('pt-BR', {\n                            day: '2-digit',\n                            month: 'short',\n                            year: 'numeric',\n                            hour: '2-digit',\n                            minute: '2-digit',\n                          })}\n                        </div>\n                      </div>\n                      <div className=\"flex flex-col items-end gap-1\">\n                        <Badge variant=\"secondary\">\n                          {isCredit ? '+' : '-'}{transaction.amount}\n                        </Badge>\n                        <span className=\"text-xs text-muted-foreground\">\n                          Saldo: {transaction.balanceAfter}\n                        </span>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </CompanyShell>\n  );\n}\n","size_bytes":8774},"client/src/pages/AdminNewsletters.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Mail, \n  Users, \n  TrendingUp,\n  Calendar,\n  CheckCircle2,\n  XCircle\n} from \"lucide-react\";\nimport type { NewsletterSubscription } from \"@shared/schema\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\nexport default function AdminNewsletters() {\n  const [, setLocation] = useLocation();\n  const { isLoading: authLoading, isAuthenticated, userType } = useAuth();\n\n  useEffect(() => {\n    if (!authLoading && (!isAuthenticated || userType !== 'admin')) {\n      setLocation(\"/admin/login\");\n    }\n  }, [authLoading, isAuthenticated, userType, setLocation]);\n\n  const { data: subscriptions = [], isLoading } = useQuery<NewsletterSubscription[]>({\n    queryKey: ['/api/admin/newsletter-subscriptions'],\n    enabled: isAuthenticated && userType === 'admin',\n  });\n\n  if (authLoading || isLoading) {\n    return (\n      <div className=\"p-8\">\n        <Skeleton className=\"h-10 w-64 mb-8\" />\n        <div className=\"grid gap-6 md:grid-cols-3 mb-8\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-32\" />\n          ))}\n        </div>\n        <Skeleton className=\"h-96\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated || userType !== 'admin') {\n    return null;\n  }\n\n  // Calculate statistics\n  const totalSubscriptions = subscriptions.length;\n  const activeSubscriptions = subscriptions.filter(s => s.isActive === 'true').length;\n  \n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const todaySubscriptions = subscriptions.filter(s => {\n    const subDate = new Date(s.subscribedAt);\n    subDate.setHours(0, 0, 0, 0);\n    return subDate.getTime() === today.getTime();\n  }).length;\n\n  const last7Days = new Date();\n  last7Days.setDate(last7Days.getDate() - 7);\n  const recentSubscriptions = subscriptions.filter(s => {\n    const subDate = new Date(s.subscribedAt);\n    return subDate >= last7Days;\n  }).length;\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"font-heading font-bold text-3xl mb-2\">\n          Newsletter\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Gerencie as inscrições da newsletter\n        </p>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid gap-6 md:grid-cols-4 mb-8\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total de Inscritos\n            </CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-subscriptions\">\n              {totalSubscriptions}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {activeSubscriptions} ativos\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Inscritos Hoje\n            </CardTitle>\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-today-subscriptions\">\n              {todaySubscriptions}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Últimas 24 horas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Últimos 7 Dias\n            </CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-week-subscriptions\">\n              {recentSubscriptions}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Novos inscritos\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Taxa de Ativos\n            </CardTitle>\n            <Mail className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-active-rate\">\n              {totalSubscriptions > 0 \n                ? Math.round((activeSubscriptions / totalSubscriptions) * 100)\n                : 0}%\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Emails ativos\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Subscriptions List */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Lista de Inscritos ({totalSubscriptions})</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {subscriptions.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <Mail className=\"h-12 w-12 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">\n                Nenhuma inscrição ainda\n              </h3>\n              <p className=\"text-muted-foreground\">\n                As inscrições da newsletter aparecerão aqui\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left py-3 px-4 font-semibold text-sm\">\n                      Email\n                    </th>\n                    <th className=\"text-left py-3 px-4 font-semibold text-sm\">\n                      Data de Inscrição\n                    </th>\n                    <th className=\"text-left py-3 px-4 font-semibold text-sm\">\n                      Status\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {subscriptions.map((subscription) => (\n                    <tr \n                      key={subscription.id} \n                      className=\"border-b hover-elevate\"\n                      data-testid={`subscription-row-${subscription.id}`}\n                    >\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"font-medium\">\n                            {subscription.email}\n                          </span>\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-4 text-sm text-muted-foreground\">\n                        {format(\n                          new Date(subscription.subscribedAt), \n                          \"dd/MM/yyyy 'às' HH:mm\",\n                          { locale: ptBR }\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        {subscription.isActive === 'true' ? (\n                          <Badge variant=\"default\" className=\"flex items-center gap-1 w-fit\">\n                            <CheckCircle2 className=\"h-3 w-3\" />\n                            Ativo\n                          </Badge>\n                        ) : (\n                          <Badge variant=\"secondary\" className=\"flex items-center gap-1 w-fit\">\n                            <XCircle className=\"h-3 w-3\" />\n                            Inativo\n                          </Badge>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":8375},"client/src/pages/ForgotPassword.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Mail, ArrowLeft, Lock, KeyRound } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport operlistLogo from \"@assets/operlist2025_1763133653351.png\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\n\ntype Step = 'email' | 'code' | 'password';\n\nexport default function ForgotPassword() {\n  const [step, setStep] = useState<Step>('email');\n  const [email, setEmail] = useState(\"\");\n  const [code, setCode] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const requestCodeMutation = useMutation({\n    mutationFn: async (data: { email: string }) => {\n      return await apiRequest('POST', '/api/auth/forgot-password', data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Código enviado!\",\n        description: \"Verifique seu e-mail para obter o código de recuperação\",\n      });\n      setStep('code');\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao enviar código\",\n        description: error.message || \"Tente novamente mais tarde\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const verifyCodeMutation = useMutation({\n    mutationFn: async (data: { email: string; code: string }) => {\n      return await apiRequest('POST', '/api/auth/verify-reset-code', data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Código verificado!\",\n        description: \"Agora você pode criar uma nova senha\",\n      });\n      setStep('password');\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Código inválido\",\n        description: error.message || \"Verifique o código e tente novamente\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetPasswordMutation = useMutation({\n    mutationFn: async (data: { email: string; code: string; newPassword: string }) => {\n      return await apiRequest('POST', '/api/auth/reset-password', data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Senha alterada!\",\n        description: \"Sua senha foi alterada com sucesso. Faça login com sua nova senha.\",\n      });\n      setTimeout(() => {\n        setLocation('/login');\n      }, 2000);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao alterar senha\",\n        description: error.message || \"Tente novamente\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleRequestCode = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) {\n      toast({\n        title: \"Email obrigatório\",\n        description: \"Por favor, insira seu e-mail\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    requestCodeMutation.mutate({ email });\n  };\n\n  const handleVerifyCode = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!code || code.length !== 4) {\n      toast({\n        title: \"Código inválido\",\n        description: \"O código deve ter 4 dígitos\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    verifyCodeMutation.mutate({ email, code });\n  };\n\n  const handleResetPassword = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newPassword || newPassword.length < 6) {\n      toast({\n        title: \"Senha muito curta\",\n        description: \"A senha deve ter pelo menos 6 caracteres\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    if (newPassword !== confirmPassword) {\n      toast({\n        title: \"Senhas não conferem\",\n        description: \"As senhas digitadas são diferentes\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    resetPasswordMutation.mutate({ email, code, newPassword });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      <div className=\"flex-1 flex flex-col justify-center px-8 lg:px-16\">\n        <div className=\"w-full max-w-md mx-auto\">\n          <div className=\"mb-10\">\n          <Link href=\"/login\">\n            <img \n              src={operlistLogo} \n              alt=\"Operlist\" \n              className=\"h-12 mb-8 cursor-pointer\"\n              data-testid=\"logo-forgot-password\"\n            />\n          </Link>\n          <h1 className=\"font-bold text-4xl mb-3\">\n            {step === 'email' && 'Recuperar Senha'}\n            {step === 'code' && 'Verificar Código'}\n            {step === 'password' && 'Nova Senha'}\n          </h1>\n          <p className=\"text-muted-foreground text-lg\">\n            {step === 'email' && 'Digite seu e-mail para receber o código de recuperação'}\n            {step === 'code' && 'Digite o código de 4 dígitos enviado para seu e-mail'}\n            {step === 'password' && 'Crie uma nova senha para sua conta'}\n          </p>\n        </div>\n\n        {step === 'email' && (\n          <form onSubmit={handleRequestCode} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">E-mail</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"seu@email.com\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"pl-10\"\n                  required\n                  data-testid=\"input-email\"\n                />\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Digite o e-mail cadastrado na sua conta\n              </p>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full h-11\"\n              disabled={requestCodeMutation.isPending}\n              data-testid=\"button-send-code\"\n            >\n              {requestCodeMutation.isPending ? \"Enviando...\" : \"Enviar Código\"}\n            </Button>\n          </form>\n        )}\n\n        {step === 'code' && (\n          <form onSubmit={handleVerifyCode} className=\"space-y-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-center space-y-2\">\n                  <div className=\"h-12 w-12 mx-auto rounded-lg bg-muted flex items-center justify-center\">\n                    <KeyRound className=\"h-6 w-6 text-muted-foreground\" />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Código enviado para <strong>{email}</strong>\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"code\">Código de Verificação</Label>\n              <Input\n                id=\"code\"\n                type=\"text\"\n                placeholder=\"0000\"\n                value={code}\n                onChange={(e) => {\n                  const value = e.target.value.replace(/\\D/g, '').slice(0, 4);\n                  setCode(value);\n                }}\n                maxLength={4}\n                className=\"text-center text-2xl font-bold tracking-widest\"\n                required\n                data-testid=\"input-code\"\n              />\n              <p className=\"text-xs text-muted-foreground text-center\">\n                Digite o código de 4 dígitos\n              </p>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full h-11\"\n              disabled={verifyCodeMutation.isPending || code.length !== 4}\n              data-testid=\"button-verify-code\"\n            >\n              {verifyCodeMutation.isPending ? \"Verificando...\" : \"Verificar Código\"}\n            </Button>\n\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              className=\"w-full\"\n              onClick={() => setStep('email')}\n              data-testid=\"button-back-to-email\"\n            >\n              Voltar\n            </Button>\n          </form>\n        )}\n\n        {step === 'password' && (\n          <form onSubmit={handleResetPassword} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"newPassword\">Nova Senha</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                <Input\n                  id=\"newPassword\"\n                  type=\"password\"\n                  placeholder=\"••••••••\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  className=\"pl-10\"\n                  required\n                  minLength={6}\n                  data-testid=\"input-new-password\"\n                />\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Mínimo de 6 caracteres\n              </p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirmar Nova Senha</Label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"••••••••\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  className=\"pl-10\"\n                  required\n                  minLength={6}\n                  data-testid=\"input-confirm-password\"\n                />\n              </div>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full h-11\"\n              disabled={resetPasswordMutation.isPending}\n              data-testid=\"button-reset-password\"\n            >\n              {resetPasswordMutation.isPending ? \"Alterando...\" : \"Alterar Senha\"}\n            </Button>\n          </form>\n        )}\n\n        <div className=\"mt-6 text-center\">\n          <Link href=\"/login\" className=\"text-sm text-muted-foreground hover-elevate px-2 py-1 rounded-md inline-flex items-center gap-2\" data-testid=\"link-back-to-login\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Voltar para o login\n          </Link>\n        </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":10839},"client/src/pages/CompanyContractTypes.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { Plus, Trash2, Edit, FileText } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertContractTypeSchema, type ContractType } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\n\nconst contractTypeFormSchema = insertContractTypeSchema.extend({\n  name: z.string().min(3, \"O nome deve ter pelo menos 3 caracteres\"),\n  description: z.string().optional(),\n}).omit({ companyId: true });\n\ntype ContractTypeFormData = z.infer<typeof contractTypeFormSchema>;\n\nexport default function CompanyContractTypes() {\n  const { toast } = useToast();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingContractType, setEditingContractType] = useState<ContractType | null>(null);\n\n  const { data: contractTypes, isLoading } = useQuery<ContractType[]>({\n    queryKey: [\"/api/company/contract-types\"],\n  });\n\n  const form = useForm<ContractTypeFormData>({\n    resolver: zodResolver(contractTypeFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: ContractTypeFormData) => {\n      return await apiRequest(\"POST\", \"/api/company/contract-types\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/contract-types\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Tipo de contrato criado\",\n        description: \"O tipo de contrato foi criado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar tipo de contrato\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<ContractTypeFormData> }) => {\n      return await apiRequest(\"PATCH\", `/api/company/contract-types/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/contract-types\"] });\n      setEditingContractType(null);\n      form.reset();\n      toast({\n        title: \"Tipo de contrato atualizado\",\n        description: \"O tipo de contrato foi atualizado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar tipo de contrato\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/company/contract-types/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/contract-types\"] });\n      toast({\n        title: \"Tipo de contrato deletado\",\n        description: \"O tipo de contrato foi removido com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao deletar tipo de contrato\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ContractTypeFormData) => {\n    if (editingContractType) {\n      updateMutation.mutate({ id: editingContractType.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (contractType: ContractType) => {\n    setEditingContractType(contractType);\n    form.reset({\n      name: contractType.name,\n      description: contractType.description || \"\",\n      isActive: contractType.isActive,\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setIsCreateDialogOpen(false);\n    setEditingContractType(null);\n    form.reset();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p className=\"text-muted-foreground\">Carregando tipos de contrato...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Tipos de Contrato</h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Gerencie os tipos de contrato que você oferece\n          </p>\n        </div>\n        <Button\n          onClick={() => setIsCreateDialogOpen(true)}\n          data-testid=\"button-create-contract-type\"\n        >\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Novo Tipo de Contrato\n        </Button>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {contractTypes?.map((contractType) => (\n          <Card key={contractType.id} data-testid={`card-contract-type-${contractType.id}`}>\n            <CardHeader className=\"gap-2\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5 text-primary\" />\n                  <CardTitle className=\"text-lg\">{contractType.name}</CardTitle>\n                </div>\n                <Badge variant={contractType.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                  {contractType.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                </Badge>\n              </div>\n              {contractType.description && (\n                <CardDescription className=\"line-clamp-2\">\n                  {contractType.description}\n                </CardDescription>\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleEdit(contractType)}\n                  data-testid={`button-edit-contract-type-${contractType.id}`}\n                >\n                  <Edit className=\"h-4 w-4 mr-1\" />\n                  Editar\n                </Button>\n                <AlertDialog>\n                  <AlertDialogTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      data-testid={`button-delete-contract-type-${contractType.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-1\" />\n                      Excluir\n                    </Button>\n                  </AlertDialogTrigger>\n                  <AlertDialogContent>\n                    <AlertDialogHeader>\n                      <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n                      <AlertDialogDescription>\n                        Tem certeza que deseja excluir o tipo de contrato \"{contractType.name}\"?\n                        Esta ação não pode ser desfeita.\n                      </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                      <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancelar</AlertDialogCancel>\n                      <AlertDialogAction\n                        onClick={() => deleteMutation.mutate(contractType.id)}\n                        data-testid=\"button-confirm-delete\"\n                      >\n                        Excluir\n                      </AlertDialogAction>\n                    </AlertDialogFooter>\n                  </AlertDialogContent>\n                </AlertDialog>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {contractTypes?.length === 0 && (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <FileText className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Nenhum tipo de contrato cadastrado</h3>\n            <p className=\"text-muted-foreground text-center mb-4\">\n              Comece criando seu primeiro tipo de contrato para categorizar suas vagas.\n            </p>\n            <Button onClick={() => setIsCreateDialogOpen(true)}>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Criar Primeiro Tipo de Contrato\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      <Dialog open={isCreateDialogOpen || editingContractType !== null} onOpenChange={handleCloseDialog}>\n        <DialogContent data-testid=\"dialog-contract-type-form\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingContractType ? \"Editar Tipo de Contrato\" : \"Novo Tipo de Contrato\"}\n            </DialogTitle>\n            <DialogDescription>\n              {editingContractType\n                ? \"Atualize as informações do tipo de contrato\"\n                : \"Preencha os dados para criar um novo tipo de contrato\"}\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Ex: CLT, PJ, Temporário\"\n                        {...field}\n                        data-testid=\"input-name\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Descreva o tipo de contrato (opcional)\"\n                        {...field}\n                        data-testid=\"input-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end gap-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleCloseDialog}\n                  data-testid=\"button-cancel\"\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-submit\"\n                >\n                  {createMutation.isPending || updateMutation.isPending\n                    ? \"Salvando...\"\n                    : editingContractType\n                    ? \"Atualizar\"\n                    : \"Criar\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11810},"TESTE_NOVOS_MENUS.md":{"content":"# 🎯 Como Testar os Novos Cadastros\n\n## 📋 **Passos para Ver os Menus:**\n\n### 1️⃣ **Fazer Logout do Admin**\n- Clique no botão de sair no painel de admin\n\n### 2️⃣ **Fazer Login como EMPRESA**\nUse uma das contas de empresa disponíveis:\n- **Email:** `empresa@teste.com`\n- **Senha:** `123456` (provavelmente)\n\nOU\n\n- **Email:** `renato@vale.com.gg`\n- **Senha:** (a senha que foi configurada)\n\n### 3️⃣ **Acessar o Painel da Empresa**\nApós o login, você será redirecionado para `/dashboard/empresa`\n\n### 4️⃣ **Encontrar os Novos Menus**\nNa **sidebar esquerda**, procure pelo menu **\"Configurações\"**:\n\n```\n📊 Dashboard\n💼 Minhas Vagas\n💳 Meu Plano\n💰 Meus Créditos\n🏢 Perfil da Empresa\n⚙️ Configurações  ← CLIQUE AQUI PARA EXPANDIR\n   ├─ 📝 Banco de Perguntas\n   ├─ ⏰ Tipos de Trabalho      ← NOVO!\n   └─ 📄 Tipos de Contrato       ← NOVO!\n```\n\n### 5️⃣ **Testar as Funcionalidades**\n\n#### **Tipos de Trabalho** (`/empresa/tipos-trabalho`)\n- Ver lista de tipos de trabalho\n- Criar novo tipo (ex: \"Tempo Integral\", \"Meio Período\")\n- Editar tipos existentes\n- Deletar tipos\n- Ativar/desativar status\n\n#### **Tipos de Contrato** (`/empresa/tipos-contrato`)\n- Ver lista de tipos de contrato\n- Criar novo tipo (ex: \"CLT\", \"PJ\", \"Temporário\")\n- Editar tipos existentes\n- Deletar tipos\n- Ativar/desativar status\n\n---\n\n## 🔑 **Informação Importante:**\n\nCada **EMPRESA** tem seus próprios tipos de trabalho e contrato. Eles são isolados por empresa (companyId).\n\nQuando criar vagas, essas configurações permitirão categorizar as oportunidades de forma padronizada.\n","size_bytes":1631},"client/src/pages/CompanyWorkTypes.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { Plus, Trash2, Edit, Briefcase } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertWorkTypeSchema, type WorkType } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\n\nconst workTypeFormSchema = insertWorkTypeSchema.extend({\n  name: z.string().min(3, \"O nome deve ter pelo menos 3 caracteres\"),\n  description: z.string().optional(),\n}).omit({ companyId: true });\n\ntype WorkTypeFormData = z.infer<typeof workTypeFormSchema>;\n\nexport default function CompanyWorkTypes() {\n  const { toast } = useToast();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingWorkType, setEditingWorkType] = useState<WorkType | null>(null);\n\n  const { data: workTypes, isLoading } = useQuery<WorkType[]>({\n    queryKey: [\"/api/company/work-types\"],\n  });\n\n  const form = useForm<WorkTypeFormData>({\n    resolver: zodResolver(workTypeFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: WorkTypeFormData) => {\n      return await apiRequest(\"POST\", \"/api/company/work-types\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/work-types\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Tipo de trabalho criado\",\n        description: \"O tipo de trabalho foi criado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar tipo de trabalho\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<WorkTypeFormData> }) => {\n      return await apiRequest(\"PATCH\", `/api/company/work-types/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/work-types\"] });\n      setEditingWorkType(null);\n      form.reset();\n      toast({\n        title: \"Tipo de trabalho atualizado\",\n        description: \"O tipo de trabalho foi atualizado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar tipo de trabalho\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/company/work-types/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/company/work-types\"] });\n      toast({\n        title: \"Tipo de trabalho deletado\",\n        description: \"O tipo de trabalho foi removido com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao deletar tipo de trabalho\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: WorkTypeFormData) => {\n    if (editingWorkType) {\n      updateMutation.mutate({ id: editingWorkType.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (workType: WorkType) => {\n    setEditingWorkType(workType);\n    form.reset({\n      name: workType.name,\n      description: workType.description || \"\",\n      isActive: workType.isActive,\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setIsCreateDialogOpen(false);\n    setEditingWorkType(null);\n    form.reset();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p className=\"text-muted-foreground\">Carregando tipos de trabalho...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Tipos de Trabalho</h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Gerencie os tipos de trabalho que você oferece\n          </p>\n        </div>\n        <Button\n          onClick={() => setIsCreateDialogOpen(true)}\n          data-testid=\"button-create-work-type\"\n        >\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Novo Tipo de Trabalho\n        </Button>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {workTypes?.map((workType) => (\n          <Card key={workType.id} data-testid={`card-work-type-${workType.id}`}>\n            <CardHeader className=\"gap-2\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Briefcase className=\"h-5 w-5 text-primary\" />\n                  <CardTitle className=\"text-lg\">{workType.name}</CardTitle>\n                </div>\n                <Badge variant={workType.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                  {workType.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                </Badge>\n              </div>\n              {workType.description && (\n                <CardDescription className=\"line-clamp-2\">\n                  {workType.description}\n                </CardDescription>\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleEdit(workType)}\n                  data-testid={`button-edit-work-type-${workType.id}`}\n                >\n                  <Edit className=\"h-4 w-4 mr-1\" />\n                  Editar\n                </Button>\n                <AlertDialog>\n                  <AlertDialogTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      data-testid={`button-delete-work-type-${workType.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-1\" />\n                      Excluir\n                    </Button>\n                  </AlertDialogTrigger>\n                  <AlertDialogContent>\n                    <AlertDialogHeader>\n                      <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n                      <AlertDialogDescription>\n                        Tem certeza que deseja excluir o tipo de trabalho \"{workType.name}\"?\n                        Esta ação não pode ser desfeita.\n                      </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                      <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancelar</AlertDialogCancel>\n                      <AlertDialogAction\n                        onClick={() => deleteMutation.mutate(workType.id)}\n                        data-testid=\"button-confirm-delete\"\n                      >\n                        Excluir\n                      </AlertDialogAction>\n                    </AlertDialogFooter>\n                  </AlertDialogContent>\n                </AlertDialog>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {workTypes?.length === 0 && (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Briefcase className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Nenhum tipo de trabalho cadastrado</h3>\n            <p className=\"text-muted-foreground text-center mb-4\">\n              Comece criando seu primeiro tipo de trabalho para categorizar suas vagas.\n            </p>\n            <Button onClick={() => setIsCreateDialogOpen(true)}>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Criar Primeiro Tipo de Trabalho\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      <Dialog open={isCreateDialogOpen || editingWorkType !== null} onOpenChange={handleCloseDialog}>\n        <DialogContent data-testid=\"dialog-work-type-form\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingWorkType ? \"Editar Tipo de Trabalho\" : \"Novo Tipo de Trabalho\"}\n            </DialogTitle>\n            <DialogDescription>\n              {editingWorkType\n                ? \"Atualize as informações do tipo de trabalho\"\n                : \"Preencha os dados para criar um novo tipo de trabalho\"}\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Ex: Tempo Integral, Meio Período\"\n                        {...field}\n                        data-testid=\"input-name\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Descreva o tipo de trabalho (opcional)\"\n                        {...field}\n                        data-testid=\"input-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end gap-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleCloseDialog}\n                  data-testid=\"button-cancel\"\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-submit\"\n                >\n                  {createMutation.isPending || updateMutation.isPending\n                    ? \"Salvando...\"\n                    : editingWorkType\n                    ? \"Atualizar\"\n                    : \"Criar\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11586},"client/src/pages/AdminTaxonomy.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Tags, Briefcase, FileText, Plus, Pencil, Trash2, Loader2, Layers } from \"lucide-react\";\nimport SectorsTab from \"@/components/SectorsTab\";\nimport WorkTypesTab from \"@/components/WorkTypesTab\";\nimport ContractTypesTab from \"@/components/ContractTypesTab\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { Sector, Subsector, InsertSector, InsertSubsector } from \"@shared/schema\";\nimport { insertSectorSchema, insertSubsectorSchema } from \"@shared/schema\";\n\ninterface Tag {\n  id: string;\n  name: string;\n  slug: string;\n  description: string | null;\n  color: string | null;\n  isActive: string;\n  createdAt: string;\n}\n\nconst tagSchema = z.object({\n  name: z.string().min(1, \"Nome é obrigatório\"),\n  slug: z.string().min(1, \"Slug é obrigatório\"),\n  description: z.string().optional(),\n  color: z.string().optional(),\n  isActive: z.string(),\n});\n\ntype TagFormData = z.infer<typeof tagSchema>;\n\nexport default function AdminTaxonomy() {\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingTag, setEditingTag] = useState<Tag | null>(null);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [tagToDelete, setTagToDelete] = useState<Tag | null>(null);\n\n  const { data: tags, isLoading } = useQuery<Tag[]>({\n    queryKey: ['/api/admin/tags'],\n  });\n\n  const form = useForm<TagFormData>({\n    resolver: zodResolver(tagSchema),\n    defaultValues: {\n      name: \"\",\n      slug: \"\",\n      description: \"\",\n      color: \"#6366f1\",\n      isActive: \"true\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: TagFormData) => {\n      return await apiRequest('/api/admin/tags', 'POST', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/tags'] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Tag criada com sucesso\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar tag\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: TagFormData }) => {\n      return await apiRequest(`/api/admin/tags/${id}`, 'PATCH', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/tags'] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Tag atualizada com sucesso\",\n      });\n      setIsDialogOpen(false);\n      setEditingTag(null);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar tag\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(`/api/admin/tags/${id}`, 'DELETE');\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/tags'] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Tag deletada com sucesso\",\n      });\n      setDeleteDialogOpen(false);\n      setTagToDelete(null);\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao deletar tag\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: TagFormData) => {\n    if (editingTag) {\n      updateMutation.mutate({ id: editingTag.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (tag: Tag) => {\n    setEditingTag(tag);\n    form.reset({\n      name: tag.name,\n      slug: tag.slug,\n      description: tag.description || \"\",\n      color: tag.color || \"#6366f1\",\n      isActive: tag.isActive,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleDelete = (tag: Tag) => {\n    setTagToDelete(tag);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleNewTag = () => {\n    setEditingTag(null);\n    form.reset({\n      name: \"\",\n      slug: \"\",\n      description: \"\",\n      color: \"#6366f1\",\n      isActive: \"true\",\n    });\n    setIsDialogOpen(true);\n  };\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '');\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"p-2 bg-muted rounded-lg\">\n          <Tags className=\"h-6 w-6 text-muted-foreground\" />\n        </div>\n        <div>\n          <h2 className=\"text-2xl font-semibold\">Taxonomia</h2>\n          <p className=\"text-sm text-muted-foreground\">\n            Gerencie as classificações e categorias do sistema\n          </p>\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"tags\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"tags\" data-testid=\"tab-tags\">\n            <Tags className=\"h-4 w-4 mr-2\" />\n            Tags\n          </TabsTrigger>\n          <TabsTrigger value=\"setores\" data-testid=\"tab-sectors\">\n            <Layers className=\"h-4 w-4 mr-2\" />\n            Setores\n          </TabsTrigger>\n          <TabsTrigger value=\"tipos-trabalho\" data-testid=\"tab-work-types\">\n            <Briefcase className=\"h-4 w-4 mr-2\" />\n            Tipos de Trabalho\n          </TabsTrigger>\n          <TabsTrigger value=\"tipos-contrato\" data-testid=\"tab-contract-types\">\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Tipos de Contrato\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"tags\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <CardTitle>Tags</CardTitle>\n                  <CardDescription>\n                    Gerencie as tags disponíveis no sistema\n                  </CardDescription>\n                </div>\n                <Button onClick={handleNewTag} data-testid=\"button-new-tag\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Nova Tag\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                </div>\n              ) : !tags || tags.length === 0 ? (\n                <div className=\"text-center py-12 text-muted-foreground\">\n                  <Tags className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                  <p>Nenhuma tag cadastrada</p>\n                  <p className=\"text-sm mt-2\">Clique em \"Nova Tag\" para começar</p>\n                </div>\n              ) : (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Nome</TableHead>\n                      <TableHead>Slug</TableHead>\n                      <TableHead>Descrição</TableHead>\n                      <TableHead>Cor</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead className=\"text-right\">Ações</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {tags.map((tag) => (\n                      <TableRow key={tag.id} data-testid={`row-tag-${tag.id}`}>\n                        <TableCell className=\"font-medium\">{tag.name}</TableCell>\n                        <TableCell className=\"text-muted-foreground\">{tag.slug}</TableCell>\n                        <TableCell className=\"text-sm text-muted-foreground max-w-md truncate\">\n                          {tag.description || \"-\"}\n                        </TableCell>\n                        <TableCell>\n                          {tag.color && (\n                            <div className=\"flex items-center gap-2\">\n                              <div\n                                className=\"w-6 h-6 rounded border\"\n                                style={{ backgroundColor: tag.color }}\n                              />\n                              <span className=\"text-xs text-muted-foreground\">{tag.color}</span>\n                            </div>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <Badge variant={tag.isActive === 'true' ? 'default' : 'secondary'}>\n                            {tag.isActive === 'true' ? 'Ativa' : 'Inativa'}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex items-center justify-end gap-2\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => handleEdit(tag)}\n                              data-testid={`button-edit-tag-${tag.id}`}\n                            >\n                              <Pencil className=\"h-4 w-4\" />\n                            </Button>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => handleDelete(tag)}\n                              data-testid={`button-delete-tag-${tag.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"setores\" className=\"space-y-4\">\n          <SectorsTab />\n        </TabsContent>\n\n        <TabsContent value=\"tipos-trabalho\" className=\"space-y-4\">\n          <WorkTypesTab />\n        </TabsContent>\n\n        <TabsContent value=\"tipos-contrato\" className=\"space-y-4\">\n          <ContractTypesTab />\n        </TabsContent>\n      </Tabs>\n\n      {/* Dialog for Create/Edit Tag */}\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent data-testid=\"dialog-tag-form\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingTag ? 'Editar Tag' : 'Nova Tag'}\n            </DialogTitle>\n            <DialogDescription>\n              {editingTag ? 'Atualize as informações da tag' : 'Preencha os dados da nova tag'}\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        placeholder=\"Nome da tag\"\n                        data-testid=\"input-tag-name\"\n                        onChange={(e) => {\n                          field.onChange(e);\n                          if (!editingTag) {\n                            form.setValue('slug', generateSlug(e.target.value));\n                          }\n                        }}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"slug\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Slug</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        placeholder=\"slug-da-tag\"\n                        data-testid=\"input-tag-slug\"\n                      />\n                    </FormControl>\n                    <FormDescription>\n                      URL amigável (gerada automaticamente)\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"Descrição da tag (opcional)\"\n                        rows={3}\n                        data-testid=\"input-tag-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"color\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Cor</FormLabel>\n                    <FormControl>\n                      <div className=\"flex items-center gap-3\">\n                        <Input\n                          type=\"color\"\n                          {...field}\n                          className=\"w-20 h-10\"\n                          data-testid=\"input-tag-color\"\n                        />\n                        <Input\n                          type=\"text\"\n                          value={field.value}\n                          onChange={field.onChange}\n                          placeholder=\"#6366f1\"\n                          className=\"flex-1\"\n                        />\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"isActive\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                    <div className=\"space-y-0.5\">\n                      <FormLabel className=\"text-base\">\n                        Tag Ativa\n                      </FormLabel>\n                      <FormDescription>\n                        Tags ativas ficam visíveis no sistema\n                      </FormDescription>\n                    </div>\n                    <FormControl>\n                      <Switch\n                        checked={field.value === 'true'}\n                        onCheckedChange={(checked) => field.onChange(checked ? 'true' : 'false')}\n                        data-testid=\"switch-tag-active\"\n                      />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsDialogOpen(false)}\n                  data-testid=\"button-cancel-tag\"\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-save-tag\"\n                >\n                  {(createMutation.isPending || updateMutation.isPending) && (\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  )}\n                  {editingTag ? 'Salvar Alterações' : 'Criar Tag'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Confirmar Exclusão</AlertDialogTitle>\n            <AlertDialogDescription>\n              Tem certeza que deseja excluir a tag \"{tagToDelete?.name}\"?\n              Esta ação não pode ser desfeita.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => tagToDelete && deleteMutation.mutate(tagToDelete.id)}\n              disabled={deleteMutation.isPending}\n              data-testid=\"button-confirm-delete\"\n            >\n              {deleteMutation.isPending && (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              )}\n              Excluir\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":18564},"client/src/pages/AdminJobs.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Briefcase, Building2, MapPin, Eye, Pencil } from \"lucide-react\";\nimport { useState, useMemo } from \"react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { useLocation } from \"wouter\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobWithCompany extends Job {\n  company?: {\n    id: string;\n    name: string;\n  };\n}\n\nexport default function AdminJobs() {\n  const { userType } = useAuth();\n  const [, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [companyFilter, setCompanyFilter] = useState<string>(\"all\");\n\n  const { data: jobs, isLoading } = useQuery<JobWithCompany[]>({\n    queryKey: ['/api/admin/jobs'],\n    enabled: userType === 'admin',\n    retry: false,\n  });\n\n  // Extract unique companies for filter\n  const companies = useMemo(() => {\n    if (!jobs) return [];\n    const uniqueCompanies = new Map<string, string>();\n    jobs.forEach(job => {\n      if (job.company) {\n        uniqueCompanies.set(job.company.id, job.company.name);\n      }\n    });\n    return Array.from(uniqueCompanies.entries()).map(([id, name]) => ({ id, name }));\n  }, [jobs]);\n\n  // Filter jobs based on search and filters\n  const filteredJobs = useMemo(() => {\n    if (!jobs) return [];\n    \n    return jobs.filter(job => {\n      // Search filter\n      const matchesSearch = searchTerm === \"\" || \n        job.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        job.company?.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        job.location.toLowerCase().includes(searchTerm.toLowerCase());\n\n      // Status filter\n      const matchesStatus = statusFilter === \"all\" || job.status === statusFilter;\n\n      // Company filter\n      const matchesCompany = companyFilter === \"all\" || job.companyId === companyFilter;\n\n      return matchesSearch && matchesStatus && matchesCompany;\n    });\n  }, [jobs, searchTerm, statusFilter, companyFilter]);\n\n  // Statistics\n  const stats = useMemo(() => {\n    if (!jobs) return { total: 0, active: 0, suspended: 0 };\n    return {\n      total: jobs.length,\n      active: jobs.filter(j => j.status === 'Active').length,\n      suspended: jobs.filter(j => j.status === 'Suspended').length,\n    };\n  }, [jobs]);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics Cards */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total de Vagas\n            </CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-jobs\">\n              {isLoading ? (\n                <Skeleton className=\"h-8 w-16\" />\n              ) : (\n                stats.total\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Vagas Ativas\n            </CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-active-jobs\">\n              {isLoading ? (\n                <Skeleton className=\"h-8 w-16\" />\n              ) : (\n                stats.active\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Vagas Suspensas\n            </CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-suspended-jobs\">\n              {isLoading ? (\n                <Skeleton className=\"h-8 w-16\" />\n              ) : (\n                stats.suspended\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Vagas dos Clientes</CardTitle>\n          <CardDescription>\n            Visualize e gerencie todas as vagas criadas pelos clientes\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Buscar</label>\n              <Input\n                placeholder=\"Título, empresa ou localização...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                data-testid=\"input-search-jobs\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Status</label>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger data-testid=\"select-status-filter\">\n                  <SelectValue placeholder=\"Todos os status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos</SelectItem>\n                  <SelectItem value=\"Active\">Ativas</SelectItem>\n                  <SelectItem value=\"Suspended\">Suspensas</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Empresa</label>\n              <Select value={companyFilter} onValueChange={setCompanyFilter}>\n                <SelectTrigger data-testid=\"select-company-filter\">\n                  <SelectValue placeholder=\"Todas as empresas\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todas</SelectItem>\n                  {companies.map(company => (\n                    <SelectItem key={company.id} value={company.id}>\n                      {company.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          {/* Results Table */}\n          <div className=\"rounded-md border\">\n            {isLoading ? (\n              <div className=\"p-8 text-center\">\n                <Skeleton className=\"h-8 w-full mb-4\" />\n                <Skeleton className=\"h-8 w-full mb-4\" />\n                <Skeleton className=\"h-8 w-full\" />\n              </div>\n            ) : filteredJobs.length === 0 ? (\n              <div className=\"p-8 text-center text-muted-foreground\">\n                Nenhuma vaga encontrada\n              </div>\n            ) : (\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Título</TableHead>\n                    <TableHead>Empresa</TableHead>\n                    <TableHead>Localização</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Criada em</TableHead>\n                    <TableHead className=\"text-right\">Ações</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredJobs.map((job) => (\n                    <TableRow key={job.id} data-testid={`row-job-${job.id}`}>\n                      <TableCell className=\"font-medium\">\n                        <div className=\"flex items-center gap-2\">\n                          <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n                          {job.title}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <Building2 className=\"h-4 w-4 text-muted-foreground\" />\n                          {job.company?.name || 'N/A'}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                          {job.location}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant={job.status === 'Active' ? 'default' : 'secondary'}\n                          data-testid={`badge-status-${job.id}`}\n                        >\n                          {job.status === 'Active' ? 'Ativa' : 'Suspensa'}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-muted-foreground\">\n                        {format(new Date(job.createdAt), \"dd/MM/yyyy\", { locale: ptBR })}\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex items-center justify-end gap-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => setLocation(`/admin/vagas/${job.id}/editar`)}\n                            data-testid={`button-edit-job-${job.id}`}\n                          >\n                            <Pencil className=\"h-4 w-4 mr-2\" />\n                            Editar\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => setLocation(`/vaga/${job.id}`)}\n                            data-testid={`button-view-job-${job.id}`}\n                          >\n                            <Eye className=\"h-4 w-4 mr-2\" />\n                            Visualizar\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            )}\n          </div>\n\n          {/* Results Count */}\n          {!isLoading && filteredJobs.length > 0 && (\n            <div className=\"text-sm text-muted-foreground\">\n              Mostrando {filteredJobs.length} de {jobs?.length} vagas\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":11233},"client/src/components/ContractTypesTab.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\nimport { Plus, Pencil, Trash2, Loader2, FileText } from \"lucide-react\";\nimport type { GlobalContractType } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst contractTypeFormSchema = z.object({\n  name: z.string().min(1, \"Nome é obrigatório\"),\n  description: z.string().optional(),\n  isActive: z.string().default(\"true\"),\n});\n\ntype ContractTypeFormData = z.infer<typeof contractTypeFormSchema>;\n\nexport default function ContractTypesTab() {\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [selectedContractType, setSelectedContractType] = useState<GlobalContractType | null>(null);\n  const { toast } = useToast();\n\n  const { data: contractTypes, isLoading } = useQuery<GlobalContractType[]>({\n    queryKey: [\"/api/admin/global-contract-types\"],\n  });\n\n  const createForm = useForm<ContractTypeFormData>({\n    resolver: zodResolver(contractTypeFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const editForm = useForm<ContractTypeFormData>({\n    resolver: zodResolver(contractTypeFormSchema),\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: ContractTypeFormData) => {\n      return await apiRequest(\"POST\", \"/api/admin/global-contract-types\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-contract-types\"] });\n      setCreateDialogOpen(false);\n      createForm.reset();\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de contrato criado com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar tipo de contrato\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: ContractTypeFormData }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/global-contract-types/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-contract-types\"] });\n      setEditDialogOpen(false);\n      setSelectedContractType(null);\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de contrato atualizado com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar tipo de contrato\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/global-contract-types/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-contract-types\"] });\n      setDeleteDialogOpen(false);\n      setSelectedContractType(null);\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de contrato excluído com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao excluir tipo de contrato\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleEdit = (contractType: GlobalContractType) => {\n    setSelectedContractType(contractType);\n    editForm.reset({\n      name: contractType.name,\n      description: contractType.description || \"\",\n      isActive: contractType.isActive,\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleDelete = (contractType: GlobalContractType) => {\n    setSelectedContractType(contractType);\n    setDeleteDialogOpen(true);\n  };\n\n  const onCreateSubmit = (data: ContractTypeFormData) => {\n    createMutation.mutate(data);\n  };\n\n  const onEditSubmit = (data: ContractTypeFormData) => {\n    if (selectedContractType) {\n      updateMutation.mutate({ id: selectedContractType.id, data });\n    }\n  };\n\n  const confirmDelete = () => {\n    if (selectedContractType) {\n      deleteMutation.mutate(selectedContractType.id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Tipos</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-contract-types\">\n              {contractTypes?.length || 0}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Tipos Ativos</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-active-contract-types\">\n              {contractTypes?.filter(ct => ct.isActive === 'true').length || 0}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"space-y-1\">\n              <CardTitle>Tipos de Contrato</CardTitle>\n              <CardDescription>\n                Gerencie os tipos de contrato disponíveis no sistema\n              </CardDescription>\n            </div>\n            <Button \n              onClick={() => setCreateDialogOpen(true)}\n              data-testid=\"button-create-contract-type\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Novo Tipo\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : !contractTypes || contractTypes.length === 0 ? (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              <FileText className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>Nenhum tipo de contrato cadastrado</p>\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Nome</TableHead>\n                  <TableHead>Descrição</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Ações</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {contractTypes.map((contractType) => (\n                  <TableRow key={contractType.id} data-testid={`row-contract-type-${contractType.id}`}>\n                    <TableCell className=\"font-medium\">{contractType.name}</TableCell>\n                    <TableCell className=\"text-muted-foreground\">\n                      {contractType.description || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={contractType.isActive === 'true' ? \"default\" : \"secondary\"}>\n                        {contractType.isActive === 'true' ? \"Ativo\" : \"Inativo\"}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(contractType)}\n                          data-testid={`button-edit-contract-type-${contractType.id}`}\n                        >\n                          <Pencil className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleDelete(contractType)}\n                          data-testid={`button-delete-contract-type-${contractType.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Create Dialog */}\n      <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Novo Tipo de Contrato</DialogTitle>\n            <DialogDescription>\n              Adicione um novo tipo de contrato ao sistema\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...createForm}>\n            <form onSubmit={createForm.handleSubmit(onCreateSubmit)} className=\"space-y-4\">\n              <FormField\n                control={createForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Ex: CLT\" data-testid=\"input-contract-type-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={createForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição (Opcional)</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} placeholder=\"Descrição do tipo de contrato\" data-testid=\"input-contract-type-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <DialogFooter>\n                <Button type=\"submit\" disabled={createMutation.isPending} data-testid=\"button-submit-contract-type\">\n                  {createMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                  Criar\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Dialog */}\n      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Editar Tipo de Contrato</DialogTitle>\n            <DialogDescription>\n              Atualize as informações do tipo de contrato\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...editForm}>\n            <form onSubmit={editForm.handleSubmit(onEditSubmit)} className=\"space-y-4\">\n              <FormField\n                control={editForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Ex: CLT\" data-testid=\"input-edit-contract-type-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={editForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição (Opcional)</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} placeholder=\"Descrição do tipo de contrato\" data-testid=\"input-edit-contract-type-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <DialogFooter>\n                <Button type=\"submit\" disabled={updateMutation.isPending} data-testid=\"button-update-contract-type\">\n                  {updateMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                  Salvar\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Dialog */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n            <AlertDialogDescription>\n              Tem certeza que deseja excluir o tipo de contrato \"{selectedContractType?.name}\"?\n              Esta ação não pode ser desfeita.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete-contract-type\">Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              disabled={deleteMutation.isPending}\n              className=\"bg-destructive hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete-contract-type\"\n            >\n              {deleteMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Excluir\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":14602},"client/src/pages/SavedJobs.tsx":{"content":"import { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { SaveJobButton } from \"@/components/SaveJobButton\";\nimport { \n  ArrowLeft,\n  Bookmark,\n  MapPin,\n  Clock,\n  DollarSign,\n  Building2,\n  Briefcase\n} from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useEffect } from \"react\";\nimport type { SavedJob, Job } from \"@shared/schema\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface JobWithCompany extends Job {\n  companyName?: string;\n  companyLogo?: string;\n}\n\nexport default function SavedJobs() {\n  const [, setLocation] = useLocation();\n  const { isLoading: authLoading, isAuthenticated, userType } = useAuth();\n\n  useEffect(() => {\n    if (!authLoading && (!isAuthenticated || userType !== 'operator')) {\n      setLocation(\"/login\");\n    }\n  }, [authLoading, isAuthenticated, userType, setLocation]);\n\n  const { data: savedJobs = [], isLoading } = useQuery<Array<SavedJob & { job: JobWithCompany }>>({\n    queryKey: ['/api/operator/saved-jobs'],\n    enabled: isAuthenticated && userType === 'operator',\n  });\n\n  if (authLoading || isLoading) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Header />\n        <main className=\"flex-1 py-8 px-4\">\n          <div className=\"max-w-7xl mx-auto\">\n            <Skeleton className=\"h-10 w-64 mb-8\" />\n            <div className=\"grid gap-4\">\n              {[1, 2, 3].map((i) => (\n                <Skeleton key={i} className=\"h-48 w-full\" />\n              ))}\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated || userType !== 'operator') {\n    return null;\n  }\n\n  const getWorkTypeLabel = (workType: string) => {\n    const labels: Record<string, string> = {\n      'presencial': 'Presencial',\n      'remoto': 'Remoto',\n      'hibrido': 'Híbrido',\n    };\n    return labels[workType] || workType;\n  };\n\n  const getContractTypeLabel = (contractType: string) => {\n    const labels: Record<string, string> = {\n      'clt': 'CLT',\n      'pj': 'PJ',\n      'estagio': 'Estágio',\n      'temporario': 'Temporário',\n    };\n    return labels[contractType] || contractType;\n  };\n\n  const formatSalary = (salary: string) => {\n    if (!salary) return '';\n    \n    // Se já está formatado, retornar\n    if (salary.includes('R$')) return salary;\n    \n    // Tentar formatar número\n    const num = parseFloat(salary);\n    if (!isNaN(num)) {\n      return `R$ ${num.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n    }\n    \n    return salary;\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 py-8 px-4 bg-background\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"mb-8\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => setLocation(\"/dashboard/operador\")}\n              className=\"mb-4\"\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Voltar ao Dashboard\n            </Button>\n\n            <div className=\"flex items-center gap-3 mb-2\">\n              <Bookmark className=\"h-8 w-8 text-primary\" />\n              <h1 className=\"font-heading font-bold text-3xl\">\n                Vagas Salvas\n              </h1>\n            </div>\n            <p className=\"text-muted-foreground\">\n              {savedJobs.length === 0 \n                ? 'Você ainda não salvou nenhuma vaga'\n                : `${savedJobs.length} ${savedJobs.length === 1 ? 'vaga salva' : 'vagas salvas'}`\n              }\n            </p>\n          </div>\n\n          {savedJobs.length === 0 ? (\n            <Card>\n              <CardContent className=\"flex flex-col items-center justify-center py-16\">\n                <Bookmark className=\"h-16 w-16 text-muted-foreground mb-4\" />\n                <h3 className=\"text-xl font-semibold mb-2\">\n                  Nenhuma vaga salva ainda\n                </h3>\n                <p className=\"text-muted-foreground text-center max-w-md mb-6\">\n                  Explore as vagas disponíveis e salve aquelas que chamarem sua atenção clicando no ícone de bookmark\n                </p>\n                <Button onClick={() => setLocation(\"/vagas\")} data-testid=\"button-browse-jobs\">\n                  <Briefcase className=\"mr-2 h-5 w-5\" />\n                  Explorar Vagas\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {savedJobs.map((savedJob) => {\n                const job = savedJob.job;\n                \n                return (\n                  <Card \n                    key={savedJob.id} \n                    className=\"overflow-hidden hover-elevate cursor-pointer transition-all group\"\n                    onClick={() => setLocation(`/vaga/${job.id}`)}\n                    data-testid={`saved-job-card-${job.id}`}\n                  >\n                    <CardContent className=\"p-6\">\n                      <div className=\"space-y-4\">\n                        {/* Company Info */}\n                        <div className=\"flex items-start gap-3\">\n                          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                            {job.companyLogo ? (\n                              <img \n                                src={job.companyLogo} \n                                alt={job.companyName || 'Company'} \n                                className=\"h-full w-full object-cover\"\n                              />\n                            ) : (\n                              <Building2 className=\"h-6 w-6 text-primary\" />\n                            )}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-semibold text-base line-clamp-2 group-hover:text-primary transition-colors\">\n                              {job.title}\n                            </h3>\n                            {job.companyName && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                                {job.companyName}\n                              </p>\n                            )}\n                          </div>\n                          <SaveJobButton jobId={job.id} />\n                        </div>\n\n                        {/* Description */}\n                        {job.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-3\">\n                            {job.description}\n                          </p>\n                        )}\n\n                        {/* Job Details */}\n                        <div className=\"space-y-2\">\n                          {job.location && (\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                              <MapPin className=\"h-4 w-4 flex-shrink-0\" />\n                              <span className=\"line-clamp-1\">{job.location}</span>\n                            </div>\n                          )}\n                          \n                          {job.salary && (\n                            <div className=\"flex items-center gap-2 text-sm font-medium text-green-600 dark:text-green-400\">\n                              <DollarSign className=\"h-4 w-4 flex-shrink-0\" />\n                              <span>{formatSalary(job.salary)}</span>\n                            </div>\n                          )}\n\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                            <Clock className=\"h-4 w-4 flex-shrink-0\" />\n                            <span>\n                              Salva em {format(new Date(savedJob.savedAt), \"d 'de' MMMM 'de' yyyy\", { locale: ptBR })}\n                            </span>\n                          </div>\n                        </div>\n\n                        {/* Badges */}\n                        <div className=\"flex flex-wrap gap-2\">\n                          {job.workType && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {getWorkTypeLabel(job.workType)}\n                            </Badge>\n                          )}\n                          {job.contractType && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {getContractTypeLabel(job.contractType)}\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":9256},"client/src/components/SaveJobButton.tsx":{"content":"import { Bookmark } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface SaveJobButtonProps {\n  jobId: string;\n  className?: string;\n}\n\nexport function SaveJobButton({ jobId, className }: SaveJobButtonProps) {\n  const { toast } = useToast();\n\n  // Check if job is saved\n  const { data: savedData } = useQuery<{ isSaved: boolean }>({\n    queryKey: ['/api/jobs', jobId, 'is-saved'],\n  });\n\n  const isSaved = savedData?.isSaved || false;\n\n  // Save job mutation\n  const saveMutation = useMutation({\n    mutationFn: () => apiRequest('POST', `/api/jobs/${jobId}/save`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs', jobId, 'is-saved'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/operator/saved-jobs'] });\n      toast({\n        title: \"Vaga salva!\",\n        description: \"A vaga foi adicionada aos seus favoritos.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao salvar vaga\",\n        description: \"Não foi possível salvar a vaga. Tente novamente.\",\n      });\n    },\n  });\n\n  // Unsave job mutation\n  const unsaveMutation = useMutation({\n    mutationFn: () => apiRequest('DELETE', `/api/jobs/${jobId}/save`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs', jobId, 'is-saved'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/operator/saved-jobs'] });\n      toast({\n        title: \"Vaga removida\",\n        description: \"A vaga foi removida dos seus favoritos.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao remover vaga\",\n        description: \"Não foi possível remover a vaga. Tente novamente.\",\n      });\n    },\n  });\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (isSaved) {\n      unsaveMutation.mutate();\n    } else {\n      saveMutation.mutate();\n    }\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={handleClick}\n      disabled={saveMutation.isPending || unsaveMutation.isPending}\n      className={`${isSaved ? \"text-primary\" : \"\"} ${className || \"\"}`}\n      data-testid=\"button-bookmark\"\n      title={isSaved ? \"Remover dos favoritos\" : \"Salvar vaga\"}\n    >\n      <Bookmark className={`h-5 w-5 ${isSaved ? \"fill-current\" : \"\"}`} />\n    </Button>\n  );\n}\n","size_bytes":2550},"client/src/components/WorkTypesTab.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\nimport { Plus, Pencil, Trash2, Loader2, Briefcase } from \"lucide-react\";\nimport type { GlobalWorkType } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst workTypeFormSchema = z.object({\n  name: z.string().min(1, \"Nome é obrigatório\"),\n  description: z.string().optional(),\n  isActive: z.string().default(\"true\"),\n});\n\ntype WorkTypeFormData = z.infer<typeof workTypeFormSchema>;\n\nexport default function WorkTypesTab() {\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [selectedWorkType, setSelectedWorkType] = useState<GlobalWorkType | null>(null);\n  const { toast } = useToast();\n\n  const { data: workTypes, isLoading } = useQuery<GlobalWorkType[]>({\n    queryKey: [\"/api/admin/global-work-types\"],\n  });\n\n  const createForm = useForm<WorkTypeFormData>({\n    resolver: zodResolver(workTypeFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const editForm = useForm<WorkTypeFormData>({\n    resolver: zodResolver(workTypeFormSchema),\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: WorkTypeFormData) => {\n      return await apiRequest(\"POST\", \"/api/admin/global-work-types\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-work-types\"] });\n      setCreateDialogOpen(false);\n      createForm.reset();\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de trabalho criado com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar tipo de trabalho\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: WorkTypeFormData }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/global-work-types/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-work-types\"] });\n      setEditDialogOpen(false);\n      setSelectedWorkType(null);\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de trabalho atualizado com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar tipo de trabalho\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/global-work-types/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/global-work-types\"] });\n      setDeleteDialogOpen(false);\n      setSelectedWorkType(null);\n      toast({\n        title: \"Sucesso\",\n        description: \"Tipo de trabalho excluído com sucesso\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao excluir tipo de trabalho\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleEdit = (workType: GlobalWorkType) => {\n    setSelectedWorkType(workType);\n    editForm.reset({\n      name: workType.name,\n      description: workType.description || \"\",\n      isActive: workType.isActive,\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleDelete = (workType: GlobalWorkType) => {\n    setSelectedWorkType(workType);\n    setDeleteDialogOpen(true);\n  };\n\n  const onCreateSubmit = (data: WorkTypeFormData) => {\n    createMutation.mutate(data);\n  };\n\n  const onEditSubmit = (data: WorkTypeFormData) => {\n    if (selectedWorkType) {\n      updateMutation.mutate({ id: selectedWorkType.id, data });\n    }\n  };\n\n  const confirmDelete = () => {\n    if (selectedWorkType) {\n      deleteMutation.mutate(selectedWorkType.id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Tipos</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-work-types\">\n              {workTypes?.length || 0}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Tipos Ativos</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-active-work-types\">\n              {workTypes?.filter(wt => wt.isActive === 'true').length || 0}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"space-y-1\">\n              <CardTitle>Tipos de Trabalho</CardTitle>\n              <CardDescription>\n                Gerencie os tipos de trabalho disponíveis no sistema\n              </CardDescription>\n            </div>\n            <Button \n              onClick={() => setCreateDialogOpen(true)}\n              data-testid=\"button-create-work-type\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Novo Tipo\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : !workTypes || workTypes.length === 0 ? (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              <Briefcase className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>Nenhum tipo de trabalho cadastrado</p>\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Nome</TableHead>\n                  <TableHead>Descrição</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Ações</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {workTypes.map((workType) => (\n                  <TableRow key={workType.id} data-testid={`row-work-type-${workType.id}`}>\n                    <TableCell className=\"font-medium\">{workType.name}</TableCell>\n                    <TableCell className=\"text-muted-foreground\">\n                      {workType.description || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={workType.isActive === 'true' ? \"default\" : \"secondary\"}>\n                        {workType.isActive === 'true' ? \"Ativo\" : \"Inativo\"}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(workType)}\n                          data-testid={`button-edit-work-type-${workType.id}`}\n                        >\n                          <Pencil className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleDelete(workType)}\n                          data-testid={`button-delete-work-type-${workType.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Create Dialog */}\n      <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Novo Tipo de Trabalho</DialogTitle>\n            <DialogDescription>\n              Adicione um novo tipo de trabalho ao sistema\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...createForm}>\n            <form onSubmit={createForm.handleSubmit(onCreateSubmit)} className=\"space-y-4\">\n              <FormField\n                control={createForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Ex: Tempo Integral\" data-testid=\"input-work-type-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={createForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição (Opcional)</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} placeholder=\"Descrição do tipo de trabalho\" data-testid=\"input-work-type-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <DialogFooter>\n                <Button type=\"submit\" disabled={createMutation.isPending} data-testid=\"button-submit-work-type\">\n                  {createMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                  Criar\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Dialog */}\n      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Editar Tipo de Trabalho</DialogTitle>\n            <DialogDescription>\n              Atualize as informações do tipo de trabalho\n            </DialogDescription>\n          </DialogHeader>\n          <Form {...editForm}>\n            <form onSubmit={editForm.handleSubmit(onEditSubmit)} className=\"space-y-4\">\n              <FormField\n                control={editForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Ex: Tempo Integral\" data-testid=\"input-edit-work-type-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={editForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição (Opcional)</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} placeholder=\"Descrição do tipo de trabalho\" data-testid=\"input-edit-work-type-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <DialogFooter>\n                <Button type=\"submit\" disabled={updateMutation.isPending} data-testid=\"button-update-work-type\">\n                  {updateMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                  Salvar\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Dialog */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Confirmar exclusão</AlertDialogTitle>\n            <AlertDialogDescription>\n              Tem certeza que deseja excluir o tipo de trabalho \"{selectedWorkType?.name}\"?\n              Esta ação não pode ser desfeita.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete-work-type\">Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              disabled={deleteMutation.isPending}\n              className=\"bg-destructive hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete-work-type\"\n            >\n              {deleteMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Excluir\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":14336},"client/src/components/SectorsTab.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Layers, Plus, Trash2, ChevronRight } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Sector, Subsector, InsertSector, InsertSubsector } from \"@shared/schema\";\nimport { insertSectorSchema, insertSubsectorSchema } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nconst sectorFormSchema = insertSectorSchema;\nconst subsectorFormSchema = insertSubsectorSchema;\n\nexport default function SectorsTab() {\n  const { toast } = useToast();\n  const [isSectorDialogOpen, setIsSectorDialogOpen] = useState(false);\n  const [isSubsectorDialogOpen, setIsSubsectorDialogOpen] = useState(false);\n\n  const sectorForm = useForm<z.infer<typeof sectorFormSchema>>({\n    resolver: zodResolver(sectorFormSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const subsectorForm = useForm<z.infer<typeof subsectorFormSchema>>({\n    resolver: zodResolver(subsectorFormSchema),\n    defaultValues: {\n      sectorId: \"\",\n      name: \"\",\n      description: \"\",\n      isActive: \"true\",\n    },\n  });\n\n  const { data: sectorsData, isLoading: sectorsLoading } = useQuery<Sector[]>({\n    queryKey: ['/api/sectors'],\n  });\n\n  const { data: subsectorsData, isLoading: subsectorsLoading } = useQuery<Subsector[]>({\n    queryKey: ['/api/subsectors'],\n  });\n\n  const createSectorMutation = useMutation({\n    mutationFn: async (sectorData: InsertSector) => {\n      return await apiRequest('/api/sectors', 'POST', sectorData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/sectors'] });\n      toast({\n        title: \"Setor criado!\",\n        description: \"O setor foi cadastrado com sucesso.\",\n      });\n      setIsSectorDialogOpen(false);\n      sectorForm.reset();\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar setor\",\n      });\n    },\n  });\n\n  const createSubsectorMutation = useMutation({\n    mutationFn: async (subsectorData: InsertSubsector) => {\n      return await apiRequest('/api/subsectors', 'POST', subsectorData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Subsetor criado!\",\n        description: \"O subsetor foi cadastrado com sucesso.\",\n      });\n      setIsSubsectorDialogOpen(false);\n      subsectorForm.reset();\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao criar subsetor\",\n      });\n    },\n  });\n\n  const deleteSectorMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(`/api/sectors/${id}`, 'DELETE');\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/sectors'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Setor excluído\",\n        description: \"O setor foi removido com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir setor\",\n      });\n    },\n  });\n\n  const deleteSubsectorMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(`/api/subsectors/${id}`, 'DELETE');\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subsectors'] });\n      toast({\n        title: \"Subsetor excluído\",\n        description: \"O subsetor foi removido com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao excluir subsetor\",\n      });\n    },\n  });\n\n  const handleSectorSubmit = async (values: z.infer<typeof sectorFormSchema>) => {\n    createSectorMutation.mutate(values);\n  };\n\n  const handleSubsectorSubmit = async (values: z.infer<typeof subsectorFormSchema>) => {\n    createSubsectorMutation.mutate(values);\n  };\n\n  const getSectorSubsectors = (sectorId: string) => {\n    return subsectorsData?.filter(sub => sub.sectorId === sectorId) || [];\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Dialog open={isSectorDialogOpen} onOpenChange={setIsSectorDialogOpen}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-new-sector\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo Setor\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-lg\">\n              <DialogHeader>\n                <DialogTitle>Novo Setor</DialogTitle>\n                <DialogDescription>\n                  Cadastre um novo setor de atuação\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...sectorForm}>\n                <form onSubmit={sectorForm.handleSubmit(handleSectorSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome do Setor*</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Ex: Mineração\" {...field} data-testid=\"input-sector-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Descrição do setor\"\n                            {...field}\n                            value={field.value || \"\"}\n                            rows={3}\n                            data-testid=\"input-sector-description\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={sectorForm.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Status</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-sector-status\">\n                              <SelectValue />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"true\">Ativo</SelectItem>\n                            <SelectItem value=\"false\">Inativo</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsSectorDialogOpen(false)}\n                      data-testid=\"button-cancel-sector\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createSectorMutation.isPending}\n                      data-testid=\"button-save-sector\"\n                    >\n                      {createSectorMutation.isPending ? \"Salvando...\" : \"Cadastrar Setor\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n\n          <Dialog open={isSubsectorDialogOpen} onOpenChange={setIsSubsectorDialogOpen}>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" data-testid=\"button-new-subsector\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo Subsetor\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-lg\">\n              <DialogHeader>\n                <DialogTitle>Novo Subsetor</DialogTitle>\n                <DialogDescription>\n                  Cadastre um novo subsetor vinculado a um setor\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...subsectorForm}>\n                <form onSubmit={subsectorForm.handleSubmit(handleSubsectorSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"sectorId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Setor*</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-sector\">\n                              <SelectValue placeholder=\"Selecione um setor\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {sectorsData?.map((sector) => (\n                              <SelectItem key={sector.id} value={sector.id}>\n                                {sector.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome do Subsetor*</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"Ex: Extração de Minério\" {...field} data-testid=\"input-subsector-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Descrição do subsetor\"\n                            {...field}\n                            value={field.value || \"\"}\n                            rows={3}\n                            data-testid=\"input-subsector-description\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={subsectorForm.control}\n                    name=\"isActive\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Status</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-subsector-status\">\n                              <SelectValue />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"true\">Ativo</SelectItem>\n                            <SelectItem value=\"false\">Inativo</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsSubsectorDialogOpen(false)}\n                      data-testid=\"button-cancel-subsector\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createSubsectorMutation.isPending}\n                      data-testid=\"button-save-subsector\"\n                    >\n                      {createSubsectorMutation.isPending ? \"Salvando...\" : \"Cadastrar Subsetor\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Setores\n              </CardTitle>\n              <CardDescription>Setores cadastrados no sistema</CardDescription>\n            </div>\n            <Layers className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-sectors\">\n              {sectorsLoading ? (\n                <Skeleton className=\"h-10 w-20\" />\n              ) : (\n                sectorsData?.length || 0\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-3 space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-sm font-medium\">\n                Total de Subsetores\n              </CardTitle>\n              <CardDescription>Subsetores cadastrados no sistema</CardDescription>\n            </div>\n            <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\" data-testid=\"text-total-subsectors\">\n              {subsectorsLoading ? (\n                <Skeleton className=\"h-10 w-20\" />\n              ) : (\n                subsectorsData?.length || 0\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {sectorsLoading ? (\n        <div className=\"space-y-3\">\n          {[1, 2, 3].map((i) => (\n            <Skeleton key={i} className=\"h-20 w-full\" />\n          ))}\n        </div>\n      ) : sectorsData && sectorsData.length > 0 ? (\n        <Accordion type=\"single\" collapsible className=\"space-y-3\">\n          {sectorsData.map((sector) => {\n            const subsectors = getSectorSubsectors(sector.id);\n            return (\n              <AccordionItem \n                key={sector.id} \n                value={sector.id}\n                className=\"border rounded-lg px-4\"\n                data-testid={`accordion-sector-${sector.id}`}\n              >\n                <AccordionTrigger className=\"hover:no-underline\">\n                  <div className=\"flex items-center justify-between w-full pr-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Layers className=\"h-5 w-5 text-primary\" />\n                      <div className=\"text-left\">\n                        <h3 className=\"font-semibold\" data-testid={`text-sector-name-${sector.id}`}>\n                          {sector.name}\n                        </h3>\n                        {sector.description && (\n                          <p className=\"text-sm text-muted-foreground\">{sector.description}</p>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant={sector.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                        {sector.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        {subsectors.length} {subsectors.length === 1 ? 'subsetor' : 'subsetores'}\n                      </Badge>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          if (confirm(\"Tem certeza que deseja excluir este setor?\")) {\n                            deleteSectorMutation.mutate(sector.id);\n                          }\n                        }}\n                        data-testid={`button-delete-sector-${sector.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </AccordionTrigger>\n                <AccordionContent className=\"pt-4\">\n                  {subsectors.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {subsectors.map((subsector) => (\n                        <div\n                          key={subsector.id}\n                          className=\"flex items-center justify-between p-3 rounded-lg border hover-elevate\"\n                          data-testid={`card-subsector-${subsector.id}`}\n                        >\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium\" data-testid={`text-subsector-name-${subsector.id}`}>\n                              {subsector.name}\n                            </h4>\n                            {subsector.description && (\n                              <p className=\"text-sm text-muted-foreground\">{subsector.description}</p>\n                            )}\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant={subsector.isActive === \"true\" ? \"default\" : \"secondary\"}>\n                              {subsector.isActive === \"true\" ? \"Ativo\" : \"Inativo\"}\n                            </Badge>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => {\n                                if (confirm(\"Tem certeza que deseja excluir este subsetor?\")) {\n                                  deleteSubsectorMutation.mutate(subsector.id);\n                                }\n                              }}\n                              data-testid={`button-delete-subsector-${subsector.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground text-center py-4\">\n                      Nenhum subsetor cadastrado neste setor\n                    </p>\n                  )}\n                </AccordionContent>\n              </AccordionItem>\n            );\n          })}\n        </Accordion>\n      ) : (\n        <Card>\n          <CardContent className=\"pt-6 text-center\">\n            <Layers className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\">\n              Nenhum setor cadastrado ainda. Comece criando um novo setor.\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":20939},"client/src/pages/AdminEditJob.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useParams, useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ArrowLeft, Save } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertJobSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Job } from \"@shared/schema\";\nimport { useEffect } from \"react\";\n\nconst editJobSchema = insertJobSchema.pick({\n  title: true,\n  description: true,\n  requirements: true,\n  responsibilities: true,\n  benefits: true,\n  location: true,\n  salary: true,\n  status: true,\n});\n\ntype EditJobFormData = z.infer<typeof editJobSchema>;\n\nexport default function AdminEditJob() {\n  const { id } = useParams();\n  const { userType } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: jobResponse, isLoading } = useQuery<{ job: Job }>({\n    queryKey: ['/api/jobs', id],\n    enabled: !!id && userType === 'admin',\n  });\n\n  const job = jobResponse?.job;\n\n  const form = useForm<EditJobFormData>({\n    resolver: zodResolver(editJobSchema),\n    defaultValues: {\n      title: '',\n      description: '',\n      requirements: '',\n      responsibilities: '',\n      benefits: '',\n      location: '',\n      salary: '',\n      status: 'Active',\n    },\n  });\n\n  useEffect(() => {\n    if (job) {\n      form.reset({\n        title: job.title,\n        description: job.description,\n        requirements: job.requirements,\n        responsibilities: job.responsibilities,\n        benefits: job.benefits,\n        location: job.location,\n        salary: job.salary || '',\n        status: job.status,\n      });\n    }\n  }, [job, form]);\n\n  const updateJobMutation = useMutation({\n    mutationFn: async (data: EditJobFormData) => {\n      return await apiRequest('PATCH', `/api/jobs/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/jobs'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/jobs', id] });\n      toast({\n        title: \"Vaga atualizada\",\n        description: \"As alterações foram salvas com sucesso\",\n      });\n      setLocation('/admin/vagas');\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao atualizar vaga\",\n        description: \"Tente novamente mais tarde\",\n      });\n    },\n  });\n\n  const onSubmit = (data: EditJobFormData) => {\n    updateJobMutation.mutate(data);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <Skeleton className=\"h-8 w-64\" />\n            <Skeleton className=\"h-4 w-96\" />\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Skeleton className=\"h-10 w-full\" />\n            <Skeleton className=\"h-32 w-full\" />\n            <Skeleton className=\"h-32 w-full\" />\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!job) {\n    return (\n      <Card>\n        <CardContent className=\"p-8 text-center\">\n          <p className=\"text-muted-foreground\">Vaga não encontrada</p>\n          <Button\n            variant=\"outline\"\n            onClick={() => setLocation('/admin/vagas')}\n            className=\"mt-4\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Voltar\n          </Button>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => setLocation('/admin/vagas')}\n          data-testid=\"button-back\"\n        >\n          <ArrowLeft className=\"h-4 w-4\" />\n        </Button>\n        <div>\n          <h2 className=\"text-2xl font-semibold\">Editar Vaga</h2>\n          <p className=\"text-sm text-muted-foreground\">\n            Atualize as informações da vaga\n          </p>\n        </div>\n      </div>\n\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Informações Básicas</CardTitle>\n            <CardDescription>\n              Dados principais da vaga\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"title\">Título da Vaga *</Label>\n              <Input\n                id=\"title\"\n                {...form.register('title')}\n                placeholder=\"Ex: Operador de Empilhadeira\"\n                data-testid=\"input-title\"\n              />\n              {form.formState.errors.title && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.title.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"location\">Localização *</Label>\n                <Input\n                  id=\"location\"\n                  {...form.register('location')}\n                  placeholder=\"Ex: São Paulo, SP\"\n                  data-testid=\"input-location\"\n                />\n                {form.formState.errors.location && (\n                  <p className=\"text-sm text-destructive\">\n                    {form.formState.errors.location.message}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"salary\">Salário</Label>\n                <Input\n                  id=\"salary\"\n                  {...form.register('salary')}\n                  placeholder=\"Ex: R$ 3.000,00\"\n                  data-testid=\"input-salary\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"status\">Status *</Label>\n              <Select\n                value={form.watch('status')}\n                onValueChange={(value) => form.setValue('status', value as 'Active' | 'Suspended')}\n              >\n                <SelectTrigger data-testid=\"select-status\">\n                  <SelectValue placeholder=\"Selecione o status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Ativa</SelectItem>\n                  <SelectItem value=\"Suspended\">Suspensa</SelectItem>\n                </SelectContent>\n              </Select>\n              {form.formState.errors.status && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.status.message}\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Descrição e Detalhes</CardTitle>\n            <CardDescription>\n              Informações detalhadas sobre a vaga\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">Descrição *</Label>\n              <Textarea\n                id=\"description\"\n                {...form.register('description')}\n                placeholder=\"Descreva a vaga...\"\n                rows={4}\n                data-testid=\"input-description\"\n              />\n              {form.formState.errors.description && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.description.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"requirements\">Requisitos *</Label>\n              <Textarea\n                id=\"requirements\"\n                {...form.register('requirements')}\n                placeholder=\"Liste os requisitos...\"\n                rows={4}\n                data-testid=\"input-requirements\"\n              />\n              {form.formState.errors.requirements && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.requirements.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"responsibilities\">Responsabilidades *</Label>\n              <Textarea\n                id=\"responsibilities\"\n                {...form.register('responsibilities')}\n                placeholder=\"Descreva as responsabilidades...\"\n                rows={4}\n                data-testid=\"input-responsibilities\"\n              />\n              {form.formState.errors.responsibilities && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.responsibilities.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"benefits\">Benefícios *</Label>\n              <Textarea\n                id=\"benefits\"\n                {...form.register('benefits')}\n                placeholder=\"Liste os benefícios...\"\n                rows={4}\n                data-testid=\"input-benefits\"\n              />\n              {form.formState.errors.benefits && (\n                <p className=\"text-sm text-destructive\">\n                  {form.formState.errors.benefits.message}\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"flex justify-end gap-3\">\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => setLocation('/admin/vagas')}\n            data-testid=\"button-cancel\"\n          >\n            Cancelar\n          </Button>\n          <Button\n            type=\"submit\"\n            disabled={updateJobMutation.isPending}\n            data-testid=\"button-save\"\n          >\n            <Save className=\"h-4 w-4 mr-2\" />\n            {updateJobMutation.isPending ? 'Salvando...' : 'Salvar Alterações'}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n","size_bytes":10619}},"version":2}